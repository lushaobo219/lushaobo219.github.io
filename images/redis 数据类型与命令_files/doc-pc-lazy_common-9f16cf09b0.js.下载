/*!
 * abt_sdk @ 1.5.4
 * Sat May 09 2020 13:16:41 GMT+0800
 */
var wabt=function(n){var r={};function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=n,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=115)}([function(t,e){var n=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var r=n(60)("wks"),o=n(40),i=n(1).Symbol,u="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))}).store=r},function(t,e,n){var v=n(1),y=n(0),g=n(11),m=n(12),x=n(16),b="prototype",w=function(t,e,n){var r,o,i,u=t&w.F,a=t&w.G,c=t&w.S,s=t&w.P,f=t&w.B,l=t&w.W,p=a?y:y[e]||(y[e]={}),d=p[b],h=a?v:c?v[e]:(v[e]||{})[b];for(r in a&&(n=e),n)(o=!u&&h&&h[r]!==undefined)&&x(p,r)||(i=o?h[r]:n[r],p[r]=a&&"function"!=typeof h[r]?n[r]:f&&o?g(i,v):l&&h[r]==i?function(r){var t=function(t,e,n){if(this instanceof r){switch(arguments.length){case 0:return new r;case 1:return new r(t);case 2:return new r(t,e)}return new r(t,e,n)}return r.apply(this,arguments)};return t[b]=r[b],t}(i):s&&"function"==typeof i?g(Function.call,i):i,s&&((p.virtual||(p.virtual={}))[r]=i,t&w.R&&d&&!d[r]&&m(d,r,i)))};w.F=1,w.G=2,w.S=4,w.P=8,w.B=16,w.W=32,w.U=64,w.R=128,t.exports=w},function(n,t,e){(function(t){var e=function(t){return t&&t.Math==Math&&t};n.exports=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof t&&t)||Function("return this")()}).call(this,e(119))},function(t,e,n){t.exports=!n(15)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var o=n(9),i=n(98),u=n(56),a=Object.defineProperty;e.f=n(5)?Object.defineProperty:function(t,e,n){if(o(t),e=u(e,!0),o(n),i)try{return a(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var r=n(7);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var r=n(8);t.exports=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},function(t,e,n){var i=n(28);t.exports=function(r,o,t){if(i(r),o===undefined)return r;switch(t){case 1:return function(t){return r.call(o,t)};case 2:return function(t,e){return r.call(o,t,e)};case 3:return function(t,e,n){return r.call(o,t,e,n)}}return function(){return r.apply(o,arguments)}}},function(t,e,n){var r=n(6),o=n(29);t.exports=n(5)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(52),o=n(53);t.exports=function(t){return r(o(t))}},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var f=n(4),l=n(75).f,p=n(35),d=n(120),h=n(46),v=n(124),y=n(128);t.exports=function(t,e){var n,r,o,i,u=t.target,a=t.global,c=t.stat,s=a?f:c?f[u]||h(u,{}):(f[u]||{}).prototype;if(s)for(n in e){if(o=e[n],r=t.noTargetGet?(i=l(s,n))&&i.value:s[n],!y(a?n:u+(c?".":"#")+n,t.forced)&&r!==undefined){if(typeof o==typeof r)continue;v(o,r)}(t.sham||r&&r.sham)&&p(o,"sham",!0),d(s,n,o,t)}}},function(t,e){t.exports={}},function(t,e,n){var r=n(100),o=n(61);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e,n){var r=n(53);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";var r=n(166)(!0);n(54)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:undefined,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(4);t.exports=r},function(t,e,n){t.exports={"default":n(158),__esModule:!0}},function(t,e,n){n(159);for(var r=n(1),o=n(12),i=n(18),u=n(2)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<a.length;c++){var s=a[c],f=r[s],l=f&&f.prototype;l&&!l[u]&&o(l,u,s),i[s]=i.Array}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=!0},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(6).f,o=n(16),i=n(2)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var p=n(11),d=n(102),h=n(103),v=n(9),y=n(39),g=n(62),m={},x={};(e=t.exports=function(t,e,n,r,o){var i,u,a,c,s=o?function(){return t}:g(t),f=p(n,r,e?2:1),l=0;if("function"!=typeof s)throw TypeError(t+" is not iterable!");if(h(s)){for(i=y(t.length);l<i;l++)if((c=e?f(v(u=t[l])[0],u[1]):f(t[l]))===m||c===x)return c}else for(a=s.call(t);!(u=a.next()).done;)if((c=d(a,f,u.value,e))===m||c===x)return c}).BREAK=m,e.RETURN=x},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){"use strict";var f=r(n(42)),s=r(n(65)),l=r(n(190)),v=r(n(24));function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(74),p=2e3;function i(t,e){var n=2<arguments.length&&arguments[2]!==undefined?arguments[2]:{},r=void 0,o=void 0,i=encodeURIComponent,u=n.raw?function(t){return t}:decodeURIComponent;if(1<arguments.length&&"[object Object]"!==String(e)){null!==e&&e!==undefined||(n.expires=-1),"number"==typeof n.expires&&(r=24*n.expires*60*60*1e3,(o=n.expires=new Date).setTime(o.getTime()+r));var a=String(e),c=[i(t),"=",n.raw?a:i(a),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""];return(document.cookie=c).join("")}var s=new RegExp("(?:^|; )"+i(t)+"=([^;]*)").exec(document.cookie);return s?u(s[1]):null}function u(o,i,u){var a=3<arguments.length&&arguments[3]!==undefined?arguments[3]:{"Content-Type":"application/x-www-form-urlencoded"},c=4<arguments.length&&arguments[4]!==undefined&&arguments[4];return new s["default"](function(t,e){var n=new XMLHttpRequest;n.timeout=p,n.withCredentials=!!c,n.open(i,o);var r=void 0;u&&"application/x-www-form-urlencoded"===a["Content-Type"]?r=function s(t){var e="",n=!0,r=!1,o=undefined;try{for(var i,u=(0,v["default"])((0,l["default"])(t));!(n=(i=u.next()).done);n=!0){var a=i.value;""!==e&&(e+="&"),e+=a+=encodeURIComponent(t[a])}}catch(c){r=!0,o=c}finally{try{!n&&u["return"]&&u["return"]()}finally{if(r)throw o}}return e}(u):u&&"application/json;charset=UTF-8"===a["Content-Type"]&&(r=(0,f["default"])(u)),a&&(0,l["default"])(a).map(function(t){n.setRequestHeader(t,a[t])}),n.onload=function(){200===n.status?t(n.responseText):(n.status,e(null))},"POST"===i&&r?n.send(r):n.send()})}function a(t,e){u(t,"GET").then(e)["catch"](e)}function c(t,e,n){u(t,"POST",e,{"Content-Type":"application/json;charset=UTF-8"}).then(n)["catch"](n)}function d(n,r,e){s["default"].race([new s["default"](function(e,t){c(n,r,function(t){e(t)})}),new s["default"](function(t,e){setTimeout(function(){return e(new Error("request timeout"))},p)})]).then(function(t){e&&e(t)})["catch"](function(){e&&e(null)})}function h(t){var e=1<arguments.length&&arguments[1]!==undefined&&arguments[1];try{var n=window.localStorage?window.localStorage.getItem(t):i(t);return e?JSON.parse(n):n}catch(r){return e?null:""}}function y(t,e){window.localStorage?window.localStorage.setItem(t,e):i(t,e,{expires:1095})}function g(t){return-1<t.indexOf("?")?window.location.href.slice(0,t.indexOf("?")):window.location.href}function m(t){var e=1<arguments.length&&arguments[1]!==undefined?arguments[1]:window.location.href;try{return new URL(e).searchParams.get(t)||""}catch(n){return""}}function x(){var t={},e=navigator.userAgent.toLowerCase(),n=void 0;return(n=e.match(/rv:([\d.]+)\) like gecko/))||(n=e.match(/msie ([\d\.]+)/))?t.ie=n[1]:(n=e.match(/edge\/([\d\.]+)/))?t.edge=n[1]:(n=e.match(/firefox\/([\d\.]+)/))?t.firefox=n[1]:(n=e.match(/(?:opera|opr).([\d\.]+)/))?t.opera=n[1]:(n=e.match(/qqbrowser\/([\d\.]+)/))?t.qqBrowser=n[1]:(n=e.match(/2345Explorer\/([\d\.]+)/))?t._2345Explorer=n[1]:(n=e.match(/chrome\/([\d\.]+)/))?t.chrome=n[1]:(n=e.match(/version\/([\d\.]+).*safari/))&&(t.safari=n[1]),t.ie?"IE:"+t.ie:t.edge?"EDGE:"+t.edge:t.firefox?"Firefox:"+t.firefox:t.qqBrowser?"QQBrowser:"+t.qqBrowser:t._2345Explorer?"2345Explorer:"+t._2345Explorer:t.chrome?"Chrome:"+t.chrome:t.opera?"Opera:"+t.opera:t.safari?"Safari:"+t.safari:"Unkonwn:"}t.exports={ajax:u,getReq:a,postReq:c,postWithTimeout:d,getWithTimeout:function b(n,e){s["default"].race([new s["default"](function(e,t){a(n,function(t){e(t)})}),new s["default"](function(t,e){setTimeout(function(){return e(new Error("request timeout"))},p)})]).then(function(t){e&&e(t)})["catch"](function(){e&&e(null)})},requestWithRetry:function w(e,n,r){var o=3<arguments.length&&arguments[3]!==undefined?arguments[3]:1;d(e,n,function(t){t?r(t):o<3?setTimeout(function(){w(e,n,r,o+1)},10):r()})},setHttpTimeout:function _(t){t&&!isNaN(t)&&0<t&&(p=1e3*t)},getCache:h,setCache:y,getCacheKey:function E(t,e){return("default"!==t?t:"")+m("lpo_id")?e+"_"+g(document.referrer):e+"_"+g(location.href)},getGuid:function S(){var t="_noqb_guid",e=void 0,n=!1;navigator&&navigator.userAgent&&(n=/\bQQBrowser\b/i.test(navigator.userAgent));var r=void 0;return window&&window.external&&(r=window.external),n&&r&&r.getGuid&&r.getGuid()?e=r.getGuid().replace(/-/g,""):(e=h(t))||y(t,e=function o(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}()),e},getBaseUrl:function O(){return"1"===String(m("abtdebug"))?"https://qbad.sparta.html5.qq.com/":"https://ad.browser.qq.com/"},getSimpleUrl:g,getBrowser:x,getSearchParamValue:m,getExpCodeByIndexCode:function I(t,e){if(e){var n=!0,r=!1,o=undefined;try{for(var i,u=(0,v["default"])(e);!(n=(i=u.next()).done);n=!0){var a=i.value;if(a.event&&0<a.event.length){var c=!0,s=!1,f=undefined;try{for(var l,p=(0,v["default"])(a.event);!(c=(l=p.next()).done);c=!0){if(l.value.indexCode===t)return a.experimentCode}}catch(d){s=!0,f=d}finally{try{!c&&p["return"]&&p["return"]()}finally{if(s)throw f}}}}}catch(d){r=!0,o=d}finally{try{!n&&u["return"]&&u["return"]()}finally{if(r)throw o}}}return null},checkIndexCode:function T(t,e,n){if(!n)return!1;var r=!0,o=!1,i=undefined;try{for(var u,a=(0,v["default"])(n);!(r=(u=a.next()).done);r=!0){var c=u.value;if(String(c.experimentCode)===String(t)&&c.event&&0<c.event.length){var s=!0,f=!1,l=undefined;try{for(var p,d=(0,v["default"])(c.event);!(s=(p=d.next()).done);s=!0){if(p.value.indexCode===e)return!0}}catch(h){f=!0,l=h}finally{try{!s&&d["return"]&&d["return"]()}finally{if(f)throw l}}}}}catch(h){o=!0,i=h}finally{try{!r&&a["return"]&&a["return"]()}finally{if(o)throw i}}return!1},getSystemInfo:function C(){var t={};return t.browser=x(),t.screenWidth=window.screen.width,t.screenHeight=window.screen.height,t.clientWidth=document.body?document.body.clientWidth:0,t.clientHeight=document.body?document.body.clientHeight:0,t.language=navigator.language||navigator.userLanguage,t.system=function e(){return-1!==navigator.appVersion.indexOf("Win")?"Windows":-1!==navigator.appVersion.indexOf("Mac")?"MacOS":-1!==navigator.appVersion.indexOf("X11")?"UNIX":-1!==navigator.appVersion.indexOf("Linux")?"Linux":"Unknown"}(),t.platform=navigator.platform,t.sdkVersion=o.SDK_VERSION,t},showDocument:function A(){top.window.document.documentElement.style.opacity=1},hideDocument:function P(){top.window.document.documentElement.style.opacity=0},lsCookie:i}},function(t,e,n){var r=n(45),o=n(78);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(10),o=n(36),i=n(76);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(10),o=n(80),i=n(37),u=n(79),a=Object.defineProperty;e.f=r?a:function(t,e,n){if(i(t),e=u(e,!0),i(n),o)try{return a(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(22);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){var r=n(87),o=n(49);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e,n){var r=n(58),o=Math.min;t.exports=function(t){return 0<t?o(r(t),9007199254740991):0}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(t===undefined?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var o=n(26),i=n(2)("toStringTag"),u="Arguments"==o(function(){return arguments}());t.exports=function(t){var e,n,r;return t===undefined?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(n){}}(e=Object(t),i))?n:u?o(e):"Object"==(r=o(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){t.exports={"default":n(177),__esModule:!0}},function(t,e,n){"use strict";var r,o,i,s=d(n(63)),f=d(n(42)),l=d(n(114)),u=d(n(64)),a=(r=(0,u["default"])(s["default"].mark(function b(e,n){var r,o,i,u,a=2<arguments.length&&arguments[2]!==undefined&&arguments[2],c=3<arguments.length&&arguments[3]!==undefined?arguments[3]:{};return s["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=e.getExpConfig(),o=(0,l["default"])(c||{},e.getSystemInfo()||{}),x(i={guid:e.getGuid(),indexName:n.indexCode,expId:n.expCode,url:r.url||window.location.href,protocol:r.url?null:window.location.protocol,host:r.url?null:window.location.host,path:r.url?null:window.location.pathname,search:r.url?null:window.location.search,channel:r.channel||"all",time:(new Date).getTime(),extendData:(0,f["default"])(o),appid:r.appid,appkey:r.appkey,fp:e.getFingerprint(),timpstamp:(new Date).getTime()},o),a)return t.next=8,p(i);t.next=12;break;case 8:return u=t.sent,t.abrupt("return",u);case 12:return t.abrupt("return",y(i));case 13:t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](0),console.log(t.t0.message);case 18:case"end":return t.stop()}},b,this,[[0,15]])})),function(t,e){return r.apply(this,arguments)}),p=(o=(0,u["default"])(s["default"].mark(function w(e){var n,r;return s["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=g,g=[],n.push(e),t.next=5,c(n);case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}},w,this)})),function(t){return o.apply(this,arguments)}),c=(i=(0,u["default"])(s["default"].mark(function _(e){var n,r;return s["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={guid:e[0].guid,list:e},t.next=4,h.postReq(v,n);case 4:return r=t.sent,t.abrupt("return",r);case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}},_,this,[[0,8]])})),function(t){return i.apply(this,arguments)});function d(t){return t&&t.__esModule?t:{"default":t}}var h=n(33),v=h.getBaseUrl()+"ab/report";function y(t){g.push(t),5<g.length?m():setTimeout(function(){m()},500)}var g=[];function m(){var t=g;0!==t.length&&(g=[],c(t))}function x(t,e){try{var n,r=encodeURIComponent((0,f["default"])({protocol:t.protocol,host:t.host,path:t.path,channel:t.channel,search:t.search})),o=e.browser,i="";!o||2===(n=o.split(":")).length&&(o=n[0],i=n[1]);var u="attaid=0e000014601&token=2218219831&eventcode="+t.indexName+"&eventtime="+t.time+"&appid="+t.appid+"&eventpage="+t.url+"&browser="+o+"&browserver="+i+"&screenwidth="+e.screenWidth+"&screenheight="+e.screenHeight+"&clientwidth="+e.clientWidth+"&clientheight="+e.clientHeight+"&language="+e.language+"&clientsystem="+e.system+"&clientplatform="+e.platform+"&fp="+t.fp+"&sdkver="+e.sdkVersion+"&guid="+t.guid+"&grayid="+t.expId+"&userinfo="+r+"&extenddata="+t.extendData+"&_dc="+Math.random();new Image(1,1).src="http://h.trace.qq.com/kv?"+u}catch(a){console.log(a)}}t.exports={report:a,queueSize:function E(){return g.length},reportWorkByAtta:x,reportExpExpose:function S(t,e){a(t,{expCode:e,indexCode:"page"})}}},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);e.f=i?function(t){var e=o(this,t);return!!e&&e.enumerable}:r},function(t,e,n){var r=n(8),o=n(77),i="".split;t.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==o(t)?i.call(t,""):Object(t)}:Object},function(t,e,n){var r=n(4),o=n(35);t.exports=function(t,e){try{o(r,t,e)}catch(n){r[t]=e}return e}},function(t,e){t.exports={}},function(t,e,n){var r=n(23),o=n(4),i=function(t){return"function"==typeof t?t:undefined};t.exports=function(t,e){return arguments.length<2?i(r[t])||i(o[t]):r[t]&&r[t][e]||o[t]&&o[t][e]}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,n){var r=n(78);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(4),o=n(85),i=n(13),u=n(86),a=n(93),c=n(133),s=o("wks"),f=r.Symbol,l=c?f:f&&f.withoutSetter||u;t.exports=function(t){return i(s,t)||(a&&i(f,t)?s[t]=f[t]:s[t]=l("Symbol."+t)),s[t]}},function(t,e,n){var r=n(26);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){t.exports=function(t){if(t==undefined)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";var x=n(27),b=n(3),w=n(99),_=n(12),E=n(18),S=n(161),O=n(30),I=n(165),T=n(2)("iterator"),C=!([].keys&&"next"in[].keys()),A="values",P=function(){return this};t.exports=function(t,e,n,r,o,i,u){S(n,e,r);var a,c,s,f=function(t){if(!C&&t in h)return h[t];switch(t){case"keys":case A:return function(){return new n(this,t)}}return function(){return new n(this,t)}},l=e+" Iterator",p=o==A,d=!1,h=t.prototype,v=h[T]||h["@@iterator"]||o&&h[o],y=v||f(o),g=o?p?f("entries"):y:undefined,m="Array"==e&&h.entries||v;if(m&&(s=I(m.call(new t)))!==Object.prototype&&s.next&&(O(s,l,!0),x||"function"==typeof s[T]||_(s,T,P)),p&&v&&v.name!==A&&(d=!0,y=function(){return v.call(this)}),x&&!u||!C&&!d&&h[T]||_(h,T,y),E[e]=y,E[l]=P,o)if(a={values:p?y:f(A),keys:i?y:f("keys"),entries:g},u)for(c in a)c in h||w(h,c,a[c]);else b(b.P+b.F*(C||d),e,a);return a}},function(t,e,n){var r=n(7),o=n(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){var o=n(7);t.exports=function(t,e){if(!o(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!o(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){var o=r(9),i=r(162),u=r(61),a=r(59)("IE_PROTO"),c=function(){},s="prototype",f=function(){var t,e=r(55)("iframe"),n=u.length;for(e.style.display="none",r(101).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),f=t.F;n--;)delete f[s][u[n]];return f()};t.exports=Object.create||function(t,e){var n;return null!==t?(c[s]=o(t),n=new c,c[s]=null,n[a]=t):n=f(),e===undefined?n:i(n,e)}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?r:n)(t)}},function(t,e,n){var r=n(60)("keys"),o=n(40);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e,n){var r=n(0),o=n(1),i="__core-js_shared__",u=o[i]||(o[i]={});(t.exports=function(t,e){return u[t]||(u[t]=e!==undefined?e:{})})("versions",[]).push({version:r.version,mode:n(27)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(41),o=n(2)("iterator"),i=n(18);t.exports=n(0).getIteratorMethod=function(t){if(t!=undefined)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e,n){t.exports=n(168)},function(t,e,n){"use strict";e.__esModule=!0;var s=function r(t){return t&&t.__esModule?t:{"default":t}}(n(65));e["default"]=function(t){return function(){var c=t.apply(this,arguments);return new s["default"](function(i,u){return function a(t,e){try{var n=c[t](e),r=n.value}catch(o){return void u(o)}if(!n.done)return s["default"].resolve(r).then(function(t){a("next",t)},function(t){a("throw",t)});i(r)}("next")})}}},function(t,e,n){t.exports={"default":n(170),__esModule:!0}},function(t,e){},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||r!==undefined&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){"use strict";var o=n(28);function r(t){var n,r;this.promise=new t(function(t,e){if(n!==undefined||r!==undefined)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=o(n),this.reject=o(r)}t.exports.f=function(t){return new r(t)}},function(t,e,n){var o=n(12);t.exports=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:o(t,r,e[r]);return t}},function(t,e,n){e.f=n(2)},function(t,e,n){var r=n(40)("meta"),o=n(7),i=n(16),u=n(6).f,a=0,c=Object.isExtensible||function(){return!0},s=!n(15)(function(){return c(Object.preventExtensions({}))}),f=function(t){u(t,r,{value:{i:"O"+ ++a,w:{}}})},l=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!c(t))return"F";if(!e)return"E";f(t)}return t[r].i},getWeak:function(t,e){if(!i(t,r)){if(!c(t))return!0;if(!e)return!1;f(t)}return t[r].w},onFreeze:function(t){return s&&l.NEED&&c(t)&&!i(t,r)&&f(t),t}}},function(t,e,n){var r=n(1),o=n(0),i=n(27),u=n(70),a=n(6).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=!i&&r.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:u.f(t)})}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){"use strict";t.exports={SDK_VERSION:"1.5.4",PARAMS_INIT_TIMEOUT:500,ANTI_FLICKER_TIMEOUT:500,LS_EXP:"exps",LS_EXP_TAB:"exps_tab",LS_STRATEGY:"strategy"}},function(t,e,n){var r=n(10),o=n(44),i=n(76),u=n(34),a=n(79),c=n(13),s=n(80),f=Object.getOwnPropertyDescriptor;e.f=r?f:function(t,e){if(t=u(t),e=a(e,!0),s)try{return f(t,e)}catch(n){}if(c(t,e))return i(!o.f.call(t,e),t[e])}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(t==undefined)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){var o=n(22);t.exports=function(t,e){if(!o(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!o(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(10),o=n(8),i=n(81);t.exports=!r&&!o(function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(4),o=n(22),i=r.document,u=o(i)&&o(i.createElement);t.exports=function(t){return u?i.createElement(t):{}}},function(t,e,n){var r=n(83),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return o.call(t)}),t.exports=r.inspectSource},function(t,e,n){var r=n(4),o=n(46),i="__core-js_shared__",u=r[i]||o(i,{});t.exports=u},function(t,e,n){var r=n(85),o=n(86),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,e,n){var r=n(123),o=n(83);(t.exports=function(t,e){return o[t]||(o[t]=e!==undefined?e:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(t===undefined?"":t)+")_"+(++n+r).toString(36)}},function(t,e,n){var u=n(13),a=n(34),c=n(88).indexOf,s=n(47);t.exports=function(t,e){var n,r=a(t),o=0,i=[];for(n in r)!u(s,n)&&u(r,n)&&i.push(n);for(;e.length>o;)u(r,n=e[o++])&&(~c(i,n)||i.push(n));return i}},function(t,e,n){var c=n(34),s=n(89),f=n(127),r=function(a){return function(t,e,n){var r,o=c(t),i=s(o.length),u=f(n,i);if(a&&e!=e){for(;u<i;)if((r=o[u++])!=r)return!0}else for(;u<i;u++)if((a||u in o)&&o[u]===e)return a||u||0;return!a&&-1}};t.exports={includes:r(!0),indexOf:r(!1)}},function(t,e,n){var r=n(90),o=Math.min;t.exports=function(t){return 0<t?o(r(t),9007199254740991):0}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?r:n)(t)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var i=n(130);t.exports=function(r,o,t){if(i(r),o===undefined)return r;switch(t){case 0:return function(){return r.call(o)};case 1:return function(t){return r.call(o,t)};case 2:return function(t,e){return r.call(o,t,e)};case 3:return function(t,e,n){return r.call(o,t,e,n)}}return function(){return r.apply(o,arguments)}}},function(t,e,n){var r=n(8);t.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())})},function(t,e,n){var u=n(10),a=n(8),c=n(13),s=Object.defineProperty,f={},l=function(t){throw t};t.exports=function(t,e){if(c(f,t))return f[t];var n=[][t],r=!!c(e=e||{},"ACCESSORS")&&e.ACCESSORS,o=c(e,0)?e[0]:l,i=c(e,1)?e[1]:undefined;return f[t]=!!n&&!a(function(){if(r&&!u)return!0;var t={length:-1};r?s(t,1,{enumerable:!0,get:l}):t[1]=1,n.call(t,o,i)})}},function(t,e,n){var r=n(4),o=n(92),i=Function.call;t.exports=function(t,e,n){return o(i,r[t].prototype[e],n)}},function(t,e,n){var c=n(10),s=n(38),f=n(34),l=n(44).f,r=function(a){return function(t){for(var e,n=f(t),r=s(n),o=r.length,i=0,u=[];i<o;)e=r[i++],c&&!l.call(n,e)||u.push(a?[e,n[e]]:n[e]);return u}};t.exports={entries:r(!0),values:r(!1)}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){t.exports=!n(5)&&!n(15)(function(){return 7!=Object.defineProperty(n(55)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=n(12)},function(t,e,n){var u=n(16),a=n(14),c=n(163)(!1),s=n(59)("IE_PROTO");t.exports=function(t,e){var n,r=a(t),o=0,i=[];for(n in r)n!=s&&u(r,n)&&i.push(n);for(;e.length>o;)u(r,n=e[o++])&&(~c(i,n)||i.push(n));return i}},function(t,e,n){var r=n(1).document;t.exports=r&&r.documentElement},function(t,e,n){var u=n(9);t.exports=function(t,e,n,r){try{return r?e(u(n)[0],n[1]):e(n)}catch(i){var o=t["return"];throw o!==undefined&&u(o.call(t)),i}}},function(t,e,n){var r=n(18),o=n(2)("iterator"),i=Array.prototype;t.exports=function(t){return t!==undefined&&(r.Array===t||i[o]===t)}},function(t,e,n){var o=n(9),i=n(28),u=n(2)("species");t.exports=function(t,e){var n,r=o(t).constructor;return r===undefined||(n=o(r)[u])==undefined?e:i(n)}},function(t,e,n){var r,o,i,u=n(11),a=n(172),c=n(101),s=n(55),f=n(1),l=f.process,p=f.setImmediate,d=f.clearImmediate,h=f.MessageChannel,v=f.Dispatch,y=0,g={},m="onreadystatechange",x=function(){var t,e=+this;g.hasOwnProperty(e)&&(t=g[e],delete g[e],t())},b=function(t){x.call(t.data)};p&&d||(p=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return g[++y]=function(){a("function"==typeof t?t:Function(t),e)},r(y),y},d=function(t){delete g[t]},"process"==n(26)(l)?r=function(t){l.nextTick(u(x,t,1))}:v&&v.now?r=function(t){v.now(u(x,t,1))}:h?(i=(o=new h).port2,o.port1.onmessage=b,r=u(i.postMessage,i,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(r=function(t){f.postMessage(t+"","*")},f.addEventListener("message",b,!1)):r=m in s("script")?function(t){c.appendChild(s("script"))[m]=function(){c.removeChild(this),x.call(t)}}:function(t){setTimeout(u(x,t,1),0)}),t.exports={set:p,clear:d}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(e){return{e:!0,v:e}}}},function(t,e,n){var r=n(9),o=n(7),i=n(68);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(1),o=n(0),i=n(6),u=n(5),a=n(2)("species");t.exports=function(t){var e="function"==typeof o[t]?o[t]:r[t];u&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){var i=n(2)("iterator"),u=!1;try{var r=[7][i]();r["return"]=function(){u=!0},Array.from(r,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!u)return!1;var n=!1;try{var r=[7],o=r[i]();o.next=function(){return{done:n=!0}},r[i]=function(){return o},t(r)}catch(a){}return n}},function(t,e,n){var r=n(26);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(100),o=n(61).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e,n){t.exports={"default":n(195),__esModule:!0}},function(t,e,n){var r=n(7);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){t.exports={"default":n(209),__esModule:!0}},function(t,e,n){n(116),n(137),n(144),n(148),n(151),n(154),t.exports=n(157)},function(t,e,n){var r=n(117);t.exports=r},function(t,e,n){n(118);var r=n(95);t.exports=r("Array","map")},function(t,e,n){"use strict";var r=n(17),o=n(129).map,i=n(134),u=n(94),a=i("map"),c=u("map");r({target:"Array",proto:!0,forced:!a||!c},{map:function(t){return o(this,t,1<arguments.length?arguments[1]:undefined)}})},function(t,e){var n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var a=n(4),c=n(35),s=n(13),f=n(46),r=n(82),o=n(121),i=o.get,l=o.enforce,p=String(String).split("String");(t.exports=function(t,e,n,r){var o=!!r&&!!r.unsafe,i=!!r&&!!r.enumerable,u=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||s(n,"name")||c(n,"name",e),l(n).source=p.join("string"==typeof e?e:"")),t!==a?(o?!u&&t[e]&&(i=!0):delete t[e],i?t[e]=n:c(t,e,n)):i?t[e]=n:f(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&i(this).source||r(this)})},function(t,e,n){var r,o,i,u,a,c,s,f,l=n(122),p=n(4),d=n(22),h=n(35),v=n(13),y=n(84),g=n(47),m=p.WeakMap;s=l?(r=new m,o=r.get,i=r.has,u=r.set,a=function(t,e){return u.call(r,t,e),e},c=function(t){return o.call(r,t)||{}},function(t){return i.call(r,t)}):(g[f=y("state")]=!0,a=function(t,e){return h(t,f,e),e},c=function(t){return v(t,f)?t[f]:{}},function(t){return v(t,f)}),t.exports={set:a,get:c,has:s,enforce:function(t){return s(t)?c(t):a(t,{})},getterFor:function(n){return function(t){var e;if(!d(t)||(e=c(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}}},function(t,e,n){var r=n(4),o=n(82),i=r.WeakMap;t.exports="function"==typeof i&&/native code/.test(o(i))},function(t,e){t.exports=!1},function(t,e,n){var a=n(13),c=n(125),s=n(75),f=n(36);t.exports=function(t,e){for(var n=c(e),r=f.f,o=s.f,i=0;i<n.length;i++){var u=n[i];a(t,u)||r(t,u,o(e,u))}}},function(t,e,n){var r=n(48),o=n(126),i=n(91),u=n(37);t.exports=r("Reflect","ownKeys")||function(t){var e=o.f(u(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(87),o=n(49).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e,n){var r=n(90),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},function(t,e,n){var r=n(8),o=/#|\.prototype\./,i=function(t,e){var n=a[u(t)];return n==s||n!=c&&("function"==typeof e?r(e):!!e)},u=i.normalize=function(t){return String(t).replace(o,".").toLowerCase()},a=i.data={},c=i.NATIVE="N",s=i.POLYFILL="P";t.exports=i},function(t,e,n){var b=n(92),w=n(45),_=n(50),E=n(89),S=n(131),O=[].push,r=function(d){var h=1==d,v=2==d,y=3==d,g=4==d,m=6==d,x=5==d||m;return function(t,e,n,r){for(var o,i,u=_(t),a=w(u),c=b(e,n,3),s=E(a.length),f=0,l=r||S,p=h?l(t,s):v?l(t,0):undefined;f<s;f++)if((x||f in a)&&(i=c(o=a[f],f,u),d))if(h)p[f]=i;else if(i)switch(d){case 3:return!0;case 5:return o;case 6:return f;case 2:O.call(p,o)}else if(g)return!1;return m?-1:y||g?g:p}};t.exports={forEach:r(0),map:r(1),filter:r(2),some:r(3),every:r(4),find:r(5),findIndex:r(6)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,n){var r=n(22),o=n(132),i=n(51)("species");t.exports=function(t,e){var n;return o(t)&&("function"==typeof(n=t.constructor)&&(n===Array||o(n.prototype))||r(n)&&null===(n=n[i]))&&(n=undefined),new(n===undefined?Array:n)(0===e?0:e)}},function(t,e,n){var r=n(77);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(93);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,n){var r=n(8),o=n(51),i=n(135),u=o("species");t.exports=function(e){return 51<=i||!r(function(){var t=[];return(t.constructor={})[u]=function(){return{foo:1}},1!==t[e](Boolean).foo})}},function(t,e,n){var r,o,i=n(4),u=n(136),a=i.process,c=a&&a.versions,s=c&&c.v8;s?o=(r=s.split("."))[0]+r[1]:u&&(!(r=u.match(/Edge\/(\d+)/))||74<=r[1])&&(r=u.match(/Chrome\/(\d+)/))&&(o=r[1]),t.exports=o&&+o},function(t,e,n){var r=n(48);t.exports=r("navigator","userAgent")||""},function(t,e,n){var r=n(138);t.exports=r},function(t,e,n){n(139);var r=n(95);t.exports=r("Array","includes")},function(t,e,n){"use strict";var r=n(17),o=n(88).includes,i=n(140);r({target:"Array",proto:!0,forced:!n(94)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(t){return o(this,t,1<arguments.length?arguments[1]:undefined)}}),i("includes")},function(t,e,n){var r=n(51),o=n(141),i=n(36),u=r("unscopables"),a=Array.prototype;a[u]==undefined&&i.f(a,u,{configurable:!0,value:o(null)}),t.exports=function(t){a[u][t]=!0}},function(t,e,n){var o,r=n(37),i=n(142),u=n(49),a=n(47),c=n(143),s=n(81),f=n(84),l="prototype",p="script",d=f("IE_PROTO"),h=function(){},v=function(t){return"<script>"+t+"</"+p+">"},y=function(){try{o=document.domain&&new ActiveXObject("htmlfile")}catch(r){}var t,e;y=o?function(t){t.write(v("")),t.close();var e=t.parentWindow.Object;return t=null,e}(o):((e=s("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(v("document.F=Object")),t.close(),t.F);for(var n=u.length;n--;)delete y[l][u[n]];return y()};a[d]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(h[l]=r(t),n=new h,h[l]=null,n[d]=t):n=y(),e===undefined?n:i(n,e)}},function(t,e,n){var r=n(10),u=n(36),a=n(37),c=n(38);t.exports=r?Object.defineProperties:function(t,e){a(t);for(var n,r=c(e),o=r.length,i=0;i<o;)u.f(t,n=r[i++],e[n]);return t}},function(t,e,n){var r=n(48);t.exports=r("document","documentElement")},function(t,e,n){var r=n(145);t.exports=r},function(t,e,n){n(146);var r=n(23);t.exports=r.Object.assign},function(t,e,n){var r=n(17),o=n(147);r({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},function(t,e,n){"use strict";var p=n(10),r=n(8),d=n(38),h=n(91),v=n(44),y=n(50),g=n(45),o=Object.assign,i=Object.defineProperty;t.exports=!o||r(function(){if(p&&1!==o({b:1},o(i({},"a",{enumerable:!0,get:function(){i(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=o({},t)[n]||d(o({},e)).join("")!=r})?function(t,e){for(var n=y(t),r=arguments.length,o=1,i=h.f,u=v.f;o<r;)for(var a,c=g(arguments[o++]),s=i?d(c).concat(i(c)):d(c),f=s.length,l=0;l<f;)a=s[l++],p&&!u.call(c,a)||(n[a]=c[a]);return n}:o},function(t,e,n){var r=n(149);t.exports=r},function(t,e,n){n(150);var r=n(23);t.exports=r.Object.entries},function(t,e,n){var r=n(17),o=n(96).entries;r({target:"Object",stat:!0},{entries:function(t){return o(t)}})},function(t,e,n){var r=n(152);t.exports=r},function(t,e,n){n(153);var r=n(23);t.exports=r.Object.keys},function(t,e,n){var r=n(17),o=n(50),i=n(38);r({target:"Object",stat:!0,forced:n(8)(function(){i(1)})},{keys:function(t){return i(o(t))}})},function(t,e,n){var r=n(155);t.exports=r},function(t,e,n){n(156);var r=n(23);t.exports=r.Object.values},function(t,e,n){var r=n(17),o=n(96).values;r({target:"Object",stat:!0},{values:function(t){return o(t)}})},function(t,e,n){"use strict";var r,h=u(n(24)),d=u(n(63)),v=u(n(64)),y=u(n(42)),o=u(n(178)),i=(r=(0,v["default"])(d["default"].mark(function p(e){return d["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l("default").asyncGetExpByName(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},p,this)})),function(t){return r.apply(this,arguments)});function u(t){return t&&t.__esModule?t:{"default":t}}n(189);var a,g=n(74),m=n(33),x=n(194),b=n(43),w=n(212),c=n(213),_=n(214),E=n(228),s={};function f(t){this.key=t}function l(t){return s[t]||(s[t]=new f(t)),s[t]}s["default"]=new f("default"),f.prototype.setProfiles=function(t){if("object"!==(void 0===t?"undefined":(0,o["default"])(t)))throw Error("profiles must be a dictionary");var e=this.memStore.getExpConfig();if(!e)throw Error("must init with config first");e.profiles=t},f.prototype.init=function(u){var e=this,a=new x;this.memStore=a;var n,c=this.key;try{if(m.getBrowser().includes("IE"))return;this.checkParams(),a.setExpConfig(u),u.guid?a.setGuid(u.guid):(a.setGuid(m.getGuid()),E.initFP(function(t){a.setFingerprint(t)})),a.setSystemInfo(m.getSystemInfo()),u.antiFlicker&&(m.hideDocument(),setTimeout(m.showDocument,u.antiFlickerTimeout||g.ANTI_FLICKER_TIMEOUT));var s=m.getCacheKey(c,g.LS_EXP);try{var t=JSON.parse(m.getCache(s));a.setExpData(t),a.setOldExpData(t)}catch(l){console.log(l);var r={expCode:"error",indexCode:"error"};b.report(a,r,!0,{errType:"jsonParseException",errMsg:l.message})}a.setIO(new IntersectionObserver(function(t){for(var e=0;e<t.length;e++)1<=t[e].intersectionRatio&&(t[e].isIntersecting===undefined||t[e].isIntersecting)&&_.show(t[e].target,a)},{threshold:1})),a.setMockId(m.getSearchParamValue("wabt_mock_id"));var o=void 0;if(m.getSearchParamValue("wabt_mock_id")||(o=a.getExpData()),o){if(this.lpoRedirect(o))return;_.initExp(o,a,!0,u.onInit),setTimeout(function(){var t;a.isParamInited()||(t=o.map(function(t){return{experimentCode:t.experimentCode,events:t.event}}),a.setAllEvents(t),_.initParams(o,a,u.onNetData),a.setParamInitState(1))},u.timeout||g.PARAMS_INIT_TIMEOUT)}var f=this;w.getExperimentInfo(null,a,function(t,e,n){if(!a.getOldExpData()||a.getMockId()){if(f.lpoRedirect(t))return;_.initExp(t,a,!0,u.onInit)}var r,o,i;m.getSearchParamValue("lpo_id")||m.getSearchParamValue("wabt_mock_id")||(t&&m.setCache(s,(0,y["default"])(t)),r=m.getCacheKey(c,g.LS_EXP_TAB),e&&m.setCache(r,(0,y["default"])(e)),o=m.getCacheKey(c,g.LS_STRATEGY),n&&m.setCache(o,(0,y["default"])(n))),t&&a.setExpData(t),t&&a.setNewExpData(t),e&&a.setTABExpData(e),n&&a.setStrategy(n),a.isParamInited()||(i=t.map(function(t){return{experimentCode:t.experimentCode,events:t.event}}),a.setAllEvents(i),_.initParams(t,a,u.onNetData),a.setParamInitState(1))}),new MutationObserver((n=(0,v["default"])(d["default"].mark(function p(t){return d["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o=o||a.getExpData(),_.initExp(o,a);case 2:case"end":return t.stop()}},p,e)})),function(t){return n.apply(this,arguments)})).observe(document,{childList:!0,subtree:!0})}catch(l){console.log(l);var i={expCode:"error",indexCode:"error"};b.report(a,i,!0)}},f.prototype.checkParams=function(){var t=m.getSearchParamValue("mock_id"),e=m.getSearchParamValue("lop_id");if(t&&isNaN(t))throw new Error("wrong mockid");if(e&&isNaN(e))throw new Error("wrong lopid")},f.prototype.lpoRedirect=function(t){var e=null,n=!0,r=!1,o=undefined;try{for(var i,u=(0,h["default"])(t);!(n=(i=u.next()).done);n=!0){var a=i.value;if(a.lpo){e=a;break}}}catch(p){r=!0,o=p}finally{try{!n&&u["return"]&&u["return"]()}finally{if(r)throw o}}if(e&&e.lpo&&e.lpo.id&&e.lpo.landUrl){var c=e.lpo.id;this.memStore.setLpoId(c);var s=e.lpo.landUrl;try{var f=new URL(s),l=new URL(window.location.href);if(l.searchParams.forEach(function(t,e){f.searchParams.set(e,t)}),f.searchParams.set("lpo_id",c),!l.searchParams.get("lpo_id"))return window.location.href=f.href,!0}catch(d){console.log("invalid url")}}return!1},f.prototype.forceUpdate=function(){var t=void 0;(t=this.memStore.getMockId()?this.memStore.getNewExpData():this.memStore.getExpData())&&0<t.length&&t.map(function(t){return _.initElt(t.elt,{experimentCode:t.experimentCode},!0),null})},f.prototype.getAllParams=function(){return this.memStore.getAllParams()},f.prototype.getAllEvents=function(){return this.memStore.getAllEvents()},f.prototype.getParam=function(t){var e=this.getAllParams();if(!Array.isArray(e)){return b.report(this.mStore,{expCode:"error",indexCode:"error"},!0,{errType:"paramsInvalidException",errMsg:e}),null}var n=null,r=!0,o=!1,i=undefined;try{for(var u,a=(0,h["default"])(e);!(r=(u=a.next()).done);r=!0){var c=u.value;if(c.param&&c.param[t]){n=c;break}}}catch(s){o=!0,i=s}finally{try{!r&&a["return"]&&a["return"]()}finally{if(o)throw i}}return n?{experimentCode:n.experimentCode,value:n.param?n.param[t]:null}:null},f.prototype.reportWithExpCode=function(t,e){var n=2<arguments.length&&arguments[2]!==undefined?arguments[2]:{};m.checkIndexCode(t,e,this.memStore.getNewOrOldExpData())&&b.report(this.memStore,{expCode:t,indexCode:e},!1,n)},f.prototype.report=function(t){var e=1<arguments.length&&arguments[1]!==undefined?arguments[1]:{},n=m.getExpCodeByIndexCode(t,this.memStore.getNewOrOldExpData());n&&b.report(this.memStore,{expCode:n,indexCode:t},!1,e)},f.prototype.excludeUserFromExp=function(t,e){c.excludeUserFromExp(t,e,this.memStore)},f.prototype.asyncGetExpByName=(a=(0,v["default"])(d["default"].mark(function S(e){return d["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.asyncGetExpByName(e,this.memStore,this.key);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},S,this)})),function(t){return a.apply(this,arguments)}),f.prototype.peekExpByName=function(t){return w.peekExpByName(t,this.memStore)},f.prototype.getExpByName=function(t){return w.getExpByName(t,this.memStore)},t.exports={getWabtInstance:l,init:function O(t){l("default").init(t)},forceUpdate:function I(){l("default").forceUpdate()},getAllParams:function T(){return l("default").getAllParams()},getAllEvents:function C(){return l("default").getAllEvents()},getParam:function A(t){return l("default").getParam(t)},report:function P(t,e){l("default").report(t,e)},reportWithExpCode:function k(t,e,n){l("default").reportWithExpCode(t,e,n)},setProfiles:function j(t){l("default").setProfiles(t)},excludeUserFromExp:function M(t,e){l("default").excludeUserFromExp(t,e)},asyncGetExpByName:i,peekExpByName:function L(t){return l("default").peekExpByName(t)},getExpByName:function N(t){return l("default").getExpByName(t)}}},function(t,e,n){n(25),n(21),t.exports=n(167)},function(t,e,n){"use strict";var r=n(160),o=n(97),i=n(18),u=n(14);t.exports=n(54)(Array,"Array",function(t,e){this._t=u(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=undefined,o(1)):o(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e,n){"use strict";var r=n(57),o=n(29),i=n(30),u={};n(12)(u,n(2)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(u,{next:o(1,n)}),i(t,e+" Iterator")}},function(t,e,n){var u=n(6),a=n(9),c=n(19);t.exports=n(5)?Object.defineProperties:function(t,e){a(t);for(var n,r=c(e),o=r.length,i=0;i<o;)u.f(t,n=r[i++],e[n]);return t}},function(t,e,n){var c=n(14),s=n(39),f=n(164);t.exports=function(a){return function(t,e,n){var r,o=c(t),i=s(o.length),u=f(n,i);if(a&&e!=e){for(;u<i;)if((r=o[u++])!=r)return!0}else for(;u<i;u++)if((a||u in o)&&o[u]===e)return a||u||0;return!a&&-1}}},function(t,e,n){var r=n(58),o=Math.max,i=Math.min;t.exports=function(t,e){return(t=r(t))<0?o(t+e,0):i(t,e)}},function(t,e,n){var r=n(16),o=n(20),i=n(59)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e,n){var c=n(58),s=n(53);t.exports=function(a){return function(t,e){var n,r,o=String(s(t)),i=c(e),u=o.length;return i<0||u<=i?a?"":undefined:(n=o.charCodeAt(i))<55296||56319<n||i+1===u||(r=o.charCodeAt(i+1))<56320||57343<r?a?o.charAt(i):n:a?o.slice(i,i+2):r-56320+(n-55296<<10)+65536}}},function(t,e,n){var r=n(9),o=n(62);t.exports=n(0).getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){var r=function(){return this}()||Function("return this")(),o=r.regeneratorRuntime&&0<=Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime"),i=o&&r.regeneratorRuntime;if(r.regeneratorRuntime=undefined,t.exports=n(169),o)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(u){r.regeneratorRuntime=undefined}},function(j,t){!function(t){"use strict";var c,f,l,p,d,h,e,n,r,o,i=Object.prototype,s=i.hasOwnProperty,u="function"==typeof Symbol?Symbol:{},a=u.iterator||"@@iterator",v=u.asyncIterator||"@@asyncIterator",y=u.toStringTag||"@@toStringTag",g="object"==typeof j,m=t.regeneratorRuntime;function x(t,e,n,r){var o=e&&e.prototype instanceof w?e:w,i=Object.create(o.prototype),u=new A(r||[]);return i._invoke=function s(i,u,a){var c=f;return function(t,e){if(c===p)throw new Error("Generator is already running");if(c===d){if("throw"===t)throw e;return k()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){var r=I(n,a);if(r){if(r===h)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===f)throw c=d,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=p;var o=b(i,u,a);if("normal"===o.type){if(c=a.done?d:l,o.arg===h)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(c=d,a.method="throw",a.arg=o.arg)}}}(t,n,u),i}function b(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function w(){}function _(){}function E(){}function S(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function O(c){var e;this._invoke=function o(n,r){function t(){return new Promise(function(t,e){!function a(t,e,n,r){var o=b(c[t],c,e);if("throw"!==o.type){var i=o.arg,u=i.value;return u&&"object"==typeof u&&s.call(u,"__await")?Promise.resolve(u.__await).then(function(t){a("next",t,n,r)},function(t){a("throw",t,n,r)}):Promise.resolve(u).then(function(t){i.value=t,n(i)},r)}r(o.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function I(t,e){var n=t.iterator[e.method];if(n===c){if(e.delegate=null,"throw"===e.method){if(t.iterator["return"]&&(e.method="return",e.arg=c,I(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=b(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=c),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function P(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function r(){for(;++n<t.length;)if(s.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=c,r.done=!0,r};return r.next=r}}return{next:k}}function k(){return{value:c,done:!0}}m?g&&(j.exports=m):((m=t.regeneratorRuntime=g?j.exports:{}).wrap=x,f="suspendedStart",l="suspendedYield",p="executing",d="completed",h={},(e={})[a]=function(){return this},(r=(n=Object.getPrototypeOf)&&n(n(P([]))))&&r!==i&&s.call(r,a)&&(e=r),o=E.prototype=w.prototype=Object.create(e),_.prototype=o.constructor=E,E.constructor=_,E[y]=_.displayName="GeneratorFunction",m.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},m.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,y in t||(t[y]="GeneratorFunction")),t.prototype=Object.create(o),t},m.awrap=function(t){return{__await:t}},S(O.prototype),O.prototype[v]=function(){return this},m.AsyncIterator=O,m.async=function(t,e,n,r){var o=new O(x(t,e,n,r));return m.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},S(o),o[y]="Generator",o[a]=function(){return this},o.toString=function(){return"[object Generator]"},m.keys=function(e){var n=[];for(var t in e)n.push(t);return n.reverse(),function r(){for(;n.length;){var t=n.pop();if(t in e)return r.value=t,r.done=!1,r}return r.done=!0,r}},m.values=P,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&s.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return i.type="throw",i.arg=n,r.next=t,e&&(r.method="next",r.arg=c),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var u=s.call(o,"catchLoc"),a=s.call(o,"finallyLoc");if(u&&a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),h}},"catch":function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r,o=n.completion;return"throw"===o.type&&(r=o.arg,C(n)),r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=c),h}})}(function(){return this}()||Function("return this")())},function(t,e,n){n(66),n(21),n(25),n(171),n(175),n(176),t.exports=n(0).Promise},function(t,e,r){"use strict";var n,o,i,u,a=r(27),c=r(1),s=r(11),f=r(41),l=r(3),p=r(7),d=r(28),h=r(67),v=r(31),y=r(104),g=r(105).set,m=r(173)(),x=r(68),b=r(106),w=r(174),_=r(107),E="Promise",S=c.TypeError,O=c.process,I=O&&O.versions,T=I&&I.v8||"",C=c[E],A="process"==f(O),P=function(){},k=o=x.f,j=!!function(){try{var t=C.resolve(1),e=(t.constructor={})[r(2)("species")]=function(t){t(P,P)};return(A||"function"==typeof PromiseRejectionEvent)&&t.then(P)instanceof e&&0!==T.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(n){}}(),M=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},L=function(l,n){var r;l._n||(l._n=!0,r=l._c,m(function(){for(var s=l._v,f=1==l._s,t=0,e=function(t){var e,n,r,o=f?t.ok:t.fail,i=t.resolve,u=t.reject,a=t.domain;try{o?(f||(2==l._h&&F(l),l._h=1),!0===o?e=s:(a&&a.enter(),e=o(s),a&&(a.exit(),r=!0)),e===t.promise?u(S("Promise-chain cycle")):(n=M(e))?n.call(e,i,u):i(e)):u(s)}catch(c){a&&!r&&a.exit(),u(c)}};r.length>t;)e(r[t++]);l._c=[],l._n=!1,n&&!l._h&&N(l)}))},N=function(i){g.call(c,function(){var t,e,n,r=i._v,o=R(i);if(o&&(t=b(function(){A?O.emit("unhandledRejection",r,i):(e=c.onunhandledrejection)?e({promise:i,reason:r}):(n=c.console)&&n.error&&n.error("Unhandled promise rejection",r)}),i._h=A||R(i)?2:1),i._a=undefined,o&&t.e)throw t.v})},R=function(t){return 1!==t._h&&0===(t._a||t._c).length},F=function(e){g.call(c,function(){var t;A?O.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})})},D=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),L(e,!0))},B=function(n){var r,o=this;if(!o._d){o._d=!0,o=o._w||o;try{if(o===n)throw S("Promise can't be resolved itself");(r=M(n))?m(function(){var t={_w:o,_d:!1};try{r.call(n,s(B,t,1),s(D,t,1))}catch(e){D.call(t,e)}}):(o._v=n,o._s=1,L(o,!1))}catch(t){D.call({_w:o,_d:!1},t)}}};j||(C=function(t){h(this,C,E,"_h"),d(t),n.call(this);try{t(s(B,this,1),s(D,this,1))}catch(e){D.call(this,e)}},(n=function(t){this._c=[],this._a=undefined,this._s=0,this._d=!1,this._v=undefined,this._h=0,this._n=!1}).prototype=r(69)(C.prototype,{then:function(t,e){var n=k(y(this,C));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=A?O.domain:undefined,this._c.push(n),this._a&&this._a.push(n),this._s&&L(this,!1),n.promise},"catch":function(t){return this.then(undefined,t)}}),i=function(){var t=new n;this.promise=t,this.resolve=s(B,t,1),this.reject=s(D,t,1)},x.f=k=function(t){return t===C||t===u?new i:o(t)}),l(l.G+l.W+l.F*!j,{Promise:C}),r(30)(C,E),r(108)(E),u=r(0)[E],l(l.S+l.F*!j,E,{reject:function(t){var e=k(this);return(0,e.reject)(t),e.promise}}),l(l.S+l.F*(a||!j),E,{resolve:function(t){return _(a&&this===u?C:this,t)}}),l(l.S+l.F*!(j&&r(109)(function(t){C.all(t)["catch"](P)})),E,{all:function(t){var u=this,e=k(u),a=e.resolve,c=e.reject,n=b(function(){var r=[],o=0,i=1;v(t,!1,function(t){var e=o++,n=!1;r.push(undefined),i++,u.resolve(t).then(function(t){n||(n=!0,r[e]=t,--i||a(r))},c)}),--i||a(r)});return n.e&&c(n.v),e.promise},race:function(t){var e=this,n=k(e),r=n.reject,o=b(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},function(t,e){t.exports=function(t,e,n){var r=n===undefined;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var a=n(1),c=n(105).set,s=a.MutationObserver||a.WebKitMutationObserver,f=a.process,l=a.Promise,p="process"==n(26)(f);t.exports=function(){var r,o,t,i,e,n,u=function(){var t,e;for(p&&(t=f.domain)&&t.exit();r;){e=r.fn,r=r.next;try{e()}catch(n){throw r?i():o=undefined,n}}o=undefined,t&&t.enter()};return i=p?function(){f.nextTick(u)}:!s||a.navigator&&a.navigator.standalone?l&&l.resolve?(t=l.resolve(undefined),function(){t.then(u)}):function(){c.call(a,u)}:(e=!0,n=document.createTextNode(""),new s(u).observe(n,{characterData:!0}),function(){n.data=e=!e}),function(t){var e={fn:t,next:undefined};o&&(o.next=e),r||(r=e,i()),o=e}}},function(t,e,n){var r=n(1).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){"use strict";var r=n(3),o=n(0),i=n(1),u=n(104),a=n(107);r(r.P+r.R,"Promise",{"finally":function(e){var n=u(this,o.Promise||i.Promise),t="function"==typeof e;return this.then(t?function(t){return a(n,e()).then(function(){return t})}:e,t?function(t){return a(n,e()).then(function(){throw t})}:e)}})},function(t,e,n){"use strict";var r=n(3),o=n(68),i=n(106);r(r.S,"Promise",{"try":function(t){var e=o.f(this),n=i(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){var r=n(0),o=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},function(t,e,n){"use strict";e.__esModule=!0;var r=u(n(179)),o=u(n(181)),i="function"==typeof o["default"]&&"symbol"==typeof r["default"]?function(t){return typeof t}:function(t){return t&&"function"==typeof o["default"]&&t.constructor===o["default"]&&t!==o["default"].prototype?"symbol":typeof t};function u(t){return t&&t.__esModule?t:{"default":t}}e["default"]="function"==typeof o["default"]&&"symbol"===i(r["default"])?function(t){return void 0===t?"undefined":i(t)}:function(t){return t&&"function"==typeof o["default"]&&t.constructor===o["default"]&&t!==o["default"].prototype?"symbol":void 0===t?"undefined":i(t)}},function(t,e,n){t.exports={"default":n(180),__esModule:!0}},function(t,e,n){n(21),n(25),t.exports=n(70).f("iterator")},function(t,e,n){t.exports={"default":n(182),__esModule:!0}},function(t,e,n){n(183),n(66),n(187),n(188),t.exports=n(0).Symbol},function(t,e,n){"use strict";var r=n(1),u=n(16),o=n(5),i=n(3),a=n(99),c=n(71).KEY,s=n(15),f=n(60),l=n(30),p=n(40),d=n(2),h=n(70),v=n(72),y=n(184),g=n(110),m=n(9),x=n(7),b=n(20),w=n(14),_=n(56),E=n(29),S=n(57),O=n(185),I=n(186),T=n(73),C=n(6),A=n(19),P=I.f,k=C.f,j=O.f,M=r.Symbol,L=r.JSON,N=L&&L.stringify,R="prototype",F=d("_hidden"),D=d("toPrimitive"),B={}.propertyIsEnumerable,U=f("symbol-registry"),q=f("symbols"),G=f("op-symbols"),V=Object[R],W="function"==typeof M&&!!T.f,H=r.QObject,K=!H||!H[R]||!H[R].findChild,X=o&&s(function(){return 7!=S(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=P(V,e);r&&delete V[e],k(t,e,n),r&&t!==V&&k(V,e,r)}:k,J=function(t){var e=q[t]=S(M[R]);return e._k=t,e},z=W&&"symbol"==typeof M.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof M},Y=function(t,e,n){return t===V&&Y(G,e,n),m(t),e=_(e,!0),m(n),u(q,e)?(n.enumerable?(u(t,F)&&t[F][e]&&(t[F][e]=!1),n=S(n,{enumerable:E(0,!1)})):(u(t,F)||k(t,F,E(1,{})),t[F][e]=!0),X(t,e,n)):k(t,e,n)},Q=function(t,e){m(t);for(var n,r=y(e=w(e)),o=0,i=r.length;o<i;)Y(t,n=r[o++],e[n]);return t},$=function(t){var e=B.call(this,t=_(t,!0));return!(this===V&&u(q,t)&&!u(G,t))&&(!(e||!u(this,t)||!u(q,t)||u(this,F)&&this[F][t])||e)},Z=function(t,e){if(t=w(t),e=_(e,!0),t!==V||!u(q,e)||u(G,e)){var n=P(t,e);return!n||!u(q,e)||u(t,F)&&t[F][e]||(n.enumerable=!0),n}},tt=function(t){for(var e,n=j(w(t)),r=[],o=0;n.length>o;)u(q,e=n[o++])||e==F||e==c||r.push(e);return r},et=function(t){for(var e,n=t===V,r=j(n?G:w(t)),o=[],i=0;r.length>i;)!u(q,e=r[i++])||n&&!u(V,e)||o.push(q[e]);return o};W||(a((M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var e=p(0<arguments.length?arguments[0]:undefined),n=function(t){this===V&&n.call(G,t),u(this,F)&&u(this[F],e)&&(this[F][e]=!1),X(this,e,E(1,t))};return o&&K&&X(V,e,{configurable:!0,set:n}),J(e)})[R],"toString",function(){return this._k}),I.f=Z,C.f=Y,n(111).f=O.f=tt,n(32).f=$,T.f=et,o&&!n(27)&&a(V,"propertyIsEnumerable",$,!0),h.f=function(t){return J(d(t))}),i(i.G+i.W+i.F*!W,{Symbol:M});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)d(nt[rt++]);for(var ot=A(d.store),it=0;ot.length>it;)v(ot[it++]);i(i.S+i.F*!W,"Symbol",{"for":function(t){return u(U,t+="")?U[t]:U[t]=M(t)},keyFor:function(t){if(!z(t))throw TypeError(t+" is not a symbol!");for(var e in U)if(U[e]===t)return e},useSetter:function(){K=!0},useSimple:function(){K=!1}}),i(i.S+i.F*!W,"Object",{create:function(t,e){return e===undefined?S(t):Q(S(t),e)},defineProperty:Y,defineProperties:Q,getOwnPropertyDescriptor:Z,getOwnPropertyNames:tt,getOwnPropertySymbols:et});var ut=s(function(){T.f(1)});i(i.S+i.F*ut,"Object",{getOwnPropertySymbols:function(t){return T.f(b(t))}}),L&&i(i.S+i.F*(!W||s(function(){var t=M();return"[null]"!=N([t])||"{}"!=N({a:t})||"{}"!=N(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],o=1;o<arguments.length;)r.push(arguments[o++]);if(n=e=r[1],(x(e)||t!==undefined)&&!z(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!z(e))return e}),r[1]=e,N.apply(L,r)}}),M[R][D]||n(12)(M[R],D,M[R].valueOf),l(M,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,e,n){var a=n(19),c=n(73),s=n(32);t.exports=function(t){var e=a(t),n=c.f;if(n)for(var r,o=n(t),i=s.f,u=0;o.length>u;)i.call(t,r=o[u++])&&e.push(r);return e}},function(t,e,n){var r=n(14),o=n(111).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?function(t){try{return o(t)}catch(e){return u.slice()}}(t):o(r(t))}},function(t,e,n){var r=n(32),o=n(29),i=n(14),u=n(56),a=n(16),c=n(98),s=Object.getOwnPropertyDescriptor;e.f=n(5)?s:function(t,e){if(t=i(t),e=u(e,!0),c)try{return s(t,e)}catch(n){}if(a(t,e))return o(!r.f.call(t,e),t[e])}},function(t,e,n){n(72)("asyncIterator")},function(t,e,n){n(72)("observable")},function(t,e){!function(v,y){"use strict";var e;function f(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||i(),this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,r=this.intersectionRect,o=r.width*r.height;this.intersectionRatio=n?Number((o/n).toFixed(4)):this.isIntersecting?1:0}function t(t,e){var n=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=function r(t,e){var n=null;return function(){n=n||setTimeout(function(){t(),n=null},e)}}(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(t){return t.value+t.unit}).join(" ")}function n(t,e,n,r){"function"==typeof t.addEventListener?t.addEventListener(e,n,r||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function r(t,e,n,r){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,r||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,n)}function g(t){var e;try{e=t.getBoundingClientRect()}catch(n){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):i()}function i(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function o(t,e){for(var n=e;n;){if(n==t)return!0;n=m(n)}return!1}function m(t){var e=t.parentNode;return e&&11==e.nodeType&&e.host?e.host:e}"IntersectionObserver"in v&&"IntersectionObserverEntry"in v&&"intersectionRatio"in v.IntersectionObserverEntry.prototype?"isIntersecting"in v.IntersectionObserverEntry.prototype||Object.defineProperty(v.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}}):(e=[],t.prototype.THROTTLE_TIMEOUT=100,t.prototype.POLL_INTERVAL=null,t.prototype.USE_MUTATION_OBSERVER=!0,t.prototype.observe=function(e){if(!this._observationTargets.some(function(t){return t.element==e})){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},t.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},t.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},t.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},t.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter(function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||1<t)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]})},t.prototype._parseRootMargin=function(t){var e=(t||"0px").split(/\s+/).map(function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}});return e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],e},t.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(n(v,"resize",this._checkForIntersections,!0),n(y,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in v&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(y,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},t.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,r(v,"resize",this._checkForIntersections,!0),r(y,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},t.prototype._checkForIntersections=function(){var c=this._rootIsInDom(),s=c?this._getRootRect():i();this._observationTargets.forEach(function(t){var e=t.element,n=g(e),r=this._rootContainsTarget(e),o=t.entry,i=c&&r&&this._computeTargetAndRootIntersection(e,s),u=t.entry=new f({time:function a(){return v.performance&&performance.now&&performance.now()}(),target:e,boundingClientRect:n,rootBounds:s,intersectionRect:i});o?c&&r?this._hasCrossedThreshold(o,u)&&this._queuedEntries.push(u):o&&o.isIntersecting&&this._queuedEntries.push(u):this._queuedEntries.push(u)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},t.prototype._computeTargetAndRootIntersection=function(t,e){if("none"!=v.getComputedStyle(t).display){for(var n,r,o,i,u,a,c,s,f=g(t),l=m(t),p=!1;!p;){var d=null,h=1==l.nodeType?v.getComputedStyle(l):{};if("none"==h.display)return;if(l==this.root||l==y?(p=!0,d=e):l!=y.body&&l!=y.documentElement&&"visible"!=h.overflow&&(d=g(l)),d&&(n=d,r=f,0,o=Math.max(n.top,r.top),i=Math.min(n.bottom,r.bottom),u=Math.max(n.left,r.left),a=Math.min(n.right,r.right),s=i-o,!(f=0<=(c=a-u)&&0<=s&&{top:o,bottom:i,left:u,right:a,width:c,height:s})))break;l=m(l)}return f}},t.prototype._getRootRect=function(){var t,e,n;return n=this.root?g(this.root):(t=y.documentElement,e=y.body,{top:0,left:0,right:t.clientWidth||e.clientWidth,width:t.clientWidth||e.clientWidth,bottom:t.clientHeight||e.clientHeight,height:t.clientHeight||e.clientHeight}),this._expandRectByRootMargin(n)},t.prototype._expandRectByRootMargin=function(n){var t=this._rootMarginValues.map(function(t,e){return"px"==t.unit?t.value:t.value*(e%2?n.width:n.height)/100}),e={top:n.top-t[0],right:n.right+t[1],bottom:n.bottom+t[2],left:n.left-t[3]};return e.width=e.right-e.left,e.height=e.bottom-e.top,e},t.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,r=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==r)for(var o=0;o<this.thresholds.length;o++){var i=this.thresholds[o];if(i==n||i==r||i<n!=i<r)return!0}},t.prototype._rootIsInDom=function(){return!this.root||o(y,this.root)},t.prototype._rootContainsTarget=function(t){return o(this.root||y,t)},t.prototype._registerInstance=function(){e.indexOf(this)<0&&e.push(this)},t.prototype._unregisterInstance=function(){var t=e.indexOf(this);-1!=t&&e.splice(t,1)},v.IntersectionObserver=t,v.IntersectionObserverEntry=f)}(window,document)},function(t,e,n){t.exports={"default":n(191),__esModule:!0}},function(t,e,n){n(192),t.exports=n(0).Object.keys},function(t,e,n){var r=n(20),o=n(19);n(193)("keys",function(){return function(t){return o(r(t))}})},function(t,e,n){var o=n(3),i=n(0),u=n(15);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],r={};r[t]=e(n),o(o.S+o.F*u(function(){n(1)}),"Object",r)}},function(t,e,n){"use strict";var r=function i(t){return t&&t.__esModule?t:{"default":t}}(n(112));function o(){this.ALL_PARAMS=[],this.ALL_EVENTS=[],this.FUNC_MAP=new r["default"]}o.prototype.getMockId=function(){return this.MOCK_ID},o.prototype.setMockId=function(t){this.MOCK_ID=t},o.prototype.isParamInited=function(){return this.IS_PARAM_INITED},o.prototype.setParamInitState=function(t){this.IS_PARAM_INITED=t},o.prototype.getLpoId=function(){return this.LOP_ID},o.prototype.setLpoId=function(t){this.LOP_ID=t},o.prototype.getExpConfig=function(){return this.EXP_CONFIG},o.prototype.setExpConfig=function(t){this.EXP_CONFIG=t},o.prototype.getExpData=function(){return this.EXP_DATA},o.prototype.setExpData=function(t){this.EXP_DATA=t},o.prototype.getNewOrOldExpData=function(){return this.getNewExpData()&&0<this.getNewExpData().length?this.getNewExpData():this.getExpData()&&0<this.getExpData().length?this.getExpData():this.getOldExpData()},o.prototype.getOldExpData=function(){return this.OLD_EXP_DATA},o.prototype.setOldExpData=function(t){this.OLD_EXP_DATA=t},o.prototype.getNewExpData=function(){return this.NEW_EXP_DATA},o.prototype.setNewExpData=function(t){this.NEW_EXP_DATA=t},o.prototype.getTABExpData=function(){return this.TAB_EXP_DATA},o.prototype.setTABExpData=function(t){this.TAB_EXP_DATA=t},o.prototype.getStrategy=function(){return this.STRATEGY},o.prototype.setStrategy=function(t){this.STRATEGY=t},o.prototype.getVarsObj=function(){return this.VARSOBJ},o.prototype.setVarsObj=function(t){this.VARSOBJ=t},o.prototype.getAllParams=function(){return this.ALL_PARAMS},o.prototype.setAllParams=function(t){this.ALL_PARAMS=t},o.prototype.getAllEvents=function(){return this.ALL_EVENTS},o.prototype.setAllEvents=function(t){this.ALL_EVENTS=t},o.prototype.getIO=function(){return this.IO},o.prototype.setIO=function(t){this.IO=t},o.prototype.getGuid=function(){return this.guid},o.prototype.setGuid=function(t){this.guid=t},o.prototype.getFingerprint=function(){return this.fingerprint},o.prototype.setFingerprint=function(t){this.fingerprint=t},o.prototype.getSystemInfo=function(){return this.systemInfo},o.prototype.setSystemInfo=function(t){this.systemInfo=t},t.exports=o},function(t,e,n){n(66),n(21),n(25),n(196),n(202),n(205),n(207),t.exports=n(0).Map},function(t,e,n){"use strict";var r=n(197),o=n(113);t.exports=n(198)("Map",function(t){return function(){return t(this,0<arguments.length?arguments[0]:undefined)}},{get:function(t){var e=r.getEntry(o(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(o(this,"Map"),0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var u=n(6).f,a=n(57),c=n(69),s=n(11),f=n(67),l=n(31),r=n(54),o=n(97),i=n(108),p=n(5),d=n(71).fastKey,h=n(113),v=p?"_s":"size",y=function(t,e){var n,r=d(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,i,n,r){var o=t(function(t,e){f(t,o,i,"_i"),t._t=i,t._i=a(null),t._f=undefined,t._l=undefined,t[v]=0,e!=undefined&&l(e,n,t[r],t)});return c(o.prototype,{clear:function(){for(var t=h(this,i),e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=undefined),delete e[n.i];t._f=t._l=undefined,t[v]=0},"delete":function(t){var e,n,r=h(this,i),o=y(r,t);return o&&(e=o.n,n=o.p,delete r._i[o.i],o.r=!0,n&&(n.n=e),e&&(e.p=n),r._f==o&&(r._f=e),r._l==o&&(r._l=n),r[v]--),!!o},forEach:function(t){h(this,i);for(var e,n=s(t,1<arguments.length?arguments[1]:undefined,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!y(h(this,i),t)}}),p&&u(o.prototype,"size",{get:function(){return h(this,i)[v]}}),o},def:function(t,e,n){var r,o,i=y(t,e);return i?i.v=n:(t._l=i={i:o=d(e,!0),k:e,v:n,p:r=t._l,n:undefined,r:!1},t._f||(t._f=i),r&&(r.n=i),t[v]++,"F"!==o&&(t._i[o]=i)),t},getEntry:y,setStrong:function(t,n,e){r(t,n,function(t,e){this._t=h(t,n),this._k=e,this._l=undefined},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?o(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=undefined,o(1))},e?"entries":"values",!e,!0),i(n)}}},function(t,e,n){"use strict";var l=n(1),p=n(3),d=n(71),h=n(15),v=n(12),y=n(69),g=n(31),m=n(67),x=n(7),b=n(30),w=n(6).f,_=n(199)(0),E=n(5);t.exports=function(n,t,e,r,o,i){var u=l[n],a=u,c=o?"set":"add",s=a&&a.prototype,f={};return E&&"function"==typeof a&&(i||s.forEach&&!h(function(){(new a).entries().next()}))?(a=t(function(t,e){m(t,a,n,"_c"),t._c=new u,e!=undefined&&g(e,o,t[c],t)}),_("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(r){var o="add"==r||"set"==r;r in s&&(!i||"clear"!=r)&&v(a.prototype,r,function(t,e){if(m(this,a,r),!o&&i&&!x(t))return"get"==r&&undefined;var n=this._c[r](0===t?0:t,e);return o?this:n})}),i||w(a.prototype,"size",{get:function(){return this._c.size}})):(a=r.getConstructor(t,n,o,c),y(a.prototype,e),d.NEED=!0),b(a,n),f[n]=a,p(p.G+p.W+p.F,f),i||r.setStrong(a,n,o),a}},function(t,e,n){var x=n(11),b=n(52),w=n(20),_=n(39),r=n(200);t.exports=function(l,t){var p=1==l,d=2==l,h=3==l,v=4==l,y=6==l,g=5==l||y,m=t||r;return function(t,e,n){for(var r,o,i=w(t),u=b(i),a=x(e,n,3),c=_(u.length),s=0,f=p?m(t,c):d?m(t,0):undefined;s<c;s++)if((g||s in u)&&(o=a(r=u[s],s,i),l))if(p)f[s]=o;else if(o)switch(l){case 3:return!0;case 5:return r;case 6:return s;case 2:f.push(r)}else if(v)return!1;return y?-1:h||v?v:f}}},function(t,e,n){var r=n(201);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(7),o=n(110),i=n(2)("species");t.exports=function(t){var e;return o(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!o(e.prototype)||(e=undefined),r(e)&&null===(e=e[i])&&(e=undefined)),e===undefined?Array:e}},function(t,e,n){var r=n(3);r(r.P+r.R,"Map",{toJSON:n(203)("Map")})},function(t,e,n){var r=n(41),o=n(204);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return o(this)}}},function(t,e,n){var r=n(31);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},function(t,e,n){n(206)("Map")},function(t,e,n){"use strict";var r=n(3);t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){n(208)("Map")},function(t,e,n){"use strict";var r=n(3),u=n(28),a=n(11),c=n(31);t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,o,i=arguments[1];return u(this),(e=i!==undefined)&&u(i),t==undefined?new this:(n=[],e?(r=0,o=a(i,arguments[2],2),c(t,!1,function(t){n.push(o(t,r++))})):c(t,!1,n.push,n),new this(n))}})}},function(t,e,n){n(210),t.exports=n(0).Object.assign},function(t,e,n){var r=n(3);r(r.S+r.F,"Object",{assign:n(211)})},function(t,e,n){"use strict";var p=n(5),d=n(19),h=n(73),v=n(32),y=n(20),g=n(52),o=Object.assign;t.exports=!o||n(15)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=o({},t)[n]||Object.keys(o({},e)).join("")!=r})?function(t,e){for(var n=y(t),r=arguments.length,o=1,i=h.f,u=v.f;o<r;)for(var a,c=g(arguments[o++]),s=i?d(c).concat(i(c)):d(c),f=s.length,l=0;l<f;)a=s[l++],p&&!u.call(c,a)||(n[a]=c[a]);return n}:o},function(t,e,n){"use strict";var r,i=c(n(63)),o=c(n(64)),O=c(n(24)),u=c(n(65)),I=c(n(42)),a=(r=(0,o["default"])(i["default"].mark(function h(e,n){var r,o;return i["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=!1,t.prev=1,t.next=4,p(e,n);case 4:r=!0,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),console.log("reloadExperiments fail");case 10:return o=d(e,n),!r&&o&&"default"!==o.assignment&&s.reportExpExpose(o.grayId),t.abrupt("return",o);case 13:case"end":return t.stop()}},h,this,[[1,7]])})),function(t,e){return r.apply(this,arguments)});function c(t){return t&&t.__esModule?t:{"default":t}}var s=n(43),T=n(33),C=n(74),f={grayId:1,params:{},assignment:"default"};function l(t,o){var i=2<arguments.length&&arguments[2]!==undefined?arguments[2]:function(){},e=o.getExpConfig();if(!e)return i(null);var n=o.getGuid(),r=encodeURIComponent(e.url||window.location.href),u=T.getBaseUrl()+"wabt/gray_web_strategy";if(o.getMockId())u+="?wabt_mock_id="+o.getMockId();else if(o.getLpoId())u+="?lpo_id="+o.getLpoId();else if(u+="?guid="+n+"&appid="+e.appid+"&appkey="+e.appkey,u+="&abReqType=web&abReqVer="+C.SDK_VERSION+"&url="+r,t&&(u+="&expName="+t),e.profiles)try{u+="&profiles="+encodeURIComponent((0,I["default"])(e.profiles))}catch(a){throw Error("invalid profiles, must be a dict")}T.getWithTimeout(u,function(t){var e=JSON.parse(t);if(e&&0===e.code)try{i(e.data,e.experiments,e.strategy)}catch(r){var n={expCode:"error",indexCode:"error"};s.report(o,n,!0,{errType:"callbackException",errMsg:r.message})}})}function p(t,E,S){return new u["default"](function(w,_){l(t,E,function(t,e,n){n&&E.setStrategy(n);var r=T.getCacheKey(S,C.LS_STRATEGY);n&&T.setCache(r,(0,I["default"])(n));var o=E.getTABExpData();if(e&&o){var i=!0,u=!1,a=undefined;try{for(var c,s=(0,O["default"])(e);!(i=(c=s.next()).done);i=!0){var f=c.value;try{var l=null,p=!0,d=!1,h=undefined;try{for(var v,y=(0,O["default"])(o);!(p=(v=y.next()).done);p=!0){var g=v.value;if(g.layerCode===f.layerCode){l=g;break}}}catch(x){d=!0,h=x}finally{try{!p&&y["return"]&&y["return"]()}finally{if(d)throw h}}l?(l.experimentCode=f.experimentCode,l.params=f.params,l.assignment=f.assignment):o.push(f),E.setTABExpData(o);var m=T.getCacheKey(S,C.LS_EXP_TAB);T.setCache(m,o)}catch(b){console.log(b)}}}catch(x){u=!0,a=x}finally{try{!i&&s["return"]&&s["return"]()}finally{if(u)throw a}}}t||e?w():_(Error("reload failed"))})})}function d(t,e){var n=e.getTABExpData();if(!(n&&n instanceof Array))return f;var r=!0,o=!1,i=undefined;try{for(var u,a=(0,O["default"])(n);!(r=(u=a.next()).done);r=!0){var c=u.value;if(c.expName===t)return{grayId:c.experimentCode,expName:c.expName,assignment:c.assignment,params:c.params}}}catch(s){o=!0,i=s}finally{try{!r&&a["return"]&&a["return"]()}finally{if(o)throw i}}return f}t.exports={getExperimentInfo:l,reloadExperiments:p,asyncGetExpByName:a,peekExpByName:d,getExpByName:function v(t,e){var n=e.getStrategy(),r=d(t,e);return n&&n.enableReport&&r&&"default"!==r.assignment&&s.reportExpExpose(e,r.grayId),r}}},function(t,e,n){"use strict";n(43);var i=n(33);t.exports={excludeUserFromExp:function u(t,e,n){var r=i.getBaseUrl()+"wabt/addGrayExclude",o={grayId:t,tag:e,appId:n.getExpConfig().appid,guid:n.getGuid()};i.postReq(r,o)}}},function(t,e,n){"use strict";var s=o(n(215)),l=o(n(24)),r=o(n(219)),c=o(n(224)),f=o(n(112)),p=o(n(114));function o(t){return t&&t.__esModule?t:{"default":t}}var d=n(33),h=n(43);function v(t,e){var n=2<arguments.length&&arguments[2]!==undefined&&arguments[2];t.map(function(t){return t.applyWhenHaving&&0<t.applyWhenHaving.length&&!function f(t){var e=!0,n=!1,r=undefined;try{for(var o,i=(0,l["default"])(t);!(e=(o=i.next()).done);e=!0){var u=o.value;if(!u.selector)return;var a=document.querySelector(u.selector);if(!a)return;var c=a.getAttribute("value")||a.textContent;if(u.text&&c!==u.text)return}}catch(s){n=!0,r=s}finally{try{!e&&i["return"]&&i["return"]()}finally{if(n)throw r}}return 1}(t.applyWhenHaving)||t.selector&&[].concat((0,r["default"])(document.querySelectorAll(t.selector))).map(function(o){return(o&&!o.getAttribute("data-ab-init")||n)&&(o.setAttribute("data-ab-init","1"),t.attribute&&0<t.attribute.length&&t.attribute.map(function(t){switch(t.key){case"style":o.style.cssText+=t.value;break;case"className":o.className+=t.value+" ";break;case"innerHTML":o.innerHTML=t.value;break;case"text":o.textContent=t.value;break;case"bgImg":o.style.backgroundImage="url("+t.value+")";break;default:console.log(t.key,t.value),o.setAttribute(t.key,t.value)}return null}),t.op&&0<t.op.length&&t.op.map(function(t){switch(t.type){case"add":var e=document.createElement("div");e.innerHTML=t.html,o.appendChild(e.firstChild);break;case"swap":var n=document.createElement("div"),r=document.querySelector(t.targetSelector);r.setAttribute("data-ab-init","1"),o.parentNode.insertBefore(n,o),r.replaceWith(o),n.replaceWith(r),r.setAttribute("data-ab-init","2");break;default:console.log("invalid op type: "+t.type)}return null}),o.setAttribute("data-ab-expcode",e.experimentCode),setTimeout(function(){o.setAttribute("data-ab-init","2")},0)),null}),null})}t.exports={initExp:function y(t,o){var i,u,a=2<arguments.length&&arguments[2]!==undefined&&arguments[2],e=3<arguments.length&&arguments[3]!==undefined?arguments[3]:function(){};t&&(i={},u=[],t.map(function(t){t.ele&&a&&(i=(0,p["default"])(i,t.ele||{}),u.push({experimentCode:t.experimentCode,param:t.ele}));try{v(t.elt,{experimentCode:t.experimentCode})}catch(n){console.log(n)}try{!function r(t,a,c){t.map(function(r){if(!r.selector)return null;var t=document.querySelector(r.selector);if(t&&(!c.FUNC_MAP.has(r.id)||!c.FUNC_MAP.get(r.id).has(r.type))){t.setAttribute("data-ab-func-show",r.id),t.setAttribute("data-ab-func-"+r.type,r.id);var e=c.FUNC_MAP.has(r.id)?c.FUNC_MAP.get(r.id):new f["default"];e.has("show")||(e.set("show",function(){var t=r.indexCode+"_show",e={expCode:a.experimentCode,indexCode:t};h.report(c,e)}),c.getIO().observe(t));var n=r.type.split("_"),o=(0,s["default"])(n,2),i=o[0],u=o[1];switch(i){case"click":e.set("click",function(){}),t.addEventListener("click",function(){var t=r.indexCode+"_"+r.type,e={expCode:a.experimentCode,indexCode:t};h.report(c,e)},{capture:!1});break;case"keycode":if(e.set(r.type,function(){}),!u)return null;t.addEventListener("keypress",function(t){var e,n;String(t.keyCode)===u&&(e=r.indexCode+"_click",n={expCode:a.experimentCode,indexCode:e},h.report(c,n))},{capture:!1})}c.FUNC_MAP.set(r.id,e)}return null})}(t.event,{experimentCode:t.experimentCode},o)}catch(n){console.log(n)}var e;return a&&(e={expCode:t.experimentCode,indexCode:"page"},h.report(o,e)),null}),a&&(o.getExpConfig()&&o.getExpConfig().antiFlicker&&d.showDocument(),o.setAllParams(u),e&&"function"==typeof e&&e(new f["default"]((0,c["default"])(i)))))},initElt:v,initParams:function i(t,e){var n,r,o=2<arguments.length&&arguments[2]!==undefined?arguments[2]:function(){};t&&(n={},r=[],t.map(function(t){return t.ele&&(n=(0,p["default"])(n,t.ele||{}),r.push({experimentCode:t.experimentCode,param:t.ele})),null}),e.setAllParams(r),o&&"function"==typeof o&&o(new f["default"]((0,c["default"])(n))))},show:function u(t,e){t.setAttribute("data-ab-show","1");var n=t.getAttribute("data-ab-func-show");e.FUNC_MAP.has(n)&&e.FUNC_MAP.get(n).has("show")&&e.FUNC_MAP.get(n).get("show")(),e.getIO().unobserve(t)}}},function(t,e,n){"use strict";e.__esModule=!0;var r=o(n(216)),f=o(n(24));function o(t){return t&&t.__esModule?t:{"default":t}}e["default"]=function(t,e){if(Array.isArray(t))return t;if((0,r["default"])(Object(t)))return function s(t,e){var n=[],r=!0,o=!1,i=undefined;try{for(var u,a=(0,f["default"])(t);!(r=(u=a.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(c){o=!0,i=c}finally{try{!r&&a["return"]&&a["return"]()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e,n){t.exports={"default":n(217),__esModule:!0}},function(t,e,n){n(25),n(21),t.exports=n(218)},function(t,e,n){var r=n(41),o=n(2)("iterator"),i=n(18);t.exports=n(0).isIterable=function(t){var e=Object(t);return e[o]!==undefined||"@@iterator"in e||i.hasOwnProperty(r(e))}},function(t,e,n){"use strict";e.__esModule=!0;var r=function o(t){return t&&t.__esModule?t:{"default":t}}(n(220));e["default"]=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r["default"])(t)}},function(t,e,n){t.exports={"default":n(221),__esModule:!0}},function(t,e,n){n(21),n(222),t.exports=n(0).Array.from},function(t,e,n){"use strict";var p=n(11),r=n(3),d=n(20),h=n(102),v=n(103),y=n(39),g=n(223),m=n(62);r(r.S+r.F*!n(109)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,o,i=d(t),u="function"==typeof this?this:Array,a=arguments.length,c=1<a?arguments[1]:undefined,s=c!==undefined,f=0,l=m(i);if(s&&(c=p(c,2<a?arguments[2]:undefined,2)),l==undefined||u==Array&&v(l))for(n=new u(e=y(i.length));f<e;f++)g(n,f,s?c(i[f],f):i[f]);else for(o=l.call(i),n=new u;!(r=o.next()).done;f++)g(n,f,s?h(o,c,[r.value,f],!0):r.value);return n.length=f,n}})},function(t,e,n){"use strict";var r=n(6),o=n(29);t.exports=function(t,e,n){e in t?r.f(t,e,o(0,n)):t[e]=n}},function(t,e,n){t.exports={"default":n(225),__esModule:!0}},function(t,e,n){n(226),t.exports=n(0).Object.entries},function(t,e,n){var r=n(3),o=n(227)(!0);r(r.S,"Object",{entries:function(t){return o(t)}})},function(t,e,n){var c=n(5),s=n(19),f=n(14),l=n(32).f;t.exports=function(a){return function(t){for(var e,n=f(t),r=s(n),o=r.length,i=0,u=[];i<o;)e=r[i++],c&&!l.call(n,e)||u.push(a?[e,n[e]]:n[e]);return u}}},function(t,e,n){"use strict";t.exports={initFP:function r(t){var n=function n(){!function e(r){var t=document.createElement("script");t.src="https://stdl.qq.com/stdl/qbabtest/lib/fingerprint2.js",document.body.appendChild(t),t.onload=function(){Fingerprint2.get(function(t){var e=t.map(function(t){return t.value}),n=Fingerprint2.x64hash128(e.join(""),31);r&&r(n)})}}(t)};window.requestIdleCallback?requestIdleCallback(n):setTimeout(n,500)}}}]);
function lamejs(){function U(f){return new Int32Array(f)}function G(f){return new Float32Array(f)}function ha(f){if(1==f.length)return G(f[0]);var k=f[0];f=f.slice(1);for(var r=[],x=0;x<k;x++)r.push(ha(f));return r}function Ua(f){if(1==f.length)return U(f[0]);var k=f[0];f=f.slice(1);for(var r=[],x=0;x<k;x++)r.push(Ua(f));return r}function fc(f){if(1==f.length)return new Int16Array(f[0]);var k=f[0];f=f.slice(1);for(var r=[],x=0;x<k;x++)r.push(fc(f));return r}function Tb(f){if(1==f.length)return Array(f[0]);
var k=f[0];f=f.slice(1);for(var r=[],x=0;x<k;x++)r.push(Tb(f));return r}function pa(f){this.ordinal=f}function J(f){this.ordinal=f}function ka(f){this.ordinal=function(){return f}}function ic(){this.getLameVersion=function(){return"3.98.4"};this.getLameShortVersion=function(){return"3.98.4"};this.getLameVeryShortVersion=function(){return"LAME3.98r"};this.getPsyVersion=function(){return"0.93"};this.getLameUrl=function(){return"http://www.mp3dev.org/"};this.getLameOsBitness=function(){return"32bits"}}
function fb(){function x(a){this.bits=0|a}function k(a,e,c,b,g,l){e=.5946/e;for(a>>=1;0!=a--;)g[l++]=e>c[b++]?0:1,g[l++]=e>c[b++]?0:1}function r(a,e,c,b,g,l){a>>=1;var h=a%2;for(a>>=1;0!=a--;){var p=c[b++]*e;var m=c[b++]*e;var n=0|p;var d=c[b++]*e;var z=0|m;var E=c[b++]*e;var f=0|d;p+=u.adj43[n];n=0|E;m+=u.adj43[z];g[l++]=0|p;d+=u.adj43[f];g[l++]=0|m;E+=u.adj43[n];g[l++]=0|d;g[l++]=0|E}0!=h&&(p=c[b++]*e,m=c[b++]*e,p+=u.adj43[0|p],m+=u.adj43[0|m],g[l++]=0|p,g[l++]=0|m)}function K(a,e,c,b){var m,g=
e,h=m=0;do{var p=a[g++],n=a[g++];m<p&&(m=p);h<n&&(h=n)}while(g<c);m<h&&(m=h);switch(m){case 0:return m;case 1:g=e;e=0;m=v.ht[1].hlen;do h=2*a[g+0]+a[g+1],g+=2,e+=m[h];while(g<c);b.bits+=e;return 1;case 2:case 3:g=e;e=d[m-1];m=0;h=v.ht[e].xlen;p=2==e?v.table23:v.table56;do n=a[g+0]*h+a[g+1],g+=2,m+=p[n];while(g<c);a=m&65535;m>>=16;m>a&&(m=a,e++);b.bits+=m;return e;case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:g=e;e=d[m-1];var p=h=m=0,n=v.ht[e].xlen,l=v.ht[e].hlen,
f=v.ht[e+1].hlen,q=v.ht[e+2].hlen;do{var D=a[g+0]*n+a[g+1],g=g+2;m+=l[D];h+=f[D];p+=q[D]}while(g<c);a=e;m>h&&(m=h,a++);m>p&&(m=p,a=e+2);b.bits+=m;return a;default:if(m>Y.IXMAX_VAL)return b.bits=Y.LARGE_BITS,-1;m-=15;for(g=24;32>g&&!(v.ht[g].linmax>=m);g++);for(h=g-8;24>h&&!(v.ht[h].linmax>=m);h++);m=h;p=65536*v.ht[m].xlen+v.ht[g].xlen;h=0;do n=a[e++],l=a[e++],0!=n&&(14<n&&(n=15,h+=p),n*=16),0!=l&&(14<l&&(l=15,h+=p),n+=l),h+=v.largetbl[n];while(e<c);a=h&65535;h>>=16;h>a&&(h=a,m=g);b.bits+=h;return m}}
function C(a,e,b,c,g,l,h,p){for(var m=e.big_values,n=2;n<f.SBMAX_l+1;n++){var d=a.scalefac_band.l[n];if(d>=m)break;var E=g[n-2]+e.count1bits;if(b.part2_3_length<=E)break;E=new x(E);d=K(c,d,m,E);E=E.bits;b.part2_3_length<=E||(b.assign(e),b.part2_3_length=E,b.region0_count=l[n-2],b.region1_count=n-2-l[n-2],b.table_select[0]=h[n-2],b.table_select[1]=p[n-2],b.table_select[2]=d)}}var u=null;this.qupvt=null;this.setModules=function(a){u=this.qupvt=a};var fa=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,
1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]],d=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];this.noquant_count_bits=function(a,e,b){var c=e.l3_enc,m=Math.min(576,e.max_nonzero_coeff+2>>1<<1);null!=b&&(b.sfb_count1=0);for(;1<m&&0==(c[m-1]|c[m-2]);m-=2);e.count1=m;for(var g=0,h=0;3<m&&!(1<((c[m-1]|c[m-2]|c[m-3]|c[m-4])&2147483647));m-=4){var p=2*(2*(2*c[m-4]+c[m-3])+c[m-2])+c[m-1];g+=v.t32l[p];h+=v.t33l[p]}p=g;e.count1table_select=0;g>h&&(p=h,e.count1table_select=
1);e.count1bits=p;e.big_values=m;if(0==m)return p;e.block_type==f.SHORT_TYPE?(g=3*a.scalefac_band.s[3],g>e.big_values&&(g=e.big_values),h=e.big_values):e.block_type==f.NORM_TYPE?(g=e.region0_count=a.bv_scf[m-2],h=e.region1_count=a.bv_scf[m-1],h=a.scalefac_band.l[g+h+2],g=a.scalefac_band.l[g+1],h<m&&(p=new x(p),e.table_select[2]=K(c,h,m,p),p=p.bits)):(e.region0_count=7,e.region1_count=f.SBMAX_l-1-7-1,g=a.scalefac_band.l[8],h=m,g>h&&(g=h));g=Math.min(g,m);h=Math.min(h,m);0<g&&(p=new x(p),e.table_select[0]=
K(c,0,g,p),p=p.bits);g<h&&(p=new x(p),e.table_select[1]=K(c,g,h,p),p=p.bits);2==a.use_best_huffman&&(e.part2_3_length=p,best_huffman_divide(a,e),p=e.part2_3_length);if(null!=b&&e.block_type==f.NORM_TYPE){for(c=0;a.scalefac_band.l[c]<e.big_values;)c++;b.sfb_count1=c}return p};this.count_bits=function(a,e,c,b){var m=c.l3_enc,g=Y.IXMAX_VAL/u.IPOW20(c.global_gain);if(c.xrpow_max>g)return Y.LARGE_BITS;var g=u.IPOW20(c.global_gain),h,p=0,n=0,l=0,d=0,q=0,w=m,t=0,D=e,H=0;var B=null!=b&&c.global_gain==b.global_gain;
var Q=c.block_type==f.SHORT_TYPE?38:21;for(h=0;h<=Q;h++){var V=-1;if(B||c.block_type==f.NORM_TYPE)V=c.global_gain-(c.scalefac[h]+(0!=c.preflag?u.pretab[h]:0)<<c.scalefac_scale+1)-8*c.subblock_gain[c.window[h]];if(B&&b.step[h]==V)0!=n&&(r(n,g,D,H,w,t),n=0),0!=l&&(k(l,g,D,H,w,t),l=0);else{var N=c.width[h];p+c.width[h]>c.max_nonzero_coeff&&(h=c.max_nonzero_coeff-p+1,qa.fill(m,c.max_nonzero_coeff,576,0),N=h,0>N&&(N=0),h=Q+1);0==n&&0==l&&(w=m,t=q,D=e,H=d);null!=b&&0<b.sfb_count1&&h>=b.sfb_count1&&0<b.step[h]&&
V>=b.step[h]?(0!=n&&(r(n,g,D,H,w,t),n=0,w=m,t=q,D=e,H=d),l+=N):(0!=l&&(k(l,g,D,H,w,t),l=0,w=m,t=q,D=e,H=d),n+=N);if(0>=N){0!=l&&(k(l,g,D,H,w,t),l=0);0!=n&&(r(n,g,D,H,w,t),n=0);break}}h<=Q&&(q+=c.width[h],d+=c.width[h],p+=c.width[h])}0!=n&&r(n,g,D,H,w,t);0!=l&&k(l,g,D,H,w,t);if(0!=(a.substep_shaping&2))for(g=0,Q=.634521682242439/u.IPOW20(c.global_gain+c.scalefac_scale),p=0;p<c.sfbmax;p++)if(B=c.width[p],0==a.pseudohalf[p])g+=B;else for(n=g,g+=B;n<g;++n)m[n]=e[n]>=Q?m[n]:0;return this.noquant_count_bits(a,
c,b)};this.best_huffman_divide=function(a,e){var c=new rb,b=e.l3_enc,g=U(23),l=U(23),h=U(23),p=U(23);if(e.block_type!=f.SHORT_TYPE||1!=a.mode_gr){c.assign(e);if(e.block_type==f.NORM_TYPE){for(var d=e.big_values,q=0;22>=q;q++)g[q]=Y.LARGE_BITS;for(q=0;16>q;q++){var w=a.scalefac_band.l[q+1];if(w>=d)break;for(var t=0,D=new x(t),k=K(b,0,w,D),t=D.bits,I=0;8>I;I++){var H=a.scalefac_band.l[q+I+2];if(H>=d)break;D=t;D=new x(D);H=K(b,w,H,D);D=D.bits;g[q+I]>D&&(g[q+I]=D,l[q+I]=q,h[q+I]=k,p[q+I]=H)}}C(a,c,e,
b,g,l,h,p)}d=c.big_values;if(!(0==d||1<(b[d-2]|b[d-1])||(d=e.count1+2,576<d))){c.assign(e);c.count1=d;for(w=q=0;d>c.big_values;d-=4)t=2*(2*(2*b[d-4]+b[d-3])+b[d-2])+b[d-1],q+=v.t32l[t],w+=v.t33l[t];c.big_values=d;c.count1table_select=0;q>w&&(q=w,c.count1table_select=1);c.count1bits=q;c.block_type==f.NORM_TYPE?C(a,c,e,b,g,l,h,p):(c.part2_3_length=q,q=a.scalefac_band.l[8],q>d&&(q=d),0<q&&(a=new x(c.part2_3_length),c.table_select[0]=K(b,0,q,a),c.part2_3_length=a.bits),d>q&&(a=new x(c.part2_3_length),
c.table_select[1]=K(b,q,d,a),c.part2_3_length=a.bits),e.part2_3_length>c.part2_3_length&&e.assign(c))}}};var c=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],w=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],a=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],b=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];fb.slen1_tab=a;fb.slen2_tab=b;this.best_scalefac_store=function(e,g,m,n){var l=n.tt[g][m],d,h,p=0;for(d=h=0;d<l.sfbmax;d++){var q=l.width[d];h+=q;for(q=-q;0>q&&0==l.l3_enc[q+h];q++);0==q&&(l.scalefac[d]=p=-2)}if(0==l.scalefac_scale&&0==l.preflag){for(d=
h=0;d<l.sfbmax;d++)0<l.scalefac[d]&&(h|=l.scalefac[d]);if(0==(h&1)&&0!=h){for(d=0;d<l.sfbmax;d++)0<l.scalefac[d]&&(l.scalefac[d]>>=1);l.scalefac_scale=p=1}}if(0==l.preflag&&l.block_type!=f.SHORT_TYPE&&2==e.mode_gr){for(d=11;d<f.SBPSY_l&&!(l.scalefac[d]<u.pretab[d]&&-2!=l.scalefac[d]);d++);if(d==f.SBPSY_l){for(d=11;d<f.SBPSY_l;d++)0<l.scalefac[d]&&(l.scalefac[d]-=u.pretab[d]);l.preflag=p=1}}for(d=0;4>d;d++)n.scfsi[m][d]=0;if(2==e.mode_gr&&1==g&&n.tt[0][m].block_type!=f.SHORT_TYPE&&n.tt[1][m].block_type!=
f.SHORT_TYPE){g=n.tt[1][m];h=n.tt[0][m];for(p=0;p<v.scfsi_band.length-1;p++){for(d=v.scfsi_band[p];d<v.scfsi_band[p+1]&&!(h.scalefac[d]!=g.scalefac[d]&&0<=g.scalefac[d]);d++);if(d==v.scfsi_band[p+1]){for(d=v.scfsi_band[p];d<v.scfsi_band[p+1];d++)g.scalefac[d]=-1;n.scfsi[m][p]=1}}for(d=n=m=0;11>d;d++)-1!=g.scalefac[d]&&(n++,m<g.scalefac[d]&&(m=g.scalefac[d]));for(q=h=0;d<f.SBPSY_l;d++)-1!=g.scalefac[d]&&(q++,h<g.scalefac[d]&&(h=g.scalefac[d]));for(p=0;16>p;p++)m<c[p]&&h<w[p]&&(d=a[p]*n+b[p]*q,g.part2_length>
d&&(g.part2_length=d,g.scalefac_compress=p));p=0}for(d=0;d<l.sfbmax;d++)-2==l.scalefac[d]&&(l.scalefac[d]=0);0!=p&&(2==e.mode_gr?this.scale_bitcount(l):this.scale_bitcount_lsf(e,l))};var B=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],e=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],l=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(a){var b,g=0,d=0,q=a.scalefac;if(a.block_type==f.SHORT_TYPE){var t=B;0!=a.mixed_block_flag&&(t=e)}else if(t=l,0==a.preflag){for(b=
11;b<f.SBPSY_l&&!(q[b]<u.pretab[b]);b++);if(b==f.SBPSY_l)for(a.preflag=1,b=11;b<f.SBPSY_l;b++)q[b]-=u.pretab[b]}for(b=0;b<a.sfbdivide;b++)g<q[b]&&(g=q[b]);for(;b<a.sfbmax;b++)d<q[b]&&(d=q[b]);a.part2_length=Y.LARGE_BITS;for(b=0;16>b;b++)g<c[b]&&d<w[b]&&a.part2_length>t[b]&&(a.part2_length=t[b],a.scalefac_compress=b);return a.part2_length==Y.LARGE_BITS};var q=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(a,e){var b,c,d,l,h=U(4),p=e.scalefac;a=
0!=e.preflag?2:0;for(d=0;4>d;d++)h[d]=0;if(e.block_type==f.SHORT_TYPE){var A=1;var w=u.nr_of_sfb_block[a][A];for(b=l=0;4>b;b++){var t=w[b]/3;for(d=0;d<t;d++,l++)for(c=0;3>c;c++)p[3*l+c]>h[b]&&(h[b]=p[3*l+c])}}else for(A=0,w=u.nr_of_sfb_block[a][A],b=l=0;4>b;b++)for(t=w[b],d=0;d<t;d++,l++)p[l]>h[b]&&(h[b]=p[l]);w=!1;for(b=0;4>b;b++)h[b]>q[a][b]&&(w=!0);if(!w){e.sfb_partition_table=u.nr_of_sfb_block[a][A];for(b=0;4>b;b++)e.slen[b]=g[h[b]];A=e.slen[0];b=e.slen[1];h=e.slen[2];t=e.slen[3];switch(a){case 0:e.scalefac_compress=
(5*A+b<<4)+(h<<2)+t;break;case 1:e.scalefac_compress=400+(5*A+b<<2)+h;break;case 2:e.scalefac_compress=500+3*A+b;break;default:S.err.printf("intensity stereo not implemented yet\n")}}if(!w)for(b=e.part2_length=0;4>b;b++)e.part2_length+=e.slen[b]*e.sfb_partition_table[b];return w};var g=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(a){for(var e=2;576>=e;e+=2){for(var b=0,c;a.scalefac_band.l[++b]<e;);for(c=fa[b][0];a.scalefac_band.l[c+1]>e;)c--;0>c&&(c=fa[b][0]);a.bv_scf[e-2]=c;for(c=
fa[b][1];a.scalefac_band.l[c+a.bv_scf[e-2]+2]>e;)c--;0>c&&(c=fa[b][1]);a.bv_scf[e-1]=c}}}function ca(){function f(d,c,f,a,b,k){for(;0!=b--;)f[a]=1E-10+d[c+0]*k[0]-f[a-1]*k[1]+d[c-1]*k[2]-f[a-2]*k[3]+d[c-2]*k[4]-f[a-3]*k[5]+d[c-3]*k[6]-f[a-4]*k[7]+d[c-4]*k[8]-f[a-5]*k[9]+d[c-5]*k[10]-f[a-6]*k[11]+d[c-6]*k[12]-f[a-7]*k[13]+d[c-7]*k[14]-f[a-8]*k[15]+d[c-8]*k[16]-f[a-9]*k[17]+d[c-9]*k[18]-f[a-10]*k[19]+d[c-10]*k[20],++a,++c}function k(d,c,f,a,b,k){for(;0!=b--;)f[a]=d[c+0]*k[0]-f[a-1]*k[1]+d[c-1]*k[2]-
f[a-2]*k[3]+d[c-2]*k[4],++a,++c}function r(d){return d*d}var K=ca.RMS_WINDOW_TIME_NUMERATOR,C=ca.RMS_WINDOW_TIME_DENOMINATOR,u=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9.291677959E-5,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,1.2025322027E-4,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,
-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,
1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-8.28086748E-6,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],
[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,
-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,
-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,
.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],v=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,
.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];this.InitGainAnalysis=function(d,c){a:{for(var f=
0;f<MAX_ORDER;f++)d.linprebuf[f]=d.lstepbuf[f]=d.loutbuf[f]=d.rinprebuf[f]=d.rstepbuf[f]=d.routbuf[f]=0;switch(0|c){case 48E3:d.reqindex=0;break;case 44100:d.reqindex=1;break;case 32E3:d.reqindex=2;break;case 24E3:d.reqindex=3;break;case 22050:d.reqindex=4;break;case 16E3:d.reqindex=5;break;case 12E3:d.reqindex=6;break;case 11025:d.reqindex=7;break;case 8E3:d.reqindex=8;break;default:c=INIT_GAIN_ANALYSIS_ERROR;break a}d.sampleWindow=0|(c*K+C-1)/C;d.lsum=0;d.rsum=0;d.totsamp=0;qa.ill(d.A,0);c=INIT_GAIN_ANALYSIS_OK}if(c!=
INIT_GAIN_ANALYSIS_OK)return INIT_GAIN_ANALYSIS_ERROR;d.linpre=MAX_ORDER;d.rinpre=MAX_ORDER;d.lstep=MAX_ORDER;d.rstep=MAX_ORDER;d.lout=MAX_ORDER;d.rout=MAX_ORDER;qa.fill(d.B,0);return INIT_GAIN_ANALYSIS_OK};this.AnalyzeSamples=function(d,c,w,a,b,B,e){if(0==B)return GAIN_ANALYSIS_OK;var l=0;var q=B;switch(e){case 1:a=c;b=w;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}B<MAX_ORDER?(S.arraycopy(c,w,d.linprebuf,MAX_ORDER,B),S.arraycopy(a,b,d.rinprebuf,MAX_ORDER,B)):(S.arraycopy(c,w,d.linprebuf,
MAX_ORDER,MAX_ORDER),S.arraycopy(a,b,d.rinprebuf,MAX_ORDER,MAX_ORDER));for(;0<q;){var g=q>d.sampleWindow-d.totsamp?d.sampleWindow-d.totsamp:q;if(l<MAX_ORDER){e=d.linpre+l;var t=d.linprebuf;var D=d.rinpre+l;var m=d.rinprebuf;g>MAX_ORDER-l&&(g=MAX_ORDER-l)}else e=w+l,t=c,D=b+l,m=a;f(t,e,d.lstepbuf,d.lstep+d.totsamp,g,u[d.reqindex]);f(m,D,d.rstepbuf,d.rstep+d.totsamp,g,u[d.reqindex]);k(d.lstepbuf,d.lstep+d.totsamp,d.loutbuf,d.lout+d.totsamp,g,v[d.reqindex]);k(d.rstepbuf,d.rstep+d.totsamp,d.routbuf,d.rout+
d.totsamp,g,v[d.reqindex]);e=d.lout+d.totsamp;t=d.loutbuf;D=d.rout+d.totsamp;m=d.routbuf;for(var n=g%8;0!=n--;)d.lsum+=r(t[e++]),d.rsum+=r(m[D++]);for(n=g/8;0!=n--;)d.lsum+=r(t[e+0])+r(t[e+1])+r(t[e+2])+r(t[e+3])+r(t[e+4])+r(t[e+5])+r(t[e+6])+r(t[e+7]),e+=8,d.rsum+=r(m[D+0])+r(m[D+1])+r(m[D+2])+r(m[D+3])+r(m[D+4])+r(m[D+5])+r(m[D+6])+r(m[D+7]),D+=8;q-=g;l+=g;d.totsamp+=g;d.totsamp==d.sampleWindow&&(e=10*ca.STEPS_per_dB*Math.log10((d.lsum+d.rsum)/d.totsamp*.5+1E-37),e=0>=e?0:0|e,e>=d.A.length&&(e=
d.A.length-1),d.A[e]++,d.lsum=d.rsum=0,S.arraycopy(d.loutbuf,d.totsamp,d.loutbuf,0,MAX_ORDER),S.arraycopy(d.routbuf,d.totsamp,d.routbuf,0,MAX_ORDER),S.arraycopy(d.lstepbuf,d.totsamp,d.lstepbuf,0,MAX_ORDER),S.arraycopy(d.rstepbuf,d.totsamp,d.rstepbuf,0,MAX_ORDER),d.totsamp=0);if(d.totsamp>d.sampleWindow)return GAIN_ANALYSIS_ERROR}B<MAX_ORDER?(S.arraycopy(d.linprebuf,B,d.linprebuf,0,MAX_ORDER-B),S.arraycopy(d.rinprebuf,B,d.rinprebuf,0,MAX_ORDER-B),S.arraycopy(c,w,d.linprebuf,MAX_ORDER-B,B),S.arraycopy(a,
b,d.rinprebuf,MAX_ORDER-B,B)):(S.arraycopy(c,w+B-MAX_ORDER,d.linprebuf,0,MAX_ORDER),S.arraycopy(a,b+B-MAX_ORDER,d.rinprebuf,0,MAX_ORDER));return GAIN_ANALYSIS_OK};this.GetTitleGain=function(d){var c=d.A;var f=d.A.length,a,b=0;for(a=0;a<f;a++)b+=c[a];if(0==b)c=GAIN_NOT_ENOUGH_SAMPLES;else{b=0|Math.ceil(b*(1-.95));for(a=f;0<a--&&!(0>=(b-=c[a])););c=64.82-a/ca.STEPS_per_dB}for(f=0;f<d.A.length;f++)d.B[f]+=d.A[f],d.A[f]=0;for(f=0;f<MAX_ORDER;f++)d.linprebuf[f]=d.lstepbuf[f]=d.loutbuf[f]=d.rinprebuf[f]=
d.rstepbuf[f]=d.routbuf[f]=0;d.totsamp=0;d.lsum=d.rsum=0;return c}}function wc(){function f(c,d,a,b,f,e,l,q,g,t,k,m,n,z,E){this.vbr_q=c;this.quant_comp=d;this.quant_comp_s=a;this.expY=b;this.st_lrm=f;this.st_s=e;this.masking_adj=l;this.masking_adj_short=q;this.ath_lower=g;this.ath_curve=t;this.ath_sensitivity=k;this.interch=m;this.safejoint=n;this.sfb21mod=z;this.msfix=E}function k(c,d,a,b,f,e,l,q,g,t,k,m,n,z){this.quant_comp=d;this.quant_comp_s=a;this.safejoint=b;this.nsmsfix=f;this.st_lrm=e;this.st_s=
l;this.nsbass=q;this.scale=g;this.masking_adj=t;this.ath_lower=k;this.ath_curve=m;this.interch=n;this.sfscale=z}function r(c,d,a){var b=c.VBR==J.vbr_rh?u:v,f=c.VBR_q_frac,e=b[d],b=b[d+1];e.st_lrm+=f*(b.st_lrm-e.st_lrm);e.st_s+=f*(b.st_s-e.st_s);e.masking_adj+=f*(b.masking_adj-e.masking_adj);e.masking_adj_short+=f*(b.masking_adj_short-e.masking_adj_short);e.ath_lower+=f*(b.ath_lower-e.ath_lower);e.ath_curve+=f*(b.ath_curve-e.ath_curve);e.ath_sensitivity+=f*(b.ath_sensitivity-e.ath_sensitivity);e.interch+=
f*(b.interch-e.interch);e.msfix+=f*(b.msfix-e.msfix);b=e.vbr_q;0>b&&(b=0);9<b&&(b=9);c.VBR_q=b;c.VBR_q_frac=0;0!=a?c.quant_comp=e.quant_comp:0<Math.abs(c.quant_comp- -1)||(c.quant_comp=e.quant_comp);0!=a?c.quant_comp_short=e.quant_comp_s:0<Math.abs(c.quant_comp_short- -1)||(c.quant_comp_short=e.quant_comp_s);0!=e.expY&&(c.experimentalY=0!=e.expY);0!=a?c.internal_flags.nsPsy.attackthre=e.st_lrm:0<Math.abs(c.internal_flags.nsPsy.attackthre- -1)||(c.internal_flags.nsPsy.attackthre=e.st_lrm);0!=a?c.internal_flags.nsPsy.attackthre_s=
e.st_s:0<Math.abs(c.internal_flags.nsPsy.attackthre_s- -1)||(c.internal_flags.nsPsy.attackthre_s=e.st_s);0!=a?c.maskingadjust=e.masking_adj:0<Math.abs(c.maskingadjust-0)||(c.maskingadjust=e.masking_adj);0!=a?c.maskingadjust_short=e.masking_adj_short:0<Math.abs(c.maskingadjust_short-0)||(c.maskingadjust_short=e.masking_adj_short);0!=a?c.ATHlower=-e.ath_lower/10:0<Math.abs(10*-c.ATHlower-0)||(c.ATHlower=-e.ath_lower/10);0!=a?c.ATHcurve=e.ath_curve:0<Math.abs(c.ATHcurve- -1)||(c.ATHcurve=e.ath_curve);
0!=a?c.athaa_sensitivity=e.ath_sensitivity:0<Math.abs(c.athaa_sensitivity- -1)||(c.athaa_sensitivity=e.ath_sensitivity);0<e.interch&&(0!=a?c.interChRatio=e.interch:0<Math.abs(c.interChRatio- -1)||(c.interChRatio=e.interch));0<e.safejoint&&(c.exp_nspsytune|=e.safejoint);0<e.sfb21mod&&(c.exp_nspsytune|=e.sfb21mod<<20);0!=a?c.msfix=e.msfix:0<Math.abs(c.msfix- -1)||(c.msfix=e.msfix);0==a&&(c.VBR_q=d,c.VBR_q_frac=f)}function K(c,f,a){var b=C.nearestBitrateFullIndex(f);c.VBR=J.vbr_abr;c.VBR_mean_bitrate_kbps=
f;c.VBR_mean_bitrate_kbps=Math.min(c.VBR_mean_bitrate_kbps,320);c.VBR_mean_bitrate_kbps=Math.max(c.VBR_mean_bitrate_kbps,8);c.brate=c.VBR_mean_bitrate_kbps;320<c.VBR_mean_bitrate_kbps&&(c.disable_reservoir=!0);0<d[b].safejoint&&(c.exp_nspsytune|=2);0<d[b].sfscale&&(c.internal_flags.noise_shaping=2);if(0<Math.abs(d[b].nsbass)){var w=int(4*d[b].nsbass);0>w&&(w+=64);c.exp_nspsytune|=w<<2}0!=a?c.quant_comp=d[b].quant_comp:0<Math.abs(c.quant_comp- -1)||(c.quant_comp=d[b].quant_comp);0!=a?c.quant_comp_short=
d[b].quant_comp_s:0<Math.abs(c.quant_comp_short- -1)||(c.quant_comp_short=d[b].quant_comp_s);0!=a?c.msfix=d[b].nsmsfix:0<Math.abs(c.msfix- -1)||(c.msfix=d[b].nsmsfix);0!=a?c.internal_flags.nsPsy.attackthre=d[b].st_lrm:0<Math.abs(c.internal_flags.nsPsy.attackthre- -1)||(c.internal_flags.nsPsy.attackthre=d[b].st_lrm);0!=a?c.internal_flags.nsPsy.attackthre_s=d[b].st_s:0<Math.abs(c.internal_flags.nsPsy.attackthre_s- -1)||(c.internal_flags.nsPsy.attackthre_s=d[b].st_s);0!=a?c.scale=d[b].scale:0<Math.abs(c.scale-
-1)||(c.scale=d[b].scale);0!=a?c.maskingadjust=d[b].masking_adj:0<Math.abs(c.maskingadjust-0)||(c.maskingadjust=d[b].masking_adj);0<d[b].masking_adj?0!=a?c.maskingadjust_short=.9*d[b].masking_adj:0<Math.abs(c.maskingadjust_short-0)||(c.maskingadjust_short=.9*d[b].masking_adj):0!=a?c.maskingadjust_short=1.1*d[b].masking_adj:0<Math.abs(c.maskingadjust_short-0)||(c.maskingadjust_short=1.1*d[b].masking_adj);0!=a?c.ATHlower=-d[b].ath_lower/10:0<Math.abs(10*-c.ATHlower-0)||(c.ATHlower=-d[b].ath_lower/10);
0!=a?c.ATHcurve=d[b].ath_curve:0<Math.abs(c.ATHcurve- -1)||(c.ATHcurve=d[b].ath_curve);0!=a?c.interChRatio=d[b].interch:0<Math.abs(c.interChRatio- -1)||(c.interChRatio=d[b].interch);return f}var C;this.setModules=function(c){C=c};var u=[new f(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new f(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new f(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new f(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new f(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),
new f(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2E-4,0,0,1.95),new f(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4E-4,0,0,2.3),new f(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6E-4,0,0,2.7),new f(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7E-4,0,0,0),new f(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8E-4,0,0,0),new f(10,9,9,1,6.6,145,2,2,-36,12,-25,8E-4,0,0,0)],v=[new f(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new f(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new f(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new f(3,9,9,1,4.2,25,
-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new f(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new f(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2E-4,0,0,1.95),new f(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4E-4,0,0,2),new f(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6E-4,0,0,2),new f(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7E-4,0,0,2),new f(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8E-4,0,0,2),new f(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8E-4,0,0,2)],d=[new k(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new k(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new k(24,
9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new k(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new k(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9E-4,1),new k(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9E-4,1),new k(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8E-4,1),new k(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8E-4,1),new k(80,9,9,0,0,6.6,145,0,.95,0,0,8,7E-4,1),new k(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6E-4,1),new k(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5E-4,1),new k(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2E-4,1),new k(160,9,9,1,1.79,6,135,0,.95,
-2,5,3.5,0,1),new k(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new k(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new k(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new k(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];this.apply_preset=function(c,d,a){switch(d){case W.R3MIX:d=W.V3;c.VBR=J.vbr_mtrh;break;case W.MEDIUM:d=W.V4;c.VBR=J.vbr_rh;break;case W.MEDIUM_FAST:d=W.V4;c.VBR=J.vbr_mtrh;break;case W.STANDARD:d=W.V2;c.VBR=J.vbr_rh;break;case W.STANDARD_FAST:d=W.V2;c.VBR=J.vbr_mtrh;break;case W.EXTREME:d=W.V0;c.VBR=J.vbr_rh;
break;case W.EXTREME_FAST:d=W.V0;c.VBR=J.vbr_mtrh;break;case W.INSANE:return d=320,c.preset=d,K(c,d,a),c.VBR=J.vbr_off,d}c.preset=d;switch(d){case W.V9:return r(c,9,a),d;case W.V8:return r(c,8,a),d;case W.V7:return r(c,7,a),d;case W.V6:return r(c,6,a),d;case W.V5:return r(c,5,a),d;case W.V4:return r(c,4,a),d;case W.V3:return r(c,3,a),d;case W.V2:return r(c,2,a),d;case W.V1:return r(c,1,a),d;case W.V0:return r(c,0,a),d}if(8<=d&&320>=d)return K(c,d,a);c.preset=0;return d}}function xc(){var f;this.setModules=
function(k){f=k};this.ResvFrameBegin=function(k,r){var x=k.internal_flags,C=x.l3_side,u=f.getframebits(k);r.bits=(u-8*x.sideinfo_len)/x.mode_gr;var v=2048*x.mode_gr-8;if(320<k.brate)var d=8*int(1E3*k.brate/(k.out_samplerate/1152)/8+.5);else d=11520,k.strict_ISO&&(d=8*int(32E4/(k.out_samplerate/1152)/8+.5));x.ResvMax=d-u;x.ResvMax>v&&(x.ResvMax=v);if(0>x.ResvMax||k.disable_reservoir)x.ResvMax=0;k=r.bits*x.mode_gr+Math.min(x.ResvSize,x.ResvMax);k>d&&(k=d);C.resvDrain_pre=0;null!=x.pinfo&&(x.pinfo.mean_bits=
r.bits/2,x.pinfo.resvsize=x.ResvSize);return k};this.ResvMaxBits=function(f,r,x,C){var k=f.internal_flags,v=k.ResvSize,d=k.ResvMax;0!=C&&(v+=r);0!=(k.substep_shaping&1)&&(d*=.9);x.bits=r;10*v>9*d?(C=v-9*d/10,x.bits+=C,k.substep_shaping|=128):(C=0,k.substep_shaping&=127,f.disable_reservoir||0!=(k.substep_shaping&1)||(x.bits-=.1*r));f=v<6*k.ResvMax/10?v:6*k.ResvMax/10;f-=C;0>f&&(f=0);return f};this.ResvAdjust=function(f,r){f.ResvSize-=r.part2_3_length+r.part2_length};this.ResvFrameEnd=function(f,r){var k,
x=f.l3_side;f.ResvSize+=r*f.mode_gr;r=0;x.resvDrain_post=0;x.resvDrain_pre=0;0!=(k=f.ResvSize%8)&&(r+=k);k=f.ResvSize-r-f.ResvMax;0<k&&(r+=k);k=Math.min(8*x.main_data_begin,r)/8;x.resvDrain_pre+=8*k;r-=8*k;f.ResvSize-=8*k;x.main_data_begin-=k;x.resvDrain_post+=r;f.ResvSize-=r}}function gb(){function f(a,b){var e=a[b+0]&255,e=e<<8|a[b+1]&255,e=e<<8|a[b+2]&255;return e=e<<8|a[b+3]&255}function k(a,b,c){a[b+0]=c>>24&255;a[b+1]=c>>16&255;a[b+2]=c>>8&255;a[b+3]=c&255}function r(a,b,c){a[b+0]=c>>8&255;
a[b+1]=c&255}function K(a,b,c){return 255&(a<<b|c&~(-1<<b))}function C(a,b){var e=a.internal_flags;b[0]=K(b[0],8,255);b[1]=K(b[1],3,7);b[1]=K(b[1],1,16E3>a.out_samplerate?0:1);b[1]=K(b[1],1,a.version);b[1]=K(b[1],2,1);b[1]=K(b[1],1,a.error_protection?0:1);b[2]=K(b[2],4,e.bitrate_index);b[2]=K(b[2],2,e.samplerate_index);b[2]=K(b[2],1,0);b[2]=K(b[2],1,a.extension);b[3]=K(b[3],2,a.mode.ordinal());b[3]=K(b[3],2,e.mode_ext);b[3]=K(b[3],1,a.copyright);b[3]=K(b[3],1,a.original);b[3]=K(b[3],2,a.emphasis);
b[0]=255;var e=b[1]&241;var c=1==a.version?128:16E3>a.out_samplerate?32:64;a.VBR==J.vbr_off&&(c=a.brate);c=a.free_format?0:255&16*G.BitrateIndex(c,a.version,a.out_samplerate);b[1]=1==a.version?255&(e|10):255&(e|2);e=b[2]&13;b[2]=255&(c|e)}function u(a,b){return b=b>>8^B[(b^a)&255]}var G,d,c;this.setModules=function(a,b,f){G=a;d=b;c=f};var w=gb.NUMTOCENTRIES,a=gb.MAXFRAMESIZE,b=w+4+4+4+4+4+9+1+1+8+1+1+3+1+1+2+4+2+2,B=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,
52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8E3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16E3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,
60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32E3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,
29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];this.addVbrFrame=function(a){var b=a.internal_flags;var e=b.VBR_seek_table;a=v.bitrate_table[a.version][b.bitrate_index];
e.nVbrNumFrames++;e.sum+=a;e.seen++;if(!(e.seen<e.want)&&(e.pos<e.size&&(e.bag[e.pos]=e.sum,e.pos++,e.seen=0),e.pos==e.size)){for(a=1;a<e.size;a+=2)e.bag[a/2]=e.bag[a];e.want*=2;e.pos/=2}};this.getVbrTag=function(a){var b=new VBRTagData,e=0;b.flags=0;var c=a[e+1]>>3&1,d=a[e+2]>>2&3,k=a[e+3]>>6&3,m=a[e+2]>>4&15,m=v.bitrate_table[c][m];b.samprate=14==a[e+1]>>4?v.samplerate_table[2][d]:v.samplerate_table[c][d];d=e=0!=c?3!=k?e+36:e+21:3!=k?e+21:e+13;if(!(new String(a,d,4(),null)).equals("Xing")&&!(new String(a,
d,4(),null)).equals("Info"))return null;e+=4;b.hId=c;d=b.flags=f(a,e);e+=4;0!=(d&1)&&(b.frames=f(a,e),e+=4);0!=(d&2)&&(b.bytes=f(a,e),e+=4);if(0!=(d&4)){if(null!=b.toc)for(k=0;k<w;k++)b.toc[k]=a[e+k];e+=w}b.vbrScale=-1;0!=(d&8)&&(b.vbrScale=f(a,e),e+=4);b.headersize=72E3*(c+1)*m/b.samprate;e+=21;c=a[e+0]<<4;c+=a[e+1]>>4;m=(a[e+1]&15)<<8;m+=a[e+2]&255;if(0>c||3E3<c)c=-1;if(0>m||3E3<m)m=-1;b.encDelay=c;b.encPadding=m;return b};this.InitVbrTag=function(e){var c=e.internal_flags;var f=1==e.version?128:
16E3>e.out_samplerate?32:64;e.VBR==J.vbr_off&&(f=e.brate);f=72E3*(e.version+1)*f/e.out_samplerate;var g=c.sideinfo_len+b;c.VBR_seek_table.TotalFrameSize=f;if(f<g||f>a)e.bWriteVbrTag=!1;else for(c.VBR_seek_table.nVbrNumFrames=0,c.VBR_seek_table.nBytesWritten=0,c.VBR_seek_table.sum=0,c.VBR_seek_table.seen=0,c.VBR_seek_table.want=1,c.VBR_seek_table.pos=0,null==c.VBR_seek_table.bag&&(c.VBR_seek_table.bag=new int[400],c.VBR_seek_table.size=400),f=new Int8Array(a),C(e,f),c=c.VBR_seek_table.TotalFrameSize,
g=0;g<c;++g)d.add_dummy_byte(e,f[g]&255,1)};this.updateMusicCRC=function(a,b,c,d){for(var e=0;e<d;++e)a[0]=u(b[c+e],a[0])};this.getLameTagFrame=function(a,b){var e=a.internal_flags;if(!a.bWriteVbrTag||e.Class_ID!=W.LAME_ID||0>=e.VBR_seek_table.pos)return 0;if(b.length<e.VBR_seek_table.TotalFrameSize)return e.VBR_seek_table.TotalFrameSize;qa.fill(b,0,e.VBR_seek_table.TotalFrameSize,0);C(a,b);var g=new Int8Array(w);if(a.free_format)for(var f=1;f<w;++f)g[f]=255&255*f/100;else{var l=e.VBR_seek_table;
if(!(0>=l.pos))for(f=1;f<w;++f){var m=0|Math.floor(f/w*l.pos);m>l.pos-1&&(m=l.pos-1);m=0|256*l.bag[m]/l.sum;255<m&&(m=255);g[f]=255&m}}m=e.sideinfo_len;a.error_protection&&(m-=2);b[m++]=0;b[m++]=0;b[m++]=0;b[m++]=0;k(b,m,15);m+=4;k(b,m,e.VBR_seek_table.nVbrNumFrames);m+=4;l=e.VBR_seek_table.nBytesWritten+e.VBR_seek_table.TotalFrameSize;k(b,m,0|l);m+=4;S.arraycopy(g,0,b,m,g.length);m+=g.length;a.error_protection&&d.CRC_writeheader(e,b);for(var n=0,f=0;f<m;f++)n=u(b[f],n);var g=m,f=n,z=a.internal_flags,
m=0,n=a.encoder_delay,E=a.encoder_padding,h=100-10*a.VBR_q-a.quality,p=c.getLameVeryShortVersion();var A=[1,5,3,2,4,0,3];var y=0|(255<a.lowpassfreq/100+.5?255:a.lowpassfreq/100+.5),B=0,x=0,R=a.internal_flags.noise_shaping,X=0,I,H=0!=(a.exp_nspsytune&1);var M=0!=(a.exp_nspsytune&2);var Q=I=!1,V=a.internal_flags.nogap_total,N=a.internal_flags.nogap_current,v=a.ATHtype;switch(a.VBR){case vbr_abr:var Qa=a.VBR_mean_bitrate_kbps;break;case vbr_off:Qa=a.brate;break;default:Qa=a.VBR_min_bitrate_kbps}A=0+
(a.VBR.ordinal()<A.length?A[a.VBR.ordinal()]:0);z.findReplayGain&&(510<z.RadioGain&&(z.RadioGain=510),-510>z.RadioGain&&(z.RadioGain=-510),x=11264,x=0<=z.RadioGain?x|z.RadioGain:x|512|-z.RadioGain);z.findPeakSample&&(B=Math.abs(0|z.PeakSample/32767*Math.pow(2,23)+.5));-1!=V&&(0<N&&(Q=!0),N<V-1&&(I=!0));H=v+((H?1:0)<<4)+((M?1:0)<<5)+((I?1:0)<<6)+((Q?1:0)<<7);0>h&&(h=0);switch(a.mode){case MONO:M=0;break;case STEREO:M=1;break;case DUAL_CHANNEL:M=2;break;case JOINT_STEREO:M=a.force_ms?4:3;break;default:M=
7}I=32E3>=a.in_samplerate?0:48E3==a.in_samplerate?2:48E3<a.in_samplerate?3:1;if(a.short_blocks==pa.short_block_forced||a.short_blocks==pa.short_block_dispensed||-1==a.lowpassfreq&&-1==a.highpassfreq||a.scale_left<a.scale_right||a.scale_left>a.scale_right||a.disable_reservoir&&320>a.brate||a.noATH||a.ATHonly||0==v||32E3>=a.in_samplerate)X=1;R=R+(M<<2)+(X<<5)+(I<<6);z=z.nMusicCRC;k(b,g+m,h);m+=4;for(h=0;9>h;h++)b[g+m+h]=255&p.charAt(h);m+=9;b[g+m]=255&A;m++;b[g+m]=255&y;m++;k(b,g+m,B);m+=4;r(b,g+m,
x);m+=2;r(b,g+m,0);m+=2;b[g+m]=255&H;m++;b[g+m]=255<=Qa?255:255&Qa;m++;b[g+m]=255&n>>4;b[g+m+1]=255&(n<<4)+(E>>8);b[g+m+2]=255&E;m+=3;b[g+m]=255&R;m++;b[g+m++]=0;r(b,g+m,a.preset);m+=2;k(b,g+m,l);m+=4;r(b,g+m,z);m+=2;for(a=0;a<m;a++)f=u(b[g+a],f);r(b,g+m,f);return e.VBR_seek_table.TotalFrameSize};this.putVbrTag=function(b,c){if(0>=b.internal_flags.VBR_seek_table.pos)return-1;c.seek(c.length());if(0==c.length())return-1;c.seek(0);var e=new Int8Array(10);c.readFully(e);e=(new String(e,"ISO-8859-1")).startsWith("ID3")?
0:((e[6]&127)<<21|(e[7]&127)<<14|(e[8]&127)<<7|e[9]&127)+e.length;c.seek(e);e=new Int8Array(a);b=getLameTagFrame(b,e);if(b>e.length)return-1;if(1>b)return 0;c.write(e,0,b);return 0}}function da(){function x(a,b,c){for(;0<c;){if(0==D){D=8;t++;if(a.header[a.w_ptr].write_timing==g){var e=a;S.arraycopy(e.header[e.w_ptr].buf,0,q,t,e.sideinfo_len);t+=e.sideinfo_len;g+=8*e.sideinfo_len;e.w_ptr=e.w_ptr+1&ia.MAX_HEADER_BUF-1}q[t]=0}e=Math.min(c,D);c-=e;D-=e;q[t]|=b>>c<<D;g+=e}}function k(a,b){var c=a.internal_flags,
d;8<=b&&(x(c,76,8),b-=8);8<=b&&(x(c,65,8),b-=8);8<=b&&(x(c,77,8),b-=8);8<=b&&(x(c,69,8),b-=8);if(32<=b){var h=e.getLameShortVersion();if(32<=b)for(d=0;d<h.length&&8<=b;++d)b-=8,x(c,h.charAt(d),8)}for(;1<=b;--b)x(c,c.ancillary_flag,1),c.ancillary_flag^=a.disable_reservoir?0:1}function r(a,b,c){for(var e=a.header[a.h_ptr].ptr;0<c;){var h=Math.min(c,8-(e&7));c-=h;a.header[a.h_ptr].buf[e>>3]|=b>>c<<8-(e&7)-h;e+=h}a.header[a.h_ptr].ptr=e}function K(a,b){a<<=8;for(var c=0;8>c;c++)a<<=1,b<<=1,0!=((b^a)&
65536)&&(b^=32773);return b}function C(a,b){var c=v.ht[b.count1table_select+32],e,h=0,d=b.big_values,g=b.big_values;for(e=(b.count1-b.big_values)/4;0<e;--e){var f=0,m=0;var n=b.l3_enc[d+0];0!=n&&(m+=8,0>b.xr[g+0]&&f++);n=b.l3_enc[d+1];0!=n&&(m+=4,f*=2,0>b.xr[g+1]&&f++);n=b.l3_enc[d+2];0!=n&&(m+=2,f*=2,0>b.xr[g+2]&&f++);n=b.l3_enc[d+3];0!=n&&(m++,f*=2,0>b.xr[g+3]&&f++);d+=4;g+=4;x(a,f+c.table[m],c.hlen[m]);h+=c.hlen[m]}return h}function u(a,b,c,e,h){var d=v.ht[b],g=0;if(0==b)return g;for(;c<e;c+=2){var f=
0,m=0,n=d.xlen,l=d.xlen,q=0,I=h.l3_enc[c],k=h.l3_enc[c+1];0!=I&&(0>h.xr[c]&&q++,f--);15<b&&(14<I&&(q|=I-15<<1,m=n,I=15),14<k&&(l=k-15,q<<=n,q|=l,m+=n,k=15),l=16);0!=k&&(q<<=1,0>h.xr[c+1]&&q++,f--);I=I*l+k;m-=f;f+=d.hlen[I];x(a,d.table[I],f);x(a,q,m);g+=f+m}return g}function G(a,b){var c=3*a.scalefac_band.s[3];c>b.big_values&&(c=b.big_values);var e=u(a,b.table_select[0],0,c,b);return e+=u(a,b.table_select[1],c,b.big_values,b)}function d(a,b){var c=b.big_values;var e=b.region0_count+1;var h=a.scalefac_band.l[e];
e+=b.region1_count+1;var d=a.scalefac_band.l[e];h>c&&(h=c);d>c&&(d=c);e=u(a,b.table_select[0],0,h,b);e+=u(a,b.table_select[1],h,d,b);return e+=u(a,b.table_select[2],d,c,b)}function c(){this.total=0}function w(b,c){var e=b.internal_flags;var d=e.w_ptr;var h=e.h_ptr-1;-1==h&&(h=ia.MAX_HEADER_BUF-1);var f=e.header[h].write_timing-g;c.total=f;if(0<=f){var m=1+h-d;h<d&&(m=1+h-d+ia.MAX_HEADER_BUF);f-=8*m*e.sideinfo_len}b=a.getframebits(b);f+=b;c.total+=b;c.total=0!=c.total%8?1+c.total/8:c.total/8;c.total+=
t+1;0>f&&S.err.println("strange error flushing buffer ... \n");return f}var a=this,b=null,B=null,e=null,l=null;this.setModules=function(a,c,d,f){b=a;B=c;e=d;l=f};var q=null,g=0,t=0,D=0;this.getframebits=function(a){var b=a.internal_flags;return 8*(0|72E3*(a.version+1)*(0!=b.bitrate_index?v.bitrate_table[a.version][b.bitrate_index]:a.brate)/a.out_samplerate+b.padding)};this.CRC_writeheader=function(a,b){var c=K(b[2]&255,65535);c=K(b[3]&255,c);for(var e=6;e<a.sideinfo_len;e++)c=K(b[e]&255,c);b[4]=byte(c>>
8);b[5]=byte(c&255)};this.flush_bitstream=function(a){var e=a.internal_flags,d;var f=e.l3_side;0>(d=w(a,new c))||(k(a,d),e.ResvSize=0,f.main_data_begin=0,e.findReplayGain&&(f=b.GetTitleGain(e.rgdata),e.RadioGain=Math.floor(10*f+.5)|0),e.findPeakSample&&(e.noclipGainChange=Math.ceil(200*Math.log10(e.PeakSample/32767))|0,0<e.noclipGainChange?EQ(a.scale,1)||EQ(a.scale,0)?e.noclipScale=Math.floor(32767/e.PeakSample*100)/100:e.noclipScale=-1:e.noclipScale=-1))};this.add_dummy_byte=function(a,b,c){a=a.internal_flags;
for(var e;0<c--;){e=b;for(var h=8;0<h;){0==D&&(D=8,t++,q[t]=0);var d=Math.min(h,D);h-=d;D-=d;q[t]|=e>>h<<D;g+=d}for(e=0;e<ia.MAX_HEADER_BUF;++e)a.header[e].write_timing+=8}};this.format_bitstream=function(a){var b=a.internal_flags;var e=b.l3_side;var m=this.getframebits(a);k(a,e.resvDrain_pre);var h,p=a.internal_flags,l,q;var t=p.l3_side;p.header[p.h_ptr].ptr=0;qa.fill(p.header[p.h_ptr].buf,0,p.sideinfo_len,0);16E3>a.out_samplerate?r(p,4094,12):r(p,4095,12);r(p,a.version,1);r(p,1,2);r(p,a.error_protection?
0:1,1);r(p,p.bitrate_index,4);r(p,p.samplerate_index,2);r(p,p.padding,1);r(p,a.extension,1);r(p,a.mode.ordinal(),2);r(p,p.mode_ext,2);r(p,a.copyright,1);r(p,a.original,1);r(p,a.emphasis,2);a.error_protection&&r(p,0,16);if(1==a.version){r(p,t.main_data_begin,9);2==p.channels_out?r(p,t.private_bits,3):r(p,t.private_bits,5);for(q=0;q<p.channels_out;q++)for(h=0;4>h;h++)r(p,t.scfsi[q][h],1);for(l=0;2>l;l++)for(q=0;q<p.channels_out;q++)h=t.tt[l][q],r(p,h.part2_3_length+h.part2_length,12),r(p,h.big_values/
2,9),r(p,h.global_gain,8),r(p,h.scalefac_compress,4),h.block_type!=f.NORM_TYPE?(r(p,1,1),r(p,h.block_type,2),r(p,h.mixed_block_flag,1),14==h.table_select[0]&&(h.table_select[0]=16),r(p,h.table_select[0],5),14==h.table_select[1]&&(h.table_select[1]=16),r(p,h.table_select[1],5),r(p,h.subblock_gain[0],3),r(p,h.subblock_gain[1],3),r(p,h.subblock_gain[2],3)):(r(p,0,1),14==h.table_select[0]&&(h.table_select[0]=16),r(p,h.table_select[0],5),14==h.table_select[1]&&(h.table_select[1]=16),r(p,h.table_select[1],
5),14==h.table_select[2]&&(h.table_select[2]=16),r(p,h.table_select[2],5),r(p,h.region0_count,4),r(p,h.region1_count,3)),r(p,h.preflag,1),r(p,h.scalefac_scale,1),r(p,h.count1table_select,1)}else for(r(p,t.main_data_begin,8),r(p,t.private_bits,p.channels_out),q=l=0;q<p.channels_out;q++)h=t.tt[l][q],r(p,h.part2_3_length+h.part2_length,12),r(p,h.big_values/2,9),r(p,h.global_gain,8),r(p,h.scalefac_compress,9),h.block_type!=f.NORM_TYPE?(r(p,1,1),r(p,h.block_type,2),r(p,h.mixed_block_flag,1),14==h.table_select[0]&&
(h.table_select[0]=16),r(p,h.table_select[0],5),14==h.table_select[1]&&(h.table_select[1]=16),r(p,h.table_select[1],5),r(p,h.subblock_gain[0],3),r(p,h.subblock_gain[1],3),r(p,h.subblock_gain[2],3)):(r(p,0,1),14==h.table_select[0]&&(h.table_select[0]=16),r(p,h.table_select[0],5),14==h.table_select[1]&&(h.table_select[1]=16),r(p,h.table_select[1],5),14==h.table_select[2]&&(h.table_select[2]=16),r(p,h.table_select[2],5),r(p,h.region0_count,4),r(p,h.region1_count,3)),r(p,h.scalefac_scale,1),r(p,h.count1table_select,
1);a.error_protection&&CRC_writeheader(p,p.header[p.h_ptr].buf);t=p.h_ptr;p.h_ptr=t+1&ia.MAX_HEADER_BUF-1;p.header[p.h_ptr].write_timing=p.header[t].write_timing+m;p.h_ptr==p.w_ptr&&S.err.println("Error: MAX_HEADER_BUF too small in bitstream.c \n");var p=8*b.sideinfo_len,D,B=0,u=a.internal_flags,I=u.l3_side;if(1==a.version)for(q=0;2>q;q++)for(h=0;h<u.channels_out;h++){t=I.tt[q][h];var H=fb.slen1_tab[t.scalefac_compress];var M=fb.slen2_tab[t.scalefac_compress];for(l=D=0;l<t.sfbdivide;l++)-1!=t.scalefac[l]&&
(x(u,t.scalefac[l],H),D+=H);for(;l<t.sfbmax;l++)-1!=t.scalefac[l]&&(x(u,t.scalefac[l],M),D+=M);D=t.block_type==f.SHORT_TYPE?D+G(u,t):D+d(u,t);D+=C(u,t);B+=D}else for(h=q=0;h<u.channels_out;h++){t=I.tt[q][h];var Q,V=0;var N=l=D=0;if(t.block_type==f.SHORT_TYPE){for(;4>N;N++)for(M=t.sfb_partition_table[N]/3,H=t.slen[N],Q=0;Q<M;Q++,l++)x(u,Math.max(t.scalefac[3*l+0],0),H),x(u,Math.max(t.scalefac[3*l+1],0),H),x(u,Math.max(t.scalefac[3*l+2],0),H),V+=3*H;D+=G(u,t)}else{for(;4>N;N++)for(M=t.sfb_partition_table[N],
H=t.slen[N],Q=0;Q<M;Q++,l++)x(u,Math.max(t.scalefac[l],0),H),V+=H;D+=d(u,t)}D+=C(u,t);B+=V+D}p+=B;k(a,e.resvDrain_post);p+=e.resvDrain_post;e.main_data_begin+=(m-p)/8;w(a,new c)!=b.ResvSize&&S.err.println("Internal buffer inconsistency. flushbits <> ResvSize");8*e.main_data_begin!=b.ResvSize&&(S.err.printf("bit reservoir error: \nl3_side.main_data_begin: %d \nResvoir size:             %d \nresv drain (post)         %d \nresv drain (pre)          %d \nheader and sideinfo:      %d \ndata bits:                %d \ntotal bits:               %d (remainder: %d) \nbitsperframe:             %d \n",
8*e.main_data_begin,b.ResvSize,e.resvDrain_post,e.resvDrain_pre,8*b.sideinfo_len,p-e.resvDrain_post-8*b.sideinfo_len,p,p%8,m),S.err.println("This is a fatal error.  It has several possible causes:"),S.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),S.err.println(" 9%%  Your system is overclocked"),S.err.println(" 1%%  bug in LAME encoding library"),b.ResvSize=8*e.main_data_begin);if(1E9<g){for(a=0;a<ia.MAX_HEADER_BUF;++a)b.header[a].write_timing-=g;g=0}return 0};
this.copy_buffer=function(a,c,e,d,h){var f=t+1;if(0>=f)return 0;if(0!=d&&f>d)return-1;S.arraycopy(q,0,c,e,f);t=-1;D=0;if(0!=h&&(d=U(1),d[0]=a.nMusicCRC,l.updateMusicCRC(d,c,e,f),a.nMusicCRC=d[0],0<f&&(a.VBR_seek_table.nBytesWritten+=f),a.decode_on_the_fly)){d=ha([2,1152]);h=f;for(var g=-1,m;0!=g;)if(g=B.hip_decode1_unclipped(a.hip,c,e,h,d[0],d[1]),h=0,-1==g&&(g=0),0<g){if(a.findPeakSample){for(m=0;m<g;m++)d[0][m]>a.PeakSample?a.PeakSample=d[0][m]:-d[0][m]>a.PeakSample&&(a.PeakSample=-d[0][m]);if(1<
a.channels_out)for(m=0;m<g;m++)d[1][m]>a.PeakSample?a.PeakSample=d[1][m]:-d[1][m]>a.PeakSample&&(a.PeakSample=-d[1][m])}if(a.findReplayGain&&b.AnalyzeSamples(a.rgdata,d[0],0,d[1],0,g,a.channels_out)==ca.GAIN_ANALYSIS_ERROR)return-6}}return f};this.init_bit_stream_w=function(a){q=new Int8Array(W.LAME_MAXMP3BUFFER);a.h_ptr=a.w_ptr=0;a.header[a.h_ptr].write_timing=0;t=-1;g=D=0}}function ba(f,k,r,v){this.xlen=f;this.linmax=k;this.table=r;this.hlen=v}function Fa(f){this.bits=f}function Fb(){this.bits=
this.over_SSD=this.over_count=this.max_noise=this.tot_noise=this.over_noise=0}function yc(){this.setModules=function(f,k){}}function zc(){this.floor=this.decay=this.adjustLimit=this.adjust=this.aaSensitivityP=this.useAdjust=0;this.l=G(f.SBMAX_l);this.s=G(f.SBMAX_s);this.psfb21=G(f.PSFB21);this.psfb12=G(f.PSFB12);this.cb_l=G(f.CBANDS);this.cb_s=G(f.CBANDS);this.eql_w=G(f.BLKSIZE/2)}function Ac(){this.scale_right=this.scale_left=this.scale=this.out_samplerate=this.in_samplerate=this.num_channels=this.num_samples=
this.class_id=0;this.decode_only=this.bWriteVbrTag=this.analysis=!1;this.quality=0;this.mode=ka.STEREO;this.write_id3tag_automatic=this.decode_on_the_fly=this.findReplayGain=this.free_format=this.force_ms=!1;this.error_protection=this.emphasis=this.extension=this.original=this.copyright=this.compression_ratio=this.brate=0;this.disable_reservoir=this.strict_ISO=!1;this.quant_comp_short=this.quant_comp=0;this.experimentalY=!1;this.preset=this.exp_nspsytune=this.experimentalZ=0;this.VBR=null;this.maskingadjust_short=
this.maskingadjust=this.highpasswidth=this.lowpasswidth=this.highpassfreq=this.lowpassfreq=this.VBR_hard_min=this.VBR_max_bitrate_kbps=this.VBR_min_bitrate_kbps=this.VBR_mean_bitrate_kbps=this.VBR_q=this.VBR_q_frac=0;this.noATH=this.ATHshort=this.ATHonly=!1;this.athaa_sensitivity=this.athaa_loudapprox=this.athaa_type=this.ATHlower=this.ATHcurve=this.ATHtype=0;this.short_blocks=null;this.useTemporal=!1;this.msfix=this.interChRatio=0;this.tune=!1;this.lame_allocated_gfp=this.frameNum=this.framesize=
this.encoder_padding=this.encoder_delay=this.version=this.tune_value_a=0;this.internal_flags=null}function Bc(x){this.quantize=x;this.iteration_loop=function(k,r,x,v){var u=k.internal_flags,C=G(ra.SFBMAX),d=G(576),c=U(2),w=u.l3_side;var a=new Fa(0);this.quantize.rv.ResvFrameBegin(k,a);a=a.bits;for(var b=0;b<u.mode_gr;b++){var B=this.quantize.qupvt.on_pe(k,r,c,a,b,b);u.mode_ext==f.MPG_MD_MS_LR&&(this.quantize.ms_convert(u.l3_side,b),this.quantize.qupvt.reduce_side(c,x[b],a,B));for(B=0;B<u.channels_out;B++){var e=
w.tt[b][B];if(e.block_type!=f.SHORT_TYPE){var l=0;l=u.PSY.mask_adjust-l}else l=0,l=u.PSY.mask_adjust_short-l;u.masking_lower=Math.pow(10,.1*l);this.quantize.init_outer_loop(u,e);this.quantize.init_xrpow(u,e,d)&&(this.quantize.qupvt.calc_xmin(k,v[b][B],e,C),this.quantize.outer_loop(k,e,C,d,B,c[B]));this.quantize.iteration_finish_one(u,b,B)}}this.quantize.rv.ResvFrameEnd(u,a)}}function Cc(){this.linprebuf=G(2*ca.MAX_ORDER);this.linpre=0;this.lstepbuf=G(ca.MAX_SAMPLES_PER_WINDOW+ca.MAX_ORDER);this.lstep=
0;this.loutbuf=G(ca.MAX_SAMPLES_PER_WINDOW+ca.MAX_ORDER);this.lout=0;this.rinprebuf=G(2*ca.MAX_ORDER);this.rinpre=0;this.rstepbuf=G(ca.MAX_SAMPLES_PER_WINDOW+ca.MAX_ORDER);this.rstep=0;this.routbuf=G(ca.MAX_SAMPLES_PER_WINDOW+ca.MAX_ORDER);this.first=this.freqindex=this.rsum=this.lsum=this.totsamp=this.sampleWindow=this.rout=0;this.A=U(0|ca.STEPS_per_dB*ca.MAX_dB);this.B=U(0|ca.STEPS_per_dB*ca.MAX_dB)}function ma(x,k,r,v){this.l=U(1+f.SBMAX_l);this.s=U(1+f.SBMAX_s);this.psfb21=U(1+f.PSFB21);this.psfb12=
U(1+f.PSFB12);var C=this.l,u=this.s;4==arguments.length&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],S.arraycopy(this.arrL,0,C,0,Math.min(this.arrL.length,this.l.length)),S.arraycopy(this.arrS,0,u,0,Math.min(this.arrS.length,this.s.length)),S.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),S.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}function Y(){function x(a,b){b=C.ATHformula(b,
a);return b=Math.pow(10,(b-100)/10+a.ATHlower)}function k(a){this.s=a}var r=null,v=null,C=null;this.setModules=function(a,b,c){r=a;v=b;C=c};this.IPOW20=function(b){return a[b]};var u=Y.IXMAX_VAL+2,fa=Y.Q_MAX,d=Y.Q_MAX2;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var c=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,
0];this.pretab=c;this.sfBandIndex=[new ma([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new ma([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new ma([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,
0,0,0,0,0],[0,0,0,0,0,0,0]),new ma([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new ma([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new ma([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,
0,0,0,0,0]),new ma([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new ma([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new ma([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0,8,16,24,36,52,72,96,124,160,162,164,166,192],[0,0,0,0,0,0,0],[0,
0,0,0,0,0,0])];var w=G(fa+d+1),a=G(fa),b=G(u),B=G(u);this.adj43=B;this.iteration_init=function(c){var e=c.internal_flags,q=e.l3_side;if(0==e.iteration_init_init){e.iteration_init_init=1;q.main_data_begin=0;for(var g,t,k=c.internal_flags.ATH.l,m=c.internal_flags.ATH.psfb21,n=c.internal_flags.ATH.s,z=c.internal_flags.ATH.psfb12,E=c.internal_flags,h=c.out_samplerate,p=0;p<f.SBMAX_l;p++)for(t=E.scalefac_band.l[p],q=E.scalefac_band.l[p+1],k[p]=sb.MAX_VALUE;t<q;t++)g=t*h/1152,g=x(c,g),k[p]=Math.min(k[p],
g);for(p=0;p<f.PSFB21;p++)for(t=E.scalefac_band.psfb21[p],q=E.scalefac_band.psfb21[p+1],m[p]=sb.MAX_VALUE;t<q;t++)g=t*h/1152,g=x(c,g),m[p]=Math.min(m[p],g);for(p=0;p<f.SBMAX_s;p++){t=E.scalefac_band.s[p];q=E.scalefac_band.s[p+1];for(n[p]=sb.MAX_VALUE;t<q;t++)g=t*h/384,g=x(c,g),n[p]=Math.min(n[p],g);n[p]*=E.scalefac_band.s[p+1]-E.scalefac_band.s[p]}for(p=0;p<f.PSFB12;p++){t=E.scalefac_band.psfb12[p];q=E.scalefac_band.psfb12[p+1];for(z[p]=sb.MAX_VALUE;t<q;t++)g=t*h/384,g=x(c,g),z[p]=Math.min(z[p],g);
z[p]*=E.scalefac_band.s[13]-E.scalefac_band.s[12]}if(c.noATH){for(p=0;p<f.SBMAX_l;p++)k[p]=1E-20;for(p=0;p<f.PSFB21;p++)m[p]=1E-20;for(p=0;p<f.SBMAX_s;p++)n[p]=1E-20;for(p=0;p<f.PSFB12;p++)z[p]=1E-20}E.ATH.floor=10*Math.log10(x(c,-1));b[0]=0;for(q=1;q<u;q++)b[q]=Math.pow(q,4/3);for(q=0;q<u-1;q++)B[q]=q+1-Math.pow(.5*(b[q]+b[q+1]),.75);B[q]=.5;for(q=0;q<fa;q++)a[q]=Math.pow(2,-.1875*(q-210));for(q=0;q<=fa+d;q++)w[q]=Math.pow(2,.25*(q-210-d));r.huffman_init(e);q=c.exp_nspsytune>>2&63;32<=q&&(q-=64);
k=Math.pow(10,q/4/10);q=c.exp_nspsytune>>8&63;32<=q&&(q-=64);m=Math.pow(10,q/4/10);q=c.exp_nspsytune>>14&63;32<=q&&(q-=64);n=Math.pow(10,q/4/10);q=c.exp_nspsytune>>20&63;32<=q&&(q-=64);z=n*Math.pow(10,q/4/10);for(q=0;q<f.SBMAX_l;q++)c=6>=q?k:13>=q?m:20>=q?n:z,e.nsPsy.longfact[q]=c;for(q=0;q<f.SBMAX_s;q++)c=5>=q?k:10>=q?m:11>=q?n:z,e.nsPsy.shortfact[q]=c}};this.on_pe=function(a,b,c,d,f,k){var e=a.internal_flags,g=0,l=U(2),q,g=new Fa(g);a=v.ResvMaxBits(a,d,g,k);var g=g.bits,h=g+a;h>ia.MAX_BITS_PER_GRANULE&&
(h=ia.MAX_BITS_PER_GRANULE);for(q=k=0;q<e.channels_out;++q)c[q]=Math.min(ia.MAX_BITS_PER_CHANNEL,g/e.channels_out),l[q]=0|c[q]*b[f][q]/700-c[q],l[q]>3*d/4&&(l[q]=3*d/4),0>l[q]&&(l[q]=0),l[q]+c[q]>ia.MAX_BITS_PER_CHANNEL&&(l[q]=Math.max(0,ia.MAX_BITS_PER_CHANNEL-c[q])),k+=l[q];if(k>a)for(q=0;q<e.channels_out;++q)l[q]=a*l[q]/k;for(q=0;q<e.channels_out;++q)c[q]+=l[q],a-=l[q];for(q=k=0;q<e.channels_out;++q)k+=c[q];if(k>ia.MAX_BITS_PER_GRANULE)for(q=0;q<e.channels_out;++q)c[q]*=ia.MAX_BITS_PER_GRANULE,
c[q]/=k;return h};this.reduce_side=function(a,b,c,d){b=.33*(.5-b)/.5;0>b&&(b=0);.5<b&&(b=.5);b=0|.5*b*(a[0]+a[1]);b>ia.MAX_BITS_PER_CHANNEL-a[0]&&(b=ia.MAX_BITS_PER_CHANNEL-a[0]);0>b&&(b=0);125<=a[1]&&(125<a[1]-b?(a[0]<c&&(a[0]+=b),a[1]-=b):(a[0]+=a[1]-125,a[1]=125));b=a[0]+a[1];b>d&&(a[0]=d*a[0]/b,a[1]=d*a[1]/b)};this.athAdjust=function(a,b,c){b=Z.FAST_LOG10_X(b,10);a*=a;var e=0;b-=c;1E-20<a&&(e=1+Z.FAST_LOG10_X(a,10/90.30873362));0>e&&(e=0);return Math.pow(10,.1*(b*e+(c+90.30873362-94.82444863)))};
this.calc_xmin=function(a,b,c,d){var e=0,g=a.internal_flags,m,l=0,q=0,k=g.ATH,h=c.xr,p=a.VBR==J.vbr_mtrh?1:0,A=g.masking_lower;if(a.VBR==J.vbr_mtrh||a.VBR==J.vbr_mt)A=1;for(m=0;m<c.psy_lmax;m++){var w=a.VBR==J.vbr_rh||a.VBR==J.vbr_mtrh?athAdjust(k.adjust,k.l[m],k.floor):k.adjust*k.l[m];var r=c.width[m];var B=w/r;var x=2.220446049250313E-16;var u=r>>1;var I=0;do{var H=h[l]*h[l];I+=H;x+=H<B?H:B;l++;H=h[l]*h[l];I+=H;x+=H<B?H:B;l++}while(0<--u);I>w&&q++;m==f.SBPSY_l&&(u=w*g.nsPsy.longfact[m],x<u&&(x=
u));0!=p&&(w=x);a.ATHonly||(x=b.en.l[m],0<x&&(u=I*b.thm.l[m]*A/x,0!=p&&(u*=g.nsPsy.longfact[m]),w<u&&(w=u)));0!=p?d[e++]=w:d[e++]=w*g.nsPsy.longfact[m]}w=575;if(c.block_type!=f.SHORT_TYPE)for(I=576;0!=I--&&da.EQ(h[I],0);)w=I;c.max_nonzero_coeff=w;for(var M=c.sfb_smin;m<c.psymax;M++,m+=3){var Q;var V=a.VBR==J.vbr_rh||a.VBR==J.vbr_mtrh?athAdjust(k.adjust,k.s[M],k.floor):k.adjust*k.s[M];r=c.width[m];for(Q=0;3>Q;Q++){I=0;u=r>>1;B=V/r;x=2.220446049250313E-16;do H=h[l]*h[l],I+=H,x+=H<B?H:B,l++,H=h[l]*h[l],
I+=H,x+=H<B?H:B,l++;while(0<--u);I>V&&q++;M==f.SBPSY_s&&(u=V*g.nsPsy.shortfact[M],x<u&&(x=u));w=0!=p?x:V;a.ATHonly||a.ATHshort||(x=b.en.s[M][Q],0<x&&(u=I*b.thm.s[M][Q]*A/x,0!=p&&(u*=g.nsPsy.shortfact[M]),w<u&&(w=u)));0!=p?d[e++]=w:d[e++]=w*g.nsPsy.shortfact[M]}a.useTemporal&&(d[e-3]>d[e-3+1]&&(d[e-3+1]+=(d[e-3]-d[e-3+1])*g.decay),d[e-3+1]>d[e-3+2]&&(d[e-3+2]+=(d[e-3+1]-d[e-3+2])*g.decay))}return q};this.calc_noise_core=function(a,c,d,f){var e=0,g=c.s,m=a.l3_enc;if(g>a.count1)for(;0!=d--;){var l=a.xr[g];
g++;e+=l*l;l=a.xr[g];g++;e+=l*l}else if(g>a.big_values){var q=G(2);q[0]=0;for(q[1]=f;0!=d--;)l=Math.abs(a.xr[g])-q[m[g]],g++,e+=l*l,l=Math.abs(a.xr[g])-q[m[g]],g++,e+=l*l}else for(;0!=d--;)l=Math.abs(a.xr[g])-b[m[g]]*f,g++,e+=l*l,l=Math.abs(a.xr[g])-b[m[g]]*f,g++,e+=l*l;c.s=g;return e};this.calc_noise=function(a,b,d,f,t){var e=0,g=0,l,q=0,r=0,h=0,p=-20,A=0,y=a.scalefac,x=0;for(l=f.over_SSD=0;l<a.psymax;l++){var B=a.global_gain-(y[x++]+(0!=a.preflag?c[l]:0)<<a.scalefac_scale+1)-8*a.subblock_gain[a.window[l]];
if(null!=t&&t.step[l]==B){var u=t.noise[l];A+=a.width[l];d[e++]=u/b[g++];u=t.noise_log[l]}else{u=w[B+Y.Q_MAX2];var v=a.width[l]>>1;A+a.width[l]>a.max_nonzero_coeff&&(v=a.max_nonzero_coeff-A+1,v=0<v?v>>1:0);A=new k(A);u=this.calc_noise_core(a,A,v,u);A=A.s;null!=t&&(t.step[l]=B,t.noise[l]=u);u=d[e++]=u/b[g++];u=Z.FAST_LOG10(Math.max(u,1E-20));null!=t&&(t.noise_log[l]=u)}null!=t&&(t.global_gain=a.global_gain);h+=u;0<u&&(B=Math.max(0|10*u+.5,1),f.over_SSD+=B*B,q++,r+=u);p=Math.max(p,u)}f.over_count=q;
f.tot_noise=h;f.over_noise=r;f.max_noise=p;return q};this.set_pinfo=function(a,b,d,g,k){var e=a.internal_flags,m,l,q=0==b.scalefac_scale?.5:1,w=b.scalefac,h=G(ra.SFBMAX),p=G(ra.SFBMAX),A=new Fb;calc_xmin(a,d,b,h);calc_noise(b,h,p,A,null);var t=0;var r=b.sfb_lmax;b.block_type!=f.SHORT_TYPE&&0==b.mixed_block_flag&&(r=22);for(m=0;m<r;m++){var B=e.scalefac_band.l[m];var x=e.scalefac_band.l[m+1];var u=x-B;for(l=0;t<x;t++)l+=b.xr[t]*b.xr[t];l/=u;var I=1E15;e.pinfo.en[g][k][m]=I*l;e.pinfo.xfsf[g][k][m]=
I*h[m]*p[m]/u;l=0<d.en.l[m]&&!a.ATHonly?l/d.en.l[m]:0;e.pinfo.thr[g][k][m]=I*Math.max(l*d.thm.l[m],e.ATH.l[m]);e.pinfo.LAMEsfb[g][k][m]=0;0!=b.preflag&&11<=m&&(e.pinfo.LAMEsfb[g][k][m]=-q*c[m]);m<f.SBPSY_l&&(e.pinfo.LAMEsfb[g][k][m]-=q*w[m])}if(b.block_type==f.SHORT_TYPE)for(r=m,m=b.sfb_smin;m<f.SBMAX_s;m++){B=e.scalefac_band.s[m];x=e.scalefac_band.s[m+1];u=x-B;for(var H=0;3>H;H++){l=0;for(I=B;I<x;I++)l+=b.xr[t]*b.xr[t],t++;l=Math.max(l/u,1E-20);I=1E15;e.pinfo.en_s[g][k][3*m+H]=I*l;e.pinfo.xfsf_s[g][k][3*
m+H]=I*h[r]*p[r]/u;l=0<d.en.s[m][H]?l/d.en.s[m][H]:0;if(a.ATHonly||a.ATHshort)l=0;e.pinfo.thr_s[g][k][3*m+H]=I*Math.max(l*d.thm.s[m][H],e.ATH.s[m]);e.pinfo.LAMEsfb_s[g][k][3*m+H]=-2*b.subblock_gain[H];m<f.SBPSY_s&&(e.pinfo.LAMEsfb_s[g][k][3*m+H]-=q*w[r]);r++}}e.pinfo.LAMEqss[g][k]=b.global_gain;e.pinfo.LAMEmainbits[g][k]=b.part2_3_length+b.part2_length;e.pinfo.LAMEsfbits[g][k]=b.part2_length;e.pinfo.over[g][k]=A.over_count;e.pinfo.max_noise[g][k]=10*A.max_noise;e.pinfo.over_noise[g][k]=10*A.over_noise;
e.pinfo.tot_noise[g][k]=10*A.tot_noise;e.pinfo.over_SSD[g][k]=A.over_SSD}}function Dc(){this.sfb_count1=this.global_gain=0;this.step=U(39);this.noise=G(39);this.noise_log=G(39)}function rb(){this.xr=G(576);this.l3_enc=U(576);this.scalefac=U(ra.SFBMAX);this.mixed_block_flag=this.block_type=this.scalefac_compress=this.global_gain=this.count1=this.big_values=this.part2_3_length=this.xrpow_max=0;this.table_select=U(3);this.subblock_gain=U(4);this.sfbdivide=this.psymax=this.sfbmax=this.psy_lmax=this.sfb_smin=
this.sfb_lmax=this.part2_length=this.count1table_select=this.scalefac_scale=this.preflag=this.region1_count=this.region0_count=0;this.width=U(ra.SFBMAX);this.window=U(ra.SFBMAX);this.count1bits=0;this.sfb_partition_table=null;this.slen=U(4);this.max_nonzero_coeff=0;var f=this;this.assign=function(k){f.xr=new Float32Array(k.xr);f.l3_enc=new Int32Array(k.l3_enc);f.scalefac=new Int32Array(k.scalefac);f.xrpow_max=k.xrpow_max;f.part2_3_length=k.part2_3_length;f.big_values=k.big_values;f.count1=k.count1;
f.global_gain=k.global_gain;f.scalefac_compress=k.scalefac_compress;f.block_type=k.block_type;f.mixed_block_flag=k.mixed_block_flag;f.table_select=new Int32Array(k.table_select);f.subblock_gain=new Int32Array(k.subblock_gain);f.region0_count=k.region0_count;f.region1_count=k.region1_count;f.preflag=k.preflag;f.scalefac_scale=k.scalefac_scale;f.count1table_select=k.count1table_select;f.part2_length=k.part2_length;f.sfb_lmax=k.sfb_lmax;f.sfb_smin=k.sfb_smin;f.psy_lmax=k.psy_lmax;f.sfbmax=k.sfbmax;f.psymax=
k.psymax;f.sfbdivide=k.sfbdivide;f.width=new Int32Array(k.width);f.window=new Int32Array(k.window);f.count1bits=k.count1bits;f.sfb_partition_table=k.sfb_partition_table.slice(0);f.slen=new Int32Array(k.slen);f.max_nonzero_coeff=k.max_nonzero_coeff}}function Ec(){function x(d){this.ordinal=d}function k(d){for(var c=0;c<d.sfbmax;c++)if(0==d.scalefac[c]+d.subblock_gain[d.window[c]])return!1;return!0}var r;this.rv=null;var v;this.qupvt=null;var C,u=new yc,fa;this.setModules=function(d,c,f,a){r=d;this.rv=
v=c;this.qupvt=C=f;fa=a;u.setModules(C,fa)};this.ms_convert=function(d,c){for(var f=0;576>f;++f){var a=d.tt[c][0].xr[f],b=d.tt[c][1].xr[f];d.tt[c][0].xr[f]=.5*(a+b)*Z.SQRT2;d.tt[c][1].xr[f]=.5*(a-b)*Z.SQRT2}};this.init_xrpow=function(d,c,f){var a=0|c.max_nonzero_coeff;c.xrpow_max=0;qa.fill(f,a,576,0);for(var b,k=b=0;k<=a;++k){var e=Math.abs(c.xr[k]);b+=e;f[k]=Math.sqrt(e*Math.sqrt(e));f[k]>c.xrpow_max&&(c.xrpow_max=f[k])}if(1E-20<b){f=0;0!=(d.substep_shaping&2)&&(f=1);for(a=0;a<c.psymax;a++)d.pseudohalf[a]=
f;return!0}qa.fill(c.l3_enc,0,576,0);return!1};this.init_outer_loop=function(d,c){c.part2_3_length=0;c.big_values=0;c.count1=0;c.global_gain=210;c.scalefac_compress=0;c.table_select[0]=0;c.table_select[1]=0;c.table_select[2]=0;c.subblock_gain[0]=0;c.subblock_gain[1]=0;c.subblock_gain[2]=0;c.subblock_gain[3]=0;c.region0_count=0;c.region1_count=0;c.preflag=0;c.scalefac_scale=0;c.count1table_select=0;c.part2_length=0;c.sfb_lmax=f.SBPSY_l;c.sfb_smin=f.SBPSY_s;c.psy_lmax=d.sfb21_extra?f.SBMAX_l:f.SBPSY_l;
c.psymax=c.psy_lmax;c.sfbmax=c.sfb_lmax;c.sfbdivide=11;for(var k=0;k<f.SBMAX_l;k++)c.width[k]=d.scalefac_band.l[k+1]-d.scalefac_band.l[k],c.window[k]=3;if(c.block_type==f.SHORT_TYPE){var a=G(576);c.sfb_smin=0;c.sfb_lmax=0;0!=c.mixed_block_flag&&(c.sfb_smin=3,c.sfb_lmax=2*d.mode_gr+4);c.psymax=c.sfb_lmax+3*((d.sfb21_extra?f.SBMAX_s:f.SBPSY_s)-c.sfb_smin);c.sfbmax=c.sfb_lmax+3*(f.SBPSY_s-c.sfb_smin);c.sfbdivide=c.sfbmax-18;c.psy_lmax=c.sfb_lmax;var b=d.scalefac_band.l[c.sfb_lmax];S.arraycopy(c.xr,0,
a,0,576);for(k=c.sfb_smin;k<f.SBMAX_s;k++)for(var r=d.scalefac_band.s[k],e=d.scalefac_band.s[k+1],l=0;3>l;l++)for(var q=r;q<e;q++)c.xr[b++]=a[3*q+l];a=c.sfb_lmax;for(k=c.sfb_smin;k<f.SBMAX_s;k++)c.width[a]=c.width[a+1]=c.width[a+2]=d.scalefac_band.s[k+1]-d.scalefac_band.s[k],c.window[a]=0,c.window[a+1]=1,c.window[a+2]=2,a+=3}c.count1bits=0;c.sfb_partition_table=C.nr_of_sfb_block[0][0];c.slen[0]=0;c.slen[1]=0;c.slen[2]=0;c.slen[3]=0;c.max_nonzero_coeff=575;qa.fill(c.scalefac,0);k=d.ATH;a=c.xr;if(c.block_type!=
f.SHORT_TYPE)for(b=!1,r=f.PSFB21-1;0<=r&&!b;r--)for(c=d.scalefac_band.psfb21[r],e=d.scalefac_band.psfb21[r+1],l=C.athAdjust(k.adjust,k.psfb21[r],k.floor),1E-12<d.nsPsy.longfact[21]&&(l*=d.nsPsy.longfact[21]),--e;e>=c;e--)if(Math.abs(a[e])<l)a[e]=0;else{b=!0;break}else for(l=0;3>l;l++)for(b=!1,r=f.PSFB12-1;0<=r&&!b;r--)for(c=3*d.scalefac_band.s[12]+(d.scalefac_band.s[13]-d.scalefac_band.s[12])*l+(d.scalefac_band.psfb12[r]-d.scalefac_band.psfb12[0]),e=c+(d.scalefac_band.psfb12[r+1]-d.scalefac_band.psfb12[r]),
q=C.athAdjust(k.adjust,k.psfb12[r],k.floor),1E-12<d.nsPsy.shortfact[12]&&(q*=d.nsPsy.shortfact[12]),--e;e>=c;e--)if(Math.abs(a[e])<q)a[e]=0;else{b=!0;break}};x.BINSEARCH_NONE=new x(0);x.BINSEARCH_UP=new x(1);x.BINSEARCH_DOWN=new x(2);this.trancate_smallspectrums=function(d,c,k,a){var b=G(ra.SFBMAX);if((0!=(d.substep_shaping&4)||c.block_type!=f.SHORT_TYPE)&&0==(d.substep_shaping&128)){C.calc_noise(c,k,b,new Fb,null);for(var r=0;576>r;r++){var e=0;0!=c.l3_enc[r]&&(e=Math.abs(c.xr[r]));a[r]=e}r=0;e=
8;c.block_type==f.SHORT_TYPE&&(e=6);do{var l,q,g=c.width[e],r=r+g;if(!(1<=b[e]||(qa.sort(a,r-g,g),da.EQ(a[r-1],0)))){var t=(1-b[e])*k[e];var w=l=0;do{for(q=1;w+q<g&&!da.NEQ(a[w+r-g],a[w+r+q-g]);q++);var m=a[w+r-g]*a[w+r-g]*q;if(t<m){0!=w&&(l=a[w+r-g-1]);break}t-=m;w+=q}while(w<g);if(!da.EQ(l,0)){do Math.abs(c.xr[r-g])<=l&&(c.l3_enc[r-g]=0);while(0<--g)}}}while(++e<c.psymax);c.part2_3_length=fa.noquant_count_bits(d,c,null)}};this.outer_loop=function(d,c,r,a,b,u){var e=d.internal_flags,l=new rb,q=G(576),
g=G(ra.SFBMAX),t=new Fb,w=new Dc,m=9999999,n=!1,B=!1,v=0,h,p=e.CurrentStep[b],A=!1,y=e.OldValue[b];var O=x.BINSEARCH_NONE;c.global_gain=y;for(h=u-c.part2_length;;){var F=fa.count_bits(e,a,c,null);if(1==p||F==h)break;F>h?(O==x.BINSEARCH_DOWN&&(A=!0),A&&(p/=2),O=x.BINSEARCH_UP,F=p):(O==x.BINSEARCH_UP&&(A=!0),A&&(p/=2),O=x.BINSEARCH_DOWN,F=-p);c.global_gain+=F;0>c.global_gain&&(c.global_gain=0,A=!0);255<c.global_gain&&(c.global_gain=255,A=!0)}for(;F>h&&255>c.global_gain;)c.global_gain++,F=fa.count_bits(e,
a,c,null);e.CurrentStep[b]=4<=y-c.global_gain?4:2;e.OldValue[b]=c.global_gain;c.part2_3_length=F;if(0==e.noise_shaping)return 100;C.calc_noise(c,r,g,t,w);t.bits=c.part2_3_length;l.assign(c);b=0;for(S.arraycopy(a,0,q,0,576);!n;){do{h=new Fb;A=255;p=0!=(e.substep_shaping&2)?20:3;if(e.sfb21_extra){if(1<g[l.sfbmax])break;if(l.block_type==f.SHORT_TYPE&&(1<g[l.sfbmax+1]||1<g[l.sfbmax+2]))break}y=l;F=a;O=d.internal_flags;var R=y,X=g,I=F,H=d.internal_flags;var M=0==R.scalefac_scale?1.2968395546510096:1.6817928305074292;
for(var Q=0,V=0;V<R.sfbmax;V++)Q<X[V]&&(Q=X[V]);V=H.noise_shaping_amp;3==V&&(V=B?2:1);switch(V){case 2:break;case 1:Q=1<Q?Math.pow(Q,.5):.95*Q;break;default:Q=1<Q?1:.95*Q}for(var N=0,V=0;V<R.sfbmax;V++){var la=R.width[V],N=N+la;if(!(X[V]<Q)){if(0!=(H.substep_shaping&2)&&(H.pseudohalf[V]=0==H.pseudohalf[V]?1:0,0==H.pseudohalf[V]&&2==H.noise_shaping_amp))break;R.scalefac[V]++;for(la=-la;0>la;la++)I[N+la]*=M,I[N+la]>R.xrpow_max&&(R.xrpow_max=I[N+la]);if(2==H.noise_shaping_amp)break}}if(M=k(y))y=!1;else if(M=
2==O.mode_gr?fa.scale_bitcount(y):fa.scale_bitcount_lsf(O,y)){if(1<O.noise_shaping)if(qa.fill(O.pseudohalf,0),0==y.scalefac_scale){M=y;for(X=R=0;X<M.sfbmax;X++){H=M.width[X];I=M.scalefac[X];0!=M.preflag&&(I+=C.pretab[X]);R+=H;if(0!=(I&1))for(I++,H=-H;0>H;H++)F[R+H]*=1.2968395546510096,F[R+H]>M.xrpow_max&&(M.xrpow_max=F[R+H]);M.scalefac[X]=I>>1}M.preflag=0;M.scalefac_scale=1;M=!1}else if(y.block_type==f.SHORT_TYPE&&0<O.subblock_gain){b:{M=O;R=y;X=F;I=R.scalefac;for(F=0;F<R.sfb_lmax;F++)if(16<=I[F]){F=
!0;break b}for(H=0;3>H;H++){V=Q=0;for(F=R.sfb_lmax+H;F<R.sfbdivide;F+=3)Q<I[F]&&(Q=I[F]);for(;F<R.sfbmax;F+=3)V<I[F]&&(V=I[F]);if(!(16>Q&&8>V)){if(7<=R.subblock_gain[H]){F=!0;break b}R.subblock_gain[H]++;Q=M.scalefac_band.l[R.sfb_lmax];for(F=R.sfb_lmax+H;F<R.sfbmax;F+=3)if(V=R.width[F],N=I[F],N-=4>>R.scalefac_scale,0<=N)I[F]=N,Q+=3*V;else{I[F]=0;N=C.IPOW20(210+(N<<R.scalefac_scale+1));Q+=V*(H+1);for(la=-V;0>la;la++)X[Q+la]*=N,X[Q+la]>R.xrpow_max&&(R.xrpow_max=X[Q+la]);Q+=V*(3-H-1)}N=C.IPOW20(202);
Q+=R.width[F]*(H+1);for(la=-R.width[F];0>la;la++)X[Q+la]*=N,X[Q+la]>R.xrpow_max&&(R.xrpow_max=X[Q+la])}}F=!1}M=F||k(y)}M||(M=2==O.mode_gr?fa.scale_bitcount(y):fa.scale_bitcount_lsf(O,y));y=!M}else y=!0;if(!y)break;0!=l.scalefac_scale&&(A=254);y=u-l.part2_length;if(0>=y)break;for(;(l.part2_3_length=fa.count_bits(e,a,l,w))>y&&l.global_gain<=A;)l.global_gain++;if(l.global_gain>A)break;if(0==t.over_count){for(;(l.part2_3_length=fa.count_bits(e,a,l,w))>m&&l.global_gain<=A;)l.global_gain++;if(l.global_gain>
A)break}C.calc_noise(l,r,g,h,w);h.bits=l.part2_3_length;O=c.block_type!=f.SHORT_TYPE?d.quant_comp:d.quant_comp_short;A=t;y=h;M=l;F=g;switch(O){default:case 9:0<A.over_count?(O=y.over_SSD<=A.over_SSD,y.over_SSD==A.over_SSD&&(O=y.bits<A.bits)):O=0>y.max_noise&&10*y.max_noise+y.bits<=10*A.max_noise+A.bits;break;case 0:O=y.over_count<A.over_count||y.over_count==A.over_count&&y.over_noise<A.over_noise||y.over_count==A.over_count&&da.EQ(y.over_noise,A.over_noise)&&y.tot_noise<A.tot_noise;break;case 8:O=
y;X=1E-37;for(R=0;R<M.psymax;R++)I=F[R],I=Z.FAST_LOG10(.368+.632*I*I*I),X+=I;O.max_noise=Math.max(1E-20,X);case 1:O=y.max_noise<A.max_noise;break;case 2:O=y.tot_noise<A.tot_noise;break;case 3:O=y.tot_noise<A.tot_noise&&y.max_noise<A.max_noise;break;case 4:O=0>=y.max_noise&&.2<A.max_noise||0>=y.max_noise&&0>A.max_noise&&A.max_noise>y.max_noise-.2&&y.tot_noise<A.tot_noise||0>=y.max_noise&&0<A.max_noise&&A.max_noise>y.max_noise-.2&&y.tot_noise<A.tot_noise+A.over_noise||0<y.max_noise&&-.05<A.max_noise&&
A.max_noise>y.max_noise-.1&&y.tot_noise+y.over_noise<A.tot_noise+A.over_noise||0<y.max_noise&&-.1<A.max_noise&&A.max_noise>y.max_noise-.15&&y.tot_noise+y.over_noise+y.over_noise<A.tot_noise+A.over_noise+A.over_noise;break;case 5:O=y.over_noise<A.over_noise||da.EQ(y.over_noise,A.over_noise)&&y.tot_noise<A.tot_noise;break;case 6:O=y.over_noise<A.over_noise||da.EQ(y.over_noise,A.over_noise)&&(y.max_noise<A.max_noise||da.EQ(y.max_noise,A.max_noise)&&y.tot_noise<=A.tot_noise);break;case 7:O=y.over_count<
A.over_count||y.over_noise<A.over_noise}0==A.over_count&&(O=O&&y.bits<A.bits);O=O?1:0;if(0!=O)m=c.part2_3_length,t=h,c.assign(l),b=0,S.arraycopy(a,0,q,0,576);else if(0==e.full_outer_loop){if(++b>p&&0==t.over_count)break;if(3==e.noise_shaping_amp&&B&&30<b)break;if(3==e.noise_shaping_amp&&B&&15<l.global_gain-v)break}}while(255>l.global_gain+l.scalefac_scale);3==e.noise_shaping_amp?B?n=!0:(l.assign(c),S.arraycopy(q,0,a,0,576),b=0,v=l.global_gain,B=!0):n=!0}d.VBR==J.vbr_rh||d.VBR==J.vbr_mtrh?S.arraycopy(q,
0,a,0,576):0!=(e.substep_shaping&1)&&trancate_smallspectrums(e,c,r,a);return t.over_count};this.iteration_finish_one=function(d,c,f){var a=d.l3_side,b=a.tt[c][f];fa.best_scalefac_store(d,c,f,a);1==d.use_best_huffman&&fa.best_huffman_divide(d,b);v.ResvAdjust(d,b)};this.VBR_encode_granule=function(d,c,f,a,b,k,e){var l=d.internal_flags,q=new rb,g=G(576),r=e,w=(e+k)/2,m=0,n=l.sfb21_extra;qa.fill(q.l3_enc,0);do{l.sfb21_extra=w>r-42?!1:n;var u=outer_loop(d,c,f,a,b,w);0>=u?(m=1,e=c.part2_3_length,q.assign(c),
S.arraycopy(a,0,g,0,576),e-=32,u=e-k,w=(e+k)/2):(k=w+32,u=e-k,w=(e+k)/2,0!=m&&(m=2,c.assign(q),S.arraycopy(g,0,a,0,576)))}while(12<u);l.sfb21_extra=n;2==m&&S.arraycopy(q.l3_enc,0,c.l3_enc,0,576)};this.get_framebits=function(d,c){var f=d.internal_flags;f.bitrate_index=f.VBR_min_bitrate;r.getframebits(d);f.bitrate_index=1;var a=r.getframebits(d);for(var b=1;b<=f.VBR_max_bitrate;b++)f.bitrate_index=b,a=new Fa(a),c[b]=v.ResvFrameBegin(d,a),a=a.bits};this.VBR_old_prepare=function(d,c,k,a,b,r,e,l,q){var g=
d.internal_flags,t=1,w=0;g.bitrate_index=g.VBR_max_bitrate;var m=v.ResvFrameBegin(d,new Fa(0))/g.mode_gr;get_framebits(d,r);for(var n=0;n<g.mode_gr;n++){var u=C.on_pe(d,c,l[n],m,n,0);g.mode_ext==f.MPG_MD_MS_LR&&(ms_convert(g.l3_side,n),C.reduce_side(l[n],k[n],m,u));for(u=0;u<g.channels_out;++u){var x=g.l3_side.tt[n][u];if(x.block_type!=f.SHORT_TYPE){var h=1.28/(1+Math.exp(3.5-c[n][u]/300))-.05;h=g.PSY.mask_adjust-h}else h=2.56/(1+Math.exp(3.5-c[n][u]/300))-.14,h=g.PSY.mask_adjust_short-h;g.masking_lower=
Math.pow(10,.1*h);init_outer_loop(g,x);q[n][u]=C.calc_xmin(d,a[n][u],x,b[n][u]);0!=q[n][u]&&(t=0);e[n][u]=126;w+=l[n][u]}}for(n=0;n<g.mode_gr;n++)for(u=0;u<g.channels_out;u++)w>r[g.VBR_max_bitrate]&&(l[n][u]*=r[g.VBR_max_bitrate],l[n][u]/=w),e[n][u]>l[n][u]&&(e[n][u]=l[n][u]);return t};this.bitpressure_strategy=function(d,c,k,a){for(var b=0;b<d.mode_gr;b++)for(var r=0;r<d.channels_out;r++){for(var e=d.l3_side.tt[b][r],l=c[b][r],q=0,g=0;g<e.psy_lmax;g++)l[q++]*=1+.029*g*g/f.SBMAX_l/f.SBMAX_l;if(e.block_type==
f.SHORT_TYPE)for(g=e.sfb_smin;g<f.SBMAX_s;g++)l[q++]*=1+.029*g*g/f.SBMAX_s/f.SBMAX_s,l[q++]*=1+.029*g*g/f.SBMAX_s/f.SBMAX_s,l[q++]*=1+.029*g*g/f.SBMAX_s/f.SBMAX_s;a[b][r]=0|Math.max(k[b][r],.9*a[b][r])}};this.VBR_new_prepare=function(d,c,k,a,b,r){var e,l=d.internal_flags,q=1,g=e=0;if(d.free_format){l.bitrate_index=0;e=new Fa(e);var t=v.ResvFrameBegin(d,e);e=e.bits;b[0]=t}else l.bitrate_index=l.VBR_max_bitrate,e=new Fa(e),v.ResvFrameBegin(d,e),e=e.bits,get_framebits(d,b),t=b[l.VBR_max_bitrate];for(b=
0;b<l.mode_gr;b++){C.on_pe(d,c,r[b],e,b,0);l.mode_ext==f.MPG_MD_MS_LR&&ms_convert(l.l3_side,b);for(var u=0;u<l.channels_out;++u){var m=l.l3_side.tt[b][u];l.masking_lower=Math.pow(10,.1*l.PSY.mask_adjust);init_outer_loop(l,m);0!=C.calc_xmin(d,k[b][u],m,a[b][u])&&(q=0);g+=r[b][u]}}for(b=0;b<l.mode_gr;b++)for(u=0;u<l.channels_out;u++)g>t&&(r[b][u]*=t,r[b][u]/=g);return q};this.calc_target_bits=function(d,c,k,a,b,u){var e=d.internal_flags,l=e.l3_side;e.bitrate_index=e.VBR_max_bitrate;var q=new Fa(0);
u[0]=v.ResvFrameBegin(d,q);e.bitrate_index=1;q=r.getframebits(d)-8*e.sideinfo_len;b[0]=q/(e.mode_gr*e.channels_out);q=d.VBR_mean_bitrate_kbps*d.framesize*1E3;0!=(e.substep_shaping&1)&&(q*=1.09);q/=d.out_samplerate;q-=8*e.sideinfo_len;q/=e.mode_gr*e.channels_out;var g=.93+.07*(11-d.compression_ratio)/5.5;.9>g&&(g=.9);1<g&&(g=1);for(d=0;d<e.mode_gr;d++){var t=0;for(b=0;b<e.channels_out;b++){a[d][b]=int(g*q);if(700<c[d][b]){var w=int((c[d][b]-700)/1.4),m=l.tt[d][b];a[d][b]=int(g*q);m.block_type==f.SHORT_TYPE&&
w<q/2&&(w=q/2);w>3*q/2?w=3*q/2:0>w&&(w=0);a[d][b]+=w}a[d][b]>ia.MAX_BITS_PER_CHANNEL&&(a[d][b]=ia.MAX_BITS_PER_CHANNEL);t+=a[d][b]}if(t>ia.MAX_BITS_PER_GRANULE)for(b=0;b<e.channels_out;++b)a[d][b]*=ia.MAX_BITS_PER_GRANULE,a[d][b]/=t}if(e.mode_ext==f.MPG_MD_MS_LR)for(d=0;d<e.mode_gr;d++)C.reduce_side(a[d],k[d],q*e.channels_out,ia.MAX_BITS_PER_GRANULE);for(d=c=0;d<e.mode_gr;d++)for(b=0;b<e.channels_out;b++)a[d][b]>ia.MAX_BITS_PER_CHANNEL&&(a[d][b]=ia.MAX_BITS_PER_CHANNEL),c+=a[d][b];if(c>u[0])for(d=
0;d<e.mode_gr;d++)for(b=0;b<e.channels_out;b++)a[d][b]*=u[0],a[d][b]/=c}}function Fc(){function x(c,d,a){for(var b,f,e=10,l=d+238-14-286,q=-15;0>q;q++){var g=k[e+-10];f=c[l+-224]*g;b=c[d+224]*g;g=k[e+-9];f+=c[l+-160]*g;b+=c[d+160]*g;g=k[e+-8];f+=c[l+-96]*g;b+=c[d+96]*g;g=k[e+-7];f+=c[l+-32]*g;b+=c[d+32]*g;g=k[e+-6];f+=c[l+32]*g;b+=c[d+-32]*g;g=k[e+-5];f+=c[l+96]*g;b+=c[d+-96]*g;g=k[e+-4];f+=c[l+160]*g;b+=c[d+-160]*g;g=k[e+-3];f+=c[l+224]*g;b+=c[d+-224]*g;g=k[e+-2];f+=c[d+-256]*g;b-=c[l+256]*g;g=k[e+
-1];f+=c[d+-192]*g;b-=c[l+192]*g;g=k[e+0];f+=c[d+-128]*g;b-=c[l+128]*g;g=k[e+1];f+=c[d+-64]*g;b-=c[l+64]*g;g=k[e+2];f+=c[d+0]*g;b-=c[l+0]*g;g=k[e+3];f+=c[d+64]*g;b-=c[l+-64]*g;g=k[e+4];f+=c[d+128]*g;b-=c[l+-128]*g;g=k[e+5];f+=c[d+192]*g;b-=c[l+-192]*g;f*=k[e+6];g=b-f;a[30+2*q]=b+f;a[31+2*q]=k[e+7]*g;e+=18;d--;l++}b=c[d+-16]*k[e+-10];f=c[d+-32]*k[e+-2];b+=(c[d+-48]-c[d+16])*k[e+-9];f+=c[d+-96]*k[e+-1];b+=(c[d+-80]+c[d+48])*k[e+-8];f+=c[d+-160]*k[e+0];b+=(c[d+-112]-c[d+80])*k[e+-7];f+=c[d+-224]*k[e+
1];b+=(c[d+-144]+c[d+112])*k[e+-6];f-=c[d+32]*k[e+2];b+=(c[d+-176]-c[d+144])*k[e+-5];f-=c[d+96]*k[e+3];b+=(c[d+-208]+c[d+176])*k[e+-4];f-=c[d+160]*k[e+4];b+=(c[d+-240]-c[d+208])*k[e+-3];f-=c[d+224];c=f-b;d=f+b;b=a[14];f=a[15]-b;a[31]=d+b;a[30]=c+f;a[15]=c-f;a[14]=d-b;b=a[28]-a[0];a[0]+=a[28];a[28]=b*k[e+-36+7];b=a[29]-a[1];a[1]+=a[29];a[29]=b*k[e+-36+7];b=a[26]-a[2];a[2]+=a[26];a[26]=b*k[e+-72+7];b=a[27]-a[3];a[3]+=a[27];a[27]=b*k[e+-72+7];b=a[24]-a[4];a[4]+=a[24];a[24]=b*k[e+-108+7];b=a[25]-a[5];
a[5]+=a[25];a[25]=b*k[e+-108+7];b=a[22]-a[6];a[6]+=a[22];a[22]=b*Z.SQRT2;b=a[23]-a[7];a[7]+=a[23];a[23]=b*Z.SQRT2-a[7];a[7]-=a[6];a[22]-=a[7];a[23]-=a[22];b=a[6];a[6]=a[31]-b;a[31]+=b;b=a[7];a[7]=a[30]-b;a[30]+=b;b=a[22];a[22]=a[15]-b;a[15]+=b;b=a[23];a[23]=a[14]-b;a[14]+=b;b=a[20]-a[8];a[8]+=a[20];a[20]=b*k[e+-180+7];b=a[21]-a[9];a[9]+=a[21];a[21]=b*k[e+-180+7];b=a[18]-a[10];a[10]+=a[18];a[18]=b*k[e+-216+7];b=a[19]-a[11];a[11]+=a[19];a[19]=b*k[e+-216+7];b=a[16]-a[12];a[12]+=a[16];a[16]=b*k[e+-252+
7];b=a[17]-a[13];a[13]+=a[17];a[17]=b*k[e+-252+7];b=-a[20]+a[24];a[20]+=a[24];a[24]=b*k[e+-216+7];b=-a[21]+a[25];a[21]+=a[25];a[25]=b*k[e+-216+7];b=a[4]-a[8];a[4]+=a[8];a[8]=b*k[e+-216+7];b=a[5]-a[9];a[5]+=a[9];a[9]=b*k[e+-216+7];b=a[0]-a[12];a[0]+=a[12];a[12]=b*k[e+-72+7];b=a[1]-a[13];a[1]+=a[13];a[13]=b*k[e+-72+7];b=a[16]-a[28];a[16]+=a[28];a[28]=b*k[e+-72+7];b=-a[17]+a[29];a[17]+=a[29];a[29]=b*k[e+-72+7];b=Z.SQRT2*(a[2]-a[10]);a[2]+=a[10];a[10]=b;b=Z.SQRT2*(a[3]-a[11]);a[3]+=a[11];a[11]=b;b=Z.SQRT2*
(-a[18]+a[26]);a[18]+=a[26];a[26]=b-a[18];b=Z.SQRT2*(-a[19]+a[27]);a[19]+=a[27];a[27]=b-a[19];b=a[2];a[19]-=a[3];a[3]-=b;a[2]=a[31]-b;a[31]+=b;b=a[3];a[11]-=a[19];a[18]-=b;a[3]=a[30]-b;a[30]+=b;b=a[18];a[27]-=a[11];a[19]-=b;a[18]=a[15]-b;a[15]+=b;b=a[19];a[10]-=b;a[19]=a[14]-b;a[14]+=b;b=a[10];a[11]-=b;a[10]=a[23]-b;a[23]+=b;b=a[11];a[26]-=b;a[11]=a[22]-b;a[22]+=b;b=a[26];a[27]-=b;a[26]=a[7]-b;a[7]+=b;b=a[27];a[27]=a[6]-b;a[6]+=b;b=Z.SQRT2*(a[0]-a[4]);a[0]+=a[4];a[4]=b;b=Z.SQRT2*(a[1]-a[5]);a[1]+=
a[5];a[5]=b;b=Z.SQRT2*(a[16]-a[20]);a[16]+=a[20];a[20]=b;b=Z.SQRT2*(a[17]-a[21]);a[17]+=a[21];a[21]=b;b=-Z.SQRT2*(a[8]-a[12]);a[8]+=a[12];a[12]=b-a[8];b=-Z.SQRT2*(a[9]-a[13]);a[9]+=a[13];a[13]=b-a[9];b=-Z.SQRT2*(a[25]-a[29]);a[25]+=a[29];a[29]=b-a[25];b=-Z.SQRT2*(a[24]+a[28]);a[24]-=a[28];a[28]=b-a[24];b=a[24]-a[16];a[24]=b;b=a[20]-b;a[20]=b;b=a[28]-b;a[28]=b;b=a[25]-a[17];a[25]=b;b=a[21]-b;a[21]=b;b=a[29]-b;a[29]=b;b=a[17]-a[1];a[17]=b;b=a[9]-b;a[9]=b;b=a[25]-b;a[25]=b;b=a[5]-b;a[5]=b;b=a[21]-b;
a[21]=b;b=a[13]-b;a[13]=b;b=a[29]-b;a[29]=b;b=a[1]-a[0];a[1]=b;b=a[16]-b;a[16]=b;b=a[17]-b;a[17]=b;b=a[8]-b;a[8]=b;b=a[9]-b;a[9]=b;b=a[24]-b;a[24]=b;b=a[25]-b;a[25]=b;b=a[4]-b;a[4]=b;b=a[5]-b;a[5]=b;b=a[20]-b;a[20]=b;b=a[21]-b;a[21]=b;b=a[12]-b;a[12]=b;b=a[13]-b;a[13]=b;b=a[28]-b;a[28]=b;b=a[29]-b;a[29]=b;b=a[0];a[0]+=a[31];a[31]-=b;b=a[1];a[1]+=a[30];a[30]-=b;b=a[16];a[16]+=a[15];a[15]-=b;b=a[17];a[17]+=a[14];a[14]-=b;b=a[8];a[8]+=a[23];a[23]-=b;b=a[9];a[9]+=a[22];a[22]-=b;b=a[24];a[24]+=a[7];a[7]-=
b;b=a[25];a[25]+=a[6];a[6]-=b;b=a[4];a[4]+=a[27];a[27]-=b;b=a[5];a[5]+=a[26];a[26]-=b;b=a[20];a[20]+=a[11];a[11]-=b;b=a[21];a[21]+=a[10];a[10]-=b;b=a[12];a[12]+=a[19];a[19]-=b;b=a[13];a[13]+=a[18];a[18]-=b;b=a[28];a[28]+=a[3];a[3]-=b;b=a[29];a[29]+=a[2];a[2]-=b}var k=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,
-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,
11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,
-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,
12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,
-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,
13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,
-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,
13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,
-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,
13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.0178904535*Z.SQRT2/2.384E-6,.008938074*Z.SQRT2/2.384E-6,.0015673635*Z.SQRT2/2.384E-6,.001228571*Z.SQRT2/2.384E-6,4.856585E-4*Z.SQRT2/2.384E-6,1.09434E-4*Z.SQRT2/2.384E-6,5.0783E-5*Z.SQRT2/2.384E-6,6.914E-6*Z.SQRT2/2.384E-6,12804.797818791945,
1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],r=[[2.382191739347913E-13,6.423305872147834E-13,9.400849094049688E-13,1.122435026096556E-12,1.183840321267481E-12,1.122435026096556E-12,9.40084909404969E-13,6.423305872147839E-13,2.382191739347918E-13,5.456116108943412E-12,4.878985199565852E-12,4.240448995017367E-12,3.559909094758252E-12,2.858043359288075E-12,2.156177623817898E-12,1.475637723558783E-12,8.371015190102974E-13,2.599706096327376E-13,
-5.456116108943412E-12,-4.878985199565852E-12,-4.240448995017367E-12,-3.559909094758252E-12,-2.858043359288076E-12,-2.156177623817898E-12,-1.475637723558783E-12,-8.371015190102975E-13,-2.599706096327376E-13,-2.382191739347923E-13,-6.423305872147843E-13,-9.400849094049696E-13,-1.122435026096556E-12,-1.183840321267481E-12,-1.122435026096556E-12,-9.400849094049694E-13,-6.42330587214784E-13,-2.382191739347918E-13],[2.382191739347913E-13,6.423305872147834E-13,9.400849094049688E-13,1.122435026096556E-12,
1.183840321267481E-12,1.122435026096556E-12,9.400849094049688E-13,6.423305872147841E-13,2.382191739347918E-13,5.456116108943413E-12,4.878985199565852E-12,4.240448995017367E-12,3.559909094758253E-12,2.858043359288075E-12,2.156177623817898E-12,1.475637723558782E-12,8.371015190102975E-13,2.599706096327376E-13,-5.461314069809755E-12,-4.921085770524055E-12,-4.343405037091838E-12,-3.732668368707687E-12,-3.093523840190885E-12,-2.430835727329465E-12,-1.734679010007751E-12,-9.74825365660928E-13,-2.797435120168326E-13,
0,0,0,0,0,0,-2.283748241799531E-13,-4.037858874020686E-13,-2.146547464825323E-13],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,
-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2.283748241799531E-13,4.037858874020686E-13,2.146547464825323E-13,5.461314069809755E-12,4.921085770524055E-12,4.343405037091838E-12,3.732668368707687E-12,3.093523840190885E-12,2.430835727329466E-12,1.734679010007751E-12,9.74825365660928E-13,2.797435120168326E-13,
-5.456116108943413E-12,-4.878985199565852E-12,-4.240448995017367E-12,-3.559909094758253E-12,-2.858043359288075E-12,-2.156177623817898E-12,-1.475637723558782E-12,-8.371015190102975E-13,-2.599706096327376E-13,-2.382191739347913E-13,-6.423305872147834E-13,-9.400849094049688E-13,-1.122435026096556E-12,-1.183840321267481E-12,-1.122435026096556E-12,-9.400849094049688E-13,-6.423305872147841E-13,-2.382191739347918E-13]],v=r[f.SHORT_TYPE],C=r[f.SHORT_TYPE],u=r[f.SHORT_TYPE],J=r[f.SHORT_TYPE],d=[0,1,16,17,
8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];this.mdct_sub48=function(c,k,a){for(var b=286,w=0;w<c.channels_out;w++){for(var e=0;e<c.mode_gr;e++){for(var l,q=c.l3_side.tt[e][w],g=q.xr,t=0,D=c.sb_sample[w][1-e],m=0,n=0;9>n;n++)for(x(k,b,D[m]),x(k,b+32,D[m+1]),m+=2,b+=64,l=1;32>l;l+=2)D[m-1][l]*=-1;for(l=0;32>l;l++,t+=18){var D=q.block_type,m=c.sb_sample[w][e],z=c.sb_sample[w][1-e];0!=q.mixed_block_flag&&2>l&&(D=0);if(1E-12>c.amp_filter[l])qa.fill(g,t+0,t+18,0);else{if(1>
c.amp_filter[l])for(n=0;18>n;n++)z[n][d[l]]*=c.amp_filter[l];if(D==f.SHORT_TYPE){for(n=-3;0>n;n++){var E=r[f.SHORT_TYPE][n+3];g[t+3*n+9]=m[9+n][d[l]]*E-m[8-n][d[l]];g[t+3*n+18]=m[14-n][d[l]]*E+m[15+n][d[l]];g[t+3*n+10]=m[15+n][d[l]]*E-m[14-n][d[l]];g[t+3*n+19]=z[2-n][d[l]]*E+z[3+n][d[l]];g[t+3*n+11]=z[3+n][d[l]]*E-z[2-n][d[l]];g[t+3*n+20]=z[8-n][d[l]]*E+z[9+n][d[l]]}n=g;m=t;for(E=0;3>E;E++){var h=n[m+6]*r[f.SHORT_TYPE][0]-n[m+15];z=n[m+0]*r[f.SHORT_TYPE][2]-n[m+9];var p=h+z;var A=h-z;h=n[m+15]*r[f.SHORT_TYPE][0]+
n[m+6];z=n[m+9]*r[f.SHORT_TYPE][2]+n[m+0];var y=h+z;var O=-h+z;z=2.069978111953089E-11*(n[m+3]*r[f.SHORT_TYPE][1]-n[m+12]);h=2.069978111953089E-11*(n[m+12]*r[f.SHORT_TYPE][1]+n[m+3]);n[m+0]=1.90752519173728E-11*p+z;n[m+15]=1.90752519173728E-11*-y+h;A*=1.6519652744032674E-11;y=9.537625958686404E-12*y+h;n[m+3]=A-y;n[m+6]=A+y;p=9.537625958686404E-12*p-z;O*=1.6519652744032674E-11;n[m+9]=p+O;n[m+12]=p-O;m++}}else{E=G(18);for(n=-9;0>n;n++)p=r[D][n+27]*z[n+9][d[l]]+r[D][n+36]*z[8-n][d[l]],A=r[D][n+9]*m[n+
9][d[l]]-r[D][n+18]*m[8-n][d[l]],E[n+9]=p-A*v[3+n+9],E[n+18]=p*v[3+n+9]+A;var n=g,m=t;p=E;var F=p[17]-p[9];var R=p[15]-p[11];var X=p[14]-p[12];O=p[0]+p[8];y=p[1]+p[7];h=p[2]+p[6];A=p[3]+p[5];n[m+17]=O+h-A-(y-p[4]);E=(O+h-A)*C[19]+(y-p[4]);z=(F-R-X)*C[18];n[m+5]=z+E;n[m+6]=z-E;var I=(p[16]-p[10])*C[18];y=y*C[19]+p[4];z=F*C[12]+I+R*C[13]+X*C[14];E=-O*C[16]+y-h*C[17]+A*C[15];n[m+1]=z+E;n[m+2]=z-E;z=F*C[13]-I-R*C[14]+X*C[12];E=-O*C[17]+y-h*C[15]+A*C[16];n[m+9]=z+E;n[m+10]=z-E;z=F*C[14]-I+R*C[12]-X*C[13];
E=O*C[15]-y+h*C[16]-A*C[17];n[m+13]=z+E;n[m+14]=z-E;F=p[8]-p[0];R=p[6]-p[2];X=p[5]-p[3];O=p[17]+p[9];y=p[16]+p[10];h=p[15]+p[11];A=p[14]+p[12];n[m+0]=O+h+A+(y+p[13]);z=(O+h+A)*C[19]-(y+p[13]);E=(F-R+X)*C[18];n[m+11]=z+E;n[m+12]=z-E;I=(p[7]-p[1])*C[18];y=p[13]-y*C[19];z=O*C[15]-y+h*C[16]+A*C[17];E=F*C[14]+I+R*C[12]+X*C[13];n[m+3]=z+E;n[m+4]=z-E;z=-O*C[17]+y-h*C[15]-A*C[16];E=F*C[13]+I-R*C[14]-X*C[12];n[m+7]=z+E;n[m+8]=z-E;z=-O*C[16]+y-h*C[17]-A*C[15];E=F*C[12]-I+R*C[13]-X*C[14];n[m+15]=z+E;n[m+16]=
z-E}}if(D!=f.SHORT_TYPE&&0!=l)for(n=7;0<=n;--n)D=g[t+n]*u[20+n]+g[t+-1-n]*J[28+n],m=g[t+n]*J[28+n]-g[t+-1-n]*u[20+n],g[t+-1-n]=D,g[t+n]=m}}k=a;b=286;if(1==c.mode_gr)for(e=0;18>e;e++)S.arraycopy(c.sb_sample[w][1][e],0,c.sb_sample[w][0][e],0,32)}}}function za(){this.thm=new tb;this.en=new tb}function f(){var x=f.FFTOFFSET,k=f.MPG_MD_MS_LR,r=null,v=this.psy=null,C=null,u=null;this.setModules=function(d,c,f,a){r=d;v=this.psy=c;C=a;u=f};var fa=new Fc;this.lame_encode_mp3_frame=function(d,c,w,a,b,B){var e=
Tb([2,2]);e[0][0]=new za;e[0][1]=new za;e[1][0]=new za;e[1][1]=new za;var l=Tb([2,2]);l[0][0]=new za;l[0][1]=new za;l[1][0]=new za;l[1][1]=new za;var q=[null,null],g=d.internal_flags,t=ha([2,4]),D=[.5,.5],m=[[0,0],[0,0]],n=[[0,0],[0,0]];q[0]=c;q[1]=w;if(0==g.lame_encode_frame_init){c=d.internal_flags;var z,E;if(0==c.lame_encode_frame_init){w=G(2014);var h=G(2014);c.lame_encode_frame_init=1;for(E=z=0;z<286+576*(1+c.mode_gr);++z)z<576*c.mode_gr?(w[z]=0,2==c.channels_out&&(h[z]=0)):(w[z]=q[0][E],2==
c.channels_out&&(h[z]=q[1][E]),++E);for(E=0;E<c.mode_gr;E++)for(z=0;z<c.channels_out;z++)c.l3_side.tt[E][z].block_type=f.SHORT_TYPE;fa.mdct_sub48(c,w,h)}}g.padding=0;0>(g.slot_lag-=g.frac_SpF)&&(g.slot_lag+=d.out_samplerate,g.padding=1);if(0!=g.psymodel)for(h=[null,null],z=0,E=U(2),w=0;w<g.mode_gr;w++){for(c=0;c<g.channels_out;c++)h[c]=q[c],z=576+576*w-f.FFTOFFSET;c=d.VBR==J.vbr_mtrh||d.VBR==J.vbr_mt?v.L3psycho_anal_vbr(d,h,z,w,e,l,m[w],n[w],t[w],E):v.L3psycho_anal_ns(d,h,z,w,e,l,m[w],n[w],t[w],E);
if(0!=c)return-4;d.mode==ka.JOINT_STEREO&&(D[w]=t[w][2]+t[w][3],0<D[w]&&(D[w]=t[w][3]/D[w]));for(c=0;c<g.channels_out;c++){var p=g.l3_side.tt[w][c];p.block_type=E[c];p.mixed_block_flag=0}}else for(w=0;w<g.mode_gr;w++)for(c=0;c<g.channels_out;c++)g.l3_side.tt[w][c].block_type=f.NORM_TYPE,g.l3_side.tt[w][c].mixed_block_flag=0,n[w][c]=m[w][c]=700;0==g.ATH.useAdjust?g.ATH.adjust=1:(c=g.loudness_sq[0][0],t=g.loudness_sq[1][0],2==g.channels_out?(c+=g.loudness_sq[0][1],t+=g.loudness_sq[1][1]):(c+=c,t+=t),
2==g.mode_gr&&(c=Math.max(c,t)),c=.5*c*g.ATH.aaSensitivityP,.03125<c?(1<=g.ATH.adjust?g.ATH.adjust=1:g.ATH.adjust<g.ATH.adjustLimit&&(g.ATH.adjust=g.ATH.adjustLimit),g.ATH.adjustLimit=1):(t=31.98*c+6.25E-4,g.ATH.adjust>=t?(g.ATH.adjust*=.075*t+.925,g.ATH.adjust<t&&(g.ATH.adjust=t)):g.ATH.adjustLimit>=t?g.ATH.adjust=t:g.ATH.adjust<g.ATH.adjustLimit&&(g.ATH.adjust=g.ATH.adjustLimit),g.ATH.adjustLimit=t));fa.mdct_sub48(g,q[0],q[1]);g.mode_ext=f.MPG_MD_LR_LR;if(d.force_ms)g.mode_ext=f.MPG_MD_MS_LR;else if(d.mode==
ka.JOINT_STEREO){for(w=h=t=0;w<g.mode_gr;w++)for(c=0;c<g.channels_out;c++)t+=n[w][c],h+=m[w][c];t<=1*h&&(t=g.l3_side.tt[0],c=g.l3_side.tt[g.mode_gr-1],t[0].block_type==t[1].block_type&&c[0].block_type==c[1].block_type&&(g.mode_ext=f.MPG_MD_MS_LR))}g.mode_ext==k&&(e=l,m=n);if(d.analysis&&null!=g.pinfo)for(w=0;w<g.mode_gr;w++)for(c=0;c<g.channels_out;c++)g.pinfo.ms_ratio[w]=g.ms_ratio[w],g.pinfo.ms_ener_ratio[w]=D[w],g.pinfo.blocktype[w][c]=g.l3_side.tt[w][c].block_type,g.pinfo.pe[w][c]=m[w][c],S.arraycopy(g.l3_side.tt[w][c].xr,
0,g.pinfo.xr[w][c],0,576),g.mode_ext==k&&(g.pinfo.ers[w][c]=g.pinfo.ers[w][c+2],S.arraycopy(g.pinfo.energy[w][c+2],0,g.pinfo.energy[w][c],0,g.pinfo.energy[w][c].length));if(d.VBR==J.vbr_off||d.VBR==J.vbr_abr){for(l=0;18>l;l++)g.nsPsy.pefirbuf[l]=g.nsPsy.pefirbuf[l+1];for(w=n=0;w<g.mode_gr;w++)for(c=0;c<g.channels_out;c++)n+=m[w][c];g.nsPsy.pefirbuf[18]=n;n=g.nsPsy.pefirbuf[9];for(l=0;9>l;l++)n+=(g.nsPsy.pefirbuf[l]+g.nsPsy.pefirbuf[18-l])*f.fircoef[l];n=3350*g.mode_gr*g.channels_out/n;for(w=0;w<g.mode_gr;w++)for(c=
0;c<g.channels_out;c++)m[w][c]*=n}g.iteration_loop.iteration_loop(d,m,D,e);r.format_bitstream(d);a=r.copy_buffer(g,a,b,B,1);d.bWriteVbrTag&&C.addVbrFrame(d);if(d.analysis&&null!=g.pinfo){for(c=0;c<g.channels_out;c++){for(b=0;b<x;b++)g.pinfo.pcmdata[c][b]=g.pinfo.pcmdata[c][b+d.framesize];for(b=x;1600>b;b++)g.pinfo.pcmdata[c][b]=q[c][b-x]}u.set_frame_pinfo(d,e)}g.bitrate_stereoMode_Hist[g.bitrate_index][4]++;g.bitrate_stereoMode_Hist[15][4]++;2==g.channels_out&&(g.bitrate_stereoMode_Hist[g.bitrate_index][g.mode_ext]++,
g.bitrate_stereoMode_Hist[15][g.mode_ext]++);for(d=0;d<g.mode_gr;++d)for(q=0;q<g.channels_out;++q)b=g.l3_side.tt[d][q].block_type|0,0!=g.l3_side.tt[d][q].mixed_block_flag&&(b=4),g.bitrate_blockType_Hist[g.bitrate_index][b]++,g.bitrate_blockType_Hist[g.bitrate_index][5]++,g.bitrate_blockType_Hist[15][b]++,g.bitrate_blockType_Hist[15][5]++;return a}}function Gc(){this.size=this.pos=this.want=this.seen=this.sum=0;this.bag=null;this.TotalFrameSize=this.nBytesWritten=this.nVbrNumFrames=0}function Hc(){this.tt=
[[null,null],[null,null]];this.resvDrain_post=this.resvDrain_pre=this.private_bits=this.main_data_begin=0;this.scfsi=[U(4),U(4)];for(var f=0;2>f;f++)for(var k=0;2>k;k++)this.tt[f][k]=new rb}function tb(){this.l=G(f.SBMAX_l);this.s=ha([f.SBMAX_s,3]);var x=this;this.assign=function(k){S.arraycopy(k.l,0,x.l,0,f.SBMAX_l);for(var r=0;r<f.SBMAX_s;r++)for(var v=0;3>v;v++)x.s[r][v]=k.s[r][v]}}function Ic(){this.last_en_subshort=ha([4,9]);this.lastAttacks=U(4);this.pefirbuf=G(19);this.longfact=G(f.SBMAX_l);
this.shortfact=G(f.SBMAX_s);this.attackthre_s=this.attackthre=0}function ia(){function x(){this.ptr=this.write_timing=0;this.buf=new Int8Array(40)}this.fill_buffer_resample_init=this.iteration_init_init=this.lame_encode_frame_init=this.Class_ID=0;this.mfbuf=ha([2,ia.MFSIZE]);this.full_outer_loop=this.use_best_huffman=this.subblock_gain=this.noise_shaping_stop=this.psymodel=this.substep_shaping=this.noise_shaping_amp=this.noise_shaping=this.highpass2=this.highpass1=this.lowpass2=this.lowpass1=this.mode_ext=
this.samplerate_index=this.bitrate_index=this.VBR_max_bitrate=this.VBR_min_bitrate=this.mf_size=this.mf_samples_to_encode=this.resample_ratio=this.channels_out=this.channels_in=this.mode_gr=0;this.l3_side=new Hc;this.ms_ratio=G(2);this.slot_lag=this.frac_SpF=this.padding=0;this.tag_spec=null;this.nMusicCRC=0;this.OldValue=U(2);this.CurrentStep=U(2);this.masking_lower=0;this.bv_scf=U(576);this.pseudohalf=U(ra.SFBMAX);this.sfb21_extra=!1;this.inbuf_old=Array(2);this.blackfilt=Array(2*ia.BPC+1);this.itime=
new Float64Array(2);this.sideinfo_len=0;this.sb_sample=ha([2,2,18,f.SBLIMIT]);this.amp_filter=G(32);this.header=Array(ia.MAX_HEADER_BUF);this.ResvMax=this.ResvSize=this.ancillary_flag=this.w_ptr=this.h_ptr=0;this.scalefac_band=new ma;this.minval_l=G(f.CBANDS);this.minval_s=G(f.CBANDS);this.nb_1=ha([4,f.CBANDS]);this.nb_2=ha([4,f.CBANDS]);this.nb_s1=ha([4,f.CBANDS]);this.nb_s2=ha([4,f.CBANDS]);this.s3_ll=this.s3_ss=null;this.decay=0;this.thm=Array(4);this.en=Array(4);this.tot_ener=G(4);this.loudness_sq=
ha([2,2]);this.loudness_sq_save=G(2);this.mld_l=G(f.SBMAX_l);this.mld_s=G(f.SBMAX_s);this.bm_l=U(f.SBMAX_l);this.bo_l=U(f.SBMAX_l);this.bm_s=U(f.SBMAX_s);this.bo_s=U(f.SBMAX_s);this.npart_s=this.npart_l=0;this.s3ind=Ua([f.CBANDS,2]);this.s3ind_s=Ua([f.CBANDS,2]);this.numlines_s=U(f.CBANDS);this.numlines_l=U(f.CBANDS);this.rnumlines_l=G(f.CBANDS);this.mld_cb_l=G(f.CBANDS);this.mld_cb_s=G(f.CBANDS);this.numlines_l_num1=this.numlines_s_num1=0;this.pe=G(4);this.ms_ener_ratio_old=this.ms_ratio_l_old=this.ms_ratio_s_old=
0;this.blocktype_old=U(2);this.nsPsy=new Ic;this.VBR_seek_table=new Gc;this.PSY=this.ATH=null;this.nogap_current=this.nogap_total=0;this.findPeakSample=this.findReplayGain=this.decode_on_the_fly=!0;this.AudiophileGain=this.RadioGain=this.PeakSample=0;this.rgdata=null;this.noclipScale=this.noclipGainChange=0;this.bitrate_stereoMode_Hist=Ua([16,5]);this.bitrate_blockType_Hist=Ua([16,6]);this.hip=this.pinfo=null;this.in_buffer_nsamples=0;this.iteration_loop=this.in_buffer_1=this.in_buffer_0=null;for(var k=
0;k<this.en.length;k++)this.en[k]=new tb;for(k=0;k<this.thm.length;k++)this.thm[k]=new tb;for(k=0;k<this.header.length;k++)this.header[k]=new x}function Jc(){function x(f,k,d){var c=0;d<<=1;var r=k+d;var a=4;do{var b;var u=a>>1;var e=a;var l=a<<1;var q=l+e;a=l<<1;var g=k;var t=g+u;do{var x=f[g+0]-f[g+e];var m=f[g+0]+f[g+e];var n=f[g+l]-f[g+q];var C=f[g+l]+f[g+q];f[g+l]=m-C;f[g+0]=m+C;f[g+q]=x-n;f[g+e]=x+n;x=f[t+0]-f[t+e];m=f[t+0]+f[t+e];n=Z.SQRT2*f[t+q];C=Z.SQRT2*f[t+l];f[t+l]=m-C;f[t+0]=m+C;f[t+
q]=x-n;f[t+e]=x+n;t+=a;g+=a}while(g<r);var E=v[c+0];var h=v[c+1];for(b=1;b<u;b++){var p=1-2*h*h;var A=2*h*E;g=k+b;t=k+e-b;do{var y=A*f[g+e]-p*f[t+e];C=p*f[g+e]+A*f[t+e];x=f[g+0]-C;m=f[g+0]+C;var O=f[t+0]-y;var G=f[t+0]+y;y=A*f[g+q]-p*f[t+q];C=p*f[g+q]+A*f[t+q];n=f[g+l]-C;C=f[g+l]+C;var R=f[t+l]-y;var X=f[t+l]+y;y=h*C-E*R;C=E*C+h*R;f[g+l]=m-C;f[g+0]=m+C;f[t+q]=O-y;f[t+e]=O+y;y=E*X-h*n;C=h*X+E*n;f[t+l]=G-C;f[t+0]=G+C;f[g+q]=x-y;f[g+e]=x+y;t+=a;g+=a}while(g<r);p=E;E=p*v[c+0]-h*v[c+1];h=p*v[c+1]+h*v[c+
0]}c+=2}while(a<d)}var k=G(f.BLKSIZE),r=G(f.BLKSIZE_s/2),v=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475],C=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,
74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(k,v,d,c,w){for(k=0;3>k;k++){var a=f.BLKSIZE_s/2,b=65535&192*(k+1),u=f.BLKSIZE_s/8-1;do{var e=C[u<<2]&255;var l=r[e]*c[d][w+e+b];var q=r[127-e]*c[d][w+e+b+128];var g=l-q;l+=q;var t=r[e+64]*c[d][w+e+b+64];q=r[63-e]*c[d][w+e+b+192];var D=t-q;t+=q;a-=4;v[k][a+0]=l+t;v[k][a+2]=l-t;v[k][a+1]=g+D;v[k][a+3]=g-D;l=r[e+
1]*c[d][w+e+b+1];q=r[126-e]*c[d][w+e+b+129];g=l-q;l+=q;t=r[e+65]*c[d][w+e+b+65];q=r[62-e]*c[d][w+e+b+193];D=t-q;t+=q;v[k][a+f.BLKSIZE_s/2+0]=l+t;v[k][a+f.BLKSIZE_s/2+2]=l-t;v[k][a+f.BLKSIZE_s/2+1]=g+D;v[k][a+f.BLKSIZE_s/2+3]=g-D}while(0<=--u);x(v[k],a,f.BLKSIZE_s/2)}};this.fft_long=function(r,v,d,c,w){r=f.BLKSIZE/8-1;var a=f.BLKSIZE/2;do{var b=C[r]&255;var u=k[b]*c[d][w+b];var e=k[b+512]*c[d][w+b+512];var l=u-e;u+=e;var q=k[b+256]*c[d][w+b+256];e=k[b+768]*c[d][w+b+768];var g=q-e;q+=e;a-=4;v[a+0]=
u+q;v[a+2]=u-q;v[a+1]=l+g;v[a+3]=l-g;u=k[b+1]*c[d][w+b+1];e=k[b+513]*c[d][w+b+513];l=u-e;u+=e;q=k[b+257]*c[d][w+b+257];e=k[b+769]*c[d][w+b+769];g=q-e;q+=e;v[a+f.BLKSIZE/2+0]=u+q;v[a+f.BLKSIZE/2+2]=u-q;v[a+f.BLKSIZE/2+1]=l+g;v[a+f.BLKSIZE/2+3]=l-g}while(0<=--r);x(v,a,f.BLKSIZE/2)};this.init_fft=function(u){for(u=0;u<f.BLKSIZE;u++)k[u]=.42-.5*Math.cos(2*Math.PI*(u+.5)/f.BLKSIZE)+.08*Math.cos(4*Math.PI*(u+.5)/f.BLKSIZE);for(u=0;u<f.BLKSIZE_s/2;u++)r[u]=.5*(1-Math.cos(2*Math.PI*(u+.5)/f.BLKSIZE_s))}}
function $b(){function x(a,b){for(var c=0,d=0;d<f.BLKSIZE/2;++d)c+=a[d]*b.ATH.eql_w[d];return c*=D}function k(a,b,c,f,d,e){if(b>a)if(b<a*n)var g=b/a;else return a+b;else{if(a>=b*n)return a+b;g=a/b}a+=b;if(6>=f+3){if(g>=m)return a;f=0|Z.FAST_LOG10_X(g,16);return a*p[f]}f=0|Z.FAST_LOG10_X(g,16);b=0!=e?d.ATH.cb_s[c]*d.ATH.adjust:d.ATH.cb_l[c]*d.ATH.adjust;return a<z*b?a>b?(c=1,13>=f&&(c=A[f]),b=Z.FAST_LOG10_X(a/b,10/15),a*((h[f]-c)*b+c)):13<f?a:a*A[f]:a*h[f]}function r(a,b,c){0>a&&(a=0);0>b&&(b=0);if(0>=
a)return b;if(0>=b)return a;var f=b>a?b/a:a/b;if(-2<=c&&2>=c){if(f>=m)return a+b;c=0|Z.FAST_LOG10_X(f,16);return(a+b)*y[c]}if(f<n)return a+b;a<b&&(a=b);return a}function v(a,b,c,d,e){var h,g,p=0,k=0;for(h=g=0;h<f.SBMAX_s;++g,++h){for(var l=a.bo_s[h],m=a.npart_s,l=l<m?l:m;g<l;)p+=b[g],k+=c[g],g++;a.en[d].s[h][e]=p;a.thm[d].s[h][e]=k;if(g>=m){++h;break}k=a.PSY.bo_s_weight[h];m=1-k;p=k*b[g];k*=c[g];a.en[d].s[h][e]+=p;a.thm[d].s[h][e]+=k;p=m*b[g];k=m*c[g]}for(;h<f.SBMAX_s;++h)a.en[d].s[h][e]=0,a.thm[d].s[h][e]=
0}function C(a,b,c,d){var e,h,g=0,p=0;for(e=h=0;e<f.SBMAX_l;++h,++e){for(var k=a.bo_l[e],l=a.npart_l,k=k<l?k:l;h<k;)g+=b[h],p+=c[h],h++;a.en[d].l[e]=g;a.thm[d].l[e]=p;if(h>=l){++e;break}p=a.PSY.bo_l_weight[e];l=1-p;g=p*b[h];p*=c[h];a.en[d].l[e]+=g;a.thm[d].l[e]+=p;g=l*b[h];p=l*c[h]}for(;e<f.SBMAX_l;++e)a.en[d].l[e]=0,a.thm[d].l[e]=0}function u(a,b,c){return 1<=c?a:0>=c?b:0<b?Math.pow(a/b,c)*b:0}function W(a,b){for(var c=309.07,d=0;d<f.SBMAX_s-1;d++)for(var e=0;3>e;e++){var h=a.thm.s[d][e];if(0<h){var h=
h*b,g=a.en.s[d][e];g>h&&(c=g>1E10*h?c+23.02585092994046*O[d]:c+O[d]*Z.FAST_LOG10(g/h))}}return c}function d(a,b){for(var c=281.0575,d=0;d<f.SBMAX_l-1;d++){var e=a.thm.l[d];if(0<e){var e=e*b,h=a.en.l[d];h>e&&(c=h>1E10*e?c+23.02585092994046*F[d]:c+F[d]*Z.FAST_LOG10(h/e))}}return c}function c(a,b,c,d,f){var e,h;for(e=h=0;e<a.npart_l;++e){var g=0,p=0,k;for(k=0;k<a.numlines_l[e];++k,++h){var l=b[h],g=g+l;p<l&&(p=l)}c[e]=g;d[e]=p;f[e]=g*a.rnumlines_l[e]}}function w(a,b,c,d){var f=E.length-1,e=0,h=c[e]+
c[e+1];if(0<h){var g=b[e];g<b[e+1]&&(g=b[e+1]);h=20*(2*g-h)/(h*(a.numlines_l[e]+a.numlines_l[e+1]-1));g=0|h;g>f&&(g=f);d[e]=g}else d[e]=0;for(e=1;e<a.npart_l-1;e++)h=c[e-1]+c[e]+c[e+1],0<h?(g=b[e-1],g<b[e]&&(g=b[e]),g<b[e+1]&&(g=b[e+1]),h=20*(3*g-h)/(h*(a.numlines_l[e-1]+a.numlines_l[e]+a.numlines_l[e+1]-1)),g=0|h,g>f&&(g=f),d[e]=g):d[e]=0;h=c[e-1]+c[e];0<h?(g=b[e-1],g<b[e]&&(g=b[e]),h=20*(2*g-h)/(h*(a.numlines_l[e-1]+a.numlines_l[e]-1)),g=0|h,g>f&&(g=f),d[e]=g):d[e]=0}function a(a,b,c,e,d,f,h){var g=
2*f;d=0<f?Math.pow(10,d):1;for(var p,k,l=0;l<h;++l){var m=a[2][l],q=a[3][l],A=b[0][l],r=b[1][l],n=b[2][l],t=b[3][l];A<=1.58*r&&r<=1.58*A?(p=c[l]*m,k=Math.max(n,Math.min(t,c[l]*q)),p=Math.max(t,Math.min(n,p))):(k=n,p=t);0<f&&(t=e[l]*d,A=Math.min(Math.max(A,t),Math.max(r,t)),n=Math.max(k,t),t=Math.max(p,t),r=n+t,0<r&&A*g<r&&(A=A*g/r,n*=A,t*=A),k=Math.min(n,k),p=Math.min(t,p));k>m&&(k=m);p>q&&(p=q);b[2][l]=k;b[3][l]=p}}function b(a,b){a=0<=a?27*-a:a*b;return-72>=a?0:Math.exp(.2302585093*a)}function B(a){0>
a&&(a=0);a*=.001;return 13*Math.atan(.76*a)+3.5*Math.atan(a*a/56.25)}function e(a,b,c,e,d,h,g,p,k,l,m,q){var A=G(f.CBANDS+1),r=p/(15<q?1152:384),t=U(f.HBLKSIZE),n;p/=k;var u=0,Q=0;for(n=0;n<f.CBANDS;n++){var w;var y=B(p*u);A[n]=p*u;for(w=u;.34>B(p*w)-y&&w<=k/2;w++);a[n]=w-u;for(Q=n+1;u<w;)t[u++]=n;if(u>k/2){u=k/2;++n;break}}A[n]=p*u;for(y=0;y<q;y++)n=l[y],u=l[y+1],n=0|Math.floor(.5+m*(n-.5)),0>n&&(n=0),w=0|Math.floor(.5+m*(u-.5)),w>k/2&&(w=k/2),c[y]=(t[n]+t[w])/2,b[y]=t[w],g[y]=(r*u-A[b[y]])/(A[b[y]+
1]-A[b[y]]),0>g[y]?g[y]=0:1<g[y]&&(g[y]=1),u=B(p*l[y]*m),u=Math.min(u,15.5)/15.5,h[y]=Math.pow(10,1.25*(1-Math.cos(Math.PI*u))-2.5);for(b=u=0;b<Q;b++)c=a[b],y=B(p*u),h=B(p*(u+c-1)),e[b]=.5*(y+h),y=B(p*(u-.5)),h=B(p*(u+c-.5)),d[b]=h-y,u+=c;return Q}function l(a,c,e,d,h,g){var p=ha([f.CBANDS,f.CBANDS]),k=0;if(g)for(var l=0;l<c;l++)for(g=0;g<c;g++){var m=e[l]-e[g];m=0<=m?3*m:1.5*m;if(.5<=m&&2.5>=m){var q=m-.5;q=8*(q*q-2*q)}else q=0;m+=.474;m=15.811389+7.5*m-17.5*Math.sqrt(1+m*m);-60>=m?q=0:(m=Math.exp(.2302585093*
(q+m)),q=m/.6609193);m=q*d[g];p[l][g]=m*h[l]}else for(g=0;g<c;g++){q=15+Math.min(21/e[g],12);var A;var r,l=q;for(A=0;1E-20<b(A,l);--A);var n=A;for(r=0;1E-12<Math.abs(r-n);)A=(r+n)/2,0<b(A,l)?r=A:n=A;m=n;for(A=0;1E-20<b(A,l);A+=1);n=0;for(r=A;1E-12<Math.abs(r-n);)A=(r+n)/2,0<b(A,l)?n=A:r=A;var t=0;for(n=0;1E3>=n;++n)A=m+n*(r-m)/1E3,A=b(A,l),t+=A;A=1001/(t*(r-m));for(l=0;l<c;l++)m=A*b(e[l]-e[g],q)*d[g],p[l][g]=m*h[l]}for(l=0;l<c;l++){for(g=0;g<c&&!(0<p[l][g]);g++);a[l][0]=g;for(g=c-1;0<g&&!(0<p[l][g]);g--);
a[l][1]=g;k+=a[l][1]-a[l][0]+1}e=G(k);for(l=d=0;l<c;l++)for(g=a[l][0];g<=a[l][1];g++)e[d++]=p[l][g];return e}function q(a){a=B(a);a=Math.min(a,15.5)/15.5;return Math.pow(10,1.25*(1-Math.cos(Math.PI*a))-2.5)}function g(a,b){-.3>a&&(a=3410);a=Math.max(.1,a/1E3);return 3.64*Math.pow(a,-.8)-6.8*Math.exp(-.6*Math.pow(a-3.4,2))+6*Math.exp(-.15*Math.pow(a-8.7,2))+.001*(.6+.04*b)*Math.pow(a,4)}var t=new Jc,D=1/217621504/(f.BLKSIZE/2),m,n,z,E=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749],h=[3.3246*
3.3246,3.23837*3.23837,9.9500500969,9.0247369744,8.1854926609,7.0440875649,2.46209*2.46209,2.284*2.284,4.4892710641,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,2.4621061921,2.1508568964,1.37074*1.37074,1.31036*1.31036,1.5691069696,1.4555939904,1.16203*1.16203,1.2715945225,1.09428*1.09428,1.0659*1.0659,1.0779838276,1.0382591025,1],p=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],A=[5.5396212496,2.29259*2.29259,
4.9868695969,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,2.2499700001,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.2339655056,1.0779838276],y=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],O=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130],F=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1],R=[-1.730326E-17,-.01703172,
-1.349528E-17,.0418072,-6.73278E-17,-.0876324,-3.0835E-17,.1863476,-1.104424E-16,-.627638];this.L3psycho_anal_ns=function(a,b,e,h,g,p,l,m,q,A){var r,n=a.internal_flags,y=ha([2,f.BLKSIZE]),Q=ha([2,3,f.BLKSIZE_s]),I=G(f.CBANDS+1),H=G(f.CBANDS+1),V=G(f.CBANDS+2),O=U(2),D=U(2),z,M,B,X,F,N,K,la=ha([2,576]),S=U(f.CBANDS+2),ca=U(f.CBANDS+2);qa.fill(ca,0);var fa=n.channels_out;a.mode==ka.JOINT_STEREO&&(fa=4);var T=a.VBR==J.vbr_off?0==n.ResvMax?0:n.ResvSize/n.ResvMax*.5:a.VBR==J.vbr_rh||a.VBR==J.vbr_mtrh||
a.VBR==J.vbr_mt?.6:1;for(z=0;z<n.channels_out;z++){var Qa=b[z],L=e+576-350-21+192;for(B=0;576>B;B++){var ba;var ia=Qa[L+B+10];for(X=ba=0;9>X;X+=2)ia+=R[X]*(Qa[L+B+X]+Qa[L+B+21-X]),ba+=R[X+1]*(Qa[L+B+X+1]+Qa[L+B+21-X-1]);la[z][B]=ia+ba}g[h][z].en.assign(n.en[z]);g[h][z].thm.assign(n.thm[z]);2<fa&&(p[h][z].en.assign(n.en[z+2]),p[h][z].thm.assign(n.thm[z+2]))}for(z=0;z<fa;z++){var Ka=G(12),da=[0,0,0,0],Da=G(12),Y=1,ac=G(f.CBANDS),ra=G(f.CBANDS),ya=[0,0,0,0],xa=G(f.HBLKSIZE),ma=ha([3,f.HBLKSIZE_s]);for(B=
0;3>B;B++)Ka[B]=n.nsPsy.last_en_subshort[z][B+6],Da[B]=Ka[B]/n.nsPsy.last_en_subshort[z][B+4],da[0]+=Ka[B];if(2==z)for(B=0;576>B;B++){var za=la[0][B];var Ub=la[1][B];la[0][B]=za+Ub;la[1][B]=za-Ub}var Za=la[z&1],bc=0;for(B=0;9>B;B++){var Ua=bc+64;for(r=1;bc<Ua;bc++)r<Math.abs(Za[bc])&&(r=Math.abs(Za[bc]));n.nsPsy.last_en_subshort[z][B]=Ka[B+3]=r;da[1+B/3]+=r;r=r>Ka[B+3-2]?r/Ka[B+3-2]:Ka[B+3-2]>10*r?Ka[B+3-2]/(10*r):0;Da[B+3]=r}if(a.analysis){var Fa=Da[0];for(B=1;12>B;B++)Fa<Da[B]&&(Fa=Da[B]);n.pinfo.ers[h][z]=
n.pinfo.ers_save[z];n.pinfo.ers_save[z]=Fa}var sb=3==z?n.nsPsy.attackthre_s:n.nsPsy.attackthre;for(B=0;12>B;B++)0==ya[B/3]&&Da[B]>sb&&(ya[B/3]=B%3+1);for(B=1;4>B;B++)1.7>(da[B-1]>da[B]?da[B-1]/da[B]:da[B]/da[B-1])&&(ya[B]=0,1==B&&(ya[0]=0));0!=ya[0]&&0!=n.nsPsy.lastAttacks[z]&&(ya[0]=0);if(3==n.nsPsy.lastAttacks[z]||0!=ya[0]+ya[1]+ya[2]+ya[3])Y=0,0!=ya[1]&&0!=ya[0]&&(ya[1]=0),0!=ya[2]&&0!=ya[1]&&(ya[2]=0),0!=ya[3]&&0!=ya[2]&&(ya[3]=0);2>z?D[z]=Y:0==Y&&(D[0]=D[1]=0);q[z]=n.tot_ener[z];var ub=void 0,
Vb=void 0,ob=void 0,P=void 0,jc=a,Ia=xa,Gb=ma,Ra=y,La=z&1,Ma=Q,Sa=z&1,va=h,Na=z,fb=b,gb=e,Va=jc.internal_flags;if(2>Na)t.fft_long(Va,Ra[La],Na,fb,gb),t.fft_short(Va,Ma[Sa],Na,fb,gb);else if(2==Na){for(var ja=f.BLKSIZE-1;0<=ja;--ja)ub=Ra[La+0][ja],Vb=Ra[La+1][ja],Ra[La+0][ja]=(ub+Vb)*Z.SQRT2*.5,Ra[La+1][ja]=(ub-Vb)*Z.SQRT2*.5;for(var Ca=2;0<=Ca;--Ca)for(ja=f.BLKSIZE_s-1;0<=ja;--ja)ub=Ma[Sa+0][Ca][ja],Vb=Ma[Sa+1][Ca][ja],Ma[Sa+0][Ca][ja]=(ub+Vb)*Z.SQRT2*.5,Ma[Sa+1][Ca][ja]=(ub-Vb)*Z.SQRT2*.5}Ia[0]=
Ra[La+0][0];Ia[0]*=Ia[0];for(ja=f.BLKSIZE/2-1;0<=ja;--ja)ob=Ra[La+0][f.BLKSIZE/2-ja],P=Ra[La+0][f.BLKSIZE/2+ja],Ia[f.BLKSIZE/2-ja]=.5*(ob*ob+P*P);for(Ca=2;0<=Ca;--Ca)for(Gb[Ca][0]=Ma[Sa+0][Ca][0],Gb[Ca][0]*=Gb[Ca][0],ja=f.BLKSIZE_s/2-1;0<=ja;--ja)ob=Ma[Sa+0][Ca][f.BLKSIZE_s/2-ja],P=Ma[Sa+0][Ca][f.BLKSIZE_s/2+ja],Gb[Ca][f.BLKSIZE_s/2-ja]=.5*(ob*ob+P*P);for(var rb=0,ja=11;ja<f.HBLKSIZE;ja++)rb+=Ia[ja];Va.tot_ener[Na]=rb;if(jc.analysis){for(ja=0;ja<f.HBLKSIZE;ja++)Va.pinfo.energy[va][Na][ja]=Va.pinfo.energy_save[Na][ja],
Va.pinfo.energy_save[Na][ja]=Ia[ja];Va.pinfo.pe[va][Na]=Va.pe[Na]}2==jc.athaa_loudapprox&&2>Na&&(Va.loudness_sq[va][Na]=Va.loudness_sq_save[Na],Va.loudness_sq_save[Na]=x(Ia,Va));c(n,xa,I,ac,ra);w(n,ac,ra,S);for(K=0;3>K;K++){for(var Hb,aa,sa=void 0,ta=void 0,Wb=void 0,Ab=ma,Ta=H,$a=V,vb=z,Fb=K,Ga=a.internal_flags,sa=ta=0;sa<Ga.npart_s;++sa){for(var Ib=0,tb=0,hb=Ga.numlines_s[sa],zb=0;zb<hb;++zb,++ta){var Bb=Ab[Fb][ta],Ib=Ib+Bb;tb<Bb&&(tb=Bb)}Ta[sa]=Ib}for(ta=sa=0;sa<Ga.npart_s;sa++){var wb=Ga.s3ind_s[sa][0],
ab=Ga.s3_ss[ta++]*Ta[wb];for(++wb;wb<=Ga.s3ind_s[sa][1];)ab+=Ga.s3_ss[ta]*Ta[wb],++ta,++wb;Wb=2*Ga.nb_s1[vb][sa];$a[sa]=Math.min(ab,Wb);Ga.blocktype_old[vb&1]==f.SHORT_TYPE&&(Wb=16*Ga.nb_s2[vb][sa],$a[sa]=Math.min(Wb,$a[sa]));Ga.nb_s2[vb][sa]=Ga.nb_s1[vb][sa];Ga.nb_s1[vb][sa]=ab}for(;sa<=f.CBANDS;++sa)Ta[sa]=0,$a[sa]=0;v(n,H,V,z,K);for(N=0;N<f.SBMAX_s;N++){aa=n.thm[z].s[N][K];aa*=.8;if(2<=ya[K]||1==ya[K+1]){var ib=0!=K?K-1:2;r=u(n.thm[z].s[N][ib],aa,.6*T);aa=Math.min(aa,r)}if(1==ya[K])ib=0!=K?K-1:
2,r=u(n.thm[z].s[N][ib],aa,.3*T),aa=Math.min(aa,r);else if(0!=K&&3==ya[K-1]||0==K&&3==n.nsPsy.lastAttacks[z])ib=2!=K?K+1:0,r=u(n.thm[z].s[N][ib],aa,.3*T),aa=Math.min(aa,r);Hb=Ka[3*K+3]+Ka[3*K+4]+Ka[3*K+5];6*Ka[3*K+5]<Hb&&(aa*=.5,6*Ka[3*K+4]<Hb&&(aa*=.5));n.thm[z].s[N][K]=aa}}n.nsPsy.lastAttacks[z]=ya[2];for(M=F=0;M<n.npart_l;M++){for(var xb=n.s3ind[M][0],Qb=I[xb]*E[S[xb]],jb=n.s3_ll[F++]*Qb;++xb<=n.s3ind[M][1];)Qb=I[xb]*E[S[xb]],jb=k(jb,n.s3_ll[F++]*Qb,xb,xb-M,n,0);jb*=.158489319246111;V[M]=n.blocktype_old[z&
1]==f.SHORT_TYPE?jb:u(Math.min(jb,Math.min(2*n.nb_1[z][M],16*n.nb_2[z][M])),jb,T);n.nb_2[z][M]=n.nb_1[z][M];n.nb_1[z][M]=jb}for(;M<=f.CBANDS;++M)I[M]=0,V[M]=0;C(n,I,V,z)}if((a.mode==ka.STEREO||a.mode==ka.JOINT_STEREO)&&0<a.interChRatio){var Cb=a.interChRatio,Oa=a.internal_flags;if(1<Oa.channels_out){for(var Aa=0;Aa<f.SBMAX_l;Aa++){var oa=Oa.thm[0].l[Aa];var Jb=Oa.thm[1].l[Aa];Oa.thm[0].l[Aa]+=Jb*Cb;Oa.thm[1].l[Aa]+=oa*Cb}for(Aa=0;Aa<f.SBMAX_s;Aa++)for(var kb=0;3>kb;kb++)oa=Oa.thm[0].s[Aa][kb],Jb=
Oa.thm[1].s[Aa][kb],Oa.thm[0].s[Aa][kb]+=Jb*Cb,Oa.thm[1].s[Aa][kb]+=oa*Cb}}if(a.mode==ka.JOINT_STEREO){for(var Db,Kb,Ja,Xa,ea=0;ea<f.SBMAX_l;ea++)n.thm[0].l[ea]>1.58*n.thm[1].l[ea]||n.thm[1].l[ea]>1.58*n.thm[0].l[ea]||(Xa=n.mld_l[ea]*n.en[3].l[ea],Ja=Math.max(n.thm[2].l[ea],Math.min(n.thm[3].l[ea],Xa)),Xa=n.mld_l[ea]*n.en[2].l[ea],Kb=Math.max(n.thm[3].l[ea],Math.min(n.thm[2].l[ea],Xa)),n.thm[2].l[ea]=Ja,n.thm[3].l[ea]=Kb);for(ea=0;ea<f.SBMAX_s;ea++)for(var Ba=0;3>Ba;Ba++)n.thm[0].s[ea][Ba]>1.58*n.thm[1].s[ea][Ba]||
n.thm[1].s[ea][Ba]>1.58*n.thm[0].s[ea][Ba]||(Xa=n.mld_s[ea]*n.en[3].s[ea][Ba],Ja=Math.max(n.thm[2].s[ea][Ba],Math.min(n.thm[3].s[ea][Ba],Xa)),Xa=n.mld_s[ea]*n.en[2].s[ea][Ba],Kb=Math.max(n.thm[3].s[ea][Ba],Math.min(n.thm[2].s[ea][Ba],Xa)),n.thm[2].s[ea][Ba]=Ja,n.thm[3].s[ea][Ba]=Kb);Db=a.msfix;if(0<Math.abs(Db)){for(var Lb=Db,Ha,bb,cb,db,Eb,ga=Lb,lb=Math.pow(10,a.ATHlower*n.ATH.adjust),Lb=2*Lb,ga=2*ga,wa=0;wa<f.SBMAX_l;wa++)bb=n.ATH.cb_l[n.bm_l[wa]]*lb,Eb=Math.min(Math.max(n.thm[0].l[wa],bb),Math.max(n.thm[1].l[wa],
bb)),db=Math.max(n.thm[2].l[wa],bb),cb=Math.max(n.thm[3].l[wa],bb),Eb*Lb<db+cb&&(Ha=Eb*ga/(db+cb),db*=Ha,cb*=Ha),n.thm[2].l[wa]=Math.min(db,n.thm[2].l[wa]),n.thm[3].l[wa]=Math.min(cb,n.thm[3].l[wa]);lb*=f.BLKSIZE_s/f.BLKSIZE;for(wa=0;wa<f.SBMAX_s;wa++)for(var mb=0;3>mb;mb++)bb=n.ATH.cb_s[n.bm_s[wa]]*lb,Eb=Math.min(Math.max(n.thm[0].s[wa][mb],bb),Math.max(n.thm[1].s[wa][mb],bb)),db=Math.max(n.thm[2].s[wa][mb],bb),cb=Math.max(n.thm[3].s[wa][mb],bb),Eb*Lb<db+cb&&(Ha=Eb*Lb/(db+cb),db*=Ha,cb*=Ha),n.thm[2].s[wa][mb]=
Math.min(n.thm[2].s[wa][mb],db),n.thm[3].s[wa][mb]=Math.min(n.thm[3].s[wa][mb],cb)}}var Wa=a.internal_flags;a.short_blocks!=pa.short_block_coupled||0!=D[0]&&0!=D[1]||(D[0]=D[1]=0);for(var ua=0;ua<Wa.channels_out;ua++)O[ua]=f.NORM_TYPE,a.short_blocks==pa.short_block_dispensed&&(D[ua]=1),a.short_blocks==pa.short_block_forced&&(D[ua]=0),0!=D[ua]?Wa.blocktype_old[ua]==f.SHORT_TYPE&&(O[ua]=f.STOP_TYPE):(O[ua]=f.SHORT_TYPE,Wa.blocktype_old[ua]==f.NORM_TYPE&&(Wa.blocktype_old[ua]=f.START_TYPE),Wa.blocktype_old[ua]==
f.STOP_TYPE&&(Wa.blocktype_old[ua]=f.SHORT_TYPE)),A[ua]=Wa.blocktype_old[ua],Wa.blocktype_old[ua]=O[ua];for(z=0;z<fa;z++){var Mb=0;if(1<z){var cc=m;Mb=-2;var Ea=f.NORM_TYPE;if(A[0]==f.SHORT_TYPE||A[1]==f.SHORT_TYPE)Ea=f.SHORT_TYPE;var Nb=p[h][z-2]}else cc=l,Mb=0,Ea=A[z],Nb=g[h][z];cc[Mb+z]=Ea==f.SHORT_TYPE?W(Nb,n.masking_lower):d(Nb,n.masking_lower);a.analysis&&(n.pinfo.pe[h][z]=cc[Mb+z])}return 0};var X=[-1.730326E-17,-.01703172,-1.349528E-17,.0418072,-6.73278E-17,-.0876324,-3.0835E-17,.1863476,
-1.104424E-16,-.627638];this.L3psycho_anal_vbr=function(b,e,h,g,p,l,k,m,n,q){for(var A,y,Q,z=b.internal_flags,B,H,V=G(f.HBLKSIZE),I=ha([3,f.HBLKSIZE_s]),O=ha([2,f.BLKSIZE]),D=ha([2,3,f.BLKSIZE_s]),M=ha([4,f.CBANDS]),R=ha([4,f.CBANDS]),F=ha([4,3]),N=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],K=U(2),J=b.mode==ka.JOINT_STEREO?4:z.channels_out,la=ha([2,576]),S=b.internal_flags,fa=S.channels_out,ca=b.mode==ka.JOINT_STEREO?4:fa,T=0;T<fa;T++){firbuf=e[T];for(var Qa=h+576-350-21+192,L=0;576>L;L++){var ba;
var ia=firbuf[Qa+L+10];for(var da=ba=0;9>da;da+=2)ia+=X[da]*(firbuf[Qa+L+da]+firbuf[Qa+L+21-da]),ba+=X[da+1]*(firbuf[Qa+L+da+1]+firbuf[Qa+L+21-da-1]);la[T][L]=ia+ba}p[g][T].en.assign(S.en[T]);p[g][T].thm.assign(S.thm[T]);2<ca&&(l[g][T].en.assign(S.en[T+2]),l[g][T].thm.assign(S.thm[T+2]))}for(T=0;T<ca;T++){var Y=G(12),Da=G(12),ra=[0,0,0,0],xa=la[T&1],qa=0,ya=3==T?S.nsPsy.attackthre_s:S.nsPsy.attackthre,ma=1;if(2==T)for(L=0,da=576;0<da;++L,--da){var ac=la[0][L],Fa=la[1][L];la[0][L]=ac+Fa;la[1][L]=ac-
Fa}for(L=0;3>L;L++)Da[L]=S.nsPsy.last_en_subshort[T][L+6],Y[L]=Da[L]/S.nsPsy.last_en_subshort[T][L+4],ra[0]+=Da[L];for(L=0;9>L;L++){for(var za=qa+64,Za=1;qa<za;qa++)Za<Math.abs(xa[qa])&&(Za=Math.abs(xa[qa]));S.nsPsy.last_en_subshort[T][L]=Da[L+3]=Za;ra[1+L/3]+=Za;Za=Za>Da[L+3-2]?Za/Da[L+3-2]:Da[L+3-2]>10*Za?Da[L+3-2]/(10*Za):0;Y[L+3]=Za}for(L=0;3>L;++L){var Ua=Da[3*L+3]+Da[3*L+4]+Da[3*L+5],Ub=1;6*Da[3*L+5]<Ua&&(Ub*=.5,6*Da[3*L+4]<Ua&&(Ub*=.5));F[T][L]=Ub}if(b.analysis){for(var fb=Y[0],L=1;12>L;L++)fb<
Y[L]&&(fb=Y[L]);S.pinfo.ers[g][T]=S.pinfo.ers_save[T];S.pinfo.ers_save[T]=fb}for(L=0;12>L;L++)0==N[T][L/3]&&Y[L]>ya&&(N[T][L/3]=L%3+1);for(L=1;4>L;L++){var gb=ra[L-1],ub=ra[L];4E4>Math.max(gb,ub)&&gb<1.7*ub&&ub<1.7*gb&&(1==L&&N[T][0]<=N[T][L]&&(N[T][0]=0),N[T][L]=0)}N[T][0]<=S.nsPsy.lastAttacks[T]&&(N[T][0]=0);if(3==S.nsPsy.lastAttacks[T]||0!=N[T][0]+N[T][1]+N[T][2]+N[T][3])ma=0,0!=N[T][1]&&0!=N[T][0]&&(N[T][1]=0),0!=N[T][2]&&0!=N[T][1]&&(N[T][2]=0),0!=N[T][3]&&0!=N[T][2]&&(N[T][3]=0);2>T?K[T]=ma:
0==ma&&(K[0]=K[1]=0);n[T]=S.tot_ener[T]}var sb=b.internal_flags;b.short_blocks!=pa.short_block_coupled||0!=K[0]&&0!=K[1]||(K[0]=K[1]=0);for(var ob=0;ob<sb.channels_out;ob++)b.short_blocks==pa.short_block_dispensed&&(K[ob]=1),b.short_blocks==pa.short_block_forced&&(K[ob]=0);for(var P=0;P<J;P++){Q=P&1;B=O;var rb=b,Ia=P,Gb=g,Ra=V,La=B,Ma=Q,Sa=rb.internal_flags;if(2>Ia)t.fft_long(Sa,La[Ma],Ia,e,h);else if(2==Ia)for(var va=f.BLKSIZE-1;0<=va;--va){var Na=La[Ma+0][va],tb=La[Ma+1][va];La[Ma+0][va]=(Na+tb)*
Z.SQRT2*.5;La[Ma+1][va]=(Na-tb)*Z.SQRT2*.5}Ra[0]=La[Ma+0][0];Ra[0]*=Ra[0];for(va=f.BLKSIZE/2-1;0<=va;--va){var zb=La[Ma+0][f.BLKSIZE/2-va],Va=La[Ma+0][f.BLKSIZE/2+va];Ra[f.BLKSIZE/2-va]=.5*(zb*zb+Va*Va)}for(var ja=0,va=11;va<f.HBLKSIZE;va++)ja+=Ra[va];Sa.tot_ener[Ia]=ja;if(rb.analysis){for(va=0;va<f.HBLKSIZE;va++)Sa.pinfo.energy[Gb][Ia][va]=Sa.pinfo.energy_save[Ia][va],Sa.pinfo.energy_save[Ia][va]=Ra[va];Sa.pinfo.pe[Gb][Ia]=Sa.pe[Ia]}var Ca=P,Fb=V,Hb=b.internal_flags;2==b.athaa_loudapprox&&2>Ca&&
(Hb.loudness_sq[g][Ca]=Hb.loudness_sq_save[Ca],Hb.loudness_sq_save[Ca]=x(Fb,Hb));if(0!=K[Q]){var aa=void 0,sa=void 0,ta=z,Wb=V,Ab=M[P],Ta=R[P],$a=P,vb=G(f.CBANDS),Tb=G(f.CBANDS),Ga=U(f.CBANDS+2);c(ta,Wb,Ab,vb,Tb);w(ta,vb,Tb,Ga);for(var Ib=0,aa=0;aa<ta.npart_l;aa++){var $b,hb=ta.s3ind[aa][0],fc=ta.s3ind[aa][1],Bb=0,wb=0,Bb=Ga[hb],wb=wb+1;var ab=ta.s3_ll[Ib]*Ab[hb]*E[Ga[hb]];++Ib;for(++hb;hb<=fc;){Bb+=Ga[hb];wb+=1;var ib=ta.s3_ll[Ib]*Ab[hb]*E[Ga[hb]];ab=$b=r(ab,ib,hb-aa);++Ib;++hb}Bb=(1+2*Bb)/(2*wb);
var xb=.5*E[Bb];ab*=xb;if(ta.blocktype_old[$a&1]==f.SHORT_TYPE)sa=2*ta.nb_1[$a][aa],Ta[aa]=0<sa?Math.min(ab,sa):Math.min(ab,.3*Ab[aa]);else{var Qb=16*ta.nb_2[$a][aa],jb=2*ta.nb_1[$a][aa];0>=Qb&&(Qb=ab);0>=jb&&(jb=ab);sa=ta.blocktype_old[$a&1]==f.NORM_TYPE?Math.min(jb,Qb):jb;Ta[aa]=Math.min(ab,sa)}ta.nb_2[$a][aa]=ta.nb_1[$a][aa];ta.nb_1[$a][aa]=ab;ib=vb[aa];ib*=ta.minval_l[aa];ib*=xb;Ta[aa]>ib&&(Ta[aa]=ib);1<ta.masking_lower&&(Ta[aa]*=ta.masking_lower);Ta[aa]>Ab[aa]&&(Ta[aa]=Ab[aa]);1>ta.masking_lower&&
(Ta[aa]*=ta.masking_lower)}for(;aa<f.CBANDS;++aa)Ab[aa]=0,Ta[aa]=0}else for(var Cb=z,Oa=P,Aa=0;Aa<Cb.npart_l;Aa++)Cb.nb_2[Oa][Aa]=Cb.nb_1[Oa][Aa],Cb.nb_1[Oa][Aa]=0}2==K[0]+K[1]&&b.mode==ka.JOINT_STEREO&&a(M,R,z.mld_cb_l,z.ATH.cb_l,b.ATHlower*z.ATH.adjust,b.msfix,z.npart_l);for(P=0;P<J;P++)Q=P&1,0!=K[Q]&&C(z,M[P],R[P],P);for(var oa=0;3>oa;oa++){for(P=0;P<J;++P)if(Q=P&1,0!=K[Q]){var Jb=z,kb=P;if(0==oa)for(var Db=0;Db<Jb.npart_s;Db++)Jb.nb_s2[kb][Db]=Jb.nb_s1[kb][Db],Jb.nb_s1[kb][Db]=0}else{H=D;var Kb=
P,Ja=oa,Xa=I,ea=H,Ba=Q,Lb=b.internal_flags;0==Ja&&2>Kb&&t.fft_short(Lb,ea[Ba],Kb,e,h);if(2==Kb)for(var Ha=f.BLKSIZE_s-1;0<=Ha;--Ha){var bb=ea[Ba+0][Ja][Ha],cb=ea[Ba+1][Ja][Ha];ea[Ba+0][Ja][Ha]=(bb+cb)*Z.SQRT2*.5;ea[Ba+1][Ja][Ha]=(bb-cb)*Z.SQRT2*.5}Xa[Ja][0]=ea[Ba+0][Ja][0];Xa[Ja][0]*=Xa[Ja][0];for(Ha=f.BLKSIZE_s/2-1;0<=Ha;--Ha){var db=ea[Ba+0][Ja][f.BLKSIZE_s/2-Ha],Eb=ea[Ba+0][Ja][f.BLKSIZE_s/2+Ha];Xa[Ja][f.BLKSIZE_s/2-Ha]=.5*(db*db+Eb*Eb)}for(var ga=void 0,lb=void 0,wa=void 0,mb=I,Wa=M[P],ua=R[P],
Mb=P,cc=oa,Ea=b.internal_flags,Nb=new float[f.CBANDS],kc=G(f.CBANDS),dc=new int[f.CBANDS],ga=lb=0;ga<Ea.npart_s;++ga){for(var gc=0,lc=0,sc=Ea.numlines_s[ga],wa=0;wa<sc;++wa,++lb){var mc=mb[cc][lb],gc=gc+mc;lc<mc&&(lc=mc)}Wa[ga]=gc;Nb[ga]=lc;kc[ga]=gc/sc}for(;ga<f.CBANDS;++ga)Nb[ga]=0,kc[ga]=0;var Ya=void 0,nb=void 0,Ob=Ea,pb=Nb,Rb=kc,Xb=dc,Yb=E.length-1,na=0,Pa=Rb[na]+Rb[na+1];0<Pa?(Ya=pb[na],Ya<pb[na+1]&&(Ya=pb[na+1]),Pa=20*(2*Ya-Pa)/(Pa*(Ob.numlines_s[na]+Ob.numlines_s[na+1]-1)),nb=0|Pa,nb>Yb&&
(nb=Yb),Xb[na]=nb):Xb[na]=0;for(na=1;na<Ob.npart_s-1;na++)Pa=Rb[na-1]+Rb[na]+Rb[na+1],0<Pa?(Ya=pb[na-1],Ya<pb[na]&&(Ya=pb[na]),Ya<pb[na+1]&&(Ya=pb[na+1]),Pa=20*(3*Ya-Pa)/(Pa*(Ob.numlines_s[na-1]+Ob.numlines_s[na]+Ob.numlines_s[na+1]-1)),nb=0|Pa,nb>Yb&&(nb=Yb),Xb[na]=nb):Xb[na]=0;Pa=Rb[na-1]+Rb[na];0<Pa?(Ya=pb[na-1],Ya<pb[na]&&(Ya=pb[na]),Pa=20*(2*Ya-Pa)/(Pa*(Ob.numlines_s[na-1]+Ob.numlines_s[na]-1)),nb=0|Pa,nb>Yb&&(nb=Yb),Xb[na]=nb):Xb[na]=0;for(lb=ga=0;ga<Ea.npart_s;ga++){var yb=Ea.s3ind_s[ga][0],
ic=Ea.s3ind_s[ga][1];var hc=dc[yb];var tc=1;var ec=Ea.s3_ss[lb]*Wa[yb]*E[dc[yb]];++lb;for(++yb;yb<=ic;){hc+=dc[yb];tc+=1;var Zb=Ea.s3_ss[lb]*Wa[yb]*E[dc[yb]];ec=r(ec,Zb,yb-ga);++lb;++yb}hc=(1+2*hc)/(2*tc);var uc=.5*E[hc];ec*=uc;ua[ga]=ec;Ea.nb_s2[Mb][ga]=Ea.nb_s1[Mb][ga];Ea.nb_s1[Mb][ga]=ec;Zb=Nb[ga];Zb*=Ea.minval_s[ga];Zb*=uc;ua[ga]>Zb&&(ua[ga]=Zb);1<Ea.masking_lower&&(ua[ga]*=Ea.masking_lower);ua[ga]>Wa[ga]&&(ua[ga]=Wa[ga]);1>Ea.masking_lower&&(ua[ga]*=Ea.masking_lower)}for(;ga<f.CBANDS;++ga)Wa[ga]=
0,ua[ga]=0}0==K[0]+K[1]&&b.mode==ka.JOINT_STEREO&&a(M,R,z.mld_cb_s,z.ATH.cb_s,b.ATHlower*z.ATH.adjust,b.msfix,z.npart_s);for(P=0;P<J;++P)Q=P&1,0==K[Q]&&v(z,M[P],R[P],P,oa)}for(P=0;P<J;P++)if(Q=P&1,0==K[Q])for(var Sb=0;Sb<f.SBMAX_s;Sb++){for(var vc=G(3),oa=0;3>oa;oa++){var eb=z.thm[P].s[Sb][oa],eb=.8*eb;if(2<=N[P][oa]||1==N[P][oa+1])y=0!=oa?oa-1:2,A=u(z.thm[P].s[Sb][y],eb,.36),eb=Math.min(eb,A);else if(1==N[P][oa])y=0!=oa?oa-1:2,A=u(z.thm[P].s[Sb][y],eb,.18),eb=Math.min(eb,A);else if(0!=oa&&3==N[P][oa-
1]||0==oa&&3==z.nsPsy.lastAttacks[P])y=2!=oa?oa+1:0,A=u(z.thm[P].s[Sb][y],eb,.18),eb=Math.min(eb,A);eb*=F[P][oa];vc[oa]=eb}for(oa=0;3>oa;oa++)z.thm[P].s[Sb][oa]=vc[oa]}for(P=0;P<J;P++)z.nsPsy.lastAttacks[P]=N[P][2];for(var Pb=b.internal_flags,qb=0;qb<Pb.channels_out;qb++){var nc=f.NORM_TYPE;0!=K[qb]?Pb.blocktype_old[qb]==f.SHORT_TYPE&&(nc=f.STOP_TYPE):(nc=f.SHORT_TYPE,Pb.blocktype_old[qb]==f.NORM_TYPE&&(Pb.blocktype_old[qb]=f.START_TYPE),Pb.blocktype_old[qb]==f.STOP_TYPE&&(Pb.blocktype_old[qb]=f.SHORT_TYPE));
q[qb]=Pb.blocktype_old[qb];Pb.blocktype_old[qb]=nc}for(P=0;P<J;P++){if(1<P){var oc=m;var pc=-2;var qc=f.NORM_TYPE;if(q[0]==f.SHORT_TYPE||q[1]==f.SHORT_TYPE)qc=f.SHORT_TYPE;var rc=l[g][P-2]}else oc=k,pc=0,qc=q[P],rc=p[g][P];oc[pc+P]=qc==f.SHORT_TYPE?W(rc,z.masking_lower):d(rc,z.masking_lower);b.analysis&&(z.pinfo.pe[g][P]=oc[pc+P])}return 0};this.psymodel_init=function(a){var b,c,d=a.internal_flags,h,g=!0,p=13;var k=b=0;var A=-8.25,r=-4.5,u=G(f.CBANDS),y=G(f.CBANDS),w=G(f.CBANDS),x=a.out_samplerate;
switch(a.experimentalZ){default:case 0:g=!0;break;case 1:g=a.VBR==J.vbr_mtrh||a.VBR==J.vbr_mt?!1:!0;break;case 2:g=!1;break;case 3:p=8,b=-1.75,k=-.0125,A=-8.25,r=-2.25}d.ms_ener_ratio_old=.25;d.blocktype_old[0]=d.blocktype_old[1]=f.NORM_TYPE;for(h=0;4>h;++h){for(var v=0;v<f.CBANDS;++v)d.nb_1[h][v]=1E20,d.nb_2[h][v]=1E20,d.nb_s1[h][v]=d.nb_s2[h][v]=1;for(c=0;c<f.SBMAX_l;c++)d.en[h].l[c]=1E20,d.thm[h].l[c]=1E20;for(v=0;3>v;++v){for(c=0;c<f.SBMAX_s;c++)d.en[h].s[c][v]=1E20,d.thm[h].s[c][v]=1E20;d.nsPsy.lastAttacks[h]=
0}for(v=0;9>v;v++)d.nsPsy.last_en_subshort[h][v]=10}d.loudness_sq_save[0]=d.loudness_sq_save[1]=0;d.npart_l=e(d.numlines_l,d.bo_l,d.bm_l,u,y,d.mld_l,d.PSY.bo_l_weight,x,f.BLKSIZE,d.scalefac_band.l,f.BLKSIZE/1152,f.SBMAX_l);for(h=0;h<d.npart_l;h++)c=b,u[h]>=p&&(c=k*(u[h]-p)/(24-p)+b*(24-u[h])/(24-p)),w[h]=Math.pow(10,c/10),d.rnumlines_l[h]=0<d.numlines_l[h]?1/d.numlines_l[h]:0;d.s3_ll=l(d.s3ind,d.npart_l,u,y,w,g);for(h=v=0;h<d.npart_l;h++){k=sb.MAX_VALUE;for(c=0;c<d.numlines_l[h];c++,v++)b=x*v/(1E3*
f.BLKSIZE),b=this.ATHformula(1E3*b,a)-20,b=Math.pow(10,.1*b),b*=d.numlines_l[h],k>b&&(k=b);d.ATH.cb_l[h]=k;k=-20+20*u[h]/10;6<k&&(k=100);-15>k&&(k=-15);k-=8;d.minval_l[h]=Math.pow(10,k/10)*d.numlines_l[h]}d.npart_s=e(d.numlines_s,d.bo_s,d.bm_s,u,y,d.mld_s,d.PSY.bo_s_weight,x,f.BLKSIZE_s,d.scalefac_band.s,f.BLKSIZE_s/384,f.SBMAX_s);for(h=v=0;h<d.npart_s;h++){c=A;u[h]>=p&&(c=r*(u[h]-p)/(24-p)+A*(24-u[h])/(24-p));w[h]=Math.pow(10,c/10);k=sb.MAX_VALUE;for(c=0;c<d.numlines_s[h];c++,v++)b=x*v/(1E3*f.BLKSIZE_s),
b=this.ATHformula(1E3*b,a)-20,b=Math.pow(10,.1*b),b*=d.numlines_s[h],k>b&&(k=b);d.ATH.cb_s[h]=k;k=-7+7*u[h]/12;12<u[h]&&(k*=1+3.1*Math.log(1+k));12>u[h]&&(k*=1+2.3*Math.log(1-k));-15>k&&(k=-15);k-=8;d.minval_s[h]=Math.pow(10,k/10)*d.numlines_s[h]}d.s3_ss=l(d.s3ind_s,d.npart_s,u,y,w,g);m=Math.pow(10,.5625);n=Math.pow(10,1.5);z=Math.pow(10,1.5);t.init_fft(d);d.decay=Math.exp(-2.302585092994046/(.01*x/192));h=3.5;0!=(a.exp_nspsytune&2)&&(h=1);0<Math.abs(a.msfix)&&(h=a.msfix);a.msfix=h;for(g=0;g<d.npart_l;g++)d.s3ind[g][1]>
d.npart_l-1&&(d.s3ind[g][1]=d.npart_l-1);d.ATH.decay=Math.pow(10,576*d.mode_gr/x*-1.2);d.ATH.adjust=.01;d.ATH.adjustLimit=1;if(-1!=a.ATHtype){v=a.out_samplerate/f.BLKSIZE;for(h=b=g=0;h<f.BLKSIZE/2;++h)b+=v,d.ATH.eql_w[h]=1/Math.pow(10,this.ATHformula(b,a)/10),g+=d.ATH.eql_w[h];g=1/g;for(h=f.BLKSIZE/2;0<=--h;)d.ATH.eql_w[h]*=g}for(g=v=0;g<d.npart_s;++g)for(h=0;h<d.numlines_s[g];++h)++v;for(g=v=0;g<d.npart_l;++g)for(h=0;h<d.numlines_l[g];++h)++v;for(h=v=0;h<d.npart_l;h++)b=x*(v+d.numlines_l[h]/2)/(1*
f.BLKSIZE),d.mld_cb_l[h]=q(b),v+=d.numlines_l[h];for(;h<f.CBANDS;++h)d.mld_cb_l[h]=1;for(h=v=0;h<d.npart_s;h++)b=x*(v+d.numlines_s[h]/2)/(1*f.BLKSIZE_s),d.mld_cb_s[h]=q(b),v+=d.numlines_s[h];for(;h<f.CBANDS;++h)d.mld_cb_s[h]=1;return 0};this.ATHformula=function(a,b){switch(b.ATHtype){case 0:a=g(a,9);break;case 1:a=g(a,-1);break;case 2:a=g(a,0);break;case 3:a=g(a,1)+6;break;case 4:a=g(a,b.ATHcurve);break;default:a=g(a,0)}return a}}function W(){function x(){this.mask_adjust_short=this.mask_adjust=0;
this.bo_l_weight=G(f.SBMAX_l);this.bo_s_weight=G(f.SBMAX_s)}function k(){this.lowerlimit=0}function r(a,b){this.lowpass=b}function K(a){return 1<a?0:0>=a?1:Math.cos(Math.PI/2*a)}function C(a,b){switch(a){case 44100:return b.version=1,0;case 48E3:return b.version=1;case 32E3:return b.version=1,2;case 22050:return b.version=0;case 24E3:return b.version=0,1;case 16E3:return b.version=0,2;case 11025:return b.version=0;case 12E3:return b.version=0,1;case 8E3:return b.version=0,2;default:return b.version=
0,-1}}function u(a,b,c){16E3>c&&(b=2);c=v.bitrate_table[b][1];for(var d=2;14>=d;d++)0<v.bitrate_table[b][d]&&Math.abs(v.bitrate_table[b][d]-a)<Math.abs(c-a)&&(c=v.bitrate_table[b][d]);return c}function U(a,b,c){16E3>c&&(b=2);for(c=0;14>=c;c++)if(0<v.bitrate_table[b][c]&&v.bitrate_table[b][c]==a)return c;return-1}function d(a,b){var c=[new r(8,2E3),new r(16,3700),new r(24,3900),new r(32,5500),new r(40,7E3),new r(48,7500),new r(56,1E4),new r(64,11E3),new r(80,13500),new r(96,15100),new r(112,15600),
new r(128,17E3),new r(160,17500),new r(192,18600),new r(224,19400),new r(256,19700),new r(320,20500)];b=e.nearestBitrateFullIndex(b);a.lowerlimit=c[b].lowpass}function c(a){var b=f.BLKSIZE+a.framesize-f.FFTOFFSET;return b=Math.max(b,512+a.framesize-32)}function w(d,g,k,m,n,r,t){var h=d.internal_flags,p=0,A=[null,null],u=[null,null];if(4294479419!=h.Class_ID)return-3;if(0==m)return 0;var y=q.copy_buffer(h,n,r,t,0);if(0>y)return y;r+=y;p+=y;u[0]=g;u[1]=k;if(da.NEQ(d.scale,0)&&da.NEQ(d.scale,1))for(y=
0;y<m;++y)u[0][y]*=d.scale,2==h.channels_out&&(u[1][y]*=d.scale);if(da.NEQ(d.scale_left,0)&&da.NEQ(d.scale_left,1))for(y=0;y<m;++y)u[0][y]*=d.scale_left;if(da.NEQ(d.scale_right,0)&&da.NEQ(d.scale_right,1))for(y=0;y<m;++y)u[1][y]*=d.scale_right;if(2==d.num_channels&&1==h.channels_out)for(y=0;y<m;++y)u[0][y]=.5*(u[0][y]+u[1][y]),u[1][y]=0;g=c(d);A[0]=h.mfbuf[0];A[1]=h.mfbuf[1];for(k=0;0<m;){var v=[null,null];v[0]=u[0];v[1]=u[1];y=new a;var w=d;var x=A;var z=k,C=m,O=y,D=w.internal_flags;if(.9999>D.resample_ratio||
1.0001<D.resample_ratio)for(var E=0;E<D.channels_out;E++){var R=new b,K=O,F,J=x[E],S=D.mf_size,W=w.framesize,U=v[E],Z=z,ba=C,fa=R,ka=E,Y=w.internal_flags,ha=0,ra=w.out_samplerate/B(w.out_samplerate,w.in_samplerate);ra>ia.BPC&&(ra=ia.BPC);var pa=1E-4>Math.abs(Y.resample_ratio-Math.floor(.5+Y.resample_ratio))?1:0;var qa=1/Y.resample_ratio;1<qa&&(qa=1);var ma=31;0==ma%2&&--ma;ma+=pa;pa=ma+1;if(0==Y.fill_buffer_resample_init){Y.inbuf_old[0]=G(pa);Y.inbuf_old[1]=G(pa);for(F=0;F<=2*ra;++F)Y.blackfilt[F]=
G(pa);Y.itime[0]=0;for(ha=Y.itime[1]=0;ha<=2*ra;ha++){var xa=0;var T=(ha-ra)/(2*ra);for(F=0;F<=ma;F++){var Fa=Y.blackfilt[ha],L=F,za=F-T,Ua=Math.PI*qa,za=za/ma;0>za&&(za=0);1<za&&(za=1);var Ka=za-.5,za=.42-.5*Math.cos(2*za*Math.PI)+.08*Math.cos(4*za*Math.PI),xa=xa+(Fa[L]=1E-9>Math.abs(Ka)?Ua/Math.PI:za*Math.sin(ma*Ua*Ka)/(Math.PI*ma*Ka))}for(F=0;F<=ma;F++)Y.blackfilt[ha][F]/=xa}Y.fill_buffer_resample_init=1}xa=Y.inbuf_old[ka];for(qa=0;qa<W;qa++){F=qa*Y.resample_ratio;ha=0|Math.floor(F-Y.itime[ka]);
if(ma+ha-ma/2>=ba)break;T=F-Y.itime[ka]-(ha+ma%2*.5);T=0|Math.floor(2*T*ra+ra+.5);for(F=Fa=0;F<=ma;++F)L=F+ha-ma/2,Fa+=(0>L?xa[pa+L]:U[Z+L])*Y.blackfilt[T][F];J[S+qa]=Fa}fa.num_used=Math.min(ba,ma+ha-ma/2);Y.itime[ka]+=fa.num_used-qa*Y.resample_ratio;if(fa.num_used>=pa)for(F=0;F<pa;F++)xa[F]=U[Z+fa.num_used+F-pa];else{J=pa-fa.num_used;for(F=0;F<J;++F)xa[F]=xa[F+fa.num_used];for(ha=0;F<pa;++F,++ha)xa[F]=U[Z+ha]}K.n_out=qa;O.n_in=R.num_used}else for(O.n_out=Math.min(w.framesize,C),O.n_in=O.n_out,w=
0;w<O.n_out;++w)x[0][D.mf_size+w]=v[0][z+w],2==D.channels_out&&(x[1][D.mf_size+w]=v[1][z+w]);x=y.n_in;y=y.n_out;if(h.findReplayGain&&!h.decode_on_the_fly&&l.AnalyzeSamples(h.rgdata,A[0],h.mf_size,A[1],h.mf_size,y,h.channels_out)==ca.GAIN_ANALYSIS_ERROR)return-6;m-=x;k+=x;h.mf_size+=y;1>h.mf_samples_to_encode&&(h.mf_samples_to_encode=f.ENCDELAY+f.POSTDELAY);h.mf_samples_to_encode+=y;if(h.mf_size>=g){x=t-p;0==t&&(x=0);y=d;x=e.enc.lame_encode_mp3_frame(y,A[0],A[1],n,r,x);y.frameNum++;y=x;if(0>y)return y;
r+=y;p+=y;h.mf_size-=d.framesize;h.mf_samples_to_encode-=d.framesize;for(x=0;x<h.channels_out;x++)for(y=0;y<h.mf_size;y++)A[x][y]=A[x][y+d.framesize]}}return p}function a(){this.n_out=this.n_in=0}function b(){this.num_used=0}function B(a,b){return 0!=b?B(b,a%b):a}var e=this;W.V9=410;W.V8=420;W.V7=430;W.V6=440;W.V5=450;W.V4=460;W.V3=470;W.V2=480;W.V1=490;W.V0=500;W.R3MIX=1E3;W.STANDARD=1001;W.EXTREME=1002;W.INSANE=1003;W.STANDARD_FAST=1004;W.EXTREME_FAST=1005;W.MEDIUM=1006;W.MEDIUM_FAST=1007;W.LAME_MAXMP3BUFFER=
147456;var l,q,g,t,D,m=new $b,n,z,E;this.enc=new f;this.setModules=function(a,b,c,d,e,f,k,r,u){l=a;q=b;g=c;t=d;D=e;n=f;z=r;E=u;this.enc.setModules(q,m,t,n)};this.lame_init=function(){var a=new Ac;a.class_id=4294479419;var b=a.internal_flags=new ia;a.mode=ka.NOT_SET;a.original=1;a.in_samplerate=44100;a.num_channels=2;a.num_samples=-1;a.bWriteVbrTag=!0;a.quality=-1;a.short_blocks=null;b.subblock_gain=-1;a.lowpassfreq=0;a.highpassfreq=0;a.lowpasswidth=-1;a.highpasswidth=-1;a.VBR=J.vbr_off;a.VBR_q=4;
a.ATHcurve=-1;a.VBR_mean_bitrate_kbps=128;a.VBR_min_bitrate_kbps=0;a.VBR_max_bitrate_kbps=0;a.VBR_hard_min=0;b.VBR_min_bitrate=1;b.VBR_max_bitrate=13;a.quant_comp=-1;a.quant_comp_short=-1;a.msfix=-1;b.resample_ratio=1;b.OldValue[0]=180;b.OldValue[1]=180;b.CurrentStep[0]=4;b.CurrentStep[1]=4;b.masking_lower=1;b.nsPsy.attackthre=-1;b.nsPsy.attackthre_s=-1;a.scale=-1;a.athaa_type=-1;a.ATHtype=-1;a.athaa_loudapprox=-1;a.athaa_sensitivity=0;a.useTemporal=null;a.interChRatio=-1;b.mf_samples_to_encode=f.ENCDELAY+
f.POSTDELAY;a.encoder_padding=0;b.mf_size=f.ENCDELAY-f.MDCTDELAY;a.findReplayGain=!1;a.decode_on_the_fly=!1;b.decode_on_the_fly=!1;b.findReplayGain=!1;b.findPeakSample=!1;b.RadioGain=0;b.AudiophileGain=0;b.noclipGainChange=0;b.noclipScale=-1;a.preset=0;a.write_id3tag_automatic=!0;a.lame_allocated_gfp=1;return a};this.nearestBitrateFullIndex=function(a){var b=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320];var c=b[16];var d=16;var e=b[16];var h=16;for(var f=0;16>f;f++)if(Math.max(a,b[f+
1])!=a){c=b[f+1];d=f+1;e=b[f];h=f;break}return c-a>a-e?h:d};this.lame_init_params=function(a){var b=a.internal_flags;b.Class_ID=0;null==b.ATH&&(b.ATH=new zc);null==b.PSY&&(b.PSY=new x);null==b.rgdata&&(b.rgdata=new Cc);b.channels_in=a.num_channels;1==b.channels_in&&(a.mode=ka.MONO);b.channels_out=a.mode==ka.MONO?1:2;b.mode_ext=f.MPG_MD_MS_LR;a.mode==ka.MONO&&(a.force_ms=!1);a.VBR==J.vbr_off&&128!=a.VBR_mean_bitrate_kbps&&0==a.brate&&(a.brate=a.VBR_mean_bitrate_kbps);a.VBR!=J.vbr_off&&a.VBR!=J.vbr_mtrh&&
a.VBR!=J.vbr_mt&&(a.free_format=!1);a.VBR==J.vbr_off&&0==a.brate&&da.EQ(a.compression_ratio,0)&&(a.compression_ratio=11.025);a.VBR==J.vbr_off&&0<a.compression_ratio&&(0==a.out_samplerate&&(a.out_samplerate=map2MP3Frequency(int(.97*a.in_samplerate))),a.brate=0|16*a.out_samplerate*b.channels_out/(1E3*a.compression_ratio),b.samplerate_index=C(a.out_samplerate,a),a.free_format||(a.brate=u(a.brate,a.version,a.out_samplerate)));0!=a.out_samplerate&&(16E3>a.out_samplerate?(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,
8),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,64)):32E3>a.out_samplerate?(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,8),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,160)):(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,32),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,320)));if(0==a.lowpassfreq){switch(a.VBR){case J.vbr_off:var c=new k;d(c,a.brate);c=c.lowerlimit;break;case J.vbr_abr:c=new k;d(c,a.VBR_mean_bitrate_kbps);c=c.lowerlimit;break;
case J.vbr_rh:var e=[19500,19E3,18600,18E3,17500,16E3,15600,14900,12500,1E4,3950];if(0<=a.VBR_q&&9>=a.VBR_q){c=e[a.VBR_q];var h=e[a.VBR_q+1];e=a.VBR_q_frac;c=linear_int(c,h,e)}else c=19500;break;default:e=[19500,19E3,18500,18E3,17500,16500,15500,14500,12500,9500,3950],0<=a.VBR_q&&9>=a.VBR_q?(c=e[a.VBR_q],h=e[a.VBR_q+1],e=a.VBR_q_frac,c=linear_int(c,h,e)):c=19500}a.mode!=ka.MONO||a.VBR!=J.vbr_off&&a.VBR!=J.vbr_abr||(c*=1.5);a.lowpassfreq=c|0}0==a.out_samplerate&&(2*a.lowpassfreq>a.in_samplerate&&(a.lowpassfreq=
a.in_samplerate/2),c=a.lowpassfreq|0,e=a.in_samplerate,h=44100,48E3<=e?h=48E3:44100<=e?h=44100:32E3<=e?h=32E3:24E3<=e?h=24E3:22050<=e?h=22050:16E3<=e?h=16E3:12E3<=e?h=12E3:11025<=e?h=11025:8E3<=e&&(h=8E3),-1==c?c=h:(15960>=c&&(h=44100),15250>=c&&(h=32E3),11220>=c&&(h=24E3),9970>=c&&(h=22050),7230>=c&&(h=16E3),5420>=c&&(h=12E3),4510>=c&&(h=11025),3970>=c&&(h=8E3),c=e<h?44100<e?48E3:32E3<e?44100:24E3<e?32E3:22050<e?24E3:16E3<e?22050:12E3<e?16E3:11025<e?12E3:8E3<e?11025:8E3:h),a.out_samplerate=c);a.lowpassfreq=
Math.min(20500,a.lowpassfreq);a.lowpassfreq=Math.min(a.out_samplerate/2,a.lowpassfreq);a.VBR==J.vbr_off&&(a.compression_ratio=16*a.out_samplerate*b.channels_out/(1E3*a.brate));a.VBR==J.vbr_abr&&(a.compression_ratio=16*a.out_samplerate*b.channels_out/(1E3*a.VBR_mean_bitrate_kbps));a.bWriteVbrTag||(a.findReplayGain=!1,a.decode_on_the_fly=!1,b.findPeakSample=!1);b.findReplayGain=a.findReplayGain;b.decode_on_the_fly=a.decode_on_the_fly;b.decode_on_the_fly&&(b.findPeakSample=!0);if(b.findReplayGain&&l.InitGainAnalysis(b.rgdata,
a.out_samplerate)==ca.INIT_GAIN_ANALYSIS_ERROR)return a.internal_flags=null,-6;b.decode_on_the_fly&&!a.decode_only&&(null!=b.hip&&E.hip_decode_exit(b.hip),b.hip=E.hip_decode_init());b.mode_gr=24E3>=a.out_samplerate?1:2;a.framesize=576*b.mode_gr;a.encoder_delay=f.ENCDELAY;b.resample_ratio=a.in_samplerate/a.out_samplerate;switch(a.VBR){case J.vbr_mt:case J.vbr_rh:case J.vbr_mtrh:a.compression_ratio=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5][a.VBR_q];break;case J.vbr_abr:a.compression_ratio=16*a.out_samplerate*
b.channels_out/(1E3*a.VBR_mean_bitrate_kbps);break;default:a.compression_ratio=16*a.out_samplerate*b.channels_out/(1E3*a.brate)}a.mode==ka.NOT_SET&&(a.mode=ka.JOINT_STEREO);0<a.highpassfreq?(b.highpass1=2*a.highpassfreq,b.highpass2=0<=a.highpasswidth?2*(a.highpassfreq+a.highpasswidth):2*a.highpassfreq,b.highpass1/=a.out_samplerate,b.highpass2/=a.out_samplerate):(b.highpass1=0,b.highpass2=0);0<a.lowpassfreq?(b.lowpass2=2*a.lowpassfreq,0<=a.lowpasswidth?(b.lowpass1=2*(a.lowpassfreq-a.lowpasswidth),
0>b.lowpass1&&(b.lowpass1=0)):b.lowpass1=2*a.lowpassfreq,b.lowpass1/=a.out_samplerate,b.lowpass2/=a.out_samplerate):(b.lowpass1=0,b.lowpass2=0);c=a.internal_flags;var r=32,w=-1;if(0<c.lowpass1){var B=999;for(e=0;31>=e;e++)h=e/31,h>=c.lowpass2&&(r=Math.min(r,e)),c.lowpass1<h&&h<c.lowpass2&&(B=Math.min(B,e));c.lowpass1=999==B?(r-.75)/31:(B-.75)/31;c.lowpass2=r/31}0<c.highpass2&&c.highpass2<.75/31*.9&&(c.highpass1=0,c.highpass2=0,S.err.println("Warning: highpass filter disabled.  highpass frequency too small\n"));
if(0<c.highpass2){r=-1;for(e=0;31>=e;e++)h=e/31,h<=c.highpass1&&(w=Math.max(w,e)),c.highpass1<h&&h<c.highpass2&&(r=Math.max(r,e));c.highpass1=w/31;c.highpass2=-1==r?(w+.75)/31:(r+.75)/31}for(e=0;32>e;e++)h=e/31,w=c.highpass2>c.highpass1?K((c.highpass2-h)/(c.highpass2-c.highpass1+1E-20)):1,h=c.lowpass2>c.lowpass1?K((h-c.lowpass1)/(c.lowpass2-c.lowpass1+1E-20)):1,c.amp_filter[e]=w*h;b.samplerate_index=C(a.out_samplerate,a);if(0>b.samplerate_index)return a.internal_flags=null,-1;if(a.VBR==J.vbr_off)if(a.free_format)b.bitrate_index=
0;else{if(a.brate=u(a.brate,a.version,a.out_samplerate),b.bitrate_index=U(a.brate,a.version,a.out_samplerate),0>=b.bitrate_index)return a.internal_flags=null,-1}else b.bitrate_index=1;a.analysis&&(a.bWriteVbrTag=!1);null!=b.pinfo&&(a.bWriteVbrTag=!1);q.init_bit_stream_w(b);c=b.samplerate_index+3*a.version+6*(16E3>a.out_samplerate?1:0);for(e=0;e<f.SBMAX_l+1;e++)b.scalefac_band.l[e]=t.sfBandIndex[c].l[e];for(e=0;e<f.PSFB21+1;e++)h=(b.scalefac_band.l[22]-b.scalefac_band.l[21])/f.PSFB21,h=b.scalefac_band.l[21]+
e*h,b.scalefac_band.psfb21[e]=h;b.scalefac_band.psfb21[f.PSFB21]=576;for(e=0;e<f.SBMAX_s+1;e++)b.scalefac_band.s[e]=t.sfBandIndex[c].s[e];for(e=0;e<f.PSFB12+1;e++)h=(b.scalefac_band.s[13]-b.scalefac_band.s[12])/f.PSFB12,h=b.scalefac_band.s[12]+e*h,b.scalefac_band.psfb12[e]=h;b.scalefac_band.psfb12[f.PSFB12]=192;b.sideinfo_len=1==a.version?1==b.channels_out?21:36:1==b.channels_out?13:21;a.error_protection&&(b.sideinfo_len+=2);c=a.internal_flags;a.frameNum=0;a.write_id3tag_automatic&&z.id3tag_write_v2(a);
c.bitrate_stereoMode_Hist=Ua([16,5]);c.bitrate_blockType_Hist=Ua([16,6]);c.PeakSample=0;a.bWriteVbrTag&&n.InitVbrTag(a);b.Class_ID=4294479419;for(c=0;19>c;c++)b.nsPsy.pefirbuf[c]=700*b.mode_gr*b.channels_out;-1==a.ATHtype&&(a.ATHtype=4);switch(a.VBR){case J.vbr_mt:a.VBR=J.vbr_mtrh;case J.vbr_mtrh:null==a.useTemporal&&(a.useTemporal=!1);g.apply_preset(a,500-10*a.VBR_q,0);0>a.quality&&(a.quality=LAME_DEFAULT_QUALITY);5>a.quality&&(a.quality=0);5<a.quality&&(a.quality=5);b.PSY.mask_adjust=a.maskingadjust;
b.PSY.mask_adjust_short=a.maskingadjust_short;b.sfb21_extra=a.experimentalY?!1:44E3<a.out_samplerate;b.iteration_loop=new VBRNewIterationLoop(D);break;case J.vbr_rh:g.apply_preset(a,500-10*a.VBR_q,0);b.PSY.mask_adjust=a.maskingadjust;b.PSY.mask_adjust_short=a.maskingadjust_short;b.sfb21_extra=a.experimentalY?!1:44E3<a.out_samplerate;6<a.quality&&(a.quality=6);0>a.quality&&(a.quality=LAME_DEFAULT_QUALITY);b.iteration_loop=new VBROldIterationLoop(D);break;default:b.sfb21_extra=!1,0>a.quality&&(a.quality=
LAME_DEFAULT_QUALITY),c=a.VBR,c==J.vbr_off&&(a.VBR_mean_bitrate_kbps=a.brate),g.apply_preset(a,a.VBR_mean_bitrate_kbps,0),a.VBR=c,b.PSY.mask_adjust=a.maskingadjust,b.PSY.mask_adjust_short=a.maskingadjust_short,b.iteration_loop=c==J.vbr_off?new Bc(D):new ABRIterationLoop(D)}if(a.VBR!=J.vbr_off){b.VBR_min_bitrate=1;b.VBR_max_bitrate=14;16E3>a.out_samplerate&&(b.VBR_max_bitrate=8);if(0!=a.VBR_min_bitrate_kbps&&(a.VBR_min_bitrate_kbps=u(a.VBR_min_bitrate_kbps,a.version,a.out_samplerate),b.VBR_min_bitrate=
U(a.VBR_min_bitrate_kbps,a.version,a.out_samplerate),0>b.VBR_min_bitrate)||0!=a.VBR_max_bitrate_kbps&&(a.VBR_max_bitrate_kbps=u(a.VBR_max_bitrate_kbps,a.version,a.out_samplerate),b.VBR_max_bitrate=U(a.VBR_max_bitrate_kbps,a.version,a.out_samplerate),0>b.VBR_max_bitrate))return-1;a.VBR_min_bitrate_kbps=v.bitrate_table[a.version][b.VBR_min_bitrate];a.VBR_max_bitrate_kbps=v.bitrate_table[a.version][b.VBR_max_bitrate];a.VBR_mean_bitrate_kbps=Math.min(v.bitrate_table[a.version][b.VBR_max_bitrate],a.VBR_mean_bitrate_kbps);
a.VBR_mean_bitrate_kbps=Math.max(v.bitrate_table[a.version][b.VBR_min_bitrate],a.VBR_mean_bitrate_kbps)}a.tune&&(b.PSY.mask_adjust+=a.tune_value_a,b.PSY.mask_adjust_short+=a.tune_value_a);c=a.internal_flags;switch(a.quality){default:case 9:c.psymodel=0;c.noise_shaping=0;c.noise_shaping_amp=0;c.noise_shaping_stop=0;c.use_best_huffman=0;c.full_outer_loop=0;break;case 8:a.quality=7;case 7:c.psymodel=1;c.noise_shaping=0;c.noise_shaping_amp=0;c.noise_shaping_stop=0;c.use_best_huffman=0;c.full_outer_loop=
0;break;case 6:c.psymodel=1;0==c.noise_shaping&&(c.noise_shaping=1);c.noise_shaping_amp=0;c.noise_shaping_stop=0;-1==c.subblock_gain&&(c.subblock_gain=1);c.use_best_huffman=0;c.full_outer_loop=0;break;case 5:c.psymodel=1;0==c.noise_shaping&&(c.noise_shaping=1);c.noise_shaping_amp=0;c.noise_shaping_stop=0;-1==c.subblock_gain&&(c.subblock_gain=1);c.use_best_huffman=0;c.full_outer_loop=0;break;case 4:c.psymodel=1;0==c.noise_shaping&&(c.noise_shaping=1);c.noise_shaping_amp=0;c.noise_shaping_stop=0;-1==
c.subblock_gain&&(c.subblock_gain=1);c.use_best_huffman=1;c.full_outer_loop=0;break;case 3:c.psymodel=1;0==c.noise_shaping&&(c.noise_shaping=1);c.noise_shaping_amp=1;c.noise_shaping_stop=1;-1==c.subblock_gain&&(c.subblock_gain=1);c.use_best_huffman=1;c.full_outer_loop=0;break;case 2:c.psymodel=1;0==c.noise_shaping&&(c.noise_shaping=1);0==c.substep_shaping&&(c.substep_shaping=2);c.noise_shaping_amp=1;c.noise_shaping_stop=1;-1==c.subblock_gain&&(c.subblock_gain=1);c.use_best_huffman=1;c.full_outer_loop=
0;break;case 1:c.psymodel=1;0==c.noise_shaping&&(c.noise_shaping=1);0==c.substep_shaping&&(c.substep_shaping=2);c.noise_shaping_amp=2;c.noise_shaping_stop=1;-1==c.subblock_gain&&(c.subblock_gain=1);c.use_best_huffman=1;c.full_outer_loop=0;break;case 0:c.psymodel=1,0==c.noise_shaping&&(c.noise_shaping=1),0==c.substep_shaping&&(c.substep_shaping=2),c.noise_shaping_amp=2,c.noise_shaping_stop=1,-1==c.subblock_gain&&(c.subblock_gain=1),c.use_best_huffman=1,c.full_outer_loop=0}b.ATH.useAdjust=0>a.athaa_type?
3:a.athaa_type;b.ATH.aaSensitivityP=Math.pow(10,a.athaa_sensitivity/-10);null==a.short_blocks&&(a.short_blocks=pa.short_block_allowed);a.short_blocks!=pa.short_block_allowed||a.mode!=ka.JOINT_STEREO&&a.mode!=ka.STEREO||(a.short_blocks=pa.short_block_coupled);0>a.quant_comp&&(a.quant_comp=1);0>a.quant_comp_short&&(a.quant_comp_short=0);0>a.msfix&&(a.msfix=0);a.exp_nspsytune|=1;0>a.internal_flags.nsPsy.attackthre&&(a.internal_flags.nsPsy.attackthre=$b.NSATTACKTHRE);0>a.internal_flags.nsPsy.attackthre_s&&
(a.internal_flags.nsPsy.attackthre_s=$b.NSATTACKTHRE_S);0>a.scale&&(a.scale=1);0>a.ATHtype&&(a.ATHtype=4);0>a.ATHcurve&&(a.ATHcurve=4);0>a.athaa_loudapprox&&(a.athaa_loudapprox=2);0>a.interChRatio&&(a.interChRatio=0);null==a.useTemporal&&(a.useTemporal=!0);b.slot_lag=b.frac_SpF=0;a.VBR==J.vbr_off&&(b.slot_lag=b.frac_SpF=72E3*(a.version+1)*a.brate%a.out_samplerate|0);t.iteration_init(a);m.psymodel_init(a);return 0};this.lame_encode_flush=function(a,b,d,e){var g=a.internal_flags,h=fc([2,1152]),k=0,
l=g.mf_samples_to_encode-f.POSTDELAY,m=c(a);if(1>g.mf_samples_to_encode)return 0;var n=0;a.in_samplerate!=a.out_samplerate&&(l+=16*a.out_samplerate/a.in_samplerate);var p=a.framesize-l%a.framesize;576>p&&(p+=a.framesize);a.encoder_padding=p;for(p=(l+p)/a.framesize;0<p&&0<=k;){var r=m-g.mf_size,l=a.frameNum,r=r*a.in_samplerate,r=r/a.out_samplerate;1152<r&&(r=1152);1>r&&(r=1);k=e-n;0==e&&(k=0);k=this.lame_encode_buffer(a,h[0],h[1],r,b,d,k);d+=k;n+=k;p-=l!=a.frameNum?1:0}g.mf_samples_to_encode=0;if(0>
k)return k;k=e-n;0==e&&(k=0);q.flush_bitstream(a);k=q.copy_buffer(g,b,d,k,1);if(0>k)return k;d+=k;n+=k;k=e-n;0==e&&(k=0);if(a.write_id3tag_automatic){z.id3tag_write_v1(a);k=q.copy_buffer(g,b,d,k,0);if(0>k)return k;n+=k}return n};this.lame_encode_buffer=function(a,b,c,d,e,f,g){var h=a.internal_flags,k=[null,null];if(4294479419!=h.Class_ID)return-3;if(0==d)return 0;if(null==h.in_buffer_0||h.in_buffer_nsamples<d)h.in_buffer_0=G(d),h.in_buffer_1=G(d),h.in_buffer_nsamples=d;k[0]=h.in_buffer_0;k[1]=h.in_buffer_1;
for(var l=0;l<d;l++)k[0][l]=b[l],1<h.channels_in&&(k[1][l]=c[l]);return w(a,k[0],k[1],d,e,f,g)}}function Kc(){this.setModules=function(f,k){}}function Lc(){this.setModules=function(f,k,r){}}function Mc(){}function Nc(){this.setModules=function(f,k){}}function xa(){this.sampleRate=this.channels=this.dataLen=this.dataOffset=0}function zb(f){return f.charCodeAt(0)<<24|f.charCodeAt(1)<<16|f.charCodeAt(2)<<8|f.charCodeAt(3)}var qa={fill:function(f,k,r,v){if(2==arguments.length)for(var x=0;x<f.length;x++)f[x]=
arguments[1];else for(x=k;x<r;x++)f[x]=v}},S={arraycopy:function(f,k,r,v,C){for(C=k+C;k<C;)r[v++]=f[k++]}},Z={SQRT2:1.4142135623730951,FAST_LOG10:function(f){return Math.log10(f)},FAST_LOG10_X:function(f,k){return Math.log10(f)*k}};pa.short_block_allowed=new pa(0);pa.short_block_coupled=new pa(1);pa.short_block_dispensed=new pa(2);pa.short_block_forced=new pa(3);var sb={MAX_VALUE:3.4028235E38};J.vbr_off=new J(0);J.vbr_mt=new J(1);J.vbr_rh=new J(2);J.vbr_abr=new J(3);J.vbr_mtrh=new J(4);J.vbr_default=
J.vbr_mtrh;ka.STEREO=new ka(0);ka.JOINT_STEREO=new ka(1);ka.DUAL_CHANNEL=new ka(2);ka.MONO=new ka(3);ka.NOT_SET=new ka(4);ca.STEPS_per_dB=100;ca.MAX_dB=120;ca.GAIN_NOT_ENOUGH_SAMPLES=-24601;ca.GAIN_ANALYSIS_ERROR=0;ca.GAIN_ANALYSIS_OK=1;ca.INIT_GAIN_ANALYSIS_ERROR=0;ca.INIT_GAIN_ANALYSIS_OK=1;ca.YULE_ORDER=10;ca.MAX_ORDER=ca.YULE_ORDER;ca.MAX_SAMP_FREQ=48E3;ca.RMS_WINDOW_TIME_NUMERATOR=1;ca.RMS_WINDOW_TIME_DENOMINATOR=20;ca.MAX_SAMPLES_PER_WINDOW=ca.MAX_SAMP_FREQ*ca.RMS_WINDOW_TIME_NUMERATOR/ca.RMS_WINDOW_TIME_DENOMINATOR+
1;gb.NUMTOCENTRIES=100;gb.MAXFRAMESIZE=2880;da.EQ=function(f,k){return Math.abs(f)>Math.abs(k)?Math.abs(f-k)<=1E-6*Math.abs(f):Math.abs(f-k)<=1E-6*Math.abs(k)};da.NEQ=function(f,k){return!da.EQ(f,k)};var v={t1HB:[1,1,1,0],t2HB:[1,2,1,3,1,1,3,2,0],t3HB:[3,2,1,1,1,1,3,2,0],t5HB:[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],t6HB:[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],t7HB:[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],t8HB:[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,
10,4,13,5,8,11,5,1,12,4,4,1,1,0],t9HB:[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],t10HB:[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],t11HB:[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],t12HB:[9,6,16,33,41,39,38,26,
7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],t13HB:[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,
92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],t15HB:[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,
65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,
30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],t16HB:[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,
378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,
369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],t24HB:[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,
347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,
372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],t32HB:[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],t33HB:[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],t1l:[1,4,3,5],t2l:[1,4,7,4,5,7,6,7,8],t3l:[2,3,7,4,4,7,6,7,8],t5l:[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],t6l:[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],t7l:[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],t8l:[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,
13,13],t9l:[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],t10l:[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],t11l:[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],t12l:[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,
8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],t13l:[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,
12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],t15l:[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,
13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,
14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],t16_5l:[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,
13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],t16l:[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,
13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,
15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],t24l:[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,
11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],t32l:[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],t33l:[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8]};v.ht=[new ba(0,0,null,null),new ba(2,0,v.t1HB,v.t1l),new ba(3,
0,v.t2HB,v.t2l),new ba(3,0,v.t3HB,v.t3l),new ba(0,0,null,null),new ba(4,0,v.t5HB,v.t5l),new ba(4,0,v.t6HB,v.t6l),new ba(6,0,v.t7HB,v.t7l),new ba(6,0,v.t8HB,v.t8l),new ba(6,0,v.t9HB,v.t9l),new ba(8,0,v.t10HB,v.t10l),new ba(8,0,v.t11HB,v.t11l),new ba(8,0,v.t12HB,v.t12l),new ba(16,0,v.t13HB,v.t13l),new ba(0,0,null,v.t16_5l),new ba(16,0,v.t15HB,v.t15l),new ba(1,1,v.t16HB,v.t16l),new ba(2,3,v.t16HB,v.t16l),new ba(3,7,v.t16HB,v.t16l),new ba(4,15,v.t16HB,v.t16l),new ba(6,63,v.t16HB,v.t16l),new ba(8,255,
v.t16HB,v.t16l),new ba(10,1023,v.t16HB,v.t16l),new ba(13,8191,v.t16HB,v.t16l),new ba(4,15,v.t24HB,v.t24l),new ba(5,31,v.t24HB,v.t24l),new ba(6,63,v.t24HB,v.t24l),new ba(7,127,v.t24HB,v.t24l),new ba(8,255,v.t24HB,v.t24l),new ba(9,511,v.t24HB,v.t24l),new ba(11,2047,v.t24HB,v.t24l),new ba(13,8191,v.t24HB,v.t24l),new ba(0,0,v.t32HB,v.t32l),new ba(0,0,v.t33HB,v.t33l)];v.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,
524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,
917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,
851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,
1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];v.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];v.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];v.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,
192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];v.samplerate_table=[[22050,24E3,16E3,-1],[44100,48E3,32E3,-1],[11025,12E3,8E3,-1]];v.scfsi_band=[0,6,11,16,21];Y.Q_MAX=257;Y.Q_MAX2=116;Y.LARGE_BITS=1E5;Y.IXMAX_VAL=8206;var ra={};ra.SFBMAX=3*f.SBMAX_s;f.ENCDELAY=576;f.POSTDELAY=1152;f.MDCTDELAY=48;f.FFTOFFSET=224+f.MDCTDELAY;f.DECDELAY=528;f.SBLIMIT=32;f.CBANDS=64;f.SBPSY_l=21;f.SBPSY_s=12;f.SBMAX_l=22;f.SBMAX_s=13;f.PSFB21=6;f.PSFB12=6;f.BLKSIZE=1024;f.HBLKSIZE=f.BLKSIZE/2+1;f.BLKSIZE_s=
256;f.HBLKSIZE_s=f.BLKSIZE_s/2+1;f.NORM_TYPE=0;f.START_TYPE=1;f.SHORT_TYPE=2;f.STOP_TYPE=3;f.MPG_MD_LR_LR=0;f.MPG_MD_LR_I=1;f.MPG_MD_MS_LR=2;f.MPG_MD_MS_I=3;f.fircoef=[-.1039435,-.1892065,-.0432472*5,-.155915,3.898045E-17,.0467745*5,.50455,.756825,.187098*5];ia.MFSIZE=3456+f.ENCDELAY-f.MDCTDELAY;ia.MAX_HEADER_BUF=256;ia.MAX_BITS_PER_CHANNEL=4095;ia.MAX_BITS_PER_GRANULE=7680;ia.BPC=320;xa.RIFF=zb("RIFF");xa.WAVE=zb("WAVE");xa.fmt_=zb("fmt ");xa.data=zb("data");xa.readHeader=function(f){var k=new xa,
r=f.getUint32(0,!1);if(xa.RIFF==r&&(f.getUint32(4,!0),xa.WAVE==f.getUint32(8,!1)&&xa.fmt_==f.getUint32(12,!1))){var v=f.getUint32(16,!0),x=20;switch(v){case 16:case 18:k.channels=f.getUint16(x+2,!0);k.sampleRate=f.getUint32(x+4,!0);break;default:throw"extended fmt chunk not implemented";}for(var x=x+v,v=xa.data,u=0;v!=r;){r=f.getUint32(x,!1);u=f.getUint32(x+4,!0);if(v==r)break;x+=u+8}k.dataLen=u;k.dataOffset=x+8;return k}};ra.SFBMAX=3*f.SBMAX_s;lamejs.Mp3Encoder=function(f,k,r){3!=arguments.length&&
(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),f=1,k=44100,r=128);var v=new W,x=new Kc,u=new ca,G=new da,d=new wc,c=new Y,w=new Ec,a=new gb,b=new ic,B=new Nc,e=new xc,l=new fb,q=new Lc,g=new Mc;v.setModules(u,G,d,c,w,a,b,B,g);G.setModules(u,g,b,a);B.setModules(G,b);d.setModules(v);w.setModules(G,e,c,l);c.setModules(l,e,v.enc.psy);e.setModules(G);l.setModules(c);a.setModules(v,G,b);x.setModules(q,g);q.setModules(b,B,d);var t=v.lame_init();t.num_channels=f;t.in_samplerate=
k;t.brate=r;t.mode=ka.STEREO;t.quality=3;t.bWriteVbrTag=!1;t.disable_reservoir=!0;t.write_id3tag_automatic=!1;v.lame_init_params(t);var D=1152,m=0|1.25*D+7200,n=new Int8Array(m);this.encodeBuffer=function(a,b){1==f&&(b=a);a.length>D&&(D=a.length,m=0|1.25*D+7200,n=new Int8Array(m));a=v.lame_encode_buffer(t,a,b,a.length,n,0,m);return new Int8Array(n.subarray(0,a))};this.flush=function(){var a=v.lame_encode_flush(t,n,0,m);return new Int8Array(n.subarray(0,a))}};lamejs.WavHeader=xa}lamejs();

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).upgrade={})}(this,function(t){"use strict";var T=(n.error=function(t){throw new Error("upgrade error: "+t)},n.assert=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];t||n.error("Changeset: "+e.join(""))},n.trim=function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},n);function n(){}var r=(e.prototype.nextRegexMatch=function(){this._prevIndex=this._curIndex,this._regex.lastIndex=this._curIndex;var t=this._regex.exec(this._opsStr);return this._curIndex=this._regex.lastIndex,t&&"?"!==t[0]||T.error("Hit error opcode in op stream"),t},e.prototype.next=function(t){var e=t||this._optObj;return this._regexResult&&this._regexResult[0]?(e.attribs=this._regexResult[1],e.lines=0,e.opcode=this._regexResult[3],e.chars=z.parseNum(this._regexResult[4]),this._regexResult=this.nextRegexMatch()):z.clearOp(e),e},e.prototype.hasNext=function(){return!(!this._regexResult||!this._regexResult[0])},e.prototype.peekNext=function(){var t=this._optObj;return this._regexResult&&this._regexResult[0]?(t.attribs=this._regexResult[1],t.lines=0,t.opcode=this._regexResult[3],t.chars=z.parseNum(this._regexResult[4])):z.clearOp(t),t},e.prototype.lastIndex=function(){return this._prevIndex},e);function e(t,e){this._regex=/((?:\*[0-9a-z]+)*)(?:\|([0-9a-z]+))?([-+=])([0-9a-z]+)|\?|/g,this._startIndex=e||0,this._curIndex=this._startIndex,this._prevIndex=this._curIndex,this._opsStr=t,this._regexResult=this.nextRegexMatch(),this._optObj=z.newOp()}var i=(o.prototype._assertRemaining=function(t){T.assert(t<=this.remaining(),"!(",String(t)," <= ",String(this.remaining()),")")},o.prototype.take=function(t){this._assertRemaining(t);var e=this._str.substr(this._curIndex,t);return this._curIndex+=t,e},o.prototype.peek=function(t){return this._assertRemaining(t),this._str.substr(this._curIndex,t)},o.prototype.skip=function(t){this._assertRemaining(t),this._curIndex+=t},o.prototype.remaining=function(){return this._str.length-this._curIndex},o);function o(t){this._curIndex=0,this._str=t}var a=(s.prototype.append=function(t){this._pieces.push(t.attribs),this._pieces.push(t.opcode),this._pieces.push(z.numToString(t.chars))},s.prototype.toString=function(){return this._pieces.join("")},s.prototype.clear=function(){this._pieces=[]},s);function s(){this._pieces=[]}var u=(c.prototype.append=function(t){this._pieces.push(t)},c.prototype.toString=function(){return this._pieces.join("")},c.prototype.clear=function(){this._pieces=[]},c);function c(){this._pieces=[]}var l=(f.prototype._flush=function(t){0<this._bufOp.opcode.length&&(t&&"="===this._bufOp.opcode&&!this._bufOp.attribs||(this._assem.append(this._bufOp),0<this._bufOpAdditionalCharsAfterNewline&&(this._bufOp.chars=this._bufOpAdditionalCharsAfterNewline,this._bufOp.lines=0,this._assem.append(this._bufOp),this._bufOpAdditionalCharsAfterNewline=0)),this._bufOp.opcode="")},f.prototype.append=function(t){0<t.chars&&(this._bufOp.opcode===t.opcode&&this._bufOp.attribs===t.attribs?0<t.lines?(this._bufOp.chars+=this._bufOpAdditionalCharsAfterNewline+t.chars,this._bufOp.lines+=t.lines,this._bufOpAdditionalCharsAfterNewline=0):0===this._bufOp.lines?this._bufOp.chars+=t.chars:this._bufOpAdditionalCharsAfterNewline+=t.chars:(this._flush(),z.copyOp(t,this._bufOp)))},f.prototype.endDocument=function(){this._flush(!0)},f.prototype.toString=function(){return this._flush(),this._assem.toString()},f.prototype.clear=function(){this._assem.clear(),z.clearOp(this._bufOp)},f);function f(){this._assem=z.opAssembler(),this._bufOp=z.newOp(),this._bufOpAdditionalCharsAfterNewline=0}var h=(p.prototype._flushKeeps=function(){this._assem.append(this._keepAssem.toString()),this._keepAssem.clear()},p.prototype._flushPlusMinus=function(){this._assem.append(this._minusAssem.toString()),this._minusAssem.clear(),this._assem.append(this._plusAssem.toString()),this._plusAssem.clear()},p.prototype.append=function(t){"-"===t.opcode?("="===this._lastOpcode&&this._flushKeeps(),this._minusAssem.append(t),this._lengthChange-=t.chars):"+"===t.opcode?("="===this._lastOpcode&&this._flushKeeps(),this._plusAssem.append(t),this._lengthChange+=t.chars):"="===t.opcode&&("="!==this._lastOpcode&&this._flushPlusMinus(),this._keepAssem.append(t)),this._lastOpcode=t.opcode},p.prototype.appendOpWithText=function(t,e,r,n){var i=z.newOp(t);i.attribs=z.makeAttribsString(t,r,n),i.chars=e.length,i.lines=0,this.append(i)},p.prototype.toString=function(){return this._flushPlusMinus(),this._flushKeeps(),this._assem.toString()},p.prototype.clear=function(){this._minusAssem.clear(),this._plusAssem.clear(),this._keepAssem.clear(),this._assem.clear(),this._lengthChange=0},p.prototype.endDocument=function(){this._keepAssem.endDocument()},p.prototype.getLengthChange=function(){return this._lengthChange},p);function p(){this._minusAssem=z.mergingOpAssembler(),this._plusAssem=z.mergingOpAssembler(),this._keepAssem=z.mergingOpAssembler(),this._assem=z.stringAssembler(),this._lastOpcode="",this._lengthChange=0}var C=(d.prototype.putAttrib=function(t,e){var r=String(t),n=this.attribToNum[r];return void 0!==n&&0<=n?n:e?-1:(n=this._nextNum++,this.attribToNum[r]=n,this.numToAttrib[n]=[String(t[0]||""),String(t[1]||"")],n)},d.prototype.getAttrib=function(t){var e=this.numToAttrib[t];return void 0!==e?[e[0],e[1]]:null},d.prototype.getAttribKey=function(t){var e=this.numToAttrib[t];return void 0!==e?e[0]:""},d.prototype.getAttribValue=function(t){var e=this.numToAttrib[t];return void 0!==e?e[1]:""},d.prototype.eachAttrib=function(t){for(var e in this.numToAttrib)if(this.numToAttrib.hasOwnProperty(e)){var r=this.numToAttrib[e];if(t(r[0],r[1],parseInt(e,10)))break}},d.prototype.copy=function(){var r=new d;return this.eachAttrib(function(t,e){return r.putAttrib([t,e]),!1}),r},d.prototype.modifyAttribs=function(t){for(var e=0;e<this._nextNum;e++){var r=e,n=this.numToAttrib[r];if(void 0!==n){var i=String(n),o=[n[0],t(n[0],n[1])];this.numToAttrib[r]=o,delete this.attribToNum[i];var a=String(o);this.attribToNum[a]=r}}},d.prototype.clear=function(){this.numToAttrib={},this.attribToNum={},this._nextNum=0},d.prototype.toJsonable=function(){return{numToAttrib:this.numToAttrib,nextNum:this._nextNum}},d.prototype.fromJsonable=function(t){for(var e in this.clear(),this.numToAttrib=t.numToAttrib,this._nextNum=t.nextNum,t.numToAttrib){var r=t.numToAttrib[e];this.attribToNum[String(r)]=Number(e)}return this},d);function d(){this.numToAttrib={},this.attribToNum={},this._nextNum=0}var g=(v.prototype._lines_applySplice=function(t){this._lines.splice.apply(this._lines,t)},v.prototype._lines_get=function(t){return this._lines instanceof Array?this._lines[t]:this._lines.get?this._lines.get(t):null},v.prototype._lines_slice=function(t,e){return this._lines instanceof Array?this._lines.slice(t,e):this._lines.slice?this._lines.slice(t,e):null},v.prototype._lines_length=function(){return this._lines instanceof Array?this._lines.length:this._lines.length?this._lines.length():0},v.prototype._enterSplice=function(){this._curSplice[0]=this._curLine,(this._curSplice[1]=0)<this._curCol&&this._putCurLineInSplice(),this._inSplice=!0},v.prototype._leaveSplice=function(){this._lines_applySplice(this._curSplice),this._curSplice.length=2,this._curSplice[0]=this._curSplice[1]=0,this._inSplice=!1},v.prototype._isCurLineInSplice=function(){return this._curLine-this._curSplice[0]<this._curSplice.length-2},v.prototype._putCurLineInSplice=function(){return this._isCurLineInSplice()||this._lines_length()>this._curSplice[0]+this._curSplice[1]&&(this._curSplice.push(this._lines_get(this._curSplice[0]+this._curSplice[1])),this._curSplice[1]++),2+this._curLine-this._curSplice[0]},v.prototype.skipLines=function(t,e){if(t)if(e){this._inSplice||this._enterSplice();for(var r=0;r<t;r++)this._curCol=0,this._putCurLineInSplice(),this._curLine++}else this._inSplice&&(1<t?this._leaveSplice():this._putCurLineInSplice()),this._curLine+=t,this._curCol=0},v.prototype.skip=function(t,e,r){t&&(e?this.skipLines(e,r):(r&&!this._inSplice&&this._enterSplice(),this._inSplice&&this._putCurLineInSplice(),this._curCol+=t))},v.prototype._nextKLinesText=function(t){var e=this._curSplice[0]+this._curSplice[1];return this._lines_slice(e,e+t).join("")},v.prototype.removeLines=function(t){var e="";if(t)if(this._inSplice||this._enterSplice(),this._isCurLineInSplice())if(0===this._curCol)e=this._curSplice[this._curSplice.length-1],this._curSplice.length--,e+=this._nextKLinesText(t-1),this._curSplice[1]+=t-1;else{e=this._nextKLinesText(t-1),this._curSplice[1]+=t-1;var r=this._curSplice.length-1;if(2<=r){var n=this._curSplice[r];e=n.substring(this._curCol)+e,this._curSplice[r]=n.substring(0,this._curCol)+this._lines_get(this._curSplice[0]+this._curSplice[1]),this._curSplice[1]+=1}}else e=this._nextKLinesText(t),this._curSplice[1]+=t;return e},v.prototype.remove=function(t,e){var r="";if(t){if(e)return this.removeLines(e);this._inSplice||this._enterSplice();var n=this._putCurLineInSplice();if(2<=n){var i=this._curSplice[n];r=i.substring(this._curCol,this._curCol+t),this._curSplice[n]=i.substring(0,this._curCol)+i.substring(this._curCol+t)}}return r},v.prototype.insert=function(t,e){if(t)if(this._inSplice||this._enterSplice(),e){var r=z.splitTextLines(t);if(r)if(this._isCurLineInSplice()){if(2<=(o=this._curSplice.length-1)){var n=this._curSplice[o],i=this._curCol;this._curSplice[o]=n.substring(0,i)+r[0],this._curLine++,r.splice(0,1),Array.prototype.push.apply(this._curSplice,r),this._curLine+=r.length,n.substring(i)&&this._curSplice.push(n.substring(i)),this._curCol=0}}else Array.prototype.push.apply(this._curSplice,r),this._curLine+=r.length}else{var o;if(2<=(o=this._putCurLineInSplice())){var a=(n=this._curSplice[o])?n.substring(0,this._curCol):"",s=n?n.substring(this._curCol):"";this._curSplice[o]=a+t+s,this._curCol+=t.length}}},v.prototype.hasMore=function(){var t=this._lines_length();return this._inSplice&&(t+=this._curSplice.length-2-this._curSplice[1]),this._curLine<t},v.prototype.close=function(){this._inSplice&&this._leaveSplice()},v);function v(t){this._curSplice=[0,0],this._inSplice=!1,this._curLine=0,this._curCol=0,this._lines=t}var b=(_.prototype.keep=function(t,e,r,n){return this._op.opcode="=",this._op.attribs=r&&z.makeAttribsString("=",r,n)||"",this._op.chars=t,this._op.lines=0,this._assem.append(this._op),this},_.prototype.keepText=function(t,e,r){return this._assem.appendOpWithText("=",t,e,r),this},_.prototype.insert=function(t,e,r){return this._assem.appendOpWithText("+",t,e,r),this._charBank.append(t),this},_.prototype.remove=function(t,e){return this._op.opcode="-",this._op.attribs="",this._op.chars=t,this._op.lines=0,this._assem.append(this._op),this},_.prototype.insertAText=function(t){return z.appendATextToAssembler(t,this._assem,!0),this._charBank.append(t.text),this},_.prototype.toAtext=function(){return this._assem.endDocument(),{attribs:this._assem.toString(),text:this._charBank.toString()}},_.prototype.toString=function(){if(void 0===this._oldLen)return"";this._assem.endDocument();var t=this._oldLen+this._assem.getLengthChange();return z.pack({oldLen:this._oldLen,newLen:t,opsStr:this._assem.toString(),charBank:this._charBank.toString()})},_);function _(t){this._assem=z.smartOpAssembler(),this._op=z.newOp(),this._charBank=z.stringAssembler(),this._oldLen=t}var m=(y.prototype._lines_get=function(t){return this._lines instanceof Array?this._lines[t]:this._lines.get(t)},y.prototype._lines_length=function(){return this._lines instanceof Array?this._lines.length:this._lines.length()},y.prototype._alines_get=function(t){return this._alines instanceof Array?this._alines[t]:this._alines.get(t)},y.prototype._alines_length=function(){return this._alines instanceof Array?this._alines.length:this._alines.length()},y.prototype._consumeAttribRuns=function(t,e){if(!this._curLineOpIter||this._curLineOpIterLine!==this._curLine){this._curLineOpIter=z.opIterator(this._alines_get(this._curLine)),this._curLineOpIterLine=this._curLine;for(var r=0,n=!1;!n;){if(!this._curLineOpIter.hasNext()){T.error("Changeset.inverse error! cs("+this._cs+"),curALine("+this._alines_get(this._curLine)+")");break}this._curLineOpIter.next(this._curLineNextOp),r+this._curLineNextOp.chars>=this._curChar?(this._curLineNextOp.chars-=this._curChar-r,n=!0):r+=this._curLineNextOp.chars}}for(;0<t;){if(this._curLine>=this._alines_length()){T.error("Changeset.inverse error,index out of bounds！cs("+this._cs+"),curLine("+this._curLine+")");break}this._curLineNextOp.chars||this._curLineOpIter.hasNext()||(this._curLine++,this._curChar=0,this._curLineOpIterLine=this._curLine,this._curLineNextOp.chars=0,this._curLineOpIter=z.opIterator(this._alines_get(this._curLine))),this._curLineNextOp.chars||this._curLineOpIter.next(this._curLineNextOp);var i=Math.min(t,this._curLineNextOp.chars);e&&e(i,this._curLineNextOp.attribs,i===this._curLineNextOp.chars&&0<this._curLineNextOp.lines),t-=i,this._curLineNextOp.chars-=i,this._curChar+=i}this._curLineNextOp.chars||this._curLineOpIter.hasNext()||(this._curLine++,this._curChar=0)},y.prototype._skip=function(t,e){0<e?(this._curLine+=e,this._curChar=0):this._curLineOpIter&&this._curLineOpIterLine===this._curLine?this._consumeAttribRuns(t):this._curChar+=t},y.prototype._nextText=function(t){var e=0,r=z.stringAssembler(),n=this._lines_get(this._curLine).substring(this._curChar);e+=n.length,r.append(n);for(var i=this._curLine+1;e<t;){var o=this._lines_get(i);e+=o.length,r.append(o),i++}return r.toString().substring(0,t)},y.prototype._cachedStrFunc=function(e){var r=new Map;return function(t){return r.get(t)||r.set(t,e(t)),r.get(t)}},y.prototype.inverse=function(){var a=this;if(!this._csIter||!this._builder)return"";for(var s=[],u=[],t=function(){var t=e._csIter.next();if("="===t.opcode)if(t.attribs){s.length=0,u.length=0,z.eachAttribNumber(t.attribs,function(t){s.push(a._pool.getAttribKey(t)),u.push(a._pool.getAttribValue(t))});var n=e._cachedStrFunc(function(t){for(var e=[],r=0;r<s.length;r++){var n=s[r],i=u[r],o=z.attribsAttributeValue(t,n,a._pool);i!==o&&e.push([n,o])}return z.makeAttribsString("=",e,a._pool)});e._consumeAttribRuns(t.chars,function(t,e,r){a._builder&&a._builder.keep(t,r?1:0,n(e))})}else e._skip(t.chars,t.lines),e._builder.keep(t.chars,t.lines);else if("+"===t.opcode)e._builder.remove(t.chars,t.lines);else if("-"===t.opcode){var i=e._nextText(t.chars),o=0;e._consumeAttribRuns(t.chars,function(t,e,r){a._builder&&a._builder.insert(i.substr(o,t),e),o+=t})}},e=this;this._csIter.hasNext();)t();return z.checkRep(this._builder.toString())},y);function y(t,e,r,n){this._curLine=0,this._curChar=0,this._curLineOpIter=null,this._curLineOpIterLine=0,this._curLineNextOp=z.newOp("+"),this._csIter=null,this._builder=null,this._cs=t,this._lines=e,this._alines=r,this._pool=n,this._unpacked=z.unpack(this._cs),this._unpacked&&(this._csIter=z.opIterator(this._unpacked.opsStr),this._builder=z.builder(this._unpacked.newLen))}var z=(A.parseNum=function(t){return parseInt(t,36)},A.numToString=function(t){return t.toString(36).toLowerCase()},A.toBaseTen=function(t){var e=t.indexOf("$"),r=t.substring(0,e),n=t.substring(e);return r.replace(/[0-9a-z]+/g,function(t){return String(A.parseNum(t))})+n},A.oldLen=function(t){var e=A.unpack(t);return e?e.oldLen:0},A.newLen=function(t){var e=A.unpack(t);return e?e.newLen:0},A.charBank=function(t){var e=A.unpack(t);return e?e.charBank:""},A.isEmpty=function(t){var e=A.unpack(t);if(e)for(var r=A.opIterator(e.opsStr);r.hasNext();){var n=r.next();if("="!==n.opcode||n.attribs)return!1}return!0},A.clearOp=function(t){t.opcode="",t.chars=0,t.lines=0,t.attribs=""},A.newOp=function(t){return{opcode:t||"",chars:0,lines:0,attribs:""}},A.cloneOp=function(t){return{opcode:t.opcode,chars:t.chars,lines:t.lines,attribs:t.attribs}},A.copyOp=function(t,e){e.opcode=t.opcode,e.chars=t.chars,e.lines=t.lines,e.attribs=t.attribs},A.opString=function(t){if(!t.opcode)return"null";var e=A.opAssembler();return e.append(t),e.toString()},A.stringOp=function(t){return A.opIterator(t).next()},A.opAssembler=function(){return new a},A.opIterator=function(t,e){return new r(t,e)},A.mergingOpAssembler=function(){return new l},A.stringAssembler=function(){return new u},A.smartOpAssembler=function(){return new h},A.stringIterator=function(t){return new i(t)},A.textLinesMutator=function(t){return new g(t)},A.checkRep=function(t){t=t.replace(/\|([0-9a-z]+)/g,"");var e=A.unpack(t);if(e){for(var r=e.oldLen,n=e.newLen,i=e.opsStr,o=e.charBank,a=A.smartOpAssembler(),s=0,u=0,c=0,l=A.opIterator(i);l.hasNext();){var f=l.next();switch(f.opcode){case"=":s+=f.chars,u+=f.chars;break;case"-":s+=f.chars,T.assert(s<r,String(s)," >= ",String(r)," in ",t);break;case"+":u+=f.chars,c+=f.chars,T.assert(u<=n,String(u)," > ",String(n)," in ",t)}a.append(f)}for(u+=r-s,o=o.substring(0,c);o.length<c;)o+="?";a.endDocument();var h=A.pack({oldLen:r,newLen:u,opsStr:a.toString(),charBank:o});T.assert(h===t,h," !== ",t)}return t},A.prototype.checkRepWithText=function(t,e){var r=A.unpack(t);if(r){for(var n=r.oldLen,i=(r.newLen,r.opsStr),o=r.charBank,a=A.smartOpAssembler(),s=0,u=0,c=0,l=A.opIterator(i);l.hasNext();){var f=l.next();switch(f.opcode){case"=":s+=f.chars,u+=f.chars;break;case"-":s+=f.chars,T.assert(s<n,String(s)," >= ",String(n)," in ",t);break;case"+":u+=f.chars,c+=f.chars}a.append(f)}for(u+=n-s,o=o.substring(0,c);o.length<c;)o+="?";a.endDocument();var h=A.pack({oldLen:n,newLen:u,opsStr:a.toString(),charBank:o});T.assert(h===t,h," !== ",t)}return t},A.unpack=function(t){var e=/Z:([0-9a-z]+)([><])([0-9a-z]+)|/.exec(t);if(e&&e[0]){var r=A.parseNum(e[1]),n=r+(">"===e[2]?1:-1)*A.parseNum(e[3]),i=e[0].length,o=t.indexOf("$");return o<0&&(o=t.length),{oldLen:r,newLen:n,opsStr:t.substring(i,o),charBank:t.substring(o+1)}}return T.error("Not a changeset: "+t),null},A.pack=function(t){var e=t.newLen-t.oldLen,r=0<=e?">"+A.numToString(e):"<"+A.numToString(-e);return"Z:"+A.numToString(t.oldLen)+r+t.opsStr+"$"+t.charBank},A.applyZip=function(t,e,r,n,i){for(var o=A.opIterator(t,e),a=A.opIterator(r,n),s=A.smartOpAssembler(),u=A.newOp(),c=A.newOp(),l=A.newOp();u.opcode||o.hasNext()||c.opcode||a.hasNext();)!u.opcode&&o.hasNext()&&o.next(u),!c.opcode&&a.hasNext()&&a.next(c),i(u,c,l),l.opcode&&(s.append(l),l.opcode="");return s.endDocument(),s.toString()},A.applyToText=function(t,e){var r=A.unpack(t);if(r){T.assert(e.length===r.oldLen,"mismatched apply: ",String(e.length)," / ",String(r.oldLen));for(var n=A.opIterator(r.opsStr),i=A.stringIterator(r.charBank),o=A.stringIterator(e),a=A.stringAssembler();n.hasNext();){var s=n.next();switch(s.opcode){case"+":a.append(i.take(s.chars));break;case"-":o.skip(s.chars);break;case"=":a.append(o.take(s.chars))}}return a.append(o.take(o.remaining())),a.toString()}return""},A.getNewlyMentionedEncryptedUserIds=function(t,e){var r=[],n=A.unpack(t);if(n)for(var i=A.opIterator(n.opsStr);i.hasNext();){var o=i.next();switch(o.opcode){case"+":var a=A.attribsAttributeValue(o.attribs,"link",e);if(a){var s=new RegExp(".*/ep/profile/(.*)"),u=a.match(s);u&&r.push(u[1])}}}return r},A.convertToKeeps=function(t){var e=A.mergingOpAssembler(),r=A.unpack(t);if(r){for(var n=A.opIterator(r.opsStr);n.hasNext();){var i=n.next(),o=A.newOp();A.copyOp(i,o),o.opcode="=",e.append(o)}return e.endDocument(),A.pack({oldLen:r.newLen,newLen:r.newLen,opsStr:e.toString(),charBank:""})}return""},A.applyToTextAsDiff=function(t,e,r,n,i,o){var a=A.mergingOpAssembler(),s=A.stringAssembler(),u=A.unpack(t);if(u){T.assert(e.length===u.oldLen,"mismatched apply: ",String(e.length)," / ",String(u.oldLen));for(var c=A.opIterator(u.opsStr),l=A.stringIterator(u.charBank),f=A.stringIterator(e),h=!0,p=[];c.hasNext();){var d=c.next(),g=A.newOp();switch(A.copyOp(d,g),d.opcode){case"+":var v=l.take(d.chars);T.trim(v),r&&(g.attribs+="*"+A.numToString(r)),a.append(g),s.append(v),h=!1;break;case"-":var b=f.take(d.chars);""!==T.trim(b)&&(d.attribs||o)&&(g.opcode="=",n&&(g.attribs+="*"+A.numToString(n))),a.append(g),h=!1,d.lines,d.chars;break;case"=":var _=f.take(d.chars);if(d.attribs)A.eachAttribNumber(d.attribs,function(t){p.push(t)}),r&&(g.attribs+="*"+A.numToString(r)),a.append(g);else{var m=_.split("\n");if(4<m.length||h&&3<m.length){var y=m[0],w=m[m.length-1];h?y="":((S=A.newOp()).opcode="=",S.chars=y.length+1,S.lines=1,i&&(S.attribs+="*"+A.numToString(i)),a.append(S)),(k=A.newOp()).opcode="-",h?(k.chars=_.length-(w.length+1),k.lines=m.length-2):(k.chars=_.length-(y.length+1)-(w.length+1),k.lines=m.length-3),a.append(k),(x=A.newOp()).opcode="=",x.chars=w.length+1,x.lines=1,i&&(x.attribs+="*"+A.numToString(i)),a.append(x)}else h&&1<m.length?((k=A.newOp()).opcode="-",k.chars=m[0].length+1,k.lines=1,a.append(k),(x=A.newOp()).opcode="=",x.chars=d.chars-(m[0].length+1),x.lines=d.lines-1,i&&(x.attribs+="*"+A.numToString(i)),a.append(x)):a.append(g)}h=!1}}var S,k,x,I=f.take(f.remaining()),O=I.split("\n");if(2<O.length)y=O[0],w=O[O.length-1],h?y="":((S=A.newOp()).opcode="=",S.chars=y.length+1,S.lines=1,i&&(S.attribs+="*"+A.numToString(i)),a.append(S)),(k=A.newOp()).opcode="-",h?(k.chars=I.length-(w.length+1),k.lines=O.length-2):(k.chars=I.length-(y.length+1)-(w.length+1),k.lines=O.length-3),i&&(k.attribs+="*"+A.numToString(i)),a.append(k),(x=A.newOp()).opcode="=",x.chars=w.length+1,x.lines=1,i&&(x.attribs+="*"+A.numToString(i)),a.append(x)}return""},A.mutateTextLines=function(t,e){var r=A.unpack(t);if(r){for(var n=A.opIterator(r.opsStr),i=A.stringIterator(r.charBank),o=A.textLinesMutator(e);n.hasNext();){var a=n.next();switch(a.opcode){case"+":o.insert(i.take(a.chars),a.lines);break;case"-":o.remove(a.chars,a.lines);break;case"=":o.skip(a.chars,a.lines,!!a.attribs)}}o.close()}},A.composeAttributes=function(t,e,a,s){if(!t&&a)return e;if(!e||!s)return t;var u=[];t.replace(/\*([0-9a-z]+)/g,function(t,e){var r=s.getAttrib(A.parseNum(e));return r&&u.push(r),""}),e.replace(/\*([0-9a-z]+)/g,function(t,e){var r=s.getAttrib(A.parseNum(e));if(r){for(var n=!1,i=0;i<u.length;i++){var o=u[i];if(o[0]===r[0]){r[1]||a?o[1]=r[1]:u.splice(i,1),n=!0;break}}n||!r[1]&&!a||u.push(r)}return""}),u.sort();for(var r=A.stringAssembler(),n=0;n<u.length;n++)r.append("*"),r.append(A.numToString(s.putAttrib(u[n])));return r.toString()},A._slicerZipperFunc=function(t,e,r,n){if("-"===t.opcode)A.copyOp(t,r),t.opcode="";else if(t.opcode.length<=0)A.copyOp(e,r),e.opcode="";else switch(e.opcode){case"-":e.chars<=t.chars?("="===t.opcode&&(r.opcode="-",r.chars=e.chars,r.attribs=""),t.chars-=e.chars,e.opcode="",t.chars||(t.opcode="")):("="===t.opcode&&(r.opcode="-",r.chars=t.chars,r.attribs=""),e.chars-=t.chars,t.opcode="");break;case"+":A.copyOp(e,r),e.opcode="";break;case"=":e.chars<=t.chars?(r.opcode=t.opcode,r.chars=e.chars,r.attribs=A.composeAttributes(t.attribs,e.attribs,"="===t.opcode,n),e.opcode="",t.chars-=e.chars,t.chars||(t.opcode="")):(r.opcode=t.opcode,r.chars=t.chars,r.attribs=A.composeAttributes(t.attribs,e.attribs,"="===t.opcode,n),t.opcode="",e.chars-=t.chars);break;case"":A.copyOp(t,r),t.opcode=""}},A.applyToAttribution=function(t,e,n){var r=A.unpack(t);return r?A.applyZip(e,0,r.opsStr,0,function(t,e,r){return A._slicerZipperFunc(t,e,r,n)}):""},A.mutateAttributionLines=function(t,e,r){var n=null,i=null,o=A.textLinesMutator(e);function a(){return n&&n.hasNext()||o.hasMore()}function s(t){(i=i||A.mergingOpAssembler()).append(t),0<t.lines&&(T.assert(1===t.lines,"Can't have op.lines of ",String(t.lines)," in attribution lines"),o.insert(i.toString(),1),i=null)}var u=A.unpack(t);if(u){for(var c=A.opIterator(u.opsStr),l=u.charBank,f=0,h=A.newOp(),p=A.newOp(),d=A.newOp();(h.opcode||c.hasNext()||p.opcode||a())&&(!h.opcode&&c.hasNext()&&c.next(h),h.opcode||p.opcode||i||n&&n.hasNext());)if(!("="===h.opcode&&0<h.lines)||h.attribs||p.opcode||i||n&&n.hasNext())if("+"===h.opcode){if(1<h.lines){var g=l.indexOf("\n",f)+1-f;A.copyOp(h,d),h.chars-=g,h.lines--,d.lines=1,d.chars=g}else A.copyOp(h,d),h.opcode="";s(d),f+=d.chars,d.opcode=""}else{if(!p.opcode&&a()){if((!n||!n.hasNext())&&o.hasMore()){var v=o.removeLines(1);n=A.opIterator(v)}n&&n.hasNext()?n.next(p):p.opcode=""}A._slicerZipperFunc(p,h,d,r),d.opcode&&(s(d),d.opcode="")}else o.skipLines(h.lines),h.opcode="";T.assert(!i,"line assembler not finished"),o.close()}},A.joinAttributionLines=function(t){for(var e=A.mergingOpAssembler(),r=0;r<t.length;r++)for(var n=t[r],i=A.opIterator(n);i.hasNext();)e.append(i.next());return e.toString()},A.splitAttributionLines=function(t,e){var r=A.opIterator(t),n=A.mergingOpAssembler(),i=[],o=0;function a(t){n.append(t),0<t.lines&&(i.push(n.toString()),n.clear()),o+=t.chars}for(;r.hasNext();){for(var s=r.next(),u=s.chars,c=s.lines;1<c;){var l=e.indexOf("\n",o)+1;T.assert(0<l,"newlineEnd <= 0 in splitAttributionLines"),s.chars=l-o,s.lines=1,a(s),u-=s.chars,c-=s.lines}1===c&&(s.chars=u,s.lines=1),a(s)}return i},A.splitTextLines=function(t){return t.match(/[^\n]*(?:\n|[^\n]$)/g)},A.canCompose=function(t,e){var r=A.unpack(t),n=A.unpack(e);return!(!r||!n)&&r.newLen===n.oldLen},A.isInverseCsPair=function(t,e){var r=A.unpack(t),n=A.unpack(e);return!(!r||!n)&&r.newLen===n.oldLen&&n.newLen===r.oldLen},A.compose=function(t,e,o){var r=A.unpack(t),n=A.unpack(e);if(r&&n){var i=r.oldLen,a=r.newLen;T.assert(a===n.oldLen,"mismatched composition "+t+" "+e);var s=n.newLen,u=A.stringIterator(r.charBank),c=A.stringIterator(n.charBank),l=A.stringAssembler(),f=A.applyZip(r.opsStr,0,n.opsStr,0,function(t,e,r){var n=t.opcode,i=e.opcode;"+"===n&&"-"===i&&u.skip(Math.min(t.chars,e.chars)),A._slicerZipperFunc(t,e,r,o),"+"===r.opcode&&("+"===i?l.append(c.take(r.chars)):l.append(u.take(r.chars)))});return A.pack({oldLen:i,newLen:s,opsStr:f,charBank:l.toString()})}return""},A.attributeTester=function(t,e){if(!e)return i;var r=e.putAttrib(t,!0);if(r<0)return i;var n=new RegExp("\\*"+A.numToString(r)+"(?!\\w)");return function(t){return n.test(t)};function i(t){return!1}},A.identity=function(t){return A.pack({oldLen:t,newLen:t,opsStr:"",charBank:""})},A.makeSplice=function(t,e,r,n,i,o){var a=t.length;a<=e&&(e=a-1),r>t.length-e-1&&(r=t.length-e-1);var s=t.substring(e,e+r),u=a+n.length-s.length,c=A.smartOpAssembler();return c.appendOpWithText("=",t.substring(0,e)),c.appendOpWithText("-",s),c.appendOpWithText("+",n,i,o),c.endDocument(),A.pack({oldLen:a,newLen:u,opsStr:c.toString(),charBank:n})},A.toSplices=function(t){var e=[],r=A.unpack(t);if(r)for(var n=0,i=A.opIterator(r.opsStr),o=A.stringIterator(r.charBank),a=!1;i.hasNext();){var s=i.next();"="===s.opcode?(n+=s.chars,a=!1):(a||(e.push([n,n,""]),a=!0),"-"===s.opcode?(n+=s.chars,e[e.length-1][1]+=s.chars):"+"===s.opcode&&(e[e.length-1][2]+=o.take(s.chars)))}return e},A.characterRangeFollow=function(t,e,r,n){for(var i=e,o=r,a=A.toSplices(t),s=0,u=0;u<a.length;u++){var c=a[u],l=c[0]+s,f=c[1]+s,h=c[2].length,p=h-(f-l);l<=i&&o<=f?i=o=n?l:l+h:f<=i?(i+=p,o+=p):o<=l||(i<=l&&f<=o?o+=p:f<o?(i=l+h,o+=p):o=l),s+=p}return[i,o]},A.moveOpsToNewPool=function(t,o,a){var e=t.indexOf("$");e<0&&(e=t.length);var r=t.substring(0,e),n=t.substring(e);return r.replace(/\*([0-9a-z]+)/g,function(t,e){var r=A.parseNum(e),n=o.getAttrib(r);if(!n)return"";var i=a.putAttrib(n);return"*"+A.numToString(i)})+n},A.moveRangeOpsToNewPool=function(t,e,r){if(t.length&&e&&r){for(var n=[],i=0;i<t.length;i++){n.push([]);for(var o=0;o<t[0].length;o++)t[i][o]?n[i].push(A.moveOpsToNewPool(t[i][o],e,r)):n[i].push("")}return n}return null},A.makeAttribution=function(t){var e=A.smartOpAssembler();return e.appendOpWithText("+",t),e.toString()},A.eachAttribNumber=function(t,r){var e=t.indexOf("$");e<0&&(e=t.length),t.substring(0,e).replace(/\*([0-9a-z]+)/g,function(t,e){return r(A.parseNum(e)),""})},A.filterAttribNumbers=function(t,e){return A.mapAttribNumbers(t,e)},A.mapAttribNumbers=function(t,n){var e=t.indexOf("$");return e<0&&(e=t.length),t.substring(0,e).replace(/\*([0-9a-z]+)/g,function(t,e){var r=n(A.parseNum(e));return!0===r?t:"number"==typeof r?"*"+A.numToString(r):""})+t.substring(e)},A.makeAText=function(t,e){return{text:t,attribs:e||A.makeAttribution(t)}},A.applyToAText=function(t,e,r){return{text:A.applyToText(t,e.text),attribs:A.applyToAttribution(t,e.attribs,r)}},A.applyToATextAsDiff=function(t,e,r){return{text:A.applyToTextAsDiff(t,e.text),attribs:A.applyToAttribution(t,e.attribs,r)}},A.cloneAText=function(t){return{text:t.text,attribs:t.attribs}},A.copyAText=function(t,e){e.text=t.text,e.attribs=t.attribs},A.appendATextToAssembler=function(t,e,r){for(var n=A.opIterator(t.attribs),i=A.newOp();n.hasNext();)n.next(i),n.hasNext()||r?e.append(i):(i.chars--,i.chars&&e.append(i))},A.prepareForWire=function(t,e){var r=new C;return{translated:A.moveOpsToNewPool(t,e,r),pool:r}},A.isIdentity=function(t){var e=A.unpack(t);return!e||""===e.opsStr&&e.oldLen===e.newLen},A.opAttributeValue=function(t,e,r){return A.attribsAttributeValue(t.attribs,e,r)},A.attribsAttributeValue=function(t,e,r){var n="";return t&&A.eachAttribNumber(t,function(t){r.getAttribKey(t)===e&&(n=r.getAttribValue(t))}),n},A.builder=function(t){return new b(t)},A.makeAttribsString=function(t,e,r){if(!e)return"";if("string"==typeof e)return e;if(r&&e&&0<e.length){1<(e=e).length&&(e=e.slice()).sort();for(var n=[],i=0;i<e.length;i++){var o=e[i];("="===t||"+"===t&&o[1])&&n.push("*"+A.numToString(r.putAttrib(o)))}return n.join("")}return""},A.subattribution=function(t,e,r){var n=A.opIterator(t,0),i=A.smartOpAssembler(),o=A.newOp(),a=A.newOp(),s=A.newOp();function u(){if(a.chars)for(;a.opcode&&(o.opcode||n.hasNext());)o.opcode||n.next(o),a.opcode&&o.opcode&&a.chars>=o.chars&&0<o.lines&&a.lines<=0&&a.lines++,A._slicerZipperFunc(o,a,s,null),s.opcode&&(i.append(s),s.opcode="")}if(a.opcode="-",a.chars=e,u(),void 0===r)for(o.opcode&&i.append(o);n.hasNext();)n.next(o),i.append(o);else a.opcode="=",a.chars=r-e,u();return i.toString()},A.inverse=function(t,e,r,n){return new m(t,e,r,n).inverse()},A.follow=function(t,e,u,c,r){var n=A.unpack(t),i=A.unpack(e);if(n&&i){var o=n.oldLen,a=i.oldLen;T.assert(o===a,"mismatched follow:"+t+" "+e);var l=A.stringIterator(n.charBank),f=A.stringIterator(i.charBank),s=n.newLen,h=0,p=0,d=A.attributeTester(["insertorder","first"],c),g=A.applyZip(n.opsStr,0,i.opsStr,0,function(t,e,r){if("+"===t.opcode||"+"===e.opcode){var n=void 0;if("+"!==e.opcode)n=1;else if("+"!==t.opcode)n=2;else{var i=l.peek(1),o=f.peek(1),a=d(t.attribs),s=d(e.attribs);n=a&&!s?1:s&&!a?2:"\n"===i&&"\n"!==o?2:"\n"!==i&&"\n"===o?1:u?2:1}1===n?(l.skip(t.chars),r.opcode="=",r.chars=t.chars,r.attribs="",t.opcode=""):(f.skip(e.chars),A.copyOp(e,r),e.opcode="")}else"-"===t.opcode?e.opcode?t.chars<=e.chars?(e.chars-=t.chars,t.opcode="",e.chars||(e.opcode="")):(t.chars-=e.chars,e.opcode=""):t.opcode="":"-"===e.opcode?(A.copyOp(e,r),t.opcode?e.chars<=t.chars?(t.chars-=e.chars,e.opcode="",t.chars||(t.opcode="")):(r.chars=t.chars,e.chars-=t.chars,t.opcode=""):e.opcode=""):t.opcode?e.opcode?(r.opcode="=",r.attribs=A.followAttributes(t.attribs,e.attribs,c),t.chars<=e.chars?(r.chars=t.chars,e.chars-=t.chars,t.opcode="",e.chars||(e.opcode="")):(r.chars=e.chars,t.chars-=e.chars,e.opcode="")):t.opcode="":(A.copyOp(e,r),e.opcode="");switch(r.opcode){case"=":h+=r.chars,p+=r.chars;break;case"-":h+=r.chars;break;case"+":p+=r.chars}});return A.pack({oldLen:s,newLen:p+=s-h,opsStr:g,charBank:i.charBank})}return""},A.followAttributes=function(t,e,o){if(!e||!o)return"";if(!t)return e;var a=[];e.replace(/\*([0-9a-z]+)/g,function(t,e){var r=o.getAttrib(A.parseNum(e));return r&&a.push(r),""}),t.replace(/\*([0-9a-z]+)/g,function(t,e){var r=o.getAttrib(A.parseNum(e));if(r)for(var n=0;n<a.length;n++){var i=a[n];if(r[0]===i[0]){r[1]<=i[1]&&a.splice(n,1);break}}return""});for(var r=A.stringAssembler(),n=0;n<a.length;n++)r.append("*"),r.append(A.numToString(o.putAttrib(a[n])));return r.toString()},A.fixAText=function(t){var e=(t=t||{text:"",attribs:""}).text;t.attribs,e=e||"";var r=A.smartOpAssembler();return A.appendATextToAssembler(t,r,!0),"\n"!==e.substring(e.length-1)&&(r.appendOpWithText("+","\n"),e+="\n"),{text:e,attribs:e.length!==r.getLengthChange()?A.makeAttribution(e):r.toString()}},A.shouldFixAText=function(t){return!(t&&t.text&&(t.text.endsWith("\n")||t.text.endsWith(String.fromCharCode(7)))&&t.attribs)},A);function A(){}var w=(S.prototype.addCompatible=function(t){this._compatibles.push(t)},S.prototype.doCompatible=function(t,e,r){var n={atext:t,apool:e,keyFrames:r,compatibleCs:z.identity(t.text.length)},i=z.identity(t.text.length);return this._compatibles.forEach(function(t){n=t.compatible(n.atext,n.apool,n.keyFrames),i=z.compose(i,n.compatibleCs,n.apool)}),n.compatibleCs=i,n},S.prototype.compatibleLength=function(){return this._compatibles.length},S);function S(){this._compatibles=[]}var k=function(t,e){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function x(t,e){function r(){this.constructor=t}k(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var I=function(){return(I=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function O(o,a,s,u){return new(s=s||Promise)(function(t,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function n(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new s(function(t){t(e.value)}).then(r,n)}i((u=u.apply(o,a||[])).next())})}function L(r,n){var i,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(r,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function E(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}var N=(B.prototype.atext2cs=function(t){return z.pack({oldLen:0,newLen:t.text.length,opsStr:t.attribs,charBank:t.text})},B.prototype.compatible=function(t,e,r){var n={atext:t,apool:e,keyFrames:r,compatibleCs:z.identity(t.text.length)},i={};for(var o in r){var a=this.compatibleTable(r[o],o);a&&(i[o]=a)}n.keyFrames=i;var s=this.compatibleDoc(t,e,!1);return n.atext=s.atext,n.compatibleCs=z.compose(n.compatibleCs,s.compatibleCs,e),n},B);function B(){this.dver="0.0.0"}var M,R,j,P=(x(F,M=N),F.prototype.compatibleDoc=function(t,e,r){for(var n,i=z.builder(t.text.length),o=z.opIterator(t.attribs),a=z.stringIterator(t.text);o.hasNext();){var s=o.next(),u="";if("*"===a.take(s.chars)){var c=void 0;c=(n=this.getListAttrs(s.attribs,e))[0],u=n[1],c&&c.list&&!c.listid&&c.list.indexOf("indent")<0&&(this.insertListLine(this.curLineNum++,c),c.listid&&(u+="*"+z.numToString(e.putAttrib(["listid",c.listid]))))}i.keep(s.chars,0,u)}var l=i.toString(),f=z.applyToAText(l,t,e);return this.compatibleBackground(e),{atext:f,apool:e,compatibleCs:l}},F.prototype.generateListId=function(t){var e="";return-1!=t.indexOf("number")||-1!=t.indexOf("upperLetter")||-1!=t.indexOf("lowerLetter")||-1!=t.indexOf("upperRoman")||-1!=t.indexOf("lowerRoman")||-1!=t.indexOf("chineseCountingThousand")?e="number":0<=t.indexOf("bullet")&&(e="bullet"),e+Math.random().toString(36).substr(2,6)},F.prototype.getListBaseAttrs=function(t){var e=this.idToAttrs[t];return e||(e={template:{}},this.idToAttrs[t]=e),e},F.prototype.setListTemplate=function(t,e,r){this.getListBaseAttrs(t).template[e]=r},F.prototype.getListAttrs=function(t,n){var i=this,o={},e="";return z.eachAttribNumber(t,function(t){var e=n.getAttribKey(t);if(0<=i.attrList.indexOf(e))if(o[e]=n.getAttribValue(t),"list"==e){var r=/([a-zA-Z]+)([12345678])/.exec(o[e]);r&&r[1]&&0<=i.legitTypes.indexOf(r[1])?o.level=Number(r[2]):o.list=null}else"listtext"==e&&(o[e]=o[e].replace(/%[1-9]/,"%1"))}),!o.listtext&&o.list&&o.list.indexOf("indent")<0?(o.list.indexOf("bullet")<0?(0<=o.list.indexOf("number")&&(2==o.level||5==o.level||8==o.level?(o.list="lowerLetter"+o.level,e+="*"+z.numToString(n.putAttrib(["list",o.list]))):3!=o.level&&6!=o.level||(o.list="lowerRoman"+o.level,e+="*"+z.numToString(n.putAttrib(["list",o.list])))),o.listtext="%1.",e+="*"+z.numToString(n.putAttrib(["listtext","%1."]))):(1==o.level||4==o.level||7==o.level?o.listtext="●":2==o.level||5==o.level||8==o.level?o.listtext="○":3!=o.level&&6!=o.level||(o.listtext="■"),e+="*"+z.numToString(n.putAttrib(["listtext",o.listtext]))),!o["pap-left-indent"]&&1<o.level&&(e+="*"+z.numToString(n.putAttrib(["pap-left-indent",2*(o.level-1)+"em"])))):o.list&&0<=o.list.indexOf("indent")&&(e+="*"+z.numToString(n.putAttrib(["list",""])),e+="*"+z.numToString(n.putAttrib(["pap-left-indent",2*o.level+"em"]))),[o,e]},F.prototype.insertListLine=function(t,e){if(e&&e.list&&(e.lineNum=t,e.listid||(e.listid=this.findWhereIBelong(e)),e.listid)){var r=this.idToList[e.listid];r||(r=[],this.idToList[e.listid]=r);for(var n=0;n<r.length&&!(r[n].lineNum>t);n++);r.splice(n,0,e),this.setListTemplate(e.listid,e.level,[e.list,e.listtext])}},F.prototype.findWhereIBelong=function(t){var e,r=this.generateListId(t.list);for(var n in this.idToList)if(0==n.indexOf("number")&&0==r.indexOf("number")||0==n.indexOf("bullet")&&0==r.indexOf("bullet")){var i=this.idToList[n];if(i&&0<i.length){var o=this.getListBaseAttrs(n);if(!o.template[t.level]||o.template[t.level][0]==t.list&&o.template[t.level][1]==t.listtext){if(t.lineNum<i[0].lineNum)continue;for(var a=0,s=[0,0];a<i.length;){var u;if((u=i[a]).lineNum>t.lineNum)break;0==n.indexOf("number")&&t.start&&u.list==t.list&&u.listtext==t.listtext&&(s=[Number(u.start),u.lineNum]),a++}a--,0==n.indexOf("bullet")||0==n.indexOf("number")&&!t.start?(!e||e.lastLine<i[a].lineNum)&&(e={listid:n,lastLine:i[a].lineNum}):((u=i[a]).level<t.level&&(s=[0,u.lineNum]),s[0]+1==t.start&&(!e||e.lastLine<s[1])&&(e={listid:n,lastLine:s[1]}))}}}return e?e.listid:r},F.prototype.compatibleBackground=function(n){n.eachAttrib(function(t,e,r){return"background"===t&&(n.numToAttrib[r]=["background-color",e],delete n.attribToNum[String([t,e])],n.attribToNum[String(["background-color",e])]=r),!1})},F.prototype.compatibleTable=function(t,e){return t},F.dver="1.1.0",F);function F(){var t=null!==M&&M.apply(this,arguments)||this;return t.curLineNum=0,t.idToList={},t.idToAttrs={},t.attrList=["list","listtext","start","listid","pap-left-indent"],t.legitTypes=["number","upperLetter","lowerLetter","upperRoman","lowerRoman","chineseCountingThousand","bullet","indent"],t}(j=R=R||{})[j.Null=0]="Null",j[j.StoryBegin=2]="StoryBegin",j[j.StoryEnd=3]="StoryEnd",j[j.SectionBreak=15]="SectionBreak",j[j.ParagraphBreak=10]="ParagraphBreak",j[j.ParagraphReturn=13]="ParagraphReturn",j[j.LineBreak=11]="LineBreak",j[j.ColumnBreak=14]="ColumnBreak",j[j.PageBreak=12]="PageBreak",j[j.TableRowCellBreak=7]="TableRowCellBreak",j[j.InlineAnchor=1]="InlineAnchor",j[j.FloatingAnchor=8]="FloatingAnchor",j[j.FieldBegin=19]="FieldBegin",j[j.FieldSep=20]="FieldSep",j[j.FieldEnd=21]="FieldEnd",j[j.Tab=9]="Tab",j[j.Space=32]="Space",j[j.FullWidthSpace=12288]="FullWidthSpace",j[j.ZeroSpace=0]="ZeroSpace",j[j.NonBreakSpace=160]="NonBreakSpace",j[j.NoWidthOptionalBreak=8204]="NoWidthOptionalBreak",j[j.NoWidthNoBreak=8205]="NoWidthNoBreak",j[j.OptionalHyphen=31]="OptionalHyphen",j[j.Image=42]="Image",j[j.Table=42]="Table",j[j.Splitline=42]="Splitline";var D,W,q=(Object.defineProperty(U,"Null",{get:function(){return String.fromCharCode(R.Null)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"StoryBegin",{get:function(){return String.fromCharCode(R.StoryBegin)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"StoryEnd",{get:function(){return String.fromCharCode(R.StoryEnd)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"SectionBreak",{get:function(){return String.fromCharCode(R.SectionBreak)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"ParagraphBreak",{get:function(){return String.fromCharCode(R.ParagraphBreak)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"ParagraphReturn",{get:function(){return String.fromCharCode(R.ParagraphReturn)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"LineBreak",{get:function(){return String.fromCharCode(R.LineBreak)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"ColumnBreak",{get:function(){return String.fromCharCode(R.ColumnBreak)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"PageBreak",{get:function(){return String.fromCharCode(R.PageBreak)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"TableRowCellBreak",{get:function(){return String.fromCharCode(R.TableRowCellBreak)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"InlineAnchor",{get:function(){return String.fromCharCode(R.InlineAnchor)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"FloatingAnchor",{get:function(){return String.fromCharCode(R.FloatingAnchor)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"FieldBegin",{get:function(){return String.fromCharCode(R.FieldBegin)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"FieldSep",{get:function(){return String.fromCharCode(R.FieldSep)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"FieldEnd",{get:function(){return String.fromCharCode(R.FieldEnd)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"Tab",{get:function(){return String.fromCharCode(R.Tab)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"Space",{get:function(){return String.fromCharCode(R.Space)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"FullWidthSpace",{get:function(){return String.fromCharCode(R.FullWidthSpace)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"ZeroSpace",{get:function(){return String.fromCharCode(R.ZeroSpace)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"NonBreakSpace",{get:function(){return String.fromCharCode(R.NonBreakSpace)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"NoWidthOptionalBreak",{get:function(){return String.fromCharCode(R.NoWidthOptionalBreak)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"NoWidthNoBreak",{get:function(){return String.fromCharCode(R.NoWidthNoBreak)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"OptionalHyphen",{get:function(){return String.fromCharCode(R.OptionalHyphen)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"Image",{get:function(){return String.fromCharCode(R.Image)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"Table",{get:function(){return String.fromCharCode(R.Table)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"Splitline",{get:function(){return String.fromCharCode(R.Splitline)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"Textframe",{get:function(){return String.fromCharCode(R.FloatingAnchor)},enumerable:!0,configurable:!0}),Object.defineProperty(U,"Codeblock",{get:function(){return String.fromCharCode(R.FloatingAnchor)},enumerable:!0,configurable:!0}),U);function U(){}(W=D=D||{}).StoryId="flowid",W.StoryType="story-type",W.ShadingType="doc-pg-shading-type",W.ShadingValue="doc-pg-shading-value";var H,J,K=[D.StoryId,D.ShadingType,D.ShadingValue];(J=H=H||{}).MarginTop="doc-pg-top",J.MarginRight="doc-pg-right",J.MarginBottom="doc-pg-bottom",J.MarginLeft="doc-pg-left",J.PageWidth="doc-pg-width",J.PageHeight="doc-pg-height",J.PageStartAt="doc-page-start-at",J.DefaultHeaderRefId="headerflow",J.DefaultFooterRefId="footerflow";var Z,V,G=[H.MarginTop,H.MarginRight,H.MarginBottom,H.MarginLeft,H.PageWidth,H.PageHeight,H.PageStartAt,H.DefaultHeaderRefId,H.DefaultFooterRefId];(V=Z=Z||{}).textAlignment="textalign",V.outlineLevel="pap-outlineLevel",V.specialIndent="pap-specialIndent",V.firstIndent="pap-firstline-indent",V.hangingIndent="pap-hanging-indent",V.leftIndent="pap-left-indent",V.rightIndent="pap-right-indent",V.mirrorIndents="pap-mirrorIndents",V.autoAdjustRightIndent="pap-autoAdjustRightIndent",V.lineSpacing="pap-line",V.lineSpacingRule="pap-line-rule",V.spaceBefore="pap-spacing-before",V.spaceAfter="pap-spacing-after",V.disableLineHeightGrid="snapToGrid",V.keepWithNext="pap-keepWithNext",V.keepTogether="pap-keepTogether",V.pageBreakBefore="pap-pageBreakBefore",V.widowControl="pap-widowControl",V.suppressLineNumbers="pap-suppressLineNumbers",V.suppressAutoHyphens="pap-suppressAutoHyphens",V.farEastLineBreakControl="pap-farEastLineBreakControl",V.wordBreak="pap-wordBreak",V.hangingPunctuation="pap-hangingPunctuation",V.halfWidthPunctuationOnTopOfLine="pap-halfWidthPunctuationOnTopOfLine",V.addSpaceBetweenFarEastAndAlpha="pap-addSpaceBetweenFarEastAndAlpha",V.addSpaceBetweenFarEastAndDigit="pap-addSpaceBetweenFarEastAndDigit",V.baseLineAlignment="pap-baseLineAlignment",V.styleName="pap-stylesheet-name",V.DiffNo="diff-no",V.listId="pap-list-id",V.listLevel="pap-list-level",V.listTemplateId="pap-list-template-id",V.listTask="pap-list-task",V.borderType="pap-border-type";var $,Y,X=[Z.textAlignment,Z.outlineLevel,Z.specialIndent,Z.firstIndent,Z.hangingIndent,Z.leftIndent,Z.rightIndent,Z.mirrorIndents,Z.rightIndent,Z.autoAdjustRightIndent,Z.lineSpacing,Z.lineSpacingRule,Z.spaceBefore,Z.spaceAfter,Z.disableLineHeightGrid,Z.keepWithNext,Z.keepTogether,Z.pageBreakBefore,Z.widowControl,Z.suppressLineNumbers,Z.suppressAutoHyphens,Z.farEastLineBreakControl,Z.wordBreak,Z.hangingPunctuation,Z.halfWidthPunctuationOnTopOfLine,Z.addSpaceBetweenFarEastAndAlpha,Z.addSpaceBetweenFarEastAndDigit,Z.baseLineAlignment,Z.styleName,Z.DiffNo,Z.listId,Z.listLevel,Z.listTemplateId,Z.listTask,Z.borderType];(Y=$=$||{}).Author="author",Y.FontWeight="bold",Y.Italic="italic",Y.Underline="underline",Y.StrikeThtough="strikethrough",Y.SuperScript="superscript",Y.SubScript="subscript",Y.TextColor="color",Y.FontFamily="font-family",Y.FontSize="font-size",Y.BackgroundColor="background-color",Y.LetterSpacing="letter-spacing",Y.Link="link",Y.Comments="ch-comments",Y.Diff="diff",Y.DeleteFirst="del-first";var Q;$.Author,$.FontWeight,$.Italic,$.Underline,$.StrikeThtough,$.SuperScript,$.SubScript,$.TextColor,$.FontFamily,$.FontSize,$.BackgroundColor,$.LetterSpacing,$.Link,$.Comments,$.Diff;(Q||(Q={})).Table="table";var tt,et;Q.Table;(et=tt=tt||{}).ListStart="list-start",et.ListText="list-text",et.ListFormat="list-format";var rt,nt,it;tt.ListStart,tt.ListText,tt.ListFormat;(nt=rt=rt||{}).Minus="minus",nt.Plus="plus",(it||(it={})).FieldCharType="field-char-type";var ot,at;it.FieldCharType;(at=ot=ot||{}).Table="table",at.Row="row",at.Cell="cell";var st,ut,ct,lt,ft,ht,pt,dt,gt,vt,bt,_t,mt="tbl-flag";(ut=st=st||{}).MainDocId="BB08J2",ut.ListTemplateId="LSTTMP",ut.ListTemplateIdCompt="xxxxxx",(lt=ct=ct||{})[lt.MainTextStory=0]="MainTextStory",lt[lt.PrimaryHeaderStory=1]="PrimaryHeaderStory",lt[lt.EvenPagesHeaderStory=2]="EvenPagesHeaderStory",lt[lt.FirstPageHeaderStory=3]="FirstPageHeaderStory",lt[lt.PrimaryFooterStory=4]="PrimaryFooterStory",lt[lt.EvenPagesFooterStory=5]="EvenPagesFooterStory",lt[lt.FirstPageFooterStory=6]="FirstPageFooterStory",lt[lt.TextFrameStory=7]="TextFrameStory",lt[lt.ListTemplateStory=8]="ListTemplateStory",lt[lt.CodeblockStory=9]="CodeblockStory",(ft||(ft={})).bulletListFmt="bullet",(ht||(ht={})).taskListFmt="task",(dt=pt=pt||{}).Done="",dt.Todo="",(vt=gt=gt||{})[vt.Bullet=0]="Bullet",vt[vt.Numberd=1]="Numberd",vt[vt.Task=2]="Task",vt[vt.None=3]="None",(_t=bt=bt||{}).Number="number",_t.LowerLetter="lowerLetter",_t.UpperLetter="upperLetter",_t.LowerRoman="lowerRoman",_t.UpperRoman="upperRoman",_t.ChineseCountingThousand="chineseCountingThousand";var yt,wt,St,kt,xt=I(I(I({},ft),ht),bt);(wt=yt=yt||{}).Circle="●",wt.HollowCircle="○",wt.Square="■",wt.Diamond="◆",wt.Star="✧",wt.Hook="✓",wt.Arrow="➢",(kt=St=St||{}).start="numbering_start",kt.lvlText="numbering_lvlText",kt.listFmt="numbering_format";var It=(Ot.prototype.trueValue=function(t,e){return void 0===e?t:e},Object.defineProperty(Ot.prototype,"start",{get:function(){return this.trueValue(0,this._start)},set:function(t){this._start=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ot.prototype,"lvlText",{get:function(){return this.trueValue("",this._lvlText)},set:function(t){this._lvlText=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ot.prototype,"listFmt",{get:function(){return this.trueValue("",this._listFmt)},set:function(t){this._listFmt=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ot.prototype,"listId",{get:function(){return this.trueValue("",this._listId)},set:function(t){this._listId=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ot.prototype,"listTemplateId",{get:function(){return this.trueValue("",this._listTemplateId)},set:function(t){this._listTemplateId=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ot.prototype,"listLevel",{get:function(){return this.trueValue(-1,this._listLevel)},set:function(t){this._listLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ot.prototype,"taskState",{get:function(){return this._taskState||pt.Todo},set:function(t){this._taskState=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ot.prototype,"characterUnitLeftIndent",{get:function(){return this.trueValue(0,this._characterUnitLeftIndent)},set:function(t){this._characterUnitLeftIndent=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ot.prototype,"characterUnitSpecialIndent",{get:function(){return this.trueValue(0,this._characterUnitSpecialIndent)},set:function(t){this._characterUnitSpecialIndent=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ot.prototype,"styleName",{get:function(){return""},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(Ot.prototype,"isBullet",{get:function(){return this.listFmt===xt.bulletListFmt},enumerable:!0,configurable:!0}),Object.defineProperty(Ot.prototype,"isNumbered",{get:function(){return!this.isBullet&&!this.isTask},enumerable:!0,configurable:!0}),Object.defineProperty(Ot.prototype,"isTask",{get:function(){return this.listFmt===xt.taskListFmt},enumerable:!0,configurable:!0}),Object.defineProperty(Ot.prototype,"listType",{get:function(){return this.isBullet?gt.Bullet:this.isNumbered?gt.Numberd:this.isTask?gt.Task:gt.None},enumerable:!0,configurable:!0}),Ot.prototype.toAttribs=function(){var t=[];return void 0!==this._listLevel&&t.push([Z.listLevel,this._listLevel.toString()]),void 0!==this._listTemplateId&&t.push([Z.listTemplateId,this._listTemplateId]),void 0!==this._start&&t.push([tt.ListStart,this._start.toString()]),void 0!==this._lvlText&&t.push([tt.ListText,this._lvlText]),void 0!==this._listFmt&&t.push([tt.ListFormat,this._listFmt]),void 0!==this._characterUnitLeftIndent&&t.push([Z.leftIndent,this._characterUnitLeftIndent+"em"]),void 0!==this._characterUnitSpecialIndent&&t.push([Z.specialIndent,this._characterUnitSpecialIndent+"em"]),t},Ot);function Ot(){}function Ht(t){return"object"==typeof t?null!==t:"function"==typeof t}function At(t){return Tt.call(t).slice(8,-1)}var Tt={}.toString;function Ct(t,e){return t(e={exports:{}},e.exports),e.exports}function Jt(t){return"Symbol(".concat(void 0===t?"":t,")_",(++qt+Ut).toString(36))}function zt(t){var e;return Ht(t)&&(void 0!==(e=t[Xt])?!!e:"RegExp"==At(t))}function Lt(t){if(!Ht(t))throw TypeError(t+" is not an object!");return t}function Et(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}function Kt(t,e){var r,n=Lt(t).constructor;return void 0===n||null==(r=Lt(n)[Qt])?e:Et(r)}function Zt(t){return isNaN(t=+t)?0:(0<t?ee:te)(t)}function Nt(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}function Bt(s){return function(t,e){var r,n,i=String(Nt(t)),o=Zt(e),a=i.length;return o<0||a<=o?s?"":void 0:(r=i.charCodeAt(o))<55296||56319<r||o+1===a||(n=i.charCodeAt(o+1))<56320||57343<n?s?i.charAt(o):r:s?i.slice(o,o+2):n-56320+(r-55296<<10)+65536}}function Mt(t,e,r){return e+(r?re(t,e).length:1)}function Vt(t){return 0<t?ne(Zt(t),9007199254740991):0}function Gt(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),ie))?r:oe?At(e):"Object"==(n=At(e))&&"function"==typeof e.callee?"Arguments":n}function Rt(t,e){var r=t.exec;if("function"==typeof r){var n=r.call(t,e);if("object"!=typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==Gt(t))throw new TypeError("RegExp#exec called on incompatible receiver");return ae.call(t,e)}function jt(){var t=Lt(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}var Pt,Ft,Dt=Ct(function(t){var e=t.exports={version:"2.6.10"};"number"==typeof __e&&(__e=e)}),$t=(Dt.version,Ct(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),Wt=Ct(function(t){var e="__core-js_shared__",r=$t[e]||($t[e]={});(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:Dt.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),qt=0,Ut=Math.random(),Yt=Ct(function(t){var e=Wt("wks"),r=$t.Symbol,n="function"==typeof r;(t.exports=function(t){return e[t]||(e[t]=n&&r[t]||(n?r:Jt)("Symbol."+t))}).store=e}),Xt=Yt("match"),Qt=Yt("species"),te=Math.ceil,ee=Math.floor,re=Bt(!0),ne=Math.min,ie=Yt("toStringTag"),oe="Arguments"==At(function(){return arguments}()),ae=RegExp.prototype.exec,se=RegExp.prototype.exec,ue=String.prototype.replace,ce=se,le="lastIndex",fe=(Pt=/a/,Ft=/b*/g,se.call(Pt,"a"),se.call(Ft,"a"),0!==Pt[le]||0!==Ft[le]),he=void 0!==/()??/.exec("")[1];(fe||he)&&(ce=function(t){var e,r,n,i,o=this;return he&&(r=new RegExp("^"+o.source+"$(?!\\s)",jt.call(o))),fe&&(e=o[le]),n=se.call(o,t),fe&&n&&(o[le]=o.global?n.index+n[0].length:e),he&&n&&1<n.length&&ue.call(n[0],r,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)}),n});function pe(t){try{return!!t()}catch(t){return!0}}function de(t){return Se?we.createElement(t):{}}function ge(t,e){if(!Ht(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!Ht(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!Ht(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!Ht(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}function ve(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function be(t,e){return Ae.call(t,e)}function _e(n,i,t){if(Et(n),void 0===i)return n;switch(t){case 1:return function(t){return n.call(i,t)};case 2:return function(t,e){return n.call(i,t,e)};case 3:return function(t,e,r){return n.call(i,t,e,r)}}return function(){return n.apply(i,arguments)}}var me=ce,ye=!pe(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),we=$t.document,Se=Ht(we)&&Ht(we.createElement),ke=!ye&&!pe(function(){return 7!=Object.defineProperty(de("div"),"a",{get:function(){return 7}}).a}),xe=Object.defineProperty,Ie={f:ye?Object.defineProperty:function(t,e,r){if(Lt(t),e=ge(e,!0),Lt(r),ke)try{return xe(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},Oe=ye?function(t,e,r){return Ie.f(t,e,ve(1,r))}:function(t,e,r){return t[e]=r,t},Ae={}.hasOwnProperty,Te=Wt("native-function-to-string",Function.toString),Ce=Ct(function(t){var o=Jt("src"),e="toString",a=(""+Te).split(e);Dt.inspectSource=function(t){return Te.call(t)},(t.exports=function(t,e,r,n){var i="function"==typeof r;i&&(be(r,"name")||Oe(r,"name",e)),t[e]!==r&&(i&&(be(r,o)||Oe(r,o,t[e]?""+t[e]:a.join(String(e)))),t===$t?t[e]=r:n?t[e]?t[e]=r:Oe(t,e,r):(delete t[e],Oe(t,e,r)))})(Function.prototype,e,function(){return"function"==typeof this&&this[o]||Te.call(this)})}),ze="prototype",Le=function(t,e,r){var n,i,o,a,s=t&Le.F,u=t&Le.G,c=t&Le.S,l=t&Le.P,f=t&Le.B,h=u?$t:c?$t[e]||($t[e]={}):($t[e]||{})[ze],p=u?Dt:Dt[e]||(Dt[e]={}),d=p[ze]||(p[ze]={});for(n in u&&(r=e),r)o=((i=!s&&h&&void 0!==h[n])?h:r)[n],a=f&&i?_e(o,$t):l&&"function"==typeof o?_e(Function.call,o):o,h&&Ce(h,n,o,t&Le.U),p[n]!=o&&Oe(p,n,a),l&&d[n]!=o&&(d[n]=o)};$t.core=Dt,Le.F=1,Le.G=2,Le.S=4,Le.P=8,Le.B=16,Le.W=32,Le.U=64,Le.R=128;var Ee=Le;Ee({target:"RegExp",proto:!0,forced:me!==/./.exec},{exec:me});function Ne(r,t,e){var n=Yt(r),o=!pe(function(){var t={};return t[n]=function(){return 7},7!=""[r](t)}),i=o?!pe(function(){var t=!1,e=/a/;return e.exec=function(){return t=!0,null},"split"===r&&(e.constructor={},e.constructor[Be]=function(){return e}),e[n](""),!t}):void 0;if(!o||!i||"replace"===r&&!Me||"split"===r&&!Re){var a=/./[n],s=e(Nt,n,""[r],function(t,e,r,n,i){return e.exec===me?o&&!i?{done:!0,value:a.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}),u=s[0],c=s[1];Ce(String.prototype,r,u),Oe(RegExp.prototype,n,2==t?function(t,e){return c.call(t,this,e)}:function(t){return c.call(t,this)})}}var Be=Yt("species"),Me=!pe(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),Re=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2===r.length&&"a"===r[0]&&"b"===r[1]}(),je=Math.min,Pe=[].push,Fe="split",De="length",We="lastIndex",qe=4294967295,Ue=!pe(function(){RegExp(qe,"y")});Ne("split",2,function(i,o,v,b){var _;return _="c"=="abbc"[Fe](/(b)*/)[1]||4!="test"[Fe](/(?:)/,-1)[De]||2!="ab"[Fe](/(?:ab)*/)[De]||4!="."[Fe](/(.?)(.?)/)[De]||1<"."[Fe](/()()/)[De]||""[Fe](/.?/)[De]?function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!zt(t))return v.call(r,t,e);for(var n,i,o,a=[],s=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,c=void 0===e?qe:e>>>0,l=new RegExp(t.source,s+"g");(n=me.call(l,r))&&!(u<(i=l[We])&&(a.push(r.slice(u,n.index)),1<n[De]&&n.index<r[De]&&Pe.apply(a,n.slice(1)),o=n[0][De],u=i,a[De]>=c));)l[We]===n.index&&l[We]++;return u===r[De]?!o&&l.test("")||a.push(""):a.push(r.slice(u)),a[De]>c?a.slice(0,c):a}:"0"[Fe](void 0,0)[De]?function(t,e){return void 0===t&&0===e?[]:v.call(this,t,e)}:v,[function(t,e){var r=i(this),n=null==t?void 0:t[o];return void 0!==n?n.call(t,r,e):_.call(String(r),t,e)},function(t,e){var r=b(_,t,this,e,_!==v);if(r.done)return r.value;var n=Lt(t),i=String(this),o=Kt(n,RegExp),a=n.unicode,s=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(Ue?"y":"g"),u=new o(Ue?n:"^(?:"+n.source+")",s),c=void 0===e?qe:e>>>0;if(0==c)return[];if(0===i.length)return null===Rt(u,i)?[i]:[];for(var l=0,f=0,h=[];f<i.length;){u.lastIndex=Ue?f:0;var p,d=Rt(u,Ue?i:i.slice(f));if(null===d||(p=je(Vt(u.lastIndex+(Ue?0:f)),i.length))===l)f=Mt(i,f,a);else{if(h.push(i.slice(l,f)),h.length===c)return h;for(var g=1;g<=d.length-1;g++)if(h.push(d[g]),h.length===c)return h;f=l=p}}return h.push(i.slice(l)),h}]});var He="delete",Je=5,Ke=1<<Je,Ze=Ke-1,Ve={};function Ge(t){t&&(t.value=!0)}function $e(){}function Ye(t){return void 0===t.size&&(t.size=t.__iterate(Qe)),t.size}function Xe(t,e){if("number"!=typeof e){var r=e>>>0;if(""+r!==e||4294967295==r)return NaN;e=r}return e<0?Ye(t)+e:e}function Qe(){return!0}function tr(t,e,r){return(0===t&&!ir(t)||void 0!==r&&t<=-r)&&(void 0===e||void 0!==r&&r<=e)}function er(t,e){return nr(t,e,0)}function rr(t,e){return nr(t,e,e)}function nr(t,e,r){return void 0===t?r:ir(t)?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function ir(t){return t<0||0===t&&1/t==-1/0}var or="@@__IMMUTABLE_ITERABLE__@@";function ar(t){return Boolean(t&&t[or])}var sr="@@__IMMUTABLE_KEYED__@@";function ur(t){return Boolean(t&&t[sr])}var cr="@@__IMMUTABLE_INDEXED__@@";function lr(t){return Boolean(t&&t[cr])}function fr(t){return ur(t)||lr(t)}function hr(t){return ar(t)?t:Pr(t)}var pr=function(t){function e(t){return ur(t)?t:Fr(t)}return e.__proto__=t,(e.prototype=Object.create(t.prototype)).constructor=e}(hr),dr=function(t){function e(t){return lr(t)?t:Dr(t)}return e.__proto__=t,(e.prototype=Object.create(t.prototype)).constructor=e}(hr),gr=function(t){function e(t){return ar(t)&&!fr(t)?t:Wr(t)}return e.__proto__=t,(e.prototype=Object.create(t.prototype)).constructor=e}(hr);hr.Keyed=pr,hr.Indexed=dr,hr.Set=gr;var vr="@@__IMMUTABLE_SEQ__@@";function br(t){return Boolean(t&&t[vr])}var _r="@@__IMMUTABLE_RECORD__@@";function mr(t){return Boolean(t&&t[_r])}function yr(t){return ar(t)||mr(t)}var wr="@@__IMMUTABLE_ORDERED__@@";function Sr(t){return Boolean(t&&t[wr])}var kr=0,xr=1,Ir=2,Or="function"==typeof Symbol&&Symbol.iterator,Ar="@@iterator",Tr=Or||Ar,Cr=function(t){this.next=t};function zr(t,e,r,n){var i=0===t?e:1===t?r:[e,r];return n?n.value=i:n={value:i,done:!1},n}function Lr(){return{value:void 0,done:!0}}function Er(t){return!!Mr(t)}function Nr(t){return t&&"function"==typeof t.next}function Br(t){var e=Mr(t);return e&&e.call(t)}function Mr(t){var e=t&&(Or&&t[Or]||t[Ar]);if("function"==typeof e)return e}Cr.prototype.toString=function(){return"[Iterator]"},Cr.KEYS=kr,Cr.VALUES=xr,Cr.ENTRIES=Ir,Cr.prototype.inspect=Cr.prototype.toSource=function(){return this.toString()},Cr.prototype[Tr]=function(){return this};var Rr=Object.prototype.hasOwnProperty;function jr(t){return!(!Array.isArray(t)&&"string"!=typeof t)||t&&"object"==typeof t&&Number.isInteger(t.length)&&0<=t.length&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var Pr=function(t){function e(t){return null==t?Kr():yr(t)?t.toSeq():function(t){var e=Gr(t);if(e)return e;if("object"!=typeof t)throw new TypeError("Expected Array or collection object of values, or keyed object: "+t);return new Ur(t)}(t)}return e.__proto__=t,((e.prototype=Object.create(t.prototype)).constructor=e).prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var r=this._cache;if(r){for(var n=r.length,i=0;i!==n;){var o=r[e?n-++i:i++];if(!1===t(o[1],o[0],this))break}return i}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(e,r){var n=this._cache;if(n){var i=n.length,o=0;return new Cr(function(){if(o===i)return{value:void 0,done:!0};var t=n[r?i-++o:o++];return zr(e,t[0],t[1])})}return this.__iteratorUncached(e,r)},e}(hr),Fr=function(t){function e(t){return null==t?Kr().toKeyedSeq():ar(t)?ur(t)?t.toSeq():t.fromEntrySeq():mr(t)?t.toSeq():Zr(t)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.toKeyedSeq=function(){return this},e}(Pr),Dr=function(t){function e(t){return null==t?Kr():ar(t)?ur(t)?t.entrySeq():t.toIndexedSeq():mr(t)?t.toSeq().entrySeq():Vr(t)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(Pr),Wr=function(t){function e(t){return(ar(t)&&!fr(t)?t:Dr(t)).toSetSeq()}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(Pr);Pr.isSeq=br,Pr.Keyed=Fr,Pr.Set=Wr,Pr.Indexed=Dr,Pr.prototype[vr]=!0;var qr=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(t,e){return this.has(t)?this._array[Xe(this,t)]:e},e.prototype.__iterate=function(t,e){for(var r=this._array,n=r.length,i=0;i!==n;){var o=e?n-++i:i++;if(!1===t(r[o],o,this))break}return i},e.prototype.__iterator=function(e,r){var n=this._array,i=n.length,o=0;return new Cr(function(){if(o===i)return{value:void 0,done:!0};var t=r?i-++o:o++;return zr(e,t,n[t])})},e}(Dr),Ur=function(t){function e(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return Rr.call(this._object,t)},e.prototype.__iterate=function(t,e){for(var r=this._object,n=this._keys,i=n.length,o=0;o!==i;){var a=n[e?i-++o:o++];if(!1===t(r[a],a,this))break}return o},e.prototype.__iterator=function(e,r){var n=this._object,i=this._keys,o=i.length,a=0;return new Cr(function(){if(a===o)return{value:void 0,done:!0};var t=i[r?o-++a:a++];return zr(e,t,n[t])})},e}(Fr);Ur.prototype[wr]=!0;var Hr,Jr=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=Br(this._collection),n=0;if(Nr(r))for(var i;!(i=r.next()).done&&!1!==t(i.value,n++,this););return n},e.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=Br(this._collection);if(!Nr(r))return new Cr(Lr);var n=0;return new Cr(function(){var t=r.next();return t.done?t:zr(e,n++,t.value)})},e}(Dr);function Kr(){return Hr=Hr||new qr([])}function Zr(t){var e=Array.isArray(t)?new qr(t):Er(t)?new Jr(t):void 0;if(e)return e.fromEntrySeq();if("object"==typeof t)return new Ur(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function Vr(t){var e=Gr(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function Gr(t){return jr(t)?new qr(t):Er(t)?new Jr(t):void 0}var $r="@@__IMMUTABLE_MAP__@@";function Yr(t){return Boolean(t&&t[$r])}function Xr(t){return Yr(t)&&Sr(t)}function Qr(t){return Boolean(t&&"function"==typeof t.equals&&"function"==typeof t.hashCode)}function tn(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!!(Qr(t)&&Qr(e)&&t.equals(e))}var en="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var r=65535&(t|=0),n=65535&(e|=0);return r*n+((t>>>16)*n+r*(e>>>16)<<16>>>0)|0};function rn(t){return t>>>1&1073741824|3221225471&t}var nn=Object.prototype.valueOf;function on(t){switch(typeof t){case"boolean":return t?1108378657:1108378656;case"number":return function(t){if(t!=t||t===1/0)return 0;var e=0|t;e!==t&&(e^=4294967295*t);for(;4294967295<t;)e^=t/=4294967295;return rn(e)}(t);case"string":return t.length>pn?function(t){var e=vn[t];void 0===e&&(e=an(t),gn===dn&&(gn=0,vn={}),gn++,vn[t]=e);return e}(t):an(t);case"object":case"function":return null===t?1108378658:"function"==typeof t.hashCode?rn(t.hashCode(t)):(t.valueOf!==nn&&"function"==typeof t.valueOf&&(t=t.valueOf(t)),function(t){var e;if(ln&&void 0!==(e=cn.get(t)))return e;if(void 0!==(e=t[hn]))return e;if(!un){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[hn]))return e;if(void 0!==(e=function(t){if(t&&0<t.nodeType)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}e=++fn,1073741824&fn&&(fn=0);if(ln)cn.set(t,e);else{if(void 0!==sn&&!1===sn(t))throw new Error("Non-extensible objects are not allowed as keys.");if(un)Object.defineProperty(t,hn,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[hn]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[hn]=e}}return e}(t));case"undefined":return 1108378659;default:if("function"==typeof t.toString)return an(t.toString());throw new Error("Value type "+typeof t+" cannot be hashed.")}}function an(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return rn(e)}var sn=Object.isExtensible,un=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();var cn,ln="function"==typeof WeakMap;ln&&(cn=new WeakMap);var fn=0,hn="__immutablehash__";"function"==typeof Symbol&&(hn=Symbol(hn));var pn=16,dn=255,gn=0,vn={},bn=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=kn(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var r=this,n=Sn(this,t,e);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(t,e)}),n},e.prototype.__iterate=function(r,t){var n=this;return this._iter.__iterate(function(t,e){return r(t,e,n)},t)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}(Fr);bn.prototype[wr]=!0;var _n=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(e,r){var n=this,i=0;return r&&Ye(this),this._iter.__iterate(function(t){return e(t,r?n.size-++i:i++,n)},r)},e.prototype.__iterator=function(e,r){var n=this,i=this._iter.__iterator(xr,r),o=0;return r&&Ye(this),new Cr(function(){var t=i.next();return t.done?t:zr(e,r?n.size-++o:o++,t.value,t)})},e}(Dr),mn=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate(function(t){return e(t,t,r)},t)},e.prototype.__iterator=function(e,t){var r=this._iter.__iterator(xr,t);return new Cr(function(){var t=r.next();return t.done?t:zr(e,t.value,t.value,t)})},e}(Wr),yn=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(r,t){var n=this;return this._iter.__iterate(function(t){if(t){Nn(t);var e=ar(t);return r(e?t.get(1):t[1],e?t.get(0):t[0],n)}},t)},e.prototype.__iterator=function(n,t){var i=this._iter.__iterator(xr,t);return new Cr(function(){for(;;){var t=i.next();if(t.done)return t;var e=t.value;if(e){Nn(e);var r=ar(e);return zr(n,r?e.get(0):e[0],r?e.get(1):e[1],t)}}})},e}(Fr);function wn(i){var t=Mn(i);return t._iter=i,t.size=i.size,t.flip=function(){return i},t.reverse=function(){var t=i.reverse.apply(this);return t.flip=function(){return i.reverse()},t},t.has=function(t){return i.includes(t)},t.includes=function(t){return i.has(t)},t.cacheResult=Rn,t.__iterateUncached=function(r,t){var n=this;return i.__iterate(function(t,e){return!1!==r(e,t,n)},t)},t.__iteratorUncached=function(t,e){if(t!==Ir)return i.__iterator(t===xr?kr:xr,e);var r=i.__iterator(t,e);return new Cr(function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})},t}function Sn(o,a,s){var t=Mn(o);return t.size=o.size,t.has=function(t){return o.has(t)},t.get=function(t,e){var r=o.get(t,Ve);return r===Ve?e:a.call(s,r,t,o)},t.__iterateUncached=function(n,t){var i=this;return o.__iterate(function(t,e,r){return!1!==n(a.call(s,t,e,r),e,i)},t)},t.__iteratorUncached=function(n,t){var i=o.__iterator(Ir,t);return new Cr(function(){var t=i.next();if(t.done)return t;var e=t.value,r=e[0];return zr(n,r,a.call(s,e[1],r,o),t)})},t}function kn(a,s){var u=this,t=Mn(a);return t._iter=a,t.size=a.size,t.reverse=function(){return a},a.flip&&(t.flip=function(){var t=wn(a);return t.reverse=function(){return a.flip()},t}),t.get=function(t,e){return a.get(s?t:-1-t,e)},t.has=function(t){return a.has(s?t:-1-t)},t.includes=function(t){return a.includes(t)},t.cacheResult=Rn,t.__iterate=function(r,n){var i=this,o=0;return n&&Ye(a),a.__iterate(function(t,e){return r(t,s?e:n?i.size-++o:o++,i)},!n)},t.__iterator=function(r,n){var i=0;n&&Ye(a);var o=a.__iterator(Ir,!n);return new Cr(function(){var t=o.next();if(t.done)return t;var e=t.value;return zr(r,s?e[0]:n?u.size-++i:i++,e[1],t)})},t}function xn(s,u,c,l){var t=Mn(s);return l&&(t.has=function(t){var e=s.get(t,Ve);return e!==Ve&&!!u.call(c,e,t,s)},t.get=function(t,e){var r=s.get(t,Ve);return r!==Ve&&u.call(c,r,t,s)?r:e}),t.__iterateUncached=function(n,t){var i=this,o=0;return s.__iterate(function(t,e,r){if(u.call(c,t,e,r))return o++,n(t,l?e:o-1,i)},t),o},t.__iteratorUncached=function(i,t){var o=s.__iterator(Ir,t),a=0;return new Cr(function(){for(;;){var t=o.next();if(t.done)return t;var e=t.value,r=e[0],n=e[1];if(u.call(c,n,r,s))return zr(i,l?r:a++,n,t)}})},t}function In(s,t,e,u){var r=s.size;if(tr(t,e,r))return s;var c=er(t,r),n=rr(e,r);if(c!=c||n!=n)return In(s.toSeq().cacheResult(),t,e,u);var l,i=n-c;i==i&&(l=i<0?0:i);var o=Mn(s);return o.size=0===l?l:s.size&&l||void 0,!u&&br(s)&&0<=l&&(o.get=function(t,e){return 0<=(t=Xe(this,t))&&t<l?s.get(t+c,e):e}),o.__iterateUncached=function(r,t){var n=this;if(0===l)return 0;if(t)return this.cacheResult().__iterate(r,t);var i=0,o=!0,a=0;return s.__iterate(function(t,e){if(!(o=o&&i++<c))return a++,!1!==r(t,u?e:a-1,n)&&a!==l}),a},o.__iteratorUncached=function(e,t){if(0!==l&&t)return this.cacheResult().__iterator(e,t);if(0===l)return new Cr(Lr);var r=s.__iterator(e,t),n=0,i=0;return new Cr(function(){for(;n++<c;)r.next();if(++i>l)return{value:void 0,done:!0};var t=r.next();return u||e===xr||t.done?t:zr(e,i-1,e===kr?void 0:t.value[1],t)})},o}function On(e,c,l,f){var t=Mn(e);return t.__iterateUncached=function(n,t){var i=this;if(t)return this.cacheResult().__iterate(n,t);var o=!0,a=0;return e.__iterate(function(t,e,r){if(!(o=o&&c.call(l,t,e,r)))return a++,n(t,f?e:a-1,i)}),a},t.__iteratorUncached=function(i,t){var o=this;if(t)return this.cacheResult().__iterator(i,t);var a=e.__iterator(Ir,t),s=!0,u=0;return new Cr(function(){var t,e,r;do{if((t=a.next()).done)return f||i===xr?t:zr(i,u++,i===kr?void 0:t.value[1],t);var n=t.value;e=n[0],r=n[1],s=s&&c.call(l,r,e,o)}while(s);return i===Ir?t:zr(i,e,r,t)})},t}function An(t,s,u){var c=Mn(t);return c.__iterateUncached=function(i,e){if(e)return this.cacheResult().__iterate(i,e);var o=0,a=!1;return function r(t,n){t.__iterate(function(t,e){return(!s||n<s)&&ar(t)?r(t,n+1):(o++,!1===i(t,u?e:o-1,c)&&(a=!0)),!a},e)}(t,0),o},c.__iteratorUncached=function(r,n){if(n)return this.cacheResult().__iterator(r,n);var i=t.__iterator(r,n),o=[],a=0;return new Cr(function(){for(;i;){var t=i.next();if(!1===t.done){var e=t.value;if(r===Ir&&(e=e[1]),s&&!(o.length<s)||!ar(e))return u?t:zr(r,a++,e,t);o.push(i),i=e.__iterator(r,n)}else i=o.pop()}return{value:void 0,done:!0}})},c}function Tn(r,n,i){n=n||jn;var t=ur(r),o=0,a=r.toSeq().map(function(t,e){return[e,t,o++,i?i(t,e,r):t]}).valueSeq().toArray();return a.sort(function(t,e){return n(t[3],e[3])||t[2]-e[2]}).forEach(t?function(t,e){a[e].length=2}:function(t,e){a[e]=t[1]}),t?Fr(a):lr(r)?Dr(a):Wr(a)}function Cn(r,n,i){if(n=n||jn,i){var t=r.toSeq().map(function(t,e){return[t,i(t,e,r)]}).reduce(function(t,e){return zn(n,t[1],e[1])?e:t});return t&&t[0]}return r.reduce(function(t,e){return zn(n,t,e)?e:t})}function zn(t,e,r){var n=t(r,e);return 0===n&&r!==e&&(null==r||r!=r)||0<n}function Ln(t,a,s,u){var e=Mn(t),r=new qr(s).map(function(t){return t.size});return e.size=u?r.max():r.min(),e.__iterate=function(t,e){for(var r,n=this.__iterator(xr,e),i=0;!(r=n.next()).done&&!1!==t(r.value,i++,this););return i},e.__iteratorUncached=function(e,r){var n=s.map(function(t){return t=hr(t),Br(r?t.reverse():t)}),i=0,o=!1;return new Cr(function(){var t;return o||(t=n.map(function(t){return t.next()}),o=u?t.every(function(t){return t.done}):t.some(function(t){return t.done})),o?{value:void 0,done:!0}:zr(e,i++,a.apply(null,t.map(function(t){return t.value})))})},e}function En(t,e){return t===e?t:br(t)?e:t.constructor(e)}function Nn(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Bn(t){return ur(t)?pr:lr(t)?dr:gr}function Mn(t){return Object.create((ur(t)?Fr:lr(t)?Dr:Wr).prototype)}function Rn(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Pr.prototype.cacheResult.call(this)}function jn(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:e<t?1:t<e?-1:0}function Pn(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),i=0;i<r;i++)n[i]=t[i+e];return n}function Fn(t,e){if(!t)throw new Error(e)}function Dn(t){Fn(t!==1/0,"Cannot perform this action with an infinite size.")}function Wn(t){if(jr(t)&&"string"!=typeof t)return t;if(Sr(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}function qn(t){return t&&("function"!=typeof t.constructor||"Object"===t.constructor.name)}function Un(t){return"object"==typeof t&&(yr(t)||Array.isArray(t)||qn(t))}function Hn(e){try{return"string"==typeof e?JSON.stringify(e):String(e)}catch(t){return JSON.stringify(e)}}function Jn(t,e){return yr(t)?t.has(e):Un(t)&&Rr.call(t,e)}function Kn(t,e,r){return yr(t)?t.get(e,r):Jn(t,e)?"function"==typeof t.get?t.get(e):t[e]:r}function Zn(t){if(Array.isArray(t))return Pn(t);var e={};for(var r in t)Rr.call(t,r)&&(e[r]=t[r]);return e}function Vn(t,e){if(!Un(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(yr(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!Rr.call(t,e))return t;var r=Zn(t);return Array.isArray(r)?r.splice(e,1):delete r[e],r}function Gn(t,e,r){if(!Un(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(yr(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,r)}if(Rr.call(t,e)&&r===t[e])return t;var n=Zn(t);return n[e]=r,n}function $n(t,e,r,n){n||(n=r,r=void 0);var i=function t(e,r,n,i,o,a){var s=r===Ve;if(i===n.length){var u=s?o:r,c=a(u);return c===u?r:c}if(!s&&!Un(r))throw new TypeError("Cannot update within non-data-structure value in path ["+n.slice(0,i).map(Hn)+"]: "+r);var l=n[i];var f=s?Ve:Kn(r,l,Ve);var h=t(f===Ve?e:yr(f),f,n,i+1,o,a);return h===f?r:h===Ve?Vn(r,l):Gn(s?e?Ci():{}:r,l,h)}(yr(t),t,Wn(e),0,r,n);return i===Ve?r:i}function Yn(t,e,r){return $n(t,e,Ve,function(){return r})}function Xn(t,e){return Yn(this,t,e)}function Qn(t,e){return $n(t,e,function(){return Ve})}function ti(t){return Qn(this,t)}function ei(t,e,r,n){return $n(t,[e],r,n)}function ri(t,e,r){return 1===arguments.length?t(this):ei(this,t,e,r)}function ni(t,e,r){return $n(this,t,e,r)}function ii(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return ai(this,t)}function oi(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];if("function"!=typeof t)throw new TypeError("Invalid merger function: "+t);return ai(this,e,t)}function ai(t,e,i){for(var r=[],n=0;n<e.length;n++){var o=pr(e[n]);0!==o.size&&r.push(o)}return 0===r.length?t:0!==t.toSeq().size||t.__ownerID||1!==r.length?t.withMutations(function(n){for(var t=i?function(e,r){ei(n,r,Ve,function(t){return t===Ve?e:i(t,e,r)})}:function(t,e){n.set(e,t)},e=0;e<r.length;e++)r[e].forEach(t)}):t.constructor(r[0])}function si(t,e,r){return ui(t,e,function(i){return function t(e,r,n){return Un(e)&&Un(r)?ui(e,[r],t):i?i(e,r,n):r}}(r))}function ui(i,t,o){if(!Un(i))throw new TypeError("Cannot merge into non-data-structure value: "+i);if(yr(i))return"function"==typeof o&&i.mergeWith?i.mergeWith.apply(i,[o].concat(t)):i.merge?i.merge.apply(i,t):i.concat.apply(i,t);for(var e=Array.isArray(i),a=i,r=e?dr:pr,n=e?function(t){a===i&&(a=Zn(a)),a.push(t)}:function(t,e){var r=Rr.call(a,e),n=r&&o?o(a[e],t,e):t;r&&n===a[e]||(a===i&&(a=Zn(a)),a[e]=n)},s=0;s<t.length;s++)r(t[s]).forEach(n);return a}function ci(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return si(this,t)}function li(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return si(this,e,t)}function fi(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return $n(this,t,Ci(),function(t){return ui(t,e)})}function hi(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return $n(this,t,Ci(),function(t){return si(t,e)})}function pi(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function di(){return this.__ownerID?this:this.__ensureOwner(new $e)}function gi(){return this.__ensureOwner()}function vi(){return this.__altered}_n.prototype.cacheResult=bn.prototype.cacheResult=mn.prototype.cacheResult=yn.prototype.cacheResult=Rn;var bi=function(n){function t(e){return null==e?Ci():Yr(e)&&!Sr(e)?e:Ci().withMutations(function(r){var t=n(e);Dn(t.size),t.forEach(function(t,e){return r.set(e,t)})})}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).of=function(){for(var r=[],t=arguments.length;t--;)r[t]=arguments[t];return Ci().withMutations(function(t){for(var e=0;e<r.length;e+=2){if(e+1>=r.length)throw new Error("Missing value for key: "+r[e]);t.set(r[e],r[e+1])}})},t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},t.prototype.set=function(t,e){return zi(this,t,e)},t.prototype.remove=function(t){return zi(this,t,Ve)},t.prototype.deleteAll=function(t){var r=hr(t);return 0===r.size?this:this.withMutations(function(e){r.forEach(function(t){return e.remove(t)})})},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ci()},t.prototype.sort=function(t){return eo(Tn(this,t))},t.prototype.sortBy=function(t,e){return eo(Tn(this,e,t))},t.prototype.map=function(n,i){return this.withMutations(function(r){r.forEach(function(t,e){r.set(e,n.call(i,t,e,r))})})},t.prototype.__iterator=function(t,e){return new Ii(this,t,e)},t.prototype.__iterate=function(e,t){var r=this,n=0;return this._root&&this._root.iterate(function(t){return n++,e(t[1],t[0],r)},t),n},t.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ti(this.size,this._root,t,this.__hash):0===this.size?Ci():(this.__ownerID=t,this.__altered=!1,this)},t}(pr);bi.isMap=Yr;var _i=bi.prototype;_i[$r]=!0,_i[He]=_i.remove,_i.removeAll=_i.deleteAll,_i.setIn=Xn,_i.removeIn=_i.deleteIn=ti,_i.update=ri,_i.updateIn=ni,_i.merge=_i.concat=ii,_i.mergeWith=oi,_i.mergeDeep=ci,_i.mergeDeepWith=li,_i.mergeIn=fi,_i.mergeDeepIn=hi,_i.withMutations=pi,_i.wasAltered=vi,_i.asImmutable=gi,_i["@@transducer/init"]=_i.asMutable=di,_i["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},_i["@@transducer/result"]=function(t){return t.asImmutable()};var mi=function(t,e){this.ownerID=t,this.entries=e};mi.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(tn(r,i[o][0]))return i[o][1];return n},mi.prototype.update=function(t,e,r,n,i,o,a){for(var s=i===Ve,u=this.entries,c=0,l=u.length;c<l&&!tn(n,u[c][0]);c++);var f=c<l;if(f?u[c][1]===i:s)return this;if(Ge(a),!s&&f||Ge(o),!s||1!==u.length){if(!f&&!s&&u.length>=Ri)return function(t,e,r,n){t=t||new $e;for(var i=new ki(t,on(r),[r,n]),o=0;o<e.length;o++){var a=e[o];i=i.update(t,0,void 0,a[0],a[1])}return i}(t,u,n,i);var h=t&&t===this.ownerID,p=h?u:Pn(u);return f?s?c===l-1?p.pop():p[c]=p.pop():p[c]=[n,i]:p.push([n,i]),h?(this.entries=p,this):new mi(t,p)}};var yi=function(t,e,r){this.ownerID=t,this.bitmap=e,this.nodes=r};yi.prototype.get=function(t,e,r,n){void 0===e&&(e=on(r));var i=1<<((0===t?e:e>>>t)&Ze),o=this.bitmap;return 0==(o&i)?n:this.nodes[Bi(o&i-1)].get(t+Je,e,r,n)},yi.prototype.update=function(t,e,r,n,i,o,a){void 0===r&&(r=on(n));var s=(0===e?r:r>>>e)&Ze,u=1<<s,c=this.bitmap,l=0!=(c&u);if(!l&&i===Ve)return this;var f=Bi(c&u-1),h=this.nodes,p=l?h[f]:void 0,d=Li(p,t,e+Je,r,n,i,o,a);if(d===p)return this;if(!l&&d&&h.length>=ji)return function(t,e,r,n,i){for(var o=0,a=new Array(Ke),s=0;0!==r;s++,r>>>=1)a[s]=1&r?e[o++]:void 0;return a[n]=i,new wi(t,o+1,a)}(t,h,c,s,d);if(l&&!d&&2===h.length&&Ei(h[1^f]))return h[1^f];if(l&&d&&1===h.length&&Ei(d))return d;var g=t&&t===this.ownerID,v=l?d?c:c^u:c|u,b=l?d?Mi(h,f,d,g):function(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var i=new Array(n),o=0,a=0;a<n;a++)a===e&&(o=1),i[a]=t[a+o];return i}(h,f,g):function(t,e,r,n){var i=t.length+1;if(n&&e+1===i)return t[e]=r,t;for(var o=new Array(i),a=0,s=0;s<i;s++)s===e?(o[s]=r,a=-1):o[s]=t[s+a];return o}(h,f,d,g);return g?(this.bitmap=v,this.nodes=b,this):new yi(t,v,b)};var wi=function(t,e,r){this.ownerID=t,this.count=e,this.nodes=r};wi.prototype.get=function(t,e,r,n){void 0===e&&(e=on(r));var i=(0===t?e:e>>>t)&Ze,o=this.nodes[i];return o?o.get(t+Je,e,r,n):n},wi.prototype.update=function(t,e,r,n,i,o,a){void 0===r&&(r=on(n));var s=(0===e?r:r>>>e)&Ze,u=i===Ve,c=this.nodes,l=c[s];if(u&&!l)return this;var f=Li(l,t,e+Je,r,n,i,o,a);if(f===l)return this;var h=this.count;if(l){if(!f&&--h<Pi)return function(t,e,r,n){for(var i=0,o=0,a=new Array(r),s=0,u=1,c=e.length;s<c;s++,u<<=1){var l=e[s];void 0!==l&&s!==n&&(i|=u,a[o++]=l)}return new yi(t,i,a)}(t,c,h,s)}else h++;var p=t&&t===this.ownerID,d=Mi(c,s,f,p);return p?(this.count=h,this.nodes=d,this):new wi(t,h,d)};var Si=function(t,e,r){this.ownerID=t,this.keyHash=e,this.entries=r};Si.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(tn(r,i[o][0]))return i[o][1];return n},Si.prototype.update=function(t,e,r,n,i,o,a){void 0===r&&(r=on(n));var s=i===Ve;if(r!==this.keyHash)return s?this:(Ge(a),Ge(o),Ni(this,t,e,r,[n,i]));for(var u=this.entries,c=0,l=u.length;c<l&&!tn(n,u[c][0]);c++);var f=c<l;if(f?u[c][1]===i:s)return this;if(Ge(a),!s&&f||Ge(o),s&&2===l)return new ki(t,this.keyHash,u[1^c]);var h=t&&t===this.ownerID,p=h?u:Pn(u);return f?s?c===l-1?p.pop():p[c]=p.pop():p[c]=[n,i]:p.push([n,i]),h?(this.entries=p,this):new Si(t,this.keyHash,p)};var ki=function(t,e,r){this.ownerID=t,this.keyHash=e,this.entry=r};ki.prototype.get=function(t,e,r,n){return tn(r,this.entry[0])?this.entry[1]:n},ki.prototype.update=function(t,e,r,n,i,o,a){var s=i===Ve,u=tn(n,this.entry[0]);return(u?i===this.entry[1]:s)?this:(Ge(a),s?void Ge(o):u?t&&t===this.ownerID?(this.entry[1]=i,this):new ki(t,this.keyHash,[n,i]):(Ge(o),Ni(this,t,e,on(n),[n,i])))},mi.prototype.iterate=Si.prototype.iterate=function(t,e){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(!1===t(r[e?i-n:n]))return!1},yi.prototype.iterate=wi.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var o=r[e?i-n:n];if(o&&!1===o.iterate(t,e))return!1}},ki.prototype.iterate=function(t,e){return t(this.entry)};var xi,Ii=function(t){function e(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&Ai(t._root)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.next=function(){for(var t=this._type,e=this._stack;e;){var r=e.node,n=e.index++,i=void 0;if(r.entry){if(0==n)return Oi(t,r.entry)}else if(r.entries){if(n<=(i=r.entries.length-1))return Oi(t,r.entries[this._reverse?i-n:n])}else if(n<=(i=r.nodes.length-1)){var o=r.nodes[this._reverse?i-n:n];if(o){if(o.entry)return Oi(t,o.entry);e=this._stack=Ai(o,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}},e}(Cr);function Oi(t,e){return zr(t,e[0],e[1])}function Ai(t,e){return{node:t,index:0,__prev:e}}function Ti(t,e,r,n){var i=Object.create(_i);return i.size=t,i._root=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Ci(){return xi=xi||Ti(0)}function zi(t,e,r){var n,i;if(t._root){var o={value:!1},a={value:!1};if(n=Li(t._root,t.__ownerID,0,void 0,e,r,o,a),!a.value)return t;i=t.size+(o.value?r===Ve?-1:1:0)}else{if(r===Ve)return t;i=1,n=new mi(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=i,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?Ti(i,n):Ci()}function Li(t,e,r,n,i,o,a,s){return t?t.update(e,r,n,i,o,a,s):o===Ve?t:(Ge(s),Ge(a),new ki(e,n,[i,o]))}function Ei(t){return t.constructor===ki||t.constructor===Si}function Ni(t,e,r,n,i){if(t.keyHash===n)return new Si(e,n,[t.entry,i]);var o,a=(0===r?t.keyHash:t.keyHash>>>r)&Ze,s=(0===r?n:n>>>r)&Ze,u=a==s?[Ni(t,e,r+Je,n,i)]:(o=new ki(e,n,i),a<s?[t,o]:[o,t]);return new yi(e,1<<a|1<<s,u)}function Bi(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function Mi(t,e,r,n){var i=n?t:Pn(t);return i[e]=r,i}var Ri=Ke/4,ji=Ke/2,Pi=Ke/4,Fi="@@__IMMUTABLE_LIST__@@";function Di(t){return Boolean(t&&t[Fi])}var Wi=function(o){function t(t){var e=Vi();if(null==t)return e;if(Di(t))return t;var n=o(t),i=n.size;return 0===i?e:(Dn(i),0<i&&i<Ke?Zi(0,i,Je,null,new Ui(n.toArray())):e.withMutations(function(r){r.setSize(i),n.forEach(function(t,e){return r.set(e,t)})}))}return o&&(t.__proto__=o),((t.prototype=Object.create(o&&o.prototype)).constructor=t).of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(t,e){if(0<=(t=Xe(this,t))&&t<this.size){var r=Yi(this,t+=this._origin);return r&&r.array[t&Ze]}return e},t.prototype.set=function(t,e){return function(t,e,r){if((e=Xe(t,e))!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?Xi(t,e).set(0,r):Xi(t,0,e+1).set(e,r)});e+=t._origin;var n=t._tail,i=t._root,o={value:!1};e>=Qi(t._capacity)?n=Gi(n,t.__ownerID,0,e,r,o):i=Gi(i,t.__ownerID,t._level,e,r,o);if(!o.value)return t;if(t.__ownerID)return t._root=i,t._tail=n,t.__hash=void 0,t.__altered=!0,t;return Zi(t._origin,t._capacity,t._level,i,n)}(this,t,e)},t.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},t.prototype.insert=function(t,e){return this.splice(t,0,e)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=Je,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Vi()},t.prototype.push=function(){var r=arguments,n=this.size;return this.withMutations(function(t){Xi(t,0,n+r.length);for(var e=0;e<r.length;e++)t.set(n+e,r[e])})},t.prototype.pop=function(){return Xi(this,0,-1)},t.prototype.unshift=function(){var r=arguments;return this.withMutations(function(t){Xi(t,-r.length);for(var e=0;e<r.length;e++)t.set(e,r[e])})},t.prototype.shift=function(){return Xi(this,1)},t.prototype.concat=function(){for(var t=arguments,r=[],e=0;e<arguments.length;e++){var n=t[e],i=o("string"!=typeof n&&Er(n)?n:[n]);0!==i.size&&r.push(i)}return 0===r.length?this:0!==this.size||this.__ownerID||1!==r.length?this.withMutations(function(e){r.forEach(function(t){return t.forEach(function(t){return e.push(t)})})}):this.constructor(r[0])},t.prototype.setSize=function(t){return Xi(this,0,t)},t.prototype.map=function(r,n){var i=this;return this.withMutations(function(t){for(var e=0;e<i.size;e++)t.set(e,r.call(n,t.get(e),e,t))})},t.prototype.slice=function(t,e){var r=this.size;return tr(t,e,r)?this:Xi(this,er(t,r),rr(e,r))},t.prototype.__iterator=function(e,r){var n=r?this.size:0,i=Ki(this,r);return new Cr(function(){var t=i();return t===Ji?{value:void 0,done:!0}:zr(e,r?--n:n++,t)})},t.prototype.__iterate=function(t,e){for(var r,n=e?this.size:0,i=Ki(this,e);(r=i())!==Ji&&!1!==t(r,e?--n:n++,this););return n},t.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Zi(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?Vi():(this.__ownerID=t,this.__altered=!1,this)},t}(dr);Wi.isList=Di;var qi=Wi.prototype;qi[Fi]=!0,qi[He]=qi.remove,qi.merge=qi.concat,qi.setIn=Xn,qi.deleteIn=qi.removeIn=ti,qi.update=ri,qi.updateIn=ni,qi.mergeIn=fi,qi.mergeDeepIn=hi,qi.withMutations=pi,qi.wasAltered=vi,qi.asImmutable=gi,qi["@@transducer/init"]=qi.asMutable=di,qi["@@transducer/step"]=function(t,e){return t.push(e)},qi["@@transducer/result"]=function(t){return t.asImmutable()};var Ui=function(t,e){this.array=t,this.ownerID=e};Ui.prototype.removeBefore=function(t,e,r){if(r===e?1<<e:0===this.array.length)return this;var n=r>>>e&Ze;if(n>=this.array.length)return new Ui([],t);var i,o=0==n;if(0<e){var a=this.array[n];if((i=a&&a.removeBefore(t,e-Je,r))===a&&o)return this}if(o&&!i)return this;var s=$i(this,t);if(!o)for(var u=0;u<n;u++)s.array[u]=void 0;return i&&(s.array[n]=i),s},Ui.prototype.removeAfter=function(t,e,r){if(r===(e?1<<e:0)||0===this.array.length)return this;var n,i=r-1>>>e&Ze;if(i>=this.array.length)return this;if(0<e){var o=this.array[i];if((n=o&&o.removeAfter(t,e-Je,r))===o&&i==this.array.length-1)return this}var a=$i(this,t);return a.array.splice(1+i),n&&(a.array[i]=n),a};var Hi,Ji={};function Ki(t,u){var c=t._origin,l=t._capacity,o=Qi(l),a=t._tail;return f(t._root,t._level,0);function f(t,e,r){return 0===e?function(t,e){var r=e===o?a&&a.array:t&&t.array,n=c<e?0:c-e,i=l-e;Ke<i&&(i=Ke);return function(){if(n===i)return Ji;var t=u?--i:n++;return r&&r[t]}}(t,r):function(t,r,n){var i,o=t&&t.array,a=c<n?0:c-n>>r,s=1+(l-n>>r);Ke<s&&(s=Ke);return function(){for(;;){if(i){var t=i();if(t!==Ji)return t;i=null}if(a===s)return Ji;var e=u?--s:a++;i=f(o&&o[e],r-Je,n+(e<<r))}}}(t,e,r)}}function Zi(t,e,r,n,i,o,a){var s=Object.create(qi);return s.size=e-t,s._origin=t,s._capacity=e,s._level=r,s._root=n,s._tail=i,s.__ownerID=o,s.__hash=a,s.__altered=!1,s}function Vi(){return Hi=Hi||Zi(0,0,Je)}function Gi(t,e,r,n,i,o){var a,s=n>>>r&Ze,u=t&&s<t.array.length;if(!u&&void 0===i)return t;if(0<r){var c=t&&t.array[s],l=Gi(c,e,r-Je,n,i,o);return l===c?t:((a=$i(t,e)).array[s]=l,a)}return u&&t.array[s]===i?t:(o&&Ge(o),a=$i(t,e),void 0===i&&s==a.array.length-1?a.array.pop():a.array[s]=i,a)}function $i(t,e){return e&&t&&e===t.ownerID?t:new Ui(t?t.array.slice():[],e)}function Yi(t,e){if(e>=Qi(t._capacity))return t._tail;if(e<1<<t._level+Je){for(var r=t._root,n=t._level;r&&0<n;)r=r.array[e>>>n&Ze],n-=Je;return r}}function Xi(t,e,r){void 0!==e&&(e|=0),void 0!==r&&(r|=0);var n=t.__ownerID||new $e,i=t._origin,o=t._capacity,a=i+e,s=void 0===r?o:r<0?o+r:i+r;if(a===i&&s===o)return t;if(s<=a)return t.clear();for(var u=t._level,c=t._root,l=0;a+l<0;)c=new Ui(c&&c.array.length?[void 0,c]:[],n),l+=1<<(u+=Je);l&&(a+=l,i+=l,s+=l,o+=l);for(var f=Qi(o),h=Qi(s);1<<u+Je<=h;)c=new Ui(c&&c.array.length?[c]:[],n),u+=Je;var p=t._tail,d=h<f?Yi(t,s-1):f<h?new Ui([],n):p;if(p&&f<h&&a<o&&p.array.length){for(var g=c=$i(c,n),v=u;Je<v;v-=Je){var b=f>>>v&Ze;g=g.array[b]=$i(g.array[b],n)}g.array[f>>>Je&Ze]=p}if(s<o&&(d=d&&d.removeAfter(n,0,s)),h<=a)a-=h,s-=h,u=Je,c=null,d=d&&d.removeBefore(n,0,a);else if(i<a||h<f){for(l=0;c;){var _=a>>>u&Ze;if(_!=h>>>u&Ze)break;_&&(l+=(1<<u)*_),u-=Je,c=c.array[_]}c&&i<a&&(c=c.removeBefore(n,u,a-l)),c&&h<f&&(c=c.removeAfter(n,u,h-l)),l&&(a-=l,s-=l)}return t.__ownerID?(t.size=s-a,t._origin=a,t._capacity=s,t._level=u,t._root=c,t._tail=d,t.__hash=void 0,t.__altered=!0,t):Zi(a,s,u,c,d)}function Qi(t){return t<Ke?0:t-1>>>Je<<Je}var to,eo=function(t){function e(e){return null==e?no():Xr(e)?e:no().withMutations(function(r){var t=pr(e);Dn(t.size),t.forEach(function(t,e){return r.set(e,t)})})}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var r=this._map.get(t);return void 0!==r?this._list.get(r)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):no()},e.prototype.set=function(t,e){return io(this,t,e)},e.prototype.remove=function(t){return io(this,t,Ve)},e.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},e.prototype.__iterate=function(e,t){var r=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],r)},t)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),r=this._list.__ensureOwner(t);return t?ro(e,r,t,this.__hash):0===this.size?no():(this.__ownerID=t,this._map=e,this._list=r,this)},e}(bi);function ro(t,e,r,n){var i=Object.create(eo.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=r,i.__hash=n,i}function no(){return to=to||ro(Ci(),Vi())}function io(t,e,r){var n,i,o=t._map,a=t._list,s=o.get(e),u=void 0!==s;if(r===Ve){if(!u)return t;a.size>=Ke&&a.size>=2*o.size?(n=(i=a.filter(function(t,e){return void 0!==t&&s!==e})).toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(n.__ownerID=i.__ownerID=t.__ownerID)):(n=o.remove(e),i=s===a.size-1?a.pop():a.set(s,void 0))}else if(u){if(r===a.get(s)[1])return t;n=o,i=a.set(s,[e,r])}else n=o.set(e,a.size),i=a.set(a.size,[e,r]);return t.__ownerID?(t.size=n.size,t._map=n,t._list=i,t.__hash=void 0,t):ro(n,i)}eo.isOrderedMap=Xr,eo.prototype[wr]=!0,eo.prototype[He]=eo.prototype.remove;var oo="@@__IMMUTABLE_STACK__@@";function ao(t){return Boolean(t&&t[oo])}var so=function(o){function t(t){return null==t?fo():ao(t)?t:fo().pushAll(t)}return o&&(t.__proto__=o),((t.prototype=Object.create(o&&o.prototype)).constructor=t).of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(t,e){var r=this._head;for(t=Xe(this,t);r&&t--;)r=r.next;return r?r.value:e},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,r=this._head,n=arguments.length-1;0<=n;n--)r={value:t[n],next:r};return this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):lo(e,r)},t.prototype.pushAll=function(t){if(0===(t=o(t)).size)return this;if(0===this.size&&ao(t))return t;Dn(t.size);var e=this.size,r=this._head;return t.__iterate(function(t){e++,r={value:t,next:r}},!0),this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):lo(e,r)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):fo()},t.prototype.slice=function(t,e){if(tr(t,e,this.size))return this;var r=er(t,this.size);if(rr(e,this.size)!==this.size)return o.prototype.slice.call(this,t,e);for(var n=this.size-r,i=this._head;r--;)i=i.next;return this.__ownerID?(this.size=n,this._head=i,this.__hash=void 0,this.__altered=!0,this):lo(n,i)},t.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?lo(this.size,this._head,t,this.__hash):0===this.size?fo():(this.__ownerID=t,this.__altered=!1,this)},t.prototype.__iterate=function(r,t){var n=this;if(t)return new qr(this.toArray()).__iterate(function(t,e){return r(t,e,n)},t);for(var e=0,i=this._head;i&&!1!==r(i.value,e++,this);)i=i.next;return e},t.prototype.__iterator=function(e,t){if(t)return new qr(this.toArray()).__iterator(e,t);var r=0,n=this._head;return new Cr(function(){if(n){var t=n.value;return n=n.next,zr(e,r++,t)}return{value:void 0,done:!0}})},t}(dr);so.isStack=ao;var uo,co=so.prototype;function lo(t,e,r,n){var i=Object.create(co);return i.size=t,i._head=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function fo(){return uo=uo||lo(0)}co[oo]=!0,co.shift=co.pop,co.unshift=co.push,co.unshiftAll=co.pushAll,co.withMutations=pi,co.wasAltered=vi,co.asImmutable=gi,co["@@transducer/init"]=co.asMutable=di,co["@@transducer/step"]=function(t,e){return t.unshift(e)},co["@@transducer/result"]=function(t){return t.asImmutable()};var ho="@@__IMMUTABLE_SET__@@";function po(t){return Boolean(t&&t[ho])}function go(t){return po(t)&&Sr(t)}function vo(r,t){if(r===t)return!0;if(!ar(t)||void 0!==r.size&&void 0!==t.size&&r.size!==t.size||void 0!==r.__hash&&void 0!==t.__hash&&r.__hash!==t.__hash||ur(r)!==ur(t)||lr(r)!==lr(t)||Sr(r)!==Sr(t))return!1;if(0===r.size&&0===t.size)return!0;var n=!fr(r);if(Sr(r)){var i=r.entries();return t.every(function(t,e){var r=i.next().value;return r&&tn(r[1],t)&&(n||tn(r[0],e))})&&i.next().done}var o=!1;if(void 0===r.size)if(void 0===t.size)"function"==typeof r.cacheResult&&r.cacheResult();else{o=!0;var e=r;r=t,t=e}var a=!0,s=t.__iterate(function(t,e){if(n?!r.has(t):o?!tn(t,r.get(e,Ve)):!tn(r.get(e,Ve),t))return a=!1});return a&&r.size===s}function bo(e,r){function t(t){e.prototype[t]=r[t]}return Object.keys(r).forEach(t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(r).forEach(t),e}function _o(t){if(!t||"object"!=typeof t)return t;if(!ar(t)){if(!Un(t))return t;t=Pr(t)}if(ur(t)){var r={};return t.__iterate(function(t,e){r[e]=_o(t)}),r}var e=[];return t.__iterate(function(t){e.push(_o(t))}),e}var mo=function(n){function e(r){return null==r?xo():po(r)&&!Sr(r)?r:xo().withMutations(function(e){var t=n(r);Dn(t.size),t.forEach(function(t){return e.add(t)})})}return n&&(e.__proto__=n),((e.prototype=Object.create(n&&n.prototype)).constructor=e).of=function(){return this(arguments)},e.fromKeys=function(t){return this(pr(t).keySeq())},e.intersect=function(t){return(t=hr(t).toArray()).length?wo.intersect.apply(e(t.pop()),t):xo()},e.union=function(t){return(t=hr(t).toArray()).length?wo.union.apply(e(t.pop()),t):xo()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return So(this,this._map.set(t,t))},e.prototype.remove=function(t){return So(this,this._map.remove(t))},e.prototype.clear=function(){return So(this,this._map.clear())},e.prototype.map=function(r,n){var i=this,o=[],a=[];return this.forEach(function(t){var e=r.call(n,t,t,i);e!==t&&(o.push(t),a.push(e))}),this.withMutations(function(e){o.forEach(function(t){return e.remove(t)}),a.forEach(function(t){return e.add(t)})})},e.prototype.union=function(){for(var r=[],t=arguments.length;t--;)r[t]=arguments[t];return 0===(r=r.filter(function(t){return 0!==t.size})).length?this:0!==this.size||this.__ownerID||1!==r.length?this.withMutations(function(e){for(var t=0;t<r.length;t++)n(r[t]).forEach(function(t){return e.add(t)})}):this.constructor(r[0])},e.prototype.intersect=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(0===t.length)return this;t=t.map(function(t){return n(t)});var r=[];return this.forEach(function(e){t.every(function(t){return t.includes(e)})||r.push(e)}),this.withMutations(function(e){r.forEach(function(t){e.remove(t)})})},e.prototype.subtract=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(0===t.length)return this;t=t.map(function(t){return n(t)});var r=[];return this.forEach(function(e){t.some(function(t){return t.includes(e)})&&r.push(e)}),this.withMutations(function(e){r.forEach(function(t){e.remove(t)})})},e.prototype.sort=function(t){return qo(Tn(this,t))},e.prototype.sortBy=function(t,e){return qo(Tn(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(e,t){var r=this;return this._map.__iterate(function(t){return e(t,t,r)},t)},e.prototype.__iterator=function(t,e){return this._map.__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?this.__empty():(this.__ownerID=t,this._map=e,this)},e}(gr);mo.isSet=po;var yo,wo=mo.prototype;function So(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function ko(t,e){var r=Object.create(wo);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function xo(){return yo=yo||ko(Ci())}wo[ho]=!0,wo[He]=wo.remove,wo.merge=wo.concat=wo.union,wo.withMutations=pi,wo.asImmutable=gi,wo["@@transducer/init"]=wo.asMutable=di,wo["@@transducer/step"]=function(t,e){return t.add(e)},wo["@@transducer/result"]=function(t){return t.asImmutable()},wo.__empty=xo,wo.__make=ko;var Io,Oo=function(t){function n(t,e,r){if(!(this instanceof n))return new n(t,e,r);if(Fn(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),r=void 0===r?1:Math.abs(r),e<t&&(r=-r),this._start=t,this._end=e,this._step=r,this.size=Math.max(0,Math.ceil((e-t)/r-1)+1),0===this.size){if(Io)return Io;Io=this}}return t&&(n.__proto__=t),((n.prototype=Object.create(t&&t.prototype)).constructor=n).prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},n.prototype.get=function(t,e){return this.has(t)?this._start+Xe(this,t)*this._step:e},n.prototype.includes=function(t){var e=(t-this._start)/this._step;return 0<=e&&e<this.size&&e===Math.floor(e)},n.prototype.slice=function(t,e){return tr(t,e,this.size)?this:(t=er(t,this.size),(e=rr(e,this.size))<=t?new n(0,0):new n(this.get(t,this._end),this.get(e,this._end),this._step))},n.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var r=e/this._step;if(0<=r&&r<this.size)return r}return-1},n.prototype.lastIndexOf=function(t){return this.indexOf(t)},n.prototype.__iterate=function(t,e){for(var r=this.size,n=this._step,i=e?this._start+(r-1)*n:this._start,o=0;o!==r&&!1!==t(i,e?r-++o:o++,this);)i+=e?-n:n;return o},n.prototype.__iterator=function(e,r){var n=this.size,i=this._step,o=r?this._start+(n-1)*i:this._start,a=0;return new Cr(function(){if(a===n)return{value:void 0,done:!0};var t=o;return o+=r?-i:i,zr(e,r?n-++a:a++,t)})},n.prototype.equals=function(t){return t instanceof n?this._start===t._start&&this._end===t._end&&this._step===t._step:vo(this,t)},n}(Dr);function Ao(t,e,r){for(var n=Wn(e),i=0;i!==n.length;)if((t=Kn(t,n[i++],Ve))===Ve)return r;return t}function To(t,e){return Ao(this,t,e)}function Co(t,e){return Ao(t,e,Ve)!==Ve}function zo(){Dn(this.size);var r={};return this.__iterate(function(t,e){r[e]=t}),r}hr.isIterable=ar,hr.isKeyed=ur,hr.isIndexed=lr,hr.isAssociative=fr,hr.isOrdered=Sr,hr.Iterator=Cr,bo(hr,{toArray:function(){Dn(this.size);var r=new Array(this.size||0),n=ur(this),i=0;return this.__iterate(function(t,e){r[i++]=n?[e,t]:t}),r},toIndexedSeq:function(){return new _n(this)},toJS:function(){return _o(this)},toKeyedSeq:function(){return new bn(this,!0)},toMap:function(){return bi(this.toKeyedSeq())},toObject:zo,toOrderedMap:function(){return eo(this.toKeyedSeq())},toOrderedSet:function(){return qo(ur(this)?this.valueSeq():this)},toSet:function(){return mo(ur(this)?this.valueSeq():this)},toSetSeq:function(){return new mn(this)},toSeq:function(){return lr(this)?this.toIndexedSeq():ur(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return so(ur(this)?this.valueSeq():this)},toList:function(){return Wi(ur(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return En(this,function(t,e){var r=ur(t),n=[t].concat(e).map(function(t){return ar(t)?r&&(t=pr(t)):t=r?Zr(t):Vr(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===n.length)return t;if(1===n.length){var i=n[0];if(i===t||r&&ur(i)||lr(t)&&lr(i))return i}var o=new qr(n);return r?o=o.toKeyedSeq():lr(t)||(o=o.toSetSeq()),(o=o.flatten(!0)).size=n.reduce(function(t,e){if(void 0!==t){var r=e.size;if(void 0!==r)return t+r}},0),o}(this,t))},includes:function(e){return this.some(function(t){return tn(t,e)})},entries:function(){return this.__iterator(Ir)},every:function(n,i){Dn(this.size);var o=!0;return this.__iterate(function(t,e,r){if(!n.call(i,t,e,r))return o=!1}),o},filter:function(t,e){return En(this,xn(this,t,e,!0))},find:function(t,e,r){var n=this.findEntry(t,e);return n?n[1]:r},forEach:function(t,e){return Dn(this.size),this.__iterate(e?t.bind(e):t)},join:function(e){Dn(this.size),e=void 0!==e?""+e:",";var r="",n=!0;return this.__iterate(function(t){n?n=!1:r+=e,r+=null!=t?t.toString():""}),r},keys:function(){return this.__iterator(kr)},map:function(t,e){return En(this,Sn(this,t,e))},reduce:function(t,e,r){return Bo(this,t,e,r,arguments.length<2,!1)},reduceRight:function(t,e,r){return Bo(this,t,e,r,arguments.length<2,!0)},reverse:function(){return En(this,kn(this,!0))},slice:function(t,e){return En(this,In(this,t,e,!0))},some:function(t,e){return!this.every(jo(t),e)},sort:function(t){return En(this,Tn(this,t))},values:function(){return this.__iterator(xr)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return Ye(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(r,n,i){var o=bi().asMutable();return r.__iterate(function(t,e){o.update(n.call(i,t,e,r),0,function(t){return t+1})}),o.asImmutable()}(this,t,e)},equals:function(t){return vo(this,t)},entrySeq:function(){var t=this;if(t._cache)return new qr(t._cache);var e=t.toSeq().map(Ro).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(jo(t),e)},findEntry:function(n,i,t){var o=t;return this.__iterate(function(t,e,r){if(n.call(i,t,e,r))return!(o=[e,t])}),o},findKey:function(t,e){var r=this.findEntry(t,e);return r&&r[0]},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},findLastEntry:function(t,e,r){return this.toKeyedSeq().reverse().findEntry(t,e,r)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(Qe,null,t)},flatMap:function(t,e){return En(this,function(r,n,i){var o=Bn(r);return r.toSeq().map(function(t,e){return o(n.call(i,t,e,r))}).flatten(!0)}(this,t,e))},flatten:function(t){return En(this,An(this,t,!0))},fromEntrySeq:function(){return new yn(this)},get:function(r,t){return this.find(function(t,e){return tn(e,r)},void 0,t)},getIn:To,groupBy:function(t,e){return function(n,t,i){var o=ur(n),a=(Sr(n)?eo():bi()).asMutable();n.__iterate(function(e,r){a.update(t.call(i,e,r,n),function(t){return(t=t||[]).push(o?[r,e]:e),t})});var e=Bn(n);return a.map(function(t){return En(n,e(t))}).asImmutable()}(this,t,e)},has:function(t){return this.get(t,Ve)!==Ve},hasIn:function(t){return Co(this,t)},isSubset:function(e){return e="function"==typeof e.includes?e:hr(e),this.every(function(t){return e.includes(t)})},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:hr(t)).isSubset(this)},keyOf:function(e){return this.findKey(function(t){return tn(t,e)})},keySeq:function(){return this.toSeq().map(Mo).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Cn(this,t)},maxBy:function(t,e){return Cn(this,e,t)},min:function(t){return Cn(this,t?Po(t):Do)},minBy:function(t,e){return Cn(this,e?Po(e):Do,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return En(this,On(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(jo(t),e)},sortBy:function(t,e){return En(this,Tn(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return En(this,function(e,u,c){var t=Mn(e);return t.__iterateUncached=function(n,t){var i=this;if(t)return this.cacheResult().__iterate(n,t);var o=0;return e.__iterate(function(t,e,r){return u.call(c,t,e,r)&&++o&&n(t,e,i)}),o},t.__iteratorUncached=function(i,t){var o=this;if(t)return this.cacheResult().__iterator(i,t);var a=e.__iterator(Ir,t),s=!0;return new Cr(function(){if(!s)return{value:void 0,done:!0};var t=a.next();if(t.done)return t;var e=t.value,r=e[0],n=e[1];return u.call(c,n,r,o)?i===Ir?t:zr(i,r,n,t):{value:void 0,done:!(s=!1)}})},t}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(jo(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=Sr(t),r=ur(t),n=e?1:0;return function(t,e){return e=en(e,3432918353),e=en(e<<15|e>>>-15,461845907),e=en(e<<13|e>>>-13,5),e=en((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=rn((e=en(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(r?e?function(t,e){n=31*n+Wo(on(t),on(e))|0}:function(t,e){n=n+Wo(on(t),on(e))|0}:e?function(t){n=31*n+on(t)|0}:function(t){n=n+on(t)|0}),n)}(this))}});var Lo=hr.prototype;Lo[or]=!0,Lo[Tr]=Lo.values,Lo.toJSON=Lo.toArray,Lo.__toStringMapper=Hn,Lo.inspect=Lo.toSource=function(){return this.toString()},Lo.chain=Lo.flatMap,Lo.contains=Lo.includes,bo(pr,{flip:function(){return En(this,wn(this))},mapEntries:function(r,n){var i=this,o=0;return En(this,this.toSeq().map(function(t,e){return r.call(n,[e,t],o++,i)}).fromEntrySeq())},mapKeys:function(r,n){var i=this;return En(this,this.toSeq().flip().map(function(t,e){return r.call(n,t,e,i)}).flip())}});var Eo=pr.prototype;Eo[sr]=!0,Eo[Tr]=Lo.entries,Eo.toJSON=zo,Eo.__toStringMapper=function(t,e){return Hn(e)+": "+Hn(t)},bo(dr,{toKeyedSeq:function(){return new bn(this,!1)},filter:function(t,e){return En(this,xn(this,t,e,!1))},findIndex:function(t,e){var r=this.findEntry(t,e);return r?r[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return En(this,kn(this,!1))},slice:function(t,e){return En(this,In(this,t,e,!1))},splice:function(t,e){var r=arguments.length;if(e=Math.max(e||0,0),0===r||2===r&&!e)return this;t=er(t,t<0?this.count():this.size);var n=this.slice(0,t);return En(this,1===r?n:n.concat(Pn(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var r=this.findLastEntry(t,e);return r?r[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return En(this,An(this,t,!1))},get:function(r,t){return(r=Xe(this,r))<0||this.size===1/0||void 0!==this.size&&r>this.size?t:this.find(function(t,e){return e===r},void 0,t)},has:function(t){return 0<=(t=Xe(this,t))&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return En(this,function(o,a){var t=Mn(o);return t.size=o.size&&2*o.size-1,t.__iterateUncached=function(e,t){var r=this,n=0;return o.__iterate(function(t){return(!n||!1!==e(a,n++,r))&&!1!==e(t,n++,r)},t),n},t.__iteratorUncached=function(t,e){var r,n=o.__iterator(xr,e),i=0;return new Cr(function(){return(!r||i%2)&&(r=n.next()).done?r:i%2?zr(t,i++,a):zr(t,i++,r.value,r)})},t}(this,t))},interleave:function(){var t=[this].concat(Pn(arguments)),e=Ln(this.toSeq(),Dr.of,t),r=e.flatten(!0);return e.size&&(r.size=e.size*t.length),En(this,r)},keySeq:function(){return Oo(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return En(this,On(this,t,e,!1))},zip:function(){var t=[this].concat(Pn(arguments));return En(this,Ln(this,Fo,t))},zipAll:function(){var t=[this].concat(Pn(arguments));return En(this,Ln(this,Fo,t,!0))},zipWith:function(t){var e=Pn(arguments);return En(e[0]=this,Ln(this,t,e))}});var No=dr.prototype;function Bo(t,n,i,o,a,e){return Dn(t.size),t.__iterate(function(t,e,r){i=a?(a=!1,t):n.call(o,i,t,e,r)},e),i}function Mo(t,e){return e}function Ro(t,e){return[e,t]}function jo(t){return function(){return!t.apply(this,arguments)}}function Po(t){return function(){return-t.apply(this,arguments)}}function Fo(){return Pn(arguments)}function Do(t,e){return t<e?1:e<t?-1:0}function Wo(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}No[cr]=!0,No[wr]=!0,bo(gr,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),gr.prototype.has=Lo.includes,gr.prototype.contains=gr.prototype.includes,bo(Fr,pr.prototype),bo(Dr,dr.prototype),bo(Wr,gr.prototype);var qo=function(t){function e(r){return null==r?Ko():go(r)?r:Ko().withMutations(function(e){var t=gr(r);Dn(t.size),t.forEach(function(t){return e.add(t)})})}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).of=function(){return this(arguments)},e.fromKeys=function(t){return this(pr(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(mo);qo.isOrderedSet=go;var Uo,Ho=qo.prototype;function Jo(t,e){var r=Object.create(Ho);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function Ko(){return Uo=Uo||Jo(no())}Ho[wr]=!0,Ho.zip=No.zip,Ho.zipWith=No.zipWith,Ho.__empty=Ko,Ho.__make=Jo;function Zo(a,s){var u,c=function(t){var n=this;if(t instanceof c)return t;if(!(this instanceof c))return new c(t);if(!u){u=!0;var e=Object.keys(a),r=l._indices={};l._name=s,l._keys=e,l._defaultValues=a;for(var i=0;i<e.length;i++){var o=e[i];r[o]=i,l[o]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+Yo(this)+' with property "'+o+'" since that property name is part of the Record API.'):Qo(l,o)}}this.__ownerID=void 0,this._values=Wi().withMutations(function(r){r.setSize(n._keys.length),pr(t).forEach(function(t,e){r.set(n._indices[e],t===n._defaultValues[e]?void 0:t)})})},l=c.prototype=Object.create(Go);return l.constructor=c,s&&(c.displayName=s),c}Zo.prototype.toString=function(){for(var t,e=Yo(this)+" { ",r=this._keys,n=0,i=r.length;n!==i;n++)e+=(n?", ":"")+(t=r[n])+": "+Hn(this.get(t));return e+" }"},Zo.prototype.equals=function(t){return this===t||t&&this._keys===t._keys&&Xo(this).equals(Xo(t))},Zo.prototype.hashCode=function(){return Xo(this).hashCode()},Zo.prototype.has=function(t){return this._indices.hasOwnProperty(t)},Zo.prototype.get=function(t,e){if(!this.has(t))return e;var r=this._indices[t],n=this._values.get(r);return void 0===n?this._defaultValues[t]:n},Zo.prototype.set=function(t,e){if(this.has(t)){var r=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(r!==this._values&&!this.__ownerID)return $o(this,r)}return this},Zo.prototype.remove=function(t){return this.set(t)},Zo.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:$o(this,t)},Zo.prototype.wasAltered=function(){return this._values.wasAltered()},Zo.prototype.toSeq=function(){return Xo(this)},Zo.prototype.toJS=function(){return _o(this)},Zo.prototype.entries=function(){return this.__iterator(Ir)},Zo.prototype.__iterator=function(t,e){return Xo(this).__iterator(t,e)},Zo.prototype.__iterate=function(t,e){return Xo(this).__iterate(t,e)},Zo.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?$o(this,e,t):(this.__ownerID=t,this._values=e,this)},Zo.isRecord=mr,Zo.getDescriptiveName=Yo;var Vo,Go=Zo.prototype;function $o(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._values=e,n.__ownerID=r,n}function Yo(t){return t.constructor.displayName||t.constructor.name||"Record"}function Xo(e){return Zr(e._keys.map(function(t){return[t,e.get(t)]}))}function Qo(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){Fn(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}catch(t){}}function ta(t,e){return function r(n,i,o,t,a,e){var s=Array.isArray(o)?Dr:qn(o)?Fr:null;if(s){if(~n.indexOf(o))throw new TypeError("Cannot convert circular structure to Immutable");n.push(o),a&&""!==t&&a.push(t);var u=i.call(e,t,s(o).map(function(t,e){return r(n,i,t,e,a,o)}),a&&a.slice());return n.pop(),a&&a.pop(),u}return o}([],e||ea,t,"",e&&2<e.length?[]:void 0,{"":t})}function ea(t,e){return ur(e)?e.toMap():e.toList()}Go[_r]=!0,Go[He]=Go.remove,Go.deleteIn=Go.removeIn=ti,Go.getIn=To,Go.hasIn=Lo.hasIn,Go.merge=ii,Go.mergeWith=oi,Go.mergeIn=fi,Go.mergeDeep=ci,Go.mergeDeepWith=li,Go.mergeDeepIn=hi,Go.setIn=Xn,Go.update=ri,Go.updateIn=ni,Go.withMutations=pi,Go.asMutable=di,Go.asImmutable=gi,Go[Tr]=Go.entries,Go.toJSON=Go.toObject=Lo.toObject,Go.inspect=Go.toSource=function(){return this.toString()};function ra(){return{startRows:2,startCols:2,minSpareRows:0,afterSelectionEnd:config.afterSelectionEnd||function(){},afterEnterInput:config.afterEnterInput||function(){},afterPickShape:config.afterPickShape||function(){}}}var na={version:"4.0.0-rc.11",Collection:hr,Iterable:hr,Seq:Pr,Map:bi,OrderedMap:eo,List:Wi,Stack:so,Set:mo,OrderedSet:qo,Record:Zo,Range:Oo,Repeat:function(t){function n(t,e){if(!(this instanceof n))return new n(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(Vo)return Vo;Vo=this}}return t&&(n.__proto__=t),((n.prototype=Object.create(t&&t.prototype)).constructor=n).prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},n.prototype.get=function(t,e){return this.has(t)?this._value:e},n.prototype.includes=function(t){return tn(this._value,t)},n.prototype.slice=function(t,e){var r=this.size;return tr(t,e,r)?this:new n(this._value,rr(e,r)-er(t,r))},n.prototype.reverse=function(){return this},n.prototype.indexOf=function(t){return tn(this._value,t)?0:-1},n.prototype.lastIndexOf=function(t){return tn(this._value,t)?this.size:-1},n.prototype.__iterate=function(t,e){for(var r=this.size,n=0;n!==r&&!1!==t(this._value,e?r-++n:n++,this););return n},n.prototype.__iterator=function(t,e){var r=this,n=this.size,i=0;return new Cr(function(){return i===n?{value:void 0,done:!0}:zr(t,e?n-++i:i++,r._value)})},n.prototype.equals=function(t){return t instanceof n?tn(this._value,t._value):vo(t)},n}(Dr),is:tn,fromJS:ta,hash:on,isImmutable:yr,isCollection:ar,isKeyed:ur,isIndexed:lr,isAssociative:fr,isOrdered:Sr,isValueObject:Qr,isSeq:br,isList:Di,isMap:Yr,isOrderedMap:Xr,isStack:ao,isSet:po,isOrderedSet:go,isRecord:mr,get:Kn,getIn:Ao,has:Jn,hasIn:Co,merge:function(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return ui(t,e)},mergeDeep:function(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return si(t,e)},mergeWith:function(t,e){for(var r=[],n=arguments.length-2;0<n--;)r[n]=arguments[n+2];return ui(e,r,t)},mergeDeepWith:function(t,e){for(var r=[],n=arguments.length-2;0<n--;)r[n]=arguments[n+2];return si(e,r,t)},remove:Vn,removeIn:Qn,set:Gn,setIn:Yn,update:ei,updateIn:$n},ia="unEmptyCells",oa="cellStyle2",aa="specCellStyle2",sa="insertLink",ua="cleanLink",ca="initDeafult",la="fixState",fa="setCustomBorders",ha=na.fromJS,pa=na.List,da=na.Map,ga={tableProps:ha({paddingLeft:54,paddingRight:60}),rowsHeight:pa([]),colsWidth:pa([]),styles:pa([]),dataSource:ha([]),mergeCells:pa([]),sheetFreeze:ha({rowCount:0,colCount:0}),filter:da(),shapes:da(),dv:0},va=da(ga),ba=function(n,i){var t=pa();return t=t.withMutations(function(t){for(var e=0;e<n;e++){var r=pa();r=r.withMutations(function(t){for(var e=0;e<i;e++)t.push("")}),t.push(r)}})},_a=function(n,i){var t=pa(),o=da({style:null,prop:null});return t=t.withMutations(function(t){for(var e=0;e<n;e++){var r=pa();r=r.withMutations(function(t){for(var e=0;e<i;e++)t.push(o)}),t.push(r)}})};ye&&"g"!=/./g.flags&&Ie.f(RegExp.prototype,"flags",{configurable:!0,get:jt});function ma(t){Ce(RegExp.prototype,ya,t,!0)}var ya="toString",wa=/./[ya];pe(function(){return"/a/b"!=wa.call({source:"a",flags:"b"})})?ma(function(){var t=Lt(this);return"/".concat(t.source,"/","flags"in t?t.flags:!ye&&t instanceof RegExp?jt.call(t):void 0)}):wa.name!=ya&&ma(function(){return wa.call(this)});var Sa={};function ka(t){return(ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ia(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Oa(t,e,r){return e&&Ia(t.prototype,e),r&&Ia(t,r),t}function Aa(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ta(t){return(Ta=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ca(t,e){return(Ca=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function za(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function La(t,e){return Na(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(t,e)||Ma()}function Ea(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||Ba(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Na(t){if(Array.isArray(t))return t}function Ba(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function Ma(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}Sa[Yt("toStringTag")]="z",Sa+""!="[object z]"&&Ce(Object.prototype,"toString",function(){return"[object "+Gt(this)+"]"},!0),Ne("match",1,function(n,i,c,l){return[function(t){var e=n(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,e):new RegExp(t)[i](String(e))},function(t){var e=l(c,t,this);if(e.done)return e.value;var r=Lt(t),n=String(this);if(!r.global)return Rt(r,n);for(var i,o=r.unicode,a=[],s=r.lastIndex=0;null!==(i=Rt(r,n));){var u=String(i[0]);""===(a[s]=u)&&(r.lastIndex=Mt(n,Vt(r.lastIndex),o)),s++}return 0===s?null:a}]});function Ra(t){return Ja(Nt(t))}function ja(t,e){if(Lt(t),!Ht(e)&&null!==e)throw TypeError(e+": can't set as prototype!")}function Pa(t,e,r){var n,i=e.constructor;return i!==r&&"function"==typeof i&&(n=i.prototype)!==r.prototype&&Ht(n)&&Va&&Va(t,n),t}function Fa(t,e){return(t=Zt(t))<0?Ga(t+e,0):$a(t,e)}function Da(s){return function(t,e,r){var n,i=Ra(t),o=Vt(i.length),a=Fa(r,o);if(s&&e!=e){for(;a<o;)if((n=i[a++])!=n)return!0}else for(;a<o;a++)if((s||a in i)&&i[a]===e)return s||a||0;return!s&&-1}}function Wa(t){return Ya[t]||(Ya[t]=Jt(t))}function qa(t,e){var r,n=Ra(t),i=0,o=[];for(r in n)r!=Qa&&be(n,r)&&o.push(r);for(;e.length>i;)be(n,r=e[i++])&&(~Xa(o,r)||o.push(r));return o}function Ua(t){var e=$t[t];ye&&e&&!e[ns]&&Ie.f(e,ns,{configurable:!0,get:function(){return this}})}var Ha={f:{}.propertyIsEnumerable},Ja=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==At(t)?t.split(""):Object(t)},Ka=Object.getOwnPropertyDescriptor,Za={f:ye?Ka:function(t,e){if(t=Ra(t),e=ge(e,!0),ke)try{return Ka(t,e)}catch(t){}if(be(t,e))return ve(!Ha.f.call(t,e),t[e])}},Va={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,n){try{(n=_e(Function.call,Za.f(Object.prototype,"__proto__").set,2))(t,[]),r=!(t instanceof Array)}catch(t){r=!0}return function(t,e){return ja(t,e),r?t.__proto__=e:n(t,e),t}}({},!1):void 0),check:ja}.set,Ga=Math.max,$a=Math.min,Ya=Wt("keys"),Xa=Da(!1),Qa=Wa("IE_PROTO"),ts="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),es=ts.concat("length","prototype"),rs={f:Object.getOwnPropertyNames||function(t){return qa(t,es)}},ns=Yt("species"),is=Ie.f,os=rs.f,as=$t.RegExp,ss=as,us=as.prototype,cs=/a/g,ls=/a/g,fs=new as(cs)!==cs;if(ye&&(!fs||pe(function(){return ls[Yt("match")]=!1,as(cs)!=cs||as(ls)==ls||"/a/i"!=as(cs,"i")}))){as=function(t,e){var r=this instanceof as,n=zt(t),i=void 0===e;return!r&&n&&t.constructor===as&&i?t:Pa(fs?new ss(n&&!i?t.source:t,e):ss((n=t instanceof as)?t.source:t,n&&i?jt.call(t):e),r?this:us,as)};for(var hs=function(e){e in as||is(as,e,{configurable:!0,get:function(){return ss[e]},set:function(t){ss[e]=t}})},ps=os(ss),ds=0;ps.length>ds;)hs(ps[ds++]);(us.constructor=as).prototype=us,Ce($t,"RegExp",as)}Ua("RegExp");for(var gs,vs=Jt("typed_array"),bs=Jt("view"),_s=!(!$t.ArrayBuffer||!$t.DataView),ms=_s,ys=0,ws="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");ys<9;)(gs=$t[ws[ys++]])?(Oe(gs.prototype,vs,!0),Oe(gs.prototype,bs,!0)):ms=!1;function Ss(t,e,r){for(var n in e)Ce(t,n,e[n],r);return t}function ks(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!");return t}function xs(t){if(void 0===t)return 0;var e=Zt(t),r=Vt(e);if(e!==r)throw RangeError("Wrong length!");return r}function Is(t){return Object(Nt(t))}function Os(t,e,r){for(var n=Is(this),i=Vt(n.length),o=arguments.length,a=Fa(1<o?e:void 0,i),s=2<o?r:void 0,u=void 0===s?i:Fa(s,i);a<u;)n[a++]=t;return n}function As(t,e,r){t&&!be(t=r?t:t.prototype,Bs)&&Ns(t,Bs,{configurable:!0,value:e})}function Ts(t){return void 0!==t&&(Rs.Array===t||Ps[js]===t)}function Cs(){}function zs(t,e){return new(function(t){var e;return Xs(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!Xs(e.prototype)||(e=void 0),Ht(e)&&null===(e=e[Qs])&&(e=void 0)),void 0===e?Array:e}(t))(e)}function Ls(f,t){var h=1==f,p=2==f,d=3==f,g=4==f,v=6==f,b=5==f||v,_=t||zs;return function(t,e,r){for(var n,i,o=Is(t),a=Ja(o),s=_e(e,r,3),u=Vt(a.length),c=0,l=h?_(t,u):p?_(t,0):void 0;c<u;c++)if((b||c in a)&&(i=s(n=a[c],c,o),f))if(h)l[c]=i;else if(i)switch(f){case 3:return!0;case 5:return n;case 6:return c;case 2:l.push(n)}else if(g)return!1;return v?-1:d||g?g:l}}var Es={ABV:_s,CONSTR:ms,TYPED:vs,VIEW:bs},Ns=Ie.f,Bs=Yt("toStringTag"),Ms=Ct(function(t,e){var r=rs.f,n=Ie.f,i="ArrayBuffer",o="DataView",a="prototype",f="Wrong index!",s=$t[i],u=$t[o],c=$t.Math,h=$t.RangeError,p=$t.Infinity,l=s,d=c.abs,g=c.pow,v=c.floor,b=c.log,_=c.LN2,m="byteLength",y="byteOffset",w=ye?"_b":"buffer",S=ye?"_l":m,k=ye?"_o":y;function x(t,e,r){var n,i,o,a=new Array(r),s=8*r-e-1,u=(1<<s)-1,c=u>>1,l=23===e?g(2,-24)-g(2,-77):0,f=0,h=t<0||0===t&&1/t<0?1:0;for((t=d(t))!=t||t===p?(i=t!=t?1:0,n=u):(n=v(b(t)/_),t*(o=g(2,-n))<1&&(n--,o*=2),2<=(t+=1<=n+c?l/o:l*g(2,1-c))*o&&(n++,o/=2),u<=n+c?(i=0,n=u):1<=n+c?(i=(t*o-1)*g(2,e),n+=c):(i=t*g(2,c-1)*g(2,e),n=0));8<=e;a[f++]=255&i,i/=256,e-=8);for(n=n<<e|i,s+=e;0<s;a[f++]=255&n,n/=256,s-=8);return a[--f]|=128*h,a}function I(t,e,r){var n,i=8*r-e-1,o=(1<<i)-1,a=o>>1,s=i-7,u=r-1,c=t[u--],l=127&c;for(c>>=7;0<s;l=256*l+t[u],u--,s-=8);for(n=l&(1<<-s)-1,l>>=-s,s+=e;0<s;n=256*n+t[u],u--,s-=8);if(0===l)l=1-a;else{if(l===o)return n?NaN:c?-p:p;n+=g(2,e),l-=a}return(c?-1:1)*n*g(2,l-e)}function O(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function A(t){return[255&t]}function T(t){return[255&t,t>>8&255]}function C(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function z(t){return x(t,52,8)}function L(t){return x(t,23,4)}function E(t,e,r){n(t[a],e,{get:function(){return this[r]}})}function N(t,e,r,n){var i=xs(+r);if(i+e>t[S])throw h(f);var o=t[w]._b,a=i+t[k],s=o.slice(a,a+e);return n?s:s.reverse()}function B(t,e,r,n,i,o){var a=xs(+r);if(a+e>t[S])throw h(f);for(var s=t[w]._b,u=a+t[k],c=n(+i),l=0;l<e;l++)s[u+l]=c[o?l:e-l-1]}if(Es.ABV){if(!pe(function(){s(1)})||!pe(function(){new s(-1)})||pe(function(){return new s,new s(1.5),new s(NaN),s.name!=i})){for(var M,R=(s=function(t){return ks(this,s),new l(xs(t))})[a]=l[a],j=r(l),P=0;j.length>P;)(M=j[P++])in s||Oe(s,M,l[M]);R.constructor=s}var F=new u(new s(2)),D=u[a].setInt8;F.setInt8(0,2147483648),F.setInt8(1,2147483649),!F.getInt8(0)&&F.getInt8(1)||Ss(u[a],{setInt8:function(t,e){D.call(this,t,e<<24>>24)},setUint8:function(t,e){D.call(this,t,e<<24>>24)}},!0)}else s=function(t){ks(this,s,i);var e=xs(t);this._b=Os.call(new Array(e),0),this[S]=e},u=function(t,e,r){ks(this,u,o),ks(t,s,o);var n=t[S],i=Zt(e);if(i<0||n<i)throw h("Wrong offset!");if(n<i+(r=void 0===r?n-i:Vt(r)))throw h("Wrong length!");this[w]=t,this[k]=i,this[S]=r},ye&&(E(s,m,"_l"),E(u,"buffer","_b"),E(u,m,"_l"),E(u,y,"_o")),Ss(u[a],{getInt8:function(t){return N(this,1,t)[0]<<24>>24},getUint8:function(t){return N(this,1,t)[0]},getInt16:function(t,e){var r=N(this,2,t,e);return(r[1]<<8|r[0])<<16>>16},getUint16:function(t,e){var r=N(this,2,t,e);return r[1]<<8|r[0]},getInt32:function(t,e){return O(N(this,4,t,e))},getUint32:function(t,e){return O(N(this,4,t,e))>>>0},getFloat32:function(t,e){return I(N(this,4,t,e),23,4)},getFloat64:function(t,e){return I(N(this,8,t,e),52,8)},setInt8:function(t,e){B(this,1,t,A,e)},setUint8:function(t,e){B(this,1,t,A,e)},setInt16:function(t,e,r){B(this,2,t,T,e,r)},setUint16:function(t,e,r){B(this,2,t,T,e,r)},setInt32:function(t,e,r){B(this,4,t,C,e,r)},setUint32:function(t,e,r){B(this,4,t,C,e,r)},setFloat32:function(t,e,r){B(this,4,t,L,e,r)},setFloat64:function(t,e,r){B(this,8,t,z,e,r)}});As(s,i),As(u,o),Oe(u[a],Es.VIEW,!0),e[i]=s,e[o]=u}),Rs={},js=Yt("iterator"),Ps=Array.prototype,Fs=Object.keys||function(t){return qa(t,ts)},Ds=ye?Object.defineProperties:function(t,e){Lt(t);for(var r,n=Fs(e),i=n.length,o=0;o<i;)Ie.f(t,r=n[o++],e[r]);return t},Ws=$t.document,qs=Ws&&Ws.documentElement,Us=Wa("IE_PROTO"),Hs="prototype",Js=function(){var t,e=de("iframe"),r=ts.length;for(e.style.display="none",qs.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Js=t.F;r--;)delete Js[Hs][ts[r]];return Js()},Ks=Object.create||function(t,e){var r;return null!==t?(Cs[Hs]=Lt(t),r=new Cs,Cs[Hs]=null,r[Us]=t):r=Js(),void 0===e?r:Ds(r,e)},Zs=Wa("IE_PROTO"),Vs=Object.prototype,Gs=Object.getPrototypeOf||function(t){return t=Is(t),be(t,Zs)?t[Zs]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Vs:null},$s=Yt("iterator"),Ys=Dt.getIteratorMethod=function(t){if(null!=t)return t[$s]||t["@@iterator"]||Rs[Gt(t)]},Xs=Array.isArray||function(t){return"Array"==At(t)},Qs=Yt("species"),tu=Yt("unscopables"),eu=Array.prototype;null==eu[tu]&&Oe(eu,tu,{});function ru(t){eu[tu][t]=!0}function nu(t,e){return{value:e,done:!!t}}var iu={};Oe(iu,Yt("iterator"),function(){return this});function ou(){return this}function au(t,e,r,n,i,o,a){function s(t){if(!uu&&t in d)return d[t];switch(t){case"keys":case cu:return function(){return new r(this,t)}}return function(){return new r(this,t)}}!function(t,e,r){t.prototype=Ks(iu,{next:ve(1,r)}),As(t,e+" Iterator")}(r,e,n);var u,c,l,f=e+" Iterator",h=i==cu,p=!1,d=t.prototype,g=d[su]||d["@@iterator"]||i&&d[i],v=g||s(i),b=i?h?s("entries"):v:void 0,_="Array"==e&&d.entries||g;if(_&&(l=Gs(_.call(new t)))!==Object.prototype&&l.next&&(As(l,f,!0),"function"!=typeof l[su]&&Oe(l,su,ou)),h&&g&&g.name!==cu&&(p=!0,v=function(){return g.call(this)}),!uu&&!p&&d[su]||Oe(d,su,v),Rs[e]=v,Rs[f]=ou,i)if(u={values:h?v:s(cu),keys:o?v:s("keys"),entries:b},a)for(c in u)c in d||Ce(d,c,u[c]);else Ee(Ee.P+Ee.F*(uu||p),e,u);return u}var su=Yt("iterator"),uu=!([].keys&&"next"in[].keys()),cu="values",lu=au(Array,"Array",function(t,e){this._t=Ra(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,nu(1)):nu(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])},"values");Rs.Arguments=Rs.Array,ru("keys"),ru("values"),ru("entries");var fu=Yt("iterator"),hu=!1;try{var pu=[7][fu]();pu.return=function(){hu=!0},Array.from(pu,function(){throw 2})}catch(t){}function du(t,e){if(!e&&!hu)return!1;var r=!1;try{var n=[7],i=n[fu]();i.next=function(){return{done:r=!0}},n[fu]=function(){return i},t(n)}catch(t){}return r}var gu=[].copyWithin||function(t,e,r){var n=Is(this),i=Vt(n.length),o=Fa(t,i),a=Fa(e,i),s=2<arguments.length?r:void 0,u=Math.min((void 0===s?i:Fa(s,i))-a,i-o),c=1;for(a<o&&o<a+u&&(c=-1,a+=u-1,o+=u-1);0<u--;)a in n?n[o]=n[a]:delete n[o],o+=c,a+=c;return n};Ct(function(t){if(ye){var b=$t,_=pe,m=Ee,y=Es,e=Ms,d=_e,w=ks,r=ve,S=Oe,n=Ss,i=Zt,k=Vt,x=xs,o=Fa,a=ge,s=be,I=Gt,O=Ht,g=Is,v=Ts,A=Ks,T=Gs,C=rs.f,z=Ys,u=Jt,c=Yt,l=Ls,f=Da,h=Kt,p=lu,L=Rs,E=du,N=Ua,B=Os,M=gu,R=Ie,j=Za,P=R.f,F=j.f,D=b.RangeError,W=b.TypeError,q=b.Uint8Array,U="ArrayBuffer",H="Shared"+U,J="BYTES_PER_ELEMENT",K="prototype",Z=Array[K],V=e.ArrayBuffer,G=e.DataView,$=l(0),Y=l(2),X=l(3),Q=l(4),tt=l(5),et=l(6),rt=f(!0),nt=f(!1),it=p.values,ot=p.keys,at=p.entries,st=Z.lastIndexOf,ut=Z.reduce,ct=Z.reduceRight,lt=Z.join,ft=Z.sort,ht=Z.slice,pt=Z.toString,dt=Z.toLocaleString,gt=c("iterator"),vt=c("toStringTag"),bt=u("typed_constructor"),_t=u("def_constructor"),mt=y.CONSTR,yt=y.TYPED,wt=y.VIEW,St="Wrong length!",kt=l(1,function(t,e){return Tt(h(t,t[_t]),e)}),xt=_(function(){return 1===new q(new Uint16Array([1]).buffer)[0]}),It=!!q&&!!q[K].set&&_(function(){new q(1).set({})}),Ot=function(t,e){var r=i(t);if(r<0||r%e)throw D("Wrong offset!");return r},At=function(t){if(O(t)&&yt in t)return t;throw W(t+" is not a typed array!")},Tt=function(t,e){if(!(O(t)&&bt in t))throw W("It is not a typed array constructor!");return new t(e)},Ct=function(t,e){return zt(h(t,t[_t]),e)},zt=function(t,e){for(var r=0,n=e.length,i=Tt(t,n);r<n;)i[r]=e[r++];return i},Lt=function(t,e,r){P(t,e,{get:function(){return this._d[r]}})},Et=function(t,e,r){var n,i,o,a,s,u,c=g(t),l=arguments.length,f=1<l?e:void 0,h=void 0!==f,p=z(c);if(null!=p&&!v(p)){for(u=p.call(c),o=[],n=0;!(s=u.next()).done;n++)o.push(s.value);c=o}for(h&&2<l&&(f=d(f,r,2)),n=0,i=k(c.length),a=Tt(this,i);n<i;n++)a[n]=h?f(c[n],n):c[n];return a},Nt=function(){for(var t=0,e=arguments.length,r=Tt(this,e);t<e;)r[t]=arguments[t++];return r},Bt=!!q&&_(function(){dt.call(new q(1))}),Mt=function(){return dt.apply(Bt?ht.call(At(this)):At(this),arguments)},Rt={copyWithin:function(t,e,r){return M.call(At(this),t,e,2<arguments.length?r:void 0)},every:function(t,e){return Q(At(this),t,1<arguments.length?e:void 0)},fill:function(t){return B.apply(At(this),arguments)},filter:function(t,e){return Ct(this,Y(At(this),t,1<arguments.length?e:void 0))},find:function(t,e){return tt(At(this),t,1<arguments.length?e:void 0)},findIndex:function(t,e){return et(At(this),t,1<arguments.length?e:void 0)},forEach:function(t,e){$(At(this),t,1<arguments.length?e:void 0)},indexOf:function(t,e){return nt(At(this),t,1<arguments.length?e:void 0)},includes:function(t,e){return rt(At(this),t,1<arguments.length?e:void 0)},join:function(t){return lt.apply(At(this),arguments)},lastIndexOf:function(t){return st.apply(At(this),arguments)},map:function(t,e){return kt(At(this),t,1<arguments.length?e:void 0)},reduce:function(t){return ut.apply(At(this),arguments)},reduceRight:function(t){return ct.apply(At(this),arguments)},reverse:function(){for(var t,e=At(this).length,r=Math.floor(e/2),n=0;n<r;)t=this[n],this[n++]=this[--e],this[e]=t;return this},some:function(t,e){return X(At(this),t,1<arguments.length?e:void 0)},sort:function(t){return ft.call(At(this),t)},subarray:function(t,e){var r=At(this),n=r.length,i=o(t,n);return new(h(r,r[_t]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,k((void 0===e?n:o(e,n))-i))}},jt=function(t,e){return Ct(this,ht.call(At(this),t,e))},Pt=function(t,e){At(this);var r=Ot(e,1),n=this.length,i=g(t),o=k(i.length),a=0;if(n<o+r)throw D(St);for(;a<o;)this[r+a]=i[a++]},Ft={entries:function(){return at.call(At(this))},keys:function(){return ot.call(At(this))},values:function(){return it.call(At(this))}},Dt=function(t,e){return O(t)&&t[yt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Wt=function(t,e){return Dt(t,e=a(e,!0))?r(2,t[e]):F(t,e)},qt=function(t,e,r){return!(Dt(t,e=a(e,!0))&&O(r)&&s(r,"value"))||s(r,"get")||s(r,"set")||r.configurable||s(r,"writable")&&!r.writable||s(r,"enumerable")&&!r.enumerable?P(t,e,r):(t[e]=r.value,t)};mt||(j.f=Wt,R.f=qt),m(m.S+m.F*!mt,"Object",{getOwnPropertyDescriptor:Wt,defineProperty:qt}),_(function(){pt.call({})})&&(pt=dt=function(){return lt.call(this)});var Ut=n({},Rt);n(Ut,Ft),S(Ut,gt,Ft.values),n(Ut,{slice:jt,set:Pt,constructor:function(){},toString:pt,toLocaleString:Mt}),Lt(Ut,"buffer","b"),Lt(Ut,"byteOffset","o"),Lt(Ut,"byteLength","l"),Lt(Ut,"length","e"),P(Ut,vt,{get:function(){return this[yt]}}),t.exports=function(t,f,e,i){function h(t,e){P(t,e,{get:function(){return function(t,e){var r=t._d;return r.v[n](e*f+r.o,xt)}(this,e)},set:function(t){return function(t,e,r){var n=t._d;i&&(r=(r=Math.round(r))<0?0:255<r?255:255&r),n.v[o](e*f+n.o,r,xt)}(this,e,t)},enumerable:!0})}var p=t+((i=!!i)?"Clamped":"")+"Array",n="get"+t,o="set"+t,d=b[p],a=d||{},r=d&&T(d),s=!d||!y.ABV,u={},c=d&&d[K];s?(d=e(function(t,e,r,n){w(t,d,p,"_d");var i,o,a,s,u=0,c=0;if(O(e)){if(!(e instanceof V||(s=I(e))==U||s==H))return yt in e?zt(d,e):Et.call(d,e);i=e,c=Ot(r,f);var l=e.byteLength;if(void 0===n){if(l%f)throw D(St);if((o=l-c)<0)throw D(St)}else if(l<(o=k(n)*f)+c)throw D(St);a=o/f}else a=x(e),i=new V(o=a*f);for(S(t,"_d",{b:i,o:c,l:o,e:a,v:new G(i)});u<a;)h(t,u++)}),c=d[K]=A(Ut),S(c,"constructor",d)):_(function(){d(1)})&&_(function(){new d(-1)})&&E(function(t){new d,new d(null),new d(1.5),new d(t)},!0)||(d=e(function(t,e,r,n){var i;return w(t,d,p),O(e)?e instanceof V||(i=I(e))==U||i==H?void 0!==n?new a(e,Ot(r,f),n):void 0!==r?new a(e,Ot(r,f)):new a(e):yt in e?zt(d,e):Et.call(d,e):new a(x(e))}),$(r!==Function.prototype?C(a).concat(C(r)):C(a),function(t){t in d||S(d,t,a[t])}),(d[K]=c).constructor=d);var l=c[gt],g=!!l&&("values"==l.name||null==l.name),v=Ft.values;S(d,bt,!0),S(c,yt,p),S(c,wt,!0),S(c,_t,d),(i?new d(1)[vt]==p:vt in c)||P(c,vt,{get:function(){return p}}),u[p]=d,m(m.G+m.W+m.F*(d!=a),u),m(m.S,p,{BYTES_PER_ELEMENT:f}),m(m.S+m.F*_(function(){a.of.call(d,1)}),p,{from:Et,of:Nt}),J in c||S(c,J,f),m(m.P,p,Rt),N(p),m(m.P+m.F*It,p,{set:Pt}),m(m.P+m.F*!g,p,Ft),c.toString!=pt&&(c.toString=pt),m(m.P+m.F*_(function(){new d(1).slice()}),p,{slice:jt}),m(m.P+m.F*(_(function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()})||!_(function(){c.toLocaleString.call([1,2])})),p,{toLocaleString:Mt}),L[p]=g?l:v,g||S(c,gt,v)}}else t.exports=function(){}})("Uint8",1,function(n){return function(t,e,r){return n(this,t,e,r)}});var vu=Ct(function(t,e){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var e,r,n=Array.prototype.slice.call(arguments,1);n.length;){var i=n.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var o in i)e=i,r=o,Object.prototype.hasOwnProperty.call(e,r)&&(t[o]=i[o])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){var e,r,n,i,o,a;for(e=n=0,r=t.length;e<r;e++)n+=t[e].length;for(a=new Uint8Array(n),e=i=0,r=t.length;e<r;e++)o=t[e],a.set(o,i),i+=o.length;return a}},i={arraySet:function(t,e,r,n,i){for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(r)}),bu=(vu.assign,vu.shrinkBuf,vu.setTyped,vu.Buf8,vu.Buf16,vu.Buf32,0),_u=1;function mu(t){for(var e=t.length;0<=--e;)t[e]=0}var yu=0,wu=29,Su=256,ku=Su+1+wu,xu=30,Iu=19,Ou=2*ku+1,Au=15,Tu=16,Cu=7,zu=256,Lu=16,Eu=17,Nu=18,Bu=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Mu=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ru=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ju=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Pu=new Array(2*(ku+2));mu(Pu);var Fu=new Array(2*xu);mu(Fu);var Du=new Array(512);mu(Du);var Wu=new Array(256);mu(Wu);var qu=new Array(wu);mu(qu);var Uu,Hu,Ju,Ku=new Array(xu);function Zu(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function Vu(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function Gu(t){return t<256?Du[t]:Du[256+(t>>>7)]}function $u(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function Yu(t,e,r){t.bi_valid>Tu-r?(t.bi_buf|=e<<t.bi_valid&65535,$u(t,t.bi_buf),t.bi_buf=e>>Tu-t.bi_valid,t.bi_valid+=r-Tu):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function Xu(t,e,r){Yu(t,r[2*e],r[2*e+1])}function Qu(t,e){for(var r=0;r|=1&t,t>>>=1,r<<=1,0<--e;);return r>>>1}function tc(t,e,r){var n,i,o=new Array(Au+1),a=0;for(n=1;n<=Au;n++)o[n]=a=a+r[n-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=Qu(o[s]++,s))}}function ec(t){var e;for(e=0;e<ku;e++)t.dyn_ltree[2*e]=0;for(e=0;e<xu;e++)t.dyn_dtree[2*e]=0;for(e=0;e<Iu;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*zu]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function rc(t){8<t.bi_valid?$u(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function nc(t,e,r,n){var i=2*e,o=2*r;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]}function ic(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&nc(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!nc(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function oc(t,e,r){var n,i,o,a,s=0;if(0!==t.last_lit)for(;n=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],i=t.pending_buf[t.l_buf+s],s++,0===n?Xu(t,i,e):(Xu(t,(o=Wu[i])+Su+1,e),0!==(a=Bu[o])&&Yu(t,i-=qu[o],a),Xu(t,o=Gu(--n),r),0!==(a=Mu[o])&&Yu(t,n-=Ku[o],a)),s<t.last_lit;);Xu(t,zu,e)}function ac(t,e){var r,n,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,u=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=Ou,r=0;r<u;r++)0!==o[2*r]?(t.heap[++t.heap_len]=c=r,t.depth[r]=0):o[2*r+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=c,r=t.heap_len>>1;1<=r;r--)ic(t,o,r);for(i=u;r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],ic(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,o[2*i]=o[2*r]+o[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,o[2*r+1]=o[2*n+1]=i,t.heap[1]=i++,ic(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,n,i,o,a,s,u=e.dyn_tree,c=e.max_code,l=e.stat_desc.static_tree,f=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,d=e.stat_desc.max_length,g=0;for(o=0;o<=Au;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<Ou;r++)d<(o=u[2*u[2*(n=t.heap[r])+1]+1]+1)&&(o=d,g++),u[2*n+1]=o,c<n||(t.bl_count[o]++,a=0,p<=n&&(a=h[n-p]),s=u[2*n],t.opt_len+=s*(o+a),f&&(t.static_len+=s*(l[2*n+1]+a)));if(0!==g){do{for(o=d-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[d]--,g-=2}while(0<g);for(o=d;0!==o;o--)for(n=t.bl_count[o];0!==n;)c<(i=t.heap[--r])||(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),n--)}}(t,e),tc(o,c,t.bl_count)}function sc(t,e,r){var n,i,o=-1,a=e[1],s=0,u=7,c=4;for(0===a&&(u=138,c=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=e[2*(n+1)+1],++s<u&&i===a||(s<c?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[2*Lu]++):s<=10?t.bl_tree[2*Eu]++:t.bl_tree[2*Nu]++,o=i,c=(s=0)===a?(u=138,3):i===a?(u=6,3):(u=7,4))}function uc(t,e,r){var n,i,o=-1,a=e[1],s=0,u=7,c=4;for(0===a&&(u=138,c=3),n=0;n<=r;n++)if(i=a,a=e[2*(n+1)+1],!(++s<u&&i===a)){if(s<c)for(;Xu(t,i,t.bl_tree),0!=--s;);else 0!==i?(i!==o&&(Xu(t,i,t.bl_tree),s--),Xu(t,Lu,t.bl_tree),Yu(t,s-3,2)):s<=10?(Xu(t,Eu,t.bl_tree),Yu(t,s-3,3)):(Xu(t,Nu,t.bl_tree),Yu(t,s-11,7));o=i,c=(s=0)===a?(u=138,3):i===a?(u=6,3):(u=7,4)}}mu(Ku);var cc=!1;function lc(t,e,r,n){Yu(t,(yu<<1)+(n?1:0),3),function(t,e,r,n){rc(t),n&&($u(t,r),$u(t,~r)),vu.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}(t,e,r,!0)}var fc={_tr_init:function(t){cc||(function(){var t,e,r,n,i,o=new Array(Au+1);for(n=r=0;n<wu-1;n++)for(qu[n]=r,t=0;t<1<<Bu[n];t++)Wu[r++]=n;for(Wu[r-1]=n,n=i=0;n<16;n++)for(Ku[n]=i,t=0;t<1<<Mu[n];t++)Du[i++]=n;for(i>>=7;n<xu;n++)for(Ku[n]=i<<7,t=0;t<1<<Mu[n]-7;t++)Du[256+i++]=n;for(e=0;e<=Au;e++)o[e]=0;for(t=0;t<=143;)Pu[2*t+1]=8,t++,o[8]++;for(;t<=255;)Pu[2*t+1]=9,t++,o[9]++;for(;t<=279;)Pu[2*t+1]=7,t++,o[7]++;for(;t<=287;)Pu[2*t+1]=8,t++,o[8]++;for(tc(Pu,ku+1,o),t=0;t<xu;t++)Fu[2*t+1]=5,Fu[2*t]=Qu(t,5);Uu=new Zu(Pu,Bu,Su+1,ku,Au),Hu=new Zu(Fu,Mu,0,xu,Au),Ju=new Zu(new Array(0),Ru,0,Iu,Cu)}(),cc=!0),t.l_desc=new Vu(t.dyn_ltree,Uu),t.d_desc=new Vu(t.dyn_dtree,Hu),t.bl_desc=new Vu(t.bl_tree,Ju),t.bi_buf=0,t.bi_valid=0,ec(t)},_tr_stored_block:lc,_tr_flush_block:function(t,e,r,n){var i,o,a=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return bu;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return _u;for(e=32;e<Su;e++)if(0!==t.dyn_ltree[2*e])return _u;return bu}(t)),ac(t,t.l_desc),ac(t,t.d_desc),a=function(t){var e;for(sc(t,t.dyn_ltree,t.l_desc.max_code),sc(t,t.dyn_dtree,t.d_desc.max_code),ac(t,t.bl_desc),e=Iu-1;3<=e&&0===t.bl_tree[2*ju[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==e?lc(t,e,r,n):4===t.strategy||o===i?(Yu(t,2+(n?1:0),3),oc(t,Pu,Fu)):(Yu(t,4+(n?1:0),3),function(t,e,r,n){var i;for(Yu(t,e-257,5),Yu(t,r-1,5),Yu(t,n-4,4),i=0;i<n;i++)Yu(t,t.bl_tree[2*ju[i]+1],3);uc(t,t.dyn_ltree,e-1),uc(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),oc(t,t.dyn_ltree,t.dyn_dtree)),ec(t),n&&rc(t)},_tr_tally:function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(Wu[r]+Su+1)]++,t.dyn_dtree[2*Gu(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){Yu(t,2,3),Xu(t,zu,Pu),function(t){16===t.bi_valid?($u(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}};var hc=function(t,e,r,n){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==r;){for(r-=a=2e3<r?2e3:r;o=o+(i=i+e[n++]|0)|0,--a;);i%=65521,o%=65521}return i|o<<16|0};var pc=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();var dc,gc=function(t,e,r,n){var i=pc,o=n+r;t^=-1;for(var a=n;a<o;a++)t=t>>>8^i[255&(t^e[a])];return-1^t},vc={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},bc=0,_c=4,mc=0,yc=-2,wc=-1,Sc=4,kc=2,xc=8,Ic=9,Oc=286,Ac=30,Tc=19,Cc=2*Oc+1,zc=15,Lc=3,Ec=258,Nc=Ec+Lc+1,Bc=42,Mc=113,Rc=1,jc=2,Pc=3,Fc=4;function Dc(t,e){return t.msg=vc[e],e}function Wc(t){return(t<<1)-(4<t?9:0)}function qc(t){for(var e=t.length;0<=--e;)t[e]=0}function Uc(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(vu.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function Hc(t,e){fc._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Uc(t.strm)}function Jc(t,e){t.pending_buf[t.pending++]=e}function Kc(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function Zc(t,e){var r,n,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,u=t.strstart>t.w_size-Nc?t.strstart-(t.w_size-Nc):0,c=t.window,l=t.w_mask,f=t.prev,h=t.strstart+Ec,p=c[o+a-1],d=c[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(c[(r=e)+a]===d&&c[r+a-1]===p&&c[r]===c[o]&&c[++r]===c[o+1]){o+=2,r++;do{}while(c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&o<h);if(n=Ec-(h-o),o=h-Ec,a<n){if(t.match_start=e,s<=(a=n))break;p=c[o+a-1],d=c[o+a]}}}while((e=f[e&l])>u&&0!=--i);return a<=t.lookahead?a:t.lookahead}function Vc(t){var e,r,n,i,o,a,s,u,c,l,f=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-Nc)){for(vu.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=r=t.hash_size;n=t.head[--e],t.head[e]=f<=n?n-f:0,--r;);for(e=r=f;n=t.prev[--e],t.prev[e]=f<=n?n-f:0,--r;);i+=f}if(0===t.strm.avail_in)break;if(a=t.strm,s=t.window,u=t.strstart+t.lookahead,c=i,l=void 0,l=a.avail_in,c<l&&(l=c),r=0===l?0:(a.avail_in-=l,vu.arraySet(s,a.input,a.next_in,l,u),1===a.state.wrap?a.adler=hc(a.adler,s,l,u):2===a.state.wrap&&(a.adler=gc(a.adler,s,l,u)),a.next_in+=l,a.total_in+=l,l),t.lookahead+=r,t.lookahead+t.insert>=Lc)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+Lc-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<Lc)););}while(t.lookahead<Nc&&0!==t.strm.avail_in)}function Gc(t,e){for(var r,n;;){if(t.lookahead<Nc){if(Vc(t),t.lookahead<Nc&&e===bc)return Rc;if(0===t.lookahead)break}if(r=0,t.lookahead>=Lc&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Lc-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-Nc&&(t.match_length=Zc(t,r)),t.match_length>=Lc)if(n=fc._tr_tally(t,t.strstart-t.match_start,t.match_length-Lc),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=Lc){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Lc-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=fc._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Hc(t,!1),0===t.strm.avail_out))return Rc}return t.insert=t.strstart<Lc-1?t.strstart:Lc-1,e===_c?(Hc(t,!0),0===t.strm.avail_out?Pc:Fc):t.last_lit&&(Hc(t,!1),0===t.strm.avail_out)?Rc:jc}function $c(t,e){for(var r,n,i;;){if(t.lookahead<Nc){if(Vc(t),t.lookahead<Nc&&e===bc)return Rc;if(0===t.lookahead)break}if(r=0,t.lookahead>=Lc&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Lc-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=Lc-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-Nc&&(t.match_length=Zc(t,r),t.match_length<=5&&(1===t.strategy||t.match_length===Lc&&4096<t.strstart-t.match_start)&&(t.match_length=Lc-1)),t.prev_length>=Lc&&t.match_length<=t.prev_length){for(i=t.strstart+t.lookahead-Lc,n=fc._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-Lc),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Lc-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=Lc-1,t.strstart++,n&&(Hc(t,!1),0===t.strm.avail_out))return Rc}else if(t.match_available){if((n=fc._tr_tally(t,0,t.window[t.strstart-1]))&&Hc(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return Rc}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=fc._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<Lc-1?t.strstart:Lc-1,e===_c?(Hc(t,!0),0===t.strm.avail_out?Pc:Fc):t.last_lit&&(Hc(t,!1),0===t.strm.avail_out)?Rc:jc}function Yc(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function Xc(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=xc,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new vu.Buf16(2*Cc),this.dyn_dtree=new vu.Buf16(2*(2*Ac+1)),this.bl_tree=new vu.Buf16(2*(2*Tc+1)),qc(this.dyn_ltree),qc(this.dyn_dtree),qc(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new vu.Buf16(zc+1),this.heap=new vu.Buf16(2*Oc+1),qc(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new vu.Buf16(2*Oc+1),qc(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Qc(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=kc,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?Bc:Mc,t.adler=2===e.wrap?0:1,e.last_flush=bc,fc._tr_init(e),mc):Dc(t,yc)}function tl(t){var e=Qc(t);return e===mc&&function(t){t.window_size=2*t.w_size,qc(t.head),t.max_lazy_match=dc[t.level].max_lazy,t.good_match=dc[t.level].good_length,t.nice_match=dc[t.level].nice_length,t.max_chain_length=dc[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=Lc-1,t.match_available=0,t.ins_h=0}(t.state),e}function el(t,e,r,n,i,o){if(!t)return yc;var a=1;if(e===wc&&(e=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),i<1||Ic<i||r!==xc||n<8||15<n||e<0||9<e||o<0||Sc<o)return Dc(t,yc);8===n&&(n=9);var s=new Xc;return(t.state=s).strm=t,s.wrap=a,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+Lc-1)/Lc),s.window=new vu.Buf8(2*s.w_size),s.head=new vu.Buf16(s.hash_size),s.prev=new vu.Buf16(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new vu.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=e,s.strategy=o,s.method=r,tl(t)}dc=[new Yc(0,0,0,0,function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Vc(t),0===t.lookahead&&e===bc)return Rc;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,Hc(t,!1),0===t.strm.avail_out))return Rc;if(t.strstart-t.block_start>=t.w_size-Nc&&(Hc(t,!1),0===t.strm.avail_out))return Rc}return t.insert=0,e===_c?(Hc(t,!0),0===t.strm.avail_out?Pc:Fc):(t.strstart>t.block_start&&(Hc(t,!1),t.strm.avail_out),Rc)}),new Yc(4,4,8,4,Gc),new Yc(4,5,16,8,Gc),new Yc(4,6,32,32,Gc),new Yc(4,4,16,16,$c),new Yc(8,16,32,32,$c),new Yc(8,16,128,128,$c),new Yc(8,32,128,256,$c),new Yc(32,128,258,1024,$c),new Yc(32,258,258,4096,$c)];var rl={deflateInit:function(t,e){return el(t,e,xc,15,8,0)},deflateInit2:el,deflateReset:tl,deflateResetKeep:Qc,deflateSetHeader:function(t,e){return t&&t.state?2!==t.state.wrap?yc:(t.state.gzhead=e,mc):yc},deflate:function(t,e){var r,n,i,o;if(!t||!t.state||5<e||e<0)return t?Dc(t,yc):yc;if(n=t.state,!t.output||!t.input&&0!==t.avail_in||666===n.status&&e!==_c)return Dc(t,0===t.avail_out?-5:yc);if(n.strm=t,r=n.last_flush,n.last_flush=e,n.status===Bc)if(2===n.wrap)t.adler=0,Jc(n,31),Jc(n,139),Jc(n,8),n.gzhead?(Jc(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Jc(n,255&n.gzhead.time),Jc(n,n.gzhead.time>>8&255),Jc(n,n.gzhead.time>>16&255),Jc(n,n.gzhead.time>>24&255),Jc(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),Jc(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Jc(n,255&n.gzhead.extra.length),Jc(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=gc(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(Jc(n,0),Jc(n,0),Jc(n,0),Jc(n,0),Jc(n,0),Jc(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),Jc(n,3),n.status=Mc);else{var a=xc+(n.w_bits-8<<4)<<8;a|=(2<=n.strategy||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(a|=32),a+=31-a%31,n.status=Mc,Kc(n,a),0!==n.strstart&&(Kc(n,t.adler>>>16),Kc(n,65535&t.adler)),t.adler=1}if(69===n.status)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>i&&(t.adler=gc(t.adler,n.pending_buf,n.pending-i,i)),Uc(t),i=n.pending,n.pending!==n.pending_buf_size));)Jc(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(t.adler=gc(t.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(t.adler=gc(t.adler,n.pending_buf,n.pending-i,i)),Uc(t),i=n.pending,n.pending===n.pending_buf_size)){o=1;break}o=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Jc(n,o)}while(0!==o);n.gzhead.hcrc&&n.pending>i&&(t.adler=gc(t.adler,n.pending_buf,n.pending-i,i)),0===o&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(t.adler=gc(t.adler,n.pending_buf,n.pending-i,i)),Uc(t),i=n.pending,n.pending===n.pending_buf_size)){o=1;break}o=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Jc(n,o)}while(0!==o);n.gzhead.hcrc&&n.pending>i&&(t.adler=gc(t.adler,n.pending_buf,n.pending-i,i)),0===o&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&Uc(t),n.pending+2<=n.pending_buf_size&&(Jc(n,255&t.adler),Jc(n,t.adler>>8&255),t.adler=0,n.status=Mc)):n.status=Mc),0!==n.pending){if(Uc(t),0===t.avail_out)return n.last_flush=-1,mc}else if(0===t.avail_in&&Wc(e)<=Wc(r)&&e!==_c)return Dc(t,-5);if(666===n.status&&0!==t.avail_in)return Dc(t,-5);if(0!==t.avail_in||0!==n.lookahead||e!==bc&&666!==n.status){var s=2===n.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(Vc(t),0===t.lookahead)){if(e===bc)return Rc;break}if(t.match_length=0,r=fc._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(Hc(t,!1),0===t.strm.avail_out))return Rc}return t.insert=0,e===_c?(Hc(t,!0),0===t.strm.avail_out?Pc:Fc):t.last_lit&&(Hc(t,!1),0===t.strm.avail_out)?Rc:jc}(n,e):3===n.strategy?function(t,e){for(var r,n,i,o,a=t.window;;){if(t.lookahead<=Ec){if(Vc(t),t.lookahead<=Ec&&e===bc)return Rc;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=Lc&&0<t.strstart&&(n=a[i=t.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){o=t.strstart+Ec;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o);t.match_length=Ec-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=Lc?(r=fc._tr_tally(t,1,t.match_length-Lc),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=fc._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(Hc(t,!1),0===t.strm.avail_out))return Rc}return t.insert=0,e===_c?(Hc(t,!0),0===t.strm.avail_out?Pc:Fc):t.last_lit&&(Hc(t,!1),0===t.strm.avail_out)?Rc:jc}(n,e):dc[n.level].func(n,e);if(s!==Pc&&s!==Fc||(n.status=666),s===Rc||s===Pc)return 0===t.avail_out&&(n.last_flush=-1),mc;if(s===jc&&(1===e?fc._tr_align(n):5!==e&&(fc._tr_stored_block(n,0,0,!1),3===e&&(qc(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),Uc(t),0===t.avail_out))return n.last_flush=-1,mc}return e!==_c?mc:n.wrap<=0?1:(2===n.wrap?(Jc(n,255&t.adler),Jc(n,t.adler>>8&255),Jc(n,t.adler>>16&255),Jc(n,t.adler>>24&255),Jc(n,255&t.total_in),Jc(n,t.total_in>>8&255),Jc(n,t.total_in>>16&255),Jc(n,t.total_in>>24&255)):(Kc(n,t.adler>>>16),Kc(n,65535&t.adler)),Uc(t),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?mc:1)},deflateEnd:function(t){var e;return t&&t.state?(e=t.state.status)!==Bc&&69!==e&&73!==e&&91!==e&&103!==e&&e!==Mc&&666!==e?Dc(t,yc):(t.state=null,e===Mc?Dc(t,-3):mc):yc},deflateSetDictionary:function(t,e){var r,n,i,o,a,s,u,c,l=e.length;if(!t||!t.state)return yc;if(2===(o=(r=t.state).wrap)||1===o&&r.status!==Bc||r.lookahead)return yc;for(1===o&&(t.adler=hc(t.adler,e,l,0)),r.wrap=0,l>=r.w_size&&(0===o&&(qc(r.head),r.strstart=0,r.block_start=0,r.insert=0),c=new vu.Buf8(r.w_size),vu.arraySet(c,e,l-r.w_size,r.w_size,0),e=c,l=r.w_size),a=t.avail_in,s=t.next_in,u=t.input,t.avail_in=l,t.next_in=0,t.input=e,Vc(r);r.lookahead>=Lc;){for(n=r.strstart,i=r.lookahead-(Lc-1);r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+Lc-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--i;);r.strstart=n,r.lookahead=Lc-1,Vc(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=Lc-1,r.match_available=0,t.next_in=s,t.input=u,t.avail_in=a,r.wrap=o,mc},deflateInfo:"pako deflate (from Nodeca project)"},nl=!0,il=!0;try{String.fromCharCode.apply(null,[0])}catch(t){nl=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){il=!1}for(var ol=new vu.Buf8(256),al=0;al<256;al++)ol[al]=252<=al?6:248<=al?5:240<=al?4:224<=al?3:192<=al?2:1;ol[254]=ol[254]=1;function sl(t,e){if(e<65534&&(t.subarray&&il||!t.subarray&&nl))return String.fromCharCode.apply(null,vu.shrinkBuf(t,e));for(var r="",n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r}var ul={string2buf:function(t){var e,r,n,i,o,a=t.length,s=0;for(i=0;i<a;i++)55296==(64512&(r=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=t.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),s+=r<128?1:r<2048?2:r<65536?3:4;for(e=new vu.Buf8(s),i=o=0;o<s;i++)55296==(64512&(r=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=t.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?e[o++]=r:(r<2048?e[o++]=192|r>>>6:(r<65536?e[o++]=224|r>>>12:(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63),e[o++]=128|r>>>6&63),e[o++]=128|63&r);return e},buf2binstring:function(t){return sl(t,t.length)},binstring2buf:function(t){for(var e=new vu.Buf8(t.length),r=0,n=e.length;r<n;r++)e[r]=t.charCodeAt(r);return e},buf2string:function(t,e){var r,n,i,o,a=e||t.length,s=new Array(2*a);for(r=n=0;r<a;)if((i=t[r++])<128)s[n++]=i;else if(4<(o=ol[i]))s[n++]=65533,r+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&r<a;)i=i<<6|63&t[r++],o--;1<o?s[n++]=65533:i<65536?s[n++]=i:(i-=65536,s[n++]=55296|i>>10&1023,s[n++]=56320|1023&i)}return sl(s,n)},utf8border:function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0?e:0===r?e:r+ol[t[r]]>e?r:e}};var cl=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},ll=Object.prototype.toString,fl=0,hl=-1,pl=0,dl=8;function gl(t){if(!(this instanceof gl))return new gl(t);this.options=vu.assign({level:hl,method:dl,chunkSize:16384,windowBits:15,memLevel:8,strategy:pl,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cl,this.strm.avail_out=0;var r=rl.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==fl)throw new Error(vc[r]);if(e.header&&rl.deflateSetHeader(this.strm,e.header),e.dictionary){var n;if(n="string"==typeof e.dictionary?ul.string2buf(e.dictionary):"[object ArrayBuffer]"===ll.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(r=rl.deflateSetDictionary(this.strm,n))!==fl)throw new Error(vc[r]);this._dict_set=!0}}function vl(t,e){var r=new gl(e);if(r.push(t,!0),r.err)throw r.msg||vc[r.err];return r.result}gl.prototype.push=function(t,e){var r,n,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:!0===e?4:0,"string"==typeof t?i.input=ul.string2buf(t):"[object ArrayBuffer]"===ll.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new vu.Buf8(o),i.next_out=0,i.avail_out=o),1!==(r=rl.deflate(i,n))&&r!==fl)return this.onEnd(r),!(this.ended=!0);0!==i.avail_out&&(0!==i.avail_in||4!==n&&2!==n)||("string"===this.options.to?this.onData(ul.buf2binstring(vu.shrinkBuf(i.output,i.next_out))):this.onData(vu.shrinkBuf(i.output,i.next_out)))}while((0<i.avail_in||0===i.avail_out)&&1!==r);return 4===n?(r=rl.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===fl):2!==n||(this.onEnd(fl),!(i.avail_out=0))},gl.prototype.onData=function(t){this.chunks.push(t)},gl.prototype.onEnd=function(t){t===fl&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=vu.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function bl(t,e){var r,n,i,o,a,s,u,c,l,f,h,p,d,g,v,b,_,m,y,w,S,k,x,I,O;r=t.state,n=t.next_in,I=t.input,i=n+(t.avail_in-5),o=t.next_out,O=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),u=r.dmax,c=r.wsize,l=r.whave,f=r.wnext,h=r.window,p=r.hold,d=r.bits,g=r.lencode,v=r.distcode,b=(1<<r.lenbits)-1,_=(1<<r.distbits)-1;t:do{d<15&&(p+=I[n++]<<d,d+=8,p+=I[n++]<<d,d+=8),m=g[p&b];e:for(;;){if(p>>>=y=m>>>24,d-=y,0===(y=m>>>16&255))O[o++]=65535&m;else{if(!(16&y)){if(0==(64&y)){m=g[(65535&m)+(p&(1<<y)-1)];continue e}if(32&y){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}w=65535&m,(y&=15)&&(d<y&&(p+=I[n++]<<d,d+=8),w+=p&(1<<y)-1,p>>>=y,d-=y),d<15&&(p+=I[n++]<<d,d+=8,p+=I[n++]<<d,d+=8),m=v[p&_];r:for(;;){if(p>>>=y=m>>>24,d-=y,!(16&(y=m>>>16&255))){if(0==(64&y)){m=v[(65535&m)+(p&(1<<y)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(S=65535&m,d<(y&=15)&&(p+=I[n++]<<d,(d+=8)<y&&(p+=I[n++]<<d,d+=8)),u<(S+=p&(1<<y)-1)){t.msg="invalid distance too far back",r.mode=30;break t}if(p>>>=y,d-=y,(y=o-a)<S){if(l<(y=S-y)&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(x=h,(k=0)===f){if(k+=c-y,y<w){for(w-=y;O[o++]=h[k++],--y;);k=o-S,x=O}}else if(f<y){if(k+=c+f-y,(y-=f)<w){for(w-=y;O[o++]=h[k++],--y;);if(k=0,f<w){for(w-=y=f;O[o++]=h[k++],--y;);k=o-S,x=O}}}else if(k+=f-y,y<w){for(w-=y;O[o++]=h[k++],--y;);k=o-S,x=O}for(;2<w;)O[o++]=x[k++],O[o++]=x[k++],O[o++]=x[k++],w-=3;w&&(O[o++]=x[k++],1<w&&(O[o++]=x[k++]))}else{for(k=o-S;O[o++]=O[k++],O[o++]=O[k++],O[o++]=O[k++],2<(w-=3););w&&(O[o++]=O[k++],1<w&&(O[o++]=O[k++]))}break}}break}}while(n<i&&o<s);n-=w=d>>3,p&=(1<<(d-=w<<3))-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=o<s?s-o+257:257-(o-s),r.hold=p,r.bits=d}var _l={Deflate:gl,deflate:vl,deflateRaw:function(t,e){return(e=e||{}).raw=!0,vl(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,vl(t,e)}},ml=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],yl=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],wl=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Sl=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],kl=function(t,e,r,n,i,o,a,s){var u,c,l,f,h,p,d,g,v,b=s.bits,_=0,m=0,y=0,w=0,S=0,k=0,x=0,I=0,O=0,A=0,T=null,C=0,z=new vu.Buf16(16),L=new vu.Buf16(16),E=null,N=0;for(_=0;_<=15;_++)z[_]=0;for(m=0;m<n;m++)z[e[r+m]]++;for(S=b,w=15;1<=w&&0===z[w];w--);if(w<S&&(S=w),0===w)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(y=1;y<w&&0===z[y];y++);for(S<y&&(S=y),_=I=1;_<=15;_++)if(I<<=1,(I-=z[_])<0)return-1;if(0<I&&(0===t||1!==w))return-1;for(L[1]=0,_=1;_<15;_++)L[_+1]=L[_]+z[_];for(m=0;m<n;m++)0!==e[r+m]&&(a[L[e[r+m]]++]=m);if(p=0===t?(T=E=a,19):1===t?(T=ml,C-=257,E=yl,N-=257,256):(T=wl,E=Sl,-1),_=y,h=o,x=m=A=0,l=-1,f=(O=1<<(k=S))-1,1===t&&852<O||2===t&&592<O)return 1;for(;;){for(d=_-x,v=a[m]<p?(g=0,a[m]):a[m]>p?(g=E[N+a[m]],T[C+a[m]]):(g=96,0),u=1<<_-x,y=c=1<<k;i[h+(A>>x)+(c-=u)]=d<<24|g<<16|v|0,0!==c;);for(u=1<<_-1;A&u;)u>>=1;if(0!==u?(A&=u-1,A+=u):A=0,m++,0==--z[_]){if(_===w)break;_=e[r+a[m]]}if(S<_&&(A&f)!==l){for(0===x&&(x=S),h+=y,I=1<<(k=_-x);k+x<w&&!((I-=z[k+x])<=0);)k++,I<<=1;if(O+=1<<k,1===t&&852<O||2===t&&592<O)return 1;i[l=A&f]=S<<24|k<<16|h-o|0}}return 0!==A&&(i[h+A]=_-x<<24|64<<16|0),s.bits=S,0},xl=1,Il=2,Ol=0,Al=-2,Tl=1,Cl=852,zl=592;function Ll(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function El(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new vu.Buf16(320),this.work=new vu.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Nl(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=Tl,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new vu.Buf32(Cl),e.distcode=e.distdyn=new vu.Buf32(zl),e.sane=1,e.back=-1,Ol):Al}function Bl(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,Nl(t)):Al}function Ml(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?Al:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,Bl(t))):Al}function Rl(t,e){var r,n;return t?(n=new El,(t.state=n).window=null,(r=Ml(t,e))!==Ol&&(t.state=null),r):Al}var jl,Pl,Fl=!0;function Dl(t){if(Fl){var e;for(jl=new vu.Buf32(512),Pl=new vu.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(kl(xl,t.lens,0,288,jl,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;kl(Il,t.lens,0,32,Pl,0,t.work,{bits:5}),Fl=!1}t.lencode=jl,t.lenbits=9,t.distcode=Pl,t.distbits=5}function Wl(t,e,r,n){var i,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new vu.Buf8(o.wsize)),n>=o.wsize?(vu.arraySet(o.window,e,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(n<(i=o.wsize-o.wnext)&&(i=n),vu.arraySet(o.window,e,r-n,i,o.wnext),(n-=i)?(vu.arraySet(o.window,e,r-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}var ql={inflateReset:Bl,inflateReset2:Ml,inflateResetKeep:Nl,inflateInit:function(t){return Rl(t,15)},inflateInit2:Rl,inflate:function(t,e){var r,n,i,o,a,s,u,c,l,f,h,p,d,g,v,b,_,m,y,w,S,k,x,I,O=0,A=new vu.Buf8(4),T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return Al;12===(r=t.state).mode&&(r.mode=13),a=t.next_out,i=t.output,u=t.avail_out,o=t.next_in,n=t.input,s=t.avail_in,c=r.hold,l=r.bits,f=s,h=u,k=Ol;t:for(;;)switch(r.mode){case Tl:if(0===r.wrap){r.mode=13;break}for(;l<16;){if(0===s)break t;s--,c+=n[o++]<<l,l+=8}if(2&r.wrap&&35615===c){A[r.check=0]=255&c,A[1]=c>>>8&255,r.check=gc(r.check,A,2,0),l=c=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){t.msg="incorrect header check",r.mode=30;break}if(8!=(15&c)){t.msg="unknown compression method",r.mode=30;break}if(l-=4,S=8+(15&(c>>>=4)),0===r.wbits)r.wbits=S;else if(S>r.wbits){t.msg="invalid window size",r.mode=30;break}r.dmax=1<<S,t.adler=r.check=1,r.mode=512&c?10:12,l=c=0;break;case 2:for(;l<16;){if(0===s)break t;s--,c+=n[o++]<<l,l+=8}if(r.flags=c,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=c>>8&1),512&r.flags&&(A[0]=255&c,A[1]=c>>>8&255,r.check=gc(r.check,A,2,0)),l=c=0,r.mode=3;case 3:for(;l<32;){if(0===s)break t;s--,c+=n[o++]<<l,l+=8}r.head&&(r.head.time=c),512&r.flags&&(A[0]=255&c,A[1]=c>>>8&255,A[2]=c>>>16&255,A[3]=c>>>24&255,r.check=gc(r.check,A,4,0)),l=c=0,r.mode=4;case 4:for(;l<16;){if(0===s)break t;s--,c+=n[o++]<<l,l+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&r.flags&&(A[0]=255&c,A[1]=c>>>8&255,r.check=gc(r.check,A,2,0)),l=c=0,r.mode=5;case 5:if(1024&r.flags){for(;l<16;){if(0===s)break t;s--,c+=n[o++]<<l,l+=8}r.length=c,r.head&&(r.head.extra_len=c),512&r.flags&&(A[0]=255&c,A[1]=c>>>8&255,r.check=gc(r.check,A,2,0)),l=c=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(s<(p=r.length)&&(p=s),p&&(r.head&&(S=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),vu.arraySet(r.head.extra,n,o,p,S)),512&r.flags&&(r.check=gc(r.check,n,p,o)),s-=p,o+=p,r.length-=p),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===s)break t;for(p=0;S=n[o+p++],r.head&&S&&r.length<65536&&(r.head.name+=String.fromCharCode(S)),S&&p<s;);if(512&r.flags&&(r.check=gc(r.check,n,p,o)),s-=p,o+=p,S)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===s)break t;for(p=0;S=n[o+p++],r.head&&S&&r.length<65536&&(r.head.comment+=String.fromCharCode(S)),S&&p<s;);if(512&r.flags&&(r.check=gc(r.check,n,p,o)),s-=p,o+=p,S)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;l<16;){if(0===s)break t;s--,c+=n[o++]<<l,l+=8}if(c!==(65535&r.check)){t.msg="header crc mismatch",r.mode=30;break}l=c=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;l<32;){if(0===s)break t;s--,c+=n[o++]<<l,l+=8}t.adler=r.check=Ll(c),l=c=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=a,t.avail_out=u,t.next_in=o,t.avail_in=s,r.hold=c,r.bits=l,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){c>>>=7&l,l-=7&l,r.mode=27;break}for(;l<3;){if(0===s)break t;s--,c+=n[o++]<<l,l+=8}switch(r.last=1&c,l-=1,3&(c>>>=1)){case 0:r.mode=14;break;case 1:if(Dl(r),r.mode=20,6!==e)break;c>>>=2,l-=2;break t;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=30}c>>>=2,l-=2;break;case 14:for(c>>>=7&l,l-=7&l;l<32;){if(0===s)break t;s--,c+=n[o++]<<l,l+=8}if((65535&c)!=(c>>>16^65535)){t.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&c,l=c=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(p=r.length){if(s<p&&(p=s),u<p&&(p=u),0===p)break t;vu.arraySet(i,n,o,p,a),s-=p,o+=p,u-=p,a+=p,r.length-=p;break}r.mode=12;break;case 17:for(;l<14;){if(0===s)break t;s--,c+=n[o++]<<l,l+=8}if(r.nlen=257+(31&c),c>>>=5,l-=5,r.ndist=1+(31&c),c>>>=5,l-=5,r.ncode=4+(15&c),c>>>=4,l-=4,286<r.nlen||30<r.ndist){t.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;l<3;){if(0===s)break t;s--,c+=n[o++]<<l,l+=8}r.lens[T[r.have++]]=7&c,c>>>=3,l-=3}for(;r.have<19;)r.lens[T[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,x={bits:r.lenbits},k=kl(0,r.lens,0,19,r.lencode,0,r.work,x),r.lenbits=x.bits,k){t.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;b=(O=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,_=65535&O,!((v=O>>>24)<=l);){if(0===s)break t;s--,c+=n[o++]<<l,l+=8}if(_<16)c>>>=v,l-=v,r.lens[r.have++]=_;else{if(16===_){for(I=v+2;l<I;){if(0===s)break t;s--,c+=n[o++]<<l,l+=8}if(c>>>=v,l-=v,0===r.have){t.msg="invalid bit length repeat",r.mode=30;break}S=r.lens[r.have-1],p=3+(3&c),c>>>=2,l-=2}else if(17===_){for(I=v+3;l<I;){if(0===s)break t;s--,c+=n[o++]<<l,l+=8}l-=v,S=0,p=3+(7&(c>>>=v)),c>>>=3,l-=3}else{for(I=v+7;l<I;){if(0===s)break t;s--,c+=n[o++]<<l,l+=8}l-=v,S=0,p=11+(127&(c>>>=v)),c>>>=7,l-=7}if(r.have+p>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=30;break}for(;p--;)r.lens[r.have++]=S}}if(30===r.mode)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,x={bits:r.lenbits},k=kl(xl,r.lens,0,r.nlen,r.lencode,0,r.work,x),r.lenbits=x.bits,k){t.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,x={bits:r.distbits},k=kl(Il,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,x),r.distbits=x.bits,k){t.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(6<=s&&258<=u){t.next_out=a,t.avail_out=u,t.next_in=o,t.avail_in=s,r.hold=c,r.bits=l,bl(t,h),a=t.next_out,i=t.output,u=t.avail_out,o=t.next_in,n=t.input,s=t.avail_in,c=r.hold,l=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;b=(O=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,_=65535&O,!((v=O>>>24)<=l);){if(0===s)break t;s--,c+=n[o++]<<l,l+=8}if(b&&0==(240&b)){for(m=v,y=b,w=_;b=(O=r.lencode[w+((c&(1<<m+y)-1)>>m)])>>>16&255,_=65535&O,!(m+(v=O>>>24)<=l);){if(0===s)break t;s--,c+=n[o++]<<l,l+=8}c>>>=m,l-=m,r.back+=m}if(c>>>=v,l-=v,r.back+=v,r.length=_,0===b){r.mode=26;break}if(32&b){r.back=-1,r.mode=12;break}if(64&b){t.msg="invalid literal/length code",r.mode=30;break}r.extra=15&b,r.mode=22;case 22:if(r.extra){for(I=r.extra;l<I;){if(0===s)break t;s--,c+=n[o++]<<l,l+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;b=(O=r.distcode[c&(1<<r.distbits)-1])>>>16&255,_=65535&O,!((v=O>>>24)<=l);){if(0===s)break t;s--,c+=n[o++]<<l,l+=8}if(0==(240&b)){for(m=v,y=b,w=_;b=(O=r.distcode[w+((c&(1<<m+y)-1)>>m)])>>>16&255,_=65535&O,!(m+(v=O>>>24)<=l);){if(0===s)break t;s--,c+=n[o++]<<l,l+=8}c>>>=m,l-=m,r.back+=m}if(c>>>=v,l-=v,r.back+=v,64&b){t.msg="invalid distance code",r.mode=30;break}r.offset=_,r.extra=15&b,r.mode=24;case 24:if(r.extra){for(I=r.extra;l<I;){if(0===s)break t;s--,c+=n[o++]<<l,l+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===u)break t;if(p=h-u,r.offset>p){if((p=r.offset-p)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=30;break}d=p>r.wnext?(p-=r.wnext,r.wsize-p):r.wnext-p,p>r.length&&(p=r.length),g=r.window}else g=i,d=a-r.offset,p=r.length;for(u<p&&(p=u),u-=p,r.length-=p;i[a++]=g[d++],--p;);0===r.length&&(r.mode=21);break;case 26:if(0===u)break t;i[a++]=r.length,u--,r.mode=21;break;case 27:if(r.wrap){for(;l<32;){if(0===s)break t;s--,c|=n[o++]<<l,l+=8}if(h-=u,t.total_out+=h,r.total+=h,h&&(t.adler=r.check=r.flags?gc(r.check,i,h,a-h):hc(r.check,i,h,a-h)),h=u,(r.flags?c:Ll(c))!==r.check){t.msg="incorrect data check",r.mode=30;break}l=c=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;l<32;){if(0===s)break t;s--,c+=n[o++]<<l,l+=8}if(c!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=30;break}l=c=0}r.mode=29;case 29:k=1;break t;case 30:k=-3;break t;case 31:return-4;case 32:default:return Al}return t.next_out=a,t.avail_out=u,t.next_in=o,t.avail_in=s,r.hold=c,r.bits=l,(r.wsize||h!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&Wl(t,t.output,t.next_out,h-t.avail_out),f-=t.avail_in,h-=t.avail_out,t.total_in+=f,t.total_out+=h,r.total+=h,r.wrap&&h&&(t.adler=r.check=r.flags?gc(r.check,i,h,t.next_out-h):hc(r.check,i,h,t.next_out-h)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==f&&0===h||4===e)&&k===Ol&&(k=-5),k},inflateEnd:function(t){if(!t||!t.state)return Al;var e=t.state;return e.window&&(e.window=null),t.state=null,Ol},inflateGetHeader:function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?Al:((r.head=e).done=!1,Ol):Al},inflateSetDictionary:function(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?Al:11===r.mode&&hc(1,e,n,0)!==r.check?-3:Wl(t,e,n,n)?(r.mode=31,-4):(r.havedict=1,Ol):Al},inflateInfo:"pako inflate (from Nodeca project)"},Ul={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};var Hl=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Jl=Object.prototype.toString;function Kl(t){if(!(this instanceof Kl))return new Kl(t);this.options=vu.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cl,this.strm.avail_out=0;var r=ql.inflateInit2(this.strm,e.windowBits);if(r!==Ul.Z_OK)throw new Error(vc[r]);if(this.header=new Hl,ql.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=ul.string2buf(e.dictionary):"[object ArrayBuffer]"===Jl.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=ql.inflateSetDictionary(this.strm,e.dictionary))!==Ul.Z_OK))throw new Error(vc[r])}function Zl(t,e){var r=new Kl(e);if(r.push(t,!0),r.err)throw r.msg||vc[r.err];return r.result}Kl.prototype.push=function(t,e){var r,n,i,o,a,s=this.strm,u=this.options.chunkSize,c=this.options.dictionary,l=!1;if(this.ended)return!1;n=e===~~e?e:!0===e?Ul.Z_FINISH:Ul.Z_NO_FLUSH,"string"==typeof t?s.input=ul.binstring2buf(t):"[object ArrayBuffer]"===Jl.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new vu.Buf8(u),s.next_out=0,s.avail_out=u),(r=ql.inflate(s,Ul.Z_NO_FLUSH))===Ul.Z_NEED_DICT&&c&&(r=ql.inflateSetDictionary(this.strm,c)),r===Ul.Z_BUF_ERROR&&!0===l&&(r=Ul.Z_OK,l=!1),r!==Ul.Z_STREAM_END&&r!==Ul.Z_OK)return this.onEnd(r),!(this.ended=!0);s.next_out&&(0!==s.avail_out&&r!==Ul.Z_STREAM_END&&(0!==s.avail_in||n!==Ul.Z_FINISH&&n!==Ul.Z_SYNC_FLUSH)||("string"===this.options.to?(i=ul.utf8border(s.output,s.next_out),o=s.next_out-i,a=ul.buf2string(s.output,i),s.next_out=o,s.avail_out=u-o,o&&vu.arraySet(s.output,s.output,i,o,0),this.onData(a)):this.onData(vu.shrinkBuf(s.output,s.next_out)))),0===s.avail_in&&0===s.avail_out&&(l=!0)}while((0<s.avail_in||0===s.avail_out)&&r!==Ul.Z_STREAM_END);return r===Ul.Z_STREAM_END&&(n=Ul.Z_FINISH),n===Ul.Z_FINISH?(r=ql.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Ul.Z_OK):n!==Ul.Z_SYNC_FLUSH||(this.onEnd(Ul.Z_OK),!(s.avail_out=0))},Kl.prototype.onData=function(t){this.chunks.push(t)},Kl.prototype.onEnd=function(t){t===Ul.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=vu.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Vl={Inflate:Kl,inflate:Zl,inflateRaw:function(t,e){return(e=e||{}).raw=!0,Zl(t,e)},ungzip:Zl},Gl={};(0,vu.assign)(Gl,_l,Vl,Ul);var $l=Gl;function Yl(t){return Buffer.from(t,"base64").toString("binary")}var Xl=Yl.atob=Yl,Ql=Ct(function(t){t.exports=function(t){return(t instanceof Buffer?t:Buffer.from(t.toString(),"binary")).toString("base64")}}),tf=Bt(!0);au(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=tf(e,r),this._i+=t.length,{value:t,done:!1})});function ef(e,t,r,n){try{return n?t(Lt(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&Lt(i.call(e)),t}}function rf(t,e,r){e in t?Ie.f(t,e,ve(0,r)):t[e]=r}function nf(t,e){var r=-1,n=t;Array.isArray(t)||(n=Array.from(t));for(var i=n.length;++r<i&&!1!==e(n[r],r,n););return t}function of(t){return"object"===ka(t)?JSON.parse(JSON.stringify(t)):t}function af(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function sf(t){var e=null;if(t){for(var r=If(t),n=r.length,i=new Uint8Array(n),o=0;o<n;o++)i[o]=r.charCodeAt(o);var a=$l?$l.inflate(i):null;e="function"==typeof TextDecoder?new TextDecoder("utf-8").decode(a):"function"==typeof escape?function(t){for(var e=[],r=0;r<t.length;r+=32768)e.push(String.fromCharCode.apply(null,t.subarray(r,r+32768)));var n=e.join("");return decodeURIComponent(escape(n))}(a):function(t){var e,r,n,i,o,a;e=[],n=t.length,r=0;for(;r<n;)switch((i=t[r++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e.push(String.fromCharCode(i));break;case 12:case 13:o=t[r++],e.push(String.fromCharCode((31&i)<<6|63&o));break;case 14:o=t[r++],a=t[r++],e.push(String.fromCharCode((15&i)<<12|(63&o)<<6|(63&a)<<0))}return e.join("")}(a)}return e}function uf(t){return lf($l?$l.deflate(t):null)}Ee(Ee.S+Ee.F*!du(function(t){Array.from(t)}),"Array",{from:function(t,e,r){var n,i,o,a,s=Is(t),u="function"==typeof this?this:Array,c=arguments.length,l=1<c?e:void 0,f=void 0!==l,h=0,p=Ys(s);if(f&&(l=_e(l,2<c?r:void 0,2)),null==p||u==Array&&Ts(p))for(i=new u(n=Vt(s.length));h<n;h++)rf(i,h,f?l(s[h],h):s[h]);else for(a=p.call(s),i=new u;!(o=a.next()).done;h++)rf(i,h,f?ef(a,l,[o.value,h],!0):o.value);return i.length=h,i}});var cf=6e3;function lf(t){for(var e="",r=0,n=t.length;r*cf<n;)e+=xf(String.fromCharCode.apply(null,Array.prototype.slice.call(t,r*cf,(r+1)*cf))),r++;return e}function ff(t){if(!t||!t.from||!t.to)return"";var e=function(t){if(!t||!t.from||!t.to)return[];var e=null,r=null;"number"==typeof t.from.row&&"number"==typeof t.from.col&&"number"==typeof t.to.row&&"number"==typeof t.to.col&&(e={row:Math.min(t.from.row,t.to.row),col:Math.min(t.from.col,t.to.col)},r={row:Math.max(t.from.row,t.to.row),col:Math.max(t.from.col,t.to.col)});return[e,r]}(t),r=e[0],n=e[1];if(r&&n){if(r.col==n.col&&r.row==n.row)return hf(r);var i=hf(r),o=hf(n);if(i&&o)return i+":"+o;if(i)return i;if(o)return o}return""}function hf(t){var e="";if(t&&"number"==typeof t.row&&"number"==typeof t.col){var r="A".charCodeAt(0),n="Z".charCodeAt(0)-"A".charCodeAt(0)+1;if(!n)return"";for(var i=t.col,o=0,a=!0;o=Math.floor(i%n-(a?0:1)),i=Math.floor(i/n),e=String.fromCharCode(o+r)+e,a=!1,i;);e+=t.row+1}return e}function pf(t){if("string"==typeof t){var e,r=t.split(":");if(1==r.length){var n=df(r[0]);n&&(e={from:n,to:n})}else if(2==r.length){var i=df(r[0]),o=df(r[1]);i&&o&&(e={from:i,to:o})}return e}}function df(t){if("string"==typeof t&&new RegExp("^[A-Z]+[0-9]+$").test(t)){var e,r;if("number"!=typeof(e=function(t){if("string"!=typeof t)return;for(var e,r=new RegExp("^[A-Z]+"),n=t.match(r)[0],i="A".charCodeAt(0),o="Z".charCodeAt(0)-"A".charCodeAt(0)+1,a=0,s=n.length;a<s;a++)e=a==n.length-1?n.charCodeAt(a)-i+("number"==typeof e?o*e:0):n.charCodeAt(a)-i+1+("number"==typeof e?o*e:0);return e}(t))||isNaN(e))return;if("number"!=typeof(r=function(t){if("string"!=typeof t)return;var e=new RegExp("[0-9]+$"),r=t.match(e)[0];return parseInt(r)-1}(t))||isNaN(r))return;return{row:r,col:e}}}function gf(t){return function(t){if(!t||!t.length)return;for(var e=of(t),r=[],n=0,i=e.length;n<i;n++)for(var o=0,a=e[n].length;o<a;o++){var s=e[n][o];if(s&&(!s.isSearched||s.isSearched!=vf)){var u={row:n,col:o},c=mf(e,u,p(s));if(c){_f(e,s,u,c);var l={from:u,to:c},f=of(s);delete f.isSearched;var h=[ff(l),f];r.push(h)}}}return r;function p(e){return function(t){return function(t,e){{if(null==t&&null==e)return!0;if(null==t||null==e)return!1}if("object"!=ka(t)||"object"!=ka(e))return!1;if(t.isSearched&&t.isSearched==vf)return!1;var r=!0;for(var n in e)e[n]!=t[n]&&(r=!1);return r}(t,e)}}}(t)}var vf=1,bf=2;function _f(t,e,r,n){if(r&&"number"==typeof r.row&&"number"==typeof r.col&&n&&"number"==typeof n.row&&"number"==typeof n.col){r=r||{row:0,col:0};for(var i=Object.getOwnPropertyNames(e).length-(e.isSearched?1:0),o=r.row;o<=n.row;o++)for(var a=r.col;a<=n.col;a++){var s=t[o][a];s&&(i==Object.getOwnPropertyNames(s).length-(s.isSearched?1:0)?s.isSearched=vf:s.isSearched=bf)}}}function mf(t,e,r){if(t&&t.length&&t[e.row].length){var n,i,o,a,s={row:(e=e||{row:0,col:0}).row,col:e.col};for(n=e.row,i=t.length;n<i;n++){var u=t[n];for(o=e.col,a=a?Math.min(a,u.length):u.length;o<a;o++){if(!r(u[o])){if(n==e.row)s.col=o-1,a=o;else if(n==t.length-1)s.row=t.length-1;else if(o<s.col+1)return s.row=n-1,s;break}o==u.length-1?(s.col=u.length-1,n==t.length-1&&(s.row=t.length-1)):n==t.length-1&&o==a-1&&(s.row=t.length-1)}}return s}}function yf(t,e,r,n){if(!t||void 0===t.length)return e&&r?wf([],e,r,n):void 0;for(var i=[],o=0,a=t.length;o<a;o++){var s=t[o],u=pf(s[0]),c=s[1];if(u&&c)for(var l=u.from.row;l<=u.to.row;l++){i[l]||(i[l]=[]);for(var f=u.from.col;f<=u.to.col;f++){var h=i[l][f];for(var p in h||(h={},i[l][f]=h),c)void 0===h[p]&&(h[p]=c[p])}}}return e&&r&&wf(i,e,r,n),i}function wf(t,e,r,n){t=t||[];for(var i=0;i<e;i++){t[i]||(t[i]=[]);for(var o=0;o<r;o++)void 0===t[i][o]&&(t[i][o]=n)}return t}function Sf(t,e,r,n){if(t&&t.z){var i=yf(t.z,e,r,n);if(i)return{style:i}}return t}function kf(t){return t&&"paste"==t.type&&t.z?function(t){if(t&&"paste"==t.type&&t.z){var e=JSON.parse(sf(t.z)),r=Math.abs(e.range.to.row-e.range.from.row)+1,n=Math.abs(e.range.to.col-e.range.from.col)+1;return e.stateBefore&&(e.stateBefore=Sf(e.stateBefore,r,n,null)),e.stateUpdated&&(e.stateUpdated=Sf(e.stateUpdated,r,n,null)),e}return t}(t):t}for(var xf="undefined"==typeof btoa?void 0!==Ql?Ql:function(t){return new Buffer(t).toString("base64")}:btoa,If="undefined"==typeof atob?void 0!==Xl?Xl:function(t){return new Buffer(t,"base64").toString()}:atob,Of={zipString:uf,unzipString:sf},Af={checkActionIfNeedUnzip:function(t){if(t&&t.z){if("paste"===t.type)return kf(t);if("emptycell"===t.type)return JSON.parse(sf(t.z))}return t},zipKeyFrame:function(t){var e=null;try{!function(t){if(!t||!t.k)return;var e,r=t.k.st,n=t.k.s;if("set"==r){var i,o;try{var a=uf(JSON.stringify(n)).length}catch(t){i=gf(n),r="z",e=i}i||(i=gf(n),o=uf(JSON.stringify(i)).length,e=o<.9*a?(r="z",i):(r="set",n)),t.k.st=r,t.k.s=e}}(t);var r=JSON.stringify([t]),n=$l?$l.deflate(r):null;if(n){var i={type:"k",z:lf(n)};e=JSON.stringify([i])}}catch(t){throw t}return e},zipKeyFrameWithoutZip:function(t){var e=null;try{var r=JSON.stringify([t]);if(r){var n={z:r};e=JSON.stringify([n])}}catch(t){throw t}return e},unzipKeyFrame:function(t){if(t&&"k"==t.type&&t.z){var e=JSON.parse(sf(t.z));if(e&&e[0]&&e[0].k&&"z"==e[0].k.st){var r=e[0].k;r.s=yf(r.s,r.r,r.c,null),r.st="set"}return e}return[t]},checkActionsIfNeedUnzip:function(t){for(var e=0,r=t.length;e<r;e++){var n=t[e];n&&n.z&&("paste"===n.type?t[e]=kf(n):"emptycell"===n.type&&(t[e]=JSON.parse(sf(n.z))))}return t}},Tf="attr",Cf=function(t){return Af.unzipKeyFrame(t)},zf=function(t){return function(t){switch(t){case"cp":case"rp":case"dp":case"dc":case"dr":case"m":case"um":return!0;default:return!1}}(t.type)?function(t){return t.z?JSON.parse(Of.unzipString(t.z)):t}(t):Af.checkActionIfNeedUnzip(t)},Lf=Yt("iterator"),Ef=Yt("toStringTag"),Nf=Rs.Array,Bf={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Mf=Fs(Bf),Rf=0;Rf<Mf.length;Rf++){var jf,Pf=Mf[Rf],Ff=Bf[Pf],Df=$t[Pf],Wf=Df&&Df.prototype;if(Wf&&(Wf[Lf]||Oe(Wf,Lf,Nf),Wf[Ef]||Oe(Wf,Ef,Pf),Rs[Pf]=Nf,Ff))for(jf in lu)Wf[jf]||Ce(Wf,jf,lu[jf],!0)}var qf,Uf,Hf,Jf;qf="keys",Uf=function(){return function(t){return Fs(Is(t))}},Hf=(Dt.Object||{})[qf]||Object[qf],(Jf={})[qf]=Uf(Hf),Ee(Ee.S+Ee.F*pe(function(){Hf(1)}),"Object",Jf);function Kf(t){var e=Dt.Symbol||(Dt.Symbol=$t.Symbol||{});"_"==t.charAt(0)||t in e||Vf(e,t,{value:Zf.f(t)})}var Zf={f:Yt},Vf=Ie.f;Kf("asyncIterator");function Gf(t){var e=mh[t]=Ks(fh[dh]);return e._k=t,e}function $f(t,e){Lt(t);for(var r,n=function(t){var e=Fs(t),r=rh.f;if(r)for(var n,i=r(t),o=Ha.f,a=0;i.length>a;)o.call(t,n=i[a++])&&e.push(n);return e}(e=Ra(e)),i=0,o=n.length;i<o;)Ah(t,r=n[i++],e[r]);return t}function Yf(t){var e=bh.call(this,t=ge(t,!0));return!(this===wh&&be(mh,t)&&!be(yh,t))&&(!(e||!be(this,t)||!be(mh,t)||be(this,gh)&&this[gh][t])||e)}function Xf(t,e){if(t=Ra(t),e=ge(e,!0),t!==wh||!be(mh,e)||be(yh,e)){var r=uh(t,e);return!r||!be(mh,e)||be(t,gh)&&t[gh][e]||(r.enumerable=!0),r}}function Qf(t){for(var e,r=lh(Ra(t)),n=[],i=0;r.length>i;)be(mh,e=r[i++])||e==gh||e==sh||n.push(e);return n}function th(t){for(var e,r=t===wh,n=lh(r?yh:Ra(t)),i=[],o=0;n.length>o;)!be(mh,e=n[o++])||r&&!be(wh,e)||i.push(mh[e]);return i}var eh=Ct(function(t){function r(t){e(t,n,{value:{i:"O"+ ++i,w:{}}})}var n=Jt("meta"),e=Ie.f,i=0,o=Object.isExtensible||function(){return!0},a=!pe(function(){return o(Object.preventExtensions({}))}),s=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!Ht(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!be(t,n)){if(!o(t))return"F";if(!e)return"E";r(t)}return t[n].i},getWeak:function(t,e){if(!be(t,n)){if(!o(t))return!0;if(!e)return!1;r(t)}return t[n].w},onFreeze:function(t){return a&&s.NEED&&o(t)&&!be(t,n)&&r(t),t}}}),rh=(eh.KEY,eh.NEED,eh.fastKey,eh.getWeak,eh.onFreeze,{f:Object.getOwnPropertySymbols}),nh=rs.f,ih={}.toString,oh="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ah={f:function(t){return oh&&"[object Window]"==ih.call(t)?function(t){try{return nh(t)}catch(t){return oh.slice()}}(t):nh(Ra(t))}},sh=eh.KEY,uh=Za.f,ch=Ie.f,lh=ah.f,fh=$t.Symbol,hh=$t.JSON,ph=hh&&hh.stringify,dh="prototype",gh=Yt("_hidden"),vh=Yt("toPrimitive"),bh={}.propertyIsEnumerable,_h=Wt("symbol-registry"),mh=Wt("symbols"),yh=Wt("op-symbols"),wh=Object[dh],Sh="function"==typeof fh&&!!rh.f,kh=$t.QObject,xh=!kh||!kh[dh]||!kh[dh].findChild,Ih=ye&&pe(function(){return 7!=Ks(ch({},"a",{get:function(){return ch(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=uh(wh,e);n&&delete wh[e],ch(t,e,r),n&&t!==wh&&ch(wh,e,n)}:ch,Oh=Sh&&"symbol"==typeof fh.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof fh},Ah=function(t,e,r){return t===wh&&Ah(yh,e,r),Lt(t),e=ge(e,!0),Lt(r),be(mh,e)?(r.enumerable?(be(t,gh)&&t[gh][e]&&(t[gh][e]=!1),r=Ks(r,{enumerable:ve(0,!1)})):(be(t,gh)||ch(t,gh,ve(1,{})),t[gh][e]=!0),Ih(t,e,r)):ch(t,e,r)};Sh||(Ce((fh=function(t){if(this instanceof fh)throw TypeError("Symbol is not a constructor!");var e=Jt(0<arguments.length?t:void 0),r=function(t){this===wh&&r.call(yh,t),be(this,gh)&&be(this[gh],e)&&(this[gh][e]=!1),Ih(this,e,ve(1,t))};return ye&&xh&&Ih(wh,e,{configurable:!0,set:r}),Gf(e)})[dh],"toString",function(){return this._k}),Za.f=Xf,Ie.f=Ah,rs.f=ah.f=Qf,Ha.f=Yf,rh.f=th,ye&&Ce(wh,"propertyIsEnumerable",Yf,!0),Zf.f=function(t){return Gf(Yt(t))}),Ee(Ee.G+Ee.W+Ee.F*!Sh,{Symbol:fh});for(var Th="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Ch=0;Th.length>Ch;)Yt(Th[Ch++]);for(var zh=Fs(Yt.store),Lh=0;zh.length>Lh;)Kf(zh[Lh++]);Ee(Ee.S+Ee.F*!Sh,"Symbol",{for:function(t){return be(_h,t+="")?_h[t]:_h[t]=fh(t)},keyFor:function(t){if(!Oh(t))throw TypeError(t+" is not a symbol!");for(var e in _h)if(_h[e]===t)return e},useSetter:function(){xh=!0},useSimple:function(){xh=!1}}),Ee(Ee.S+Ee.F*!Sh,"Object",{create:function(t,e){return void 0===e?Ks(t):$f(Ks(t),e)},defineProperty:Ah,defineProperties:$f,getOwnPropertyDescriptor:Xf,getOwnPropertyNames:Qf,getOwnPropertySymbols:th});var Eh=pe(function(){rh.f(1)});Ee(Ee.S+Ee.F*Eh,"Object",{getOwnPropertySymbols:function(t){return rh.f(Is(t))}}),hh&&Ee(Ee.S+Ee.F*(!Sh||pe(function(){var t=fh();return"[null]"!=ph([t])||"{}"!=ph({a:t})||"{}"!=ph(Object(t))})),"JSON",{stringify:function(t){for(var e,r,n=[t],i=1;i<arguments.length;)n.push(arguments[i++]);if(r=e=n[1],(Ht(e)||void 0!==t)&&!Oh(t))return Xs(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Oh(e))return e}),n[1]=e,ph.apply(hh,n)}}),fh[dh][vh]||Oe(fh[dh],vh,fh[dh].valueOf),As(fh,"Symbol"),As(Math,"Math",!0),As($t.JSON,"JSON",!0);var Nh=Da(!0);Ee(Ee.P,"Array",{includes:function(t,e){return Nh(this,t,1<arguments.length?e:void 0)}}),ru("includes");function Bh(t,e,r){if(zt(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(Nt(t))}function Mh(e){var r=/./;try{"/./"[e](r)}catch(t){try{return r[Rh]=!1,!"/./"[e](r)}catch(t){}}return!0}var Rh=Yt("match"),jh="includes";Ee(Ee.P+Ee.F*Mh(jh),"String",{includes:function(t,e){return!!~Bh(this,t,jh).indexOf(t,1<arguments.length?e:void 0)}});var Ph=function(){function r(t,e){xa(this,r),this.row=null,this.col=null,void 0!==t&&void 0!==e&&(this.row=t,this.col=e)}return Oa(r,[{key:"isValid",value:function(t){return!(this.row<0||this.col<0)&&!(this.row>=t.getSetting("totalRows")||this.col>=t.getSetting("totalColumns"))}},{key:"isEqual",value:function(t){return t===this||this.row===t.row&&this.col===t.col}},{key:"isSouthEastOf",value:function(t){return this.row>=t.row&&this.col>=t.col}},{key:"isNorthWestOf",value:function(t){return this.row<=t.row&&this.col<=t.col}},{key:"isSouthWestOf",value:function(t){return this.row>=t.row&&this.col<=t.col}},{key:"isNorthEastOf",value:function(t){return this.row<=t.row&&this.col>=t.col}},{key:"toObject",value:function(){return{row:this.row,col:this.col}}},{key:"clone",value:function(){var t=this.toObject();return new r(t.row,t.col)}}]),r}(),Fh=function(){function g(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t;xa(this,g),this.highlight=t,this.from=e,this.to=r}return Oa(g,null,[{key:"from",value:function(t){var e=new Ph(t.from.row,t.from.col);return new g(e,e,new Ph(t.to.row,t.to.col))}}]),Oa(g,[{key:"setHighlight",value:function(t){return this.highlight=t,this}},{key:"setFrom",value:function(t){return this.from=t,this}},{key:"setTo",value:function(t){return this.to=t,this}},{key:"isValid",value:function(t){return this.from.isValid(t)&&this.to.isValid(t)}},{key:"isSingle",value:function(){return this.from.row===this.to.row&&this.from.col===this.to.col}},{key:"getHeight",value:function(){return Math.max(this.from.row,this.to.row)-Math.min(this.from.row,this.to.row)+1}},{key:"getWidth",value:function(){return Math.max(this.from.col,this.to.col)-Math.min(this.from.col,this.to.col)+1}},{key:"includes",value:function(t){var e=t.row,r=t.col,n=this.getTopLeftCorner(),i=this.getBottomRightCorner();return n.row<=e&&i.row>=e&&n.col<=r&&i.col>=r}},{key:"includesRange",value:function(t){return this.includes(t.getTopLeftCorner())&&this.includes(t.getBottomRightCorner())}},{key:"isEqual",value:function(t){return Math.min(this.from.row,this.to.row)===Math.min(t.from.row,t.to.row)&&Math.max(this.from.row,this.to.row)===Math.max(t.from.row,t.to.row)&&Math.min(this.from.col,this.to.col)===Math.min(t.from.col,t.to.col)&&Math.max(this.from.col,this.to.col)===Math.max(t.from.col,t.to.col)}},{key:"overlaps",value:function(t){return t.isSouthEastOf(this.getTopLeftCorner())&&t.isNorthWestOf(this.getBottomRightCorner())}},{key:"isSouthEastOf",value:function(t){return this.getTopLeftCorner().isSouthEastOf(t)||this.getBottomRightCorner().isSouthEastOf(t)}},{key:"isNorthWestOf",value:function(t){return this.getTopLeftCorner().isNorthWestOf(t)||this.getBottomRightCorner().isNorthWestOf(t)}},{key:"isOverlappingHorizontally",value:function(t){return this.getTopRightCorner().col>=t.getTopLeftCorner().col&&this.getTopRightCorner().col<=t.getTopRightCorner().col||this.getTopLeftCorner().col<=t.getTopRightCorner().col&&this.getTopLeftCorner().col>=t.getTopLeftCorner().col}},{key:"isOverlappingVertically",value:function(t){return this.getBottomRightCorner().row>=t.getTopRightCorner().row&&this.getBottomRightCorner().row<=t.getBottomRightCorner().row||this.getTopRightCorner().row<=t.getBottomRightCorner().row&&this.getTopRightCorner().row>=t.getTopRightCorner().row}},{key:"expand",value:function(t){var e=this.getTopLeftCorner(),r=this.getBottomRightCorner();return(t.row<e.row||t.col<e.col||t.row>r.row||t.col>r.col)&&(this.from=new Ph(Math.min(e.row,t.row),Math.min(e.col,t.col)),this.to=new Ph(Math.max(r.row,t.row),Math.max(r.col,t.col)),!0)}},{key:"expandByRange",value:function(t){if(this.includesRange(t)||!this.overlaps(t))return!1;var e=this.getTopLeftCorner(),r=this.getBottomRightCorner(),n=this.getDirection(),i=t.getTopLeftCorner(),o=t.getBottomRightCorner(),a=Math.min(e.row,i.row),s=Math.min(e.col,i.col),u=Math.max(r.row,o.row),c=Math.max(r.col,o.col),l=new Ph(a,s),f=new Ph(u,c);return this.from=l,this.to=f,this.setDirection(n),this.highlight.row===this.getBottomRightCorner().row&&"N-S"===this.getVerticalDirection()&&this.flipDirectionVertically(),this.highlight.col===this.getTopRightCorner().col&&"W-E"===this.getHorizontalDirection()&&this.flipDirectionHorizontally(),!0}},{key:"getDirection",value:function(){return this.from.isNorthWestOf(this.to)?"NW-SE":this.from.isNorthEastOf(this.to)?"NE-SW":this.from.isSouthEastOf(this.to)?"SE-NW":this.from.isSouthWestOf(this.to)?"SW-NE":void 0}},{key:"setDirection",value:function(t){switch(t){case"NW-SE":var e=[this.getTopLeftCorner(),this.getBottomRightCorner()];this.from=e[0],this.to=e[1];break;case"NE-SW":var r=[this.getTopRightCorner(),this.getBottomLeftCorner()];this.from=r[0],this.to=r[1];break;case"SE-NW":var n=[this.getBottomRightCorner(),this.getTopLeftCorner()];this.from=n[0],this.to=n[1];break;case"SW-NE":var i=[this.getBottomLeftCorner(),this.getTopRightCorner()];this.from=i[0],this.to=i[1]}}},{key:"getVerticalDirection",value:function(){return-1<["NE-SW","NW-SE"].indexOf(this.getDirection())?"N-S":"S-N"}},{key:"getHorizontalDirection",value:function(){return-1<["NW-SE","SW-NE"].indexOf(this.getDirection())?"W-E":"E-W"}},{key:"flipDirectionVertically",value:function(){switch(this.getDirection()){case"NW-SE":this.setDirection("SW-NE");break;case"NE-SW":this.setDirection("SE-NW");break;case"SE-NW":this.setDirection("NE-SW");break;case"SW-NE":this.setDirection("NW-SE")}}},{key:"flipDirectionHorizontally",value:function(){switch(this.getDirection()){case"NW-SE":this.setDirection("NE-SW");break;case"NE-SW":this.setDirection("NW-SE");break;case"SE-NW":this.setDirection("SW-NE");break;case"SW-NE":this.setDirection("SE-NW")}}},{key:"getTopLeftCorner",value:function(){return new Ph(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))}},{key:"getBottomRightCorner",value:function(){return new Ph(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))}},{key:"getTopRightCorner",value:function(){return new Ph(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))}},{key:"getBottomLeftCorner",value:function(){return new Ph(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))}},{key:"isCorner",value:function(t,e){return!!(e&&e.includes(t)&&(this.getTopLeftCorner().isEqual(new Ph(e.from.row,e.from.col))||this.getTopRightCorner().isEqual(new Ph(e.from.row,e.to.col))||this.getBottomLeftCorner().isEqual(new Ph(e.to.row,e.from.col))||this.getBottomRightCorner().isEqual(new Ph(e.to.row,e.to.col))))||(t.isEqual(this.getTopLeftCorner())||t.isEqual(this.getTopRightCorner())||t.isEqual(this.getBottomLeftCorner())||t.isEqual(this.getBottomRightCorner()))}},{key:"getOppositeCorner",value:function(t,e){if(!(t instanceof Ph))return!1;if(e&&e.includes(t)){if(this.getTopLeftCorner().isEqual(new Ph(e.from.row,e.from.col)))return this.getBottomRightCorner();if(this.getTopRightCorner().isEqual(new Ph(e.from.row,e.to.col)))return this.getBottomLeftCorner();if(this.getBottomLeftCorner().isEqual(new Ph(e.to.row,e.from.col)))return this.getTopRightCorner();if(this.getBottomRightCorner().isEqual(new Ph(e.to.row,e.to.col)))return this.getTopLeftCorner()}return t.isEqual(this.getBottomRightCorner())?this.getTopLeftCorner():t.isEqual(this.getTopLeftCorner())?this.getBottomRightCorner():t.isEqual(this.getTopRightCorner())?this.getBottomLeftCorner():t.isEqual(this.getBottomLeftCorner())?this.getTopRightCorner():void 0}},{key:"getBordersSharedWith",value:function(t){if(!this.includesRange(t))return[];var e=Math.min(this.from.row,this.to.row),r=Math.max(this.from.row,this.to.row),n=Math.min(this.from.col,this.to.col),i=Math.max(this.from.col,this.to.col),o=Math.min(t.from.row,t.to.row),a=Math.max(t.from.row,t.to.row),s=Math.min(t.from.col,t.to.col),u=Math.max(t.from.col,t.to.col),c=[];return e==o&&c.push("top"),i==u&&c.push("right"),r==a&&c.push("bottom"),n==s&&c.push("left"),c}},{key:"getInner",value:function(){for(var t=this.getTopLeftCorner(),e=this.getBottomRightCorner(),r=[],n=t.row;n<=e.row;n++)for(var i=t.col;i<=e.col;i++)this.from.row===n&&this.from.col===i||this.to.row===n&&this.to.col===i||r.push(new Ph(n,i));return r}},{key:"getAll",value:function(){for(var t=this.getTopLeftCorner(),e=this.getBottomRightCorner(),r=[],n=t.row;n<=e.row;n++)for(var i=t.col;i<=e.col;i++)t.row===n&&t.col===i?r.push(t):e.row===n&&e.col===i?r.push(e):r.push(new Ph(n,i));return r}},{key:"forAll",value:function(t){for(var e=this.getTopLeftCorner(),r=this.getBottomRightCorner(),n=e.row;n<=r.row;n++)for(var i=e.col;i<=r.col;i++){if(!1===t(n,i))return}}},{key:"toObject",value:function(){return{from:this.from.toObject(),to:this.to.toObject()}}},{key:"toFormatRange",value:function(){var t=new Ph(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col));return new g(t,t,new Ph(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col)))}},{key:"getSroundRangesAll",value:function(t,e){var r=[],n=this.from.row,i=this.from.col,o=this.to.row,a=this.to.col;if(0<n){var s=new Ph(n-1,i),u=new Ph(n-1,a);r.push(new g(s,s,u))}if(o<t-1){var c=new Ph(o+1,i),l=new Ph(o+1,a);r.push(new g(c,c,l))}if(0<i){var f=new Ph(n,i-1),h=new Ph(o,i-1);r.push(new g(f,f,h))}if(a<e-1){var p=new Ph(n,a+1),d=new Ph(o,a+1);r.push(new g(p,p,d))}return r}},{key:"getRowColAndSroundAll",value:function(t,e){for(var r=[],n=this.from.row-1,i=this.to.row+1,o=this.from.col-1,a=this.to.col+1,s=n;s<=i;s++)for(var u=o;u<=a;u++)s===n&&u===o||s===n&&u===a||s===i&&u===o||s===i&&u===a||0<=s&&s<t&&0<=u&&u<e&&r.push([s,u]);return r}},{key:"getRowColAll",value:function(){for(var t=[],e=this.from.row;e<=this.to.row;e++)for(var r=this.from.col;r<=this.to.col;r++)t.push([e,r]);return t}}]),g}(),Dh=function(){function t(){xa(this,t),this.ranges=[]}return Oa(t,[{key:"isEmpty",value:function(){return 0===this.size()}},{key:"set",value:function(t){return this.clear(),this.ranges.push(new Fh(t)),this}},{key:"add",value:function(t){return this.ranges.push(new Fh(t)),this}},{key:"addWithAllArguments",value:function(t,e,r){var n=1<arguments.length&&void 0!==e?e:t,i=2<arguments.length&&void 0!==r?r:t;return this.ranges.push(new Fh(t,n,i)),this}},{key:"current",value:function(){return this.peekByIndex(0)}},{key:"previous",value:function(){return this.peekByIndex(-1)}},{key:"includes",value:function(e){return this.ranges.some(function(t){return t.includes(e)})}},{key:"clear",value:function(){return this.ranges.length=0,this}},{key:"size",value:function(){return this.ranges.length}},{key:"peekByIndex",value:function(t){var e,r=0<arguments.length&&void 0!==t?t:0,n=this.size()+r-1;return 0<=n&&(e=this.ranges[n]),e}},{key:Symbol.iterator,value:function(){return this.ranges[Symbol.iterator]()}}]),t}();function Wh(t,e,r){if(t&&af(t,"sheetborder")){var n,i,o,a,s,u,c={"border-top":"transparent","border-bottom":"transparent","border-left":"transparent","border-right":"transparent"},l=t.sheetborder;if(l&&0<=l.indexOf("--")){var f=0;0<=l.indexOf("sheetborder")&&(f=1);for(var h=l.split("--"),p=h.length,d=f;d<p;d++){var g=h[d];if(0<=g.indexOf(":")){var v=g.split(":");if(2!==v.length)continue;var b=-1;if("border-left-attr"===v[0]||"border-right-attr"===v[0]||"border-top-attr"===v[0]||"border-bottom-attr"===v[0]?b=v[0].indexOf("-attr"):"border-left-show"!==v[0]&&"border-right-show"!==v[0]&&"border-top-show"!==v[0]&&"border-bottom-show"!==v[0]||(b=v[0].indexOf("-show")),0<b){var _=v[0].substr(0,b);2<qh(v[1])&&(v[1]="transparent"),c[_]=v[1]}"border-right-attr"===v[0]?(n=d,s=v[1]):"border-right-show"===v[0]?i=d:"border-bottom-attr"===v[0]?(o=d,u=v[1]):"border-bottom-show"===v[0]&&(a=d)}}if(e&&s){var m=e.sheetborder;if(m&&0<i&&0<n&&i<n){var y=m.concat("--border-left-show:").concat(s);e.sheetborder=y}}if(r&&u){var w=r.sheetborder;if(w&&0<a&&0<o&&a<o){var S=w.concat("--border-top-show:").concat(u);r.sheetborder=S}}}else if(l&&0<=l.indexOf(":")){var k=l.split(":"),x=-1;if("border-left-attr"===k[0]||"border-right-attr"===k[0]||"border-top-attr"===k[0]||"border-bottom-attr"===k[0]?x=k[0].indexOf("-attr"):"border-left-show"!==k[0]&&"border-right-show"!==k[0]&&"border-top-show"!==k[0]&&"border-bottom-show"!==k[0]||(x=k[0].indexOf("-show")),0<x){var I=k[0].substr(0,x);2<qh(k[1])&&(k[1]="transparent"),c[I]=k[1]}}var O=Object.keys(c);O&&0<O.length&&(t.border=c),delete t.sheetborder}}function qh(t){return t&&0<=t.indexOf("rgb")?t.split("rgb").length:0}var Uh=function(t,e){var r=ba(t,e),n=_a(t,e);return{type:ca,dataSource:r,styles:n}};function Hh(t){var e=[];if(!function(t){var e=!1;if(t instanceof Array&&t[0]){var r=JSON.parse(t[0]);r&&r[0]&&"k"===r[0].type&&(e=!0)}return e}(t)){e.push(Uh(2,2))}if(t&&Array.isArray(t))for(var r=0,n=t.length;r<n;r++){var i=void 0;if((i=JSON.parse(t[r]))&&i[0]&&"revert"===i[0].type)break;if(i&&i[0]&&"k"===i[0].type)if(i[0].z){var o=Cf(i[0]);o&&o[0]&&"k"===o[0].type&&(Jh(o[0].k),e.push(o[0]))}else Jh(i[0].k),e.push(i[0]);else(i=i.map(function(t){return zf(t)})).forEach(function(t){e.push(t)})}return e}var Jh=function(t){if(t&&t.s&&Array.isArray(t.s)){var m=t.s,y=m.length;nf(m,function(t,b){var _=t.length;nf(t,function(t,e){if(t&&(t.style&&(t=t.style),af(t,"sheetborder"))){if(!af(t,"border")){var r=t.sheetborder,n={"border-top":"transparent","border-bottom":"transparent","border-left":"transparent","border-right":"transparent"};if(r&&0<=r.indexOf("--")){var i,o,a,s,u,c,l,f;if(nf(r.split("--"),function(t,e){if(0<=t.indexOf("-attr:")||t.indexOf("-show:")){var r=t.split(":");if(!r||2!==r.length)return;if(2<qh(r[1])&&(r[1]="transparent"),r[1])switch(r[0]){case"border-left-attr":case"border-left-show":n["border-left"]=r[1];break;case"border-top-attr":case"border-top-show":n["border-top"]=r[1];break;case"border-right-attr":n["border-right"]=r[1],i=e,u=r[1];break;case"border-right-show":n["border-right"]=r[1],o=e;break;case"border-bottom-attr":n["border-bottom"]=r[1],a=e,c=r[1];break;case"border-bottom-show":n["border-bottom"]=r[1],s=e}}}),b<y-1&&(l=m[b+1][e]),e<_-1&&(f=m[b][e+1]),f&&u){var h=f.sheetborder;if(h&&0<o&&0<i&&o<i){var p=h.concat("--border-left-show:").concat(u);f.sheetborder=p}}if(l&&c){var d=l.sheetborder;if(d&&0<s&&0<a&&s<a){var g=d.concat("--border-top-show:").concat(c);l.sheetborder=g}}}else if(r&&(0<=r.indexOf("-attr:")||r.indexOf("-show:"))){var v=r.split(":");if(!v||2!==v.length)return;if(2<qh(v[1])&&(v[1]="transparent"),v[1])switch(v[0]){case"border-left-attr":case"border-left-show":n["border-left"]=v[1];break;case"border-top-attr":case"border-top-show":n["border-top"]=v[1];break;case"border-right-attr":case"border-right-show":n["border-right"]=v[1];break;case"border-bottom-attr":case"border-bottom-show":n["border-bottom"]=v[1]}}t.border=n}delete t.sheetborder}})})}},Kh=Math.max,Zh=Math.min,Vh=Math.floor,Gh=/\$([$&`']|\d\d?|<[^>]*>)/g,$h=/\$([$&`']|\d\d?)/g;Ne("replace",2,function(i,o,w,S){return[function(t,e){var r=i(this),n=null==t?void 0:t[o];return void 0!==n?n.call(t,r,e):w.call(String(r),t,e)},function(t,e){var r=S(w,t,this,e);if(r.done)return r.value;var n=Lt(t),i=String(this),o="function"==typeof e;o||(e=String(e));var a=n.global;if(a){var s=n.unicode;n.lastIndex=0}for(var u=[];;){var c=Rt(n,i);if(null===c)break;if(u.push(c),!a)break;""===String(c[0])&&(n.lastIndex=Mt(i,Vt(n.lastIndex),s))}for(var l,f="",h=0,p=0;p<u.length;p++){c=u[p];for(var d=String(c[0]),g=Kh(Zh(Zt(c.index),i.length),0),v=[],b=1;b<c.length;b++)v.push(void 0===(l=c[b])?l:String(l));var _=c.groups;if(o){var m=[d].concat(v,g,i);void 0!==_&&m.push(_);var y=String(e.apply(void 0,m))}else y=k(d,i,g,v,_,e);h<=g&&(f+=i.slice(h,g)+y,h=g+d.length)}return f+i.slice(h)}];function k(o,a,s,u,c,t){var l=s+o.length,f=u.length,e=$h;return void 0!==c&&(c=Is(c),e=Gh),w.call(t,e,function(t,e){var r;switch(e.charAt(0)){case"$":return"$";case"&":return o;case"`":return a.slice(0,s);case"'":return a.slice(l);case"<":r=c[e.slice(1,-1)];break;default:var n=+e;if(0==n)return t;if(f<n){var i=Vh(n/10);return 0===i?t:i<=f?void 0===u[i-1]?e.charAt(1):u[i-1]+e.charAt(1):t}r=u[n-1]}return void 0===r?"":r})}});function Yh(t,e){var r,n=e.index,i=e.amount,o=e.rowHeight,a=t.get("rowsHeight");return o instanceof Array?(a=(r=a).splice.apply(r,[n,0].concat(Ea(o))),o):a=null!=o?a.splice(n,0,o):a.splice(n,i)}function Xh(t,e){var r,n=e.index,i=e.amount,o=e.colWidth,a=t.get("colsWidth");return a=o instanceof Array?(r=a).splice.apply(r,[n,0].concat(Ea(o))):null!=o?a.splice(n,0,o):a.splice(n,i)}var Qh=na.fromJS,tp=na.List;function ep(t,e,r,n,i,o,a){if("number"==typeof n){var s=e.countRows,u=e.countCols,c=[0,0];switch(i=i||1,r){case"right":c[0]+=i;break;case"left":c[0]-=i;break;case"down":c[1]+=i;break;case"up":c[1]-=i}for(var l=t.toJS(),f=[],h=0;h<l.length;h++){var p=t.get(h).toJS();if("right"===r||"left"===r){if(null!=o&&"number"==typeof o&&null!=a&&"number"==typeof a&&!(p.col>o&&p.col+p.colspan-1<a))continue;n==p.col?0<c[0]?p.col+=c[0]:c[0]<0&&(p.colspan+=c[0]):n<p.col?p.col+c[0]<n?(p.colspan+=p.col-n+c[0],0<p.colspan&&(p.col=n)):p.col+=c[0]:n>p.col&&n<=p.col+p.colspan-1&&(0<c[0]?p.colspan+=c[0]:p.colspan=Math.max(n-p.col,p.colspan+c[0]))}else{if(null!=o&&"number"==typeof o&&null!=a&&"number"==typeof a&&!(p.row>o&&p.row+p.rowspan-1<a))continue;n==p.row?0<c[1]?p.row+=c[1]:c[1]<0&&(p.rowspan+=c[1]):n<p.row?p.row+c[1]<n?(p.rowspan+=p.row-n+c[1],0<p.rowspan&&(p.row=n)):p.row+=c[1]:n>p.row&&n<=p.row+p.rowspan-1&&(0<c[1]?p.rowspan+=c[1]:p.rowspan=Math.max(n-p.row,p.rowspan+c[1]))}if(p.rowspan<=0||p.colspan<=0)f.push(h);else if(1==p.rowspan&&1==p.colspan)f.push(h);else{if(p.row>=s||p.col>=u)continue;p.row+p.rowspan>s&&(p.rowspan=s-p.row),p.col+p.colspan>u&&(p.colspan=u-p.col),l[h]=p}}for(var d=f.length-1;0<=d;d--)l.splice(f[d],1);return Qh(l)||new tp}}var rp,np,ip=[].sort,op=[1,2,3];Ee(Ee.P+Ee.F*(pe(function(){op.sort(void 0)})||!pe(function(){op.sort(null)})||!((rp=ip)&&pe(function(){np?rp.call(null,function(){},1):rp.call(null)}))),"Array",{sort:function(t){return void 0===t?ip.call(Is(this)):ip.call(Is(this),Et(t))}});function ap(t,e){if(!Ht(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}function sp(t,e){var r,n=fp(e);if("F"!==n)return t._i[n];for(r=t._f;r;r=r.n)if(r.k==e)return r}function up(n,t,e,r,i,o){function a(t){var r=l[t];Ce(l,t,"delete"==t?function(t){return!(o&&!Ht(t))&&r.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!Ht(t))&&r.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!Ht(t)?void 0:r.call(this,0===t?0:t)}:"add"==t?function(t){return r.call(this,0===t?0:t),this}:function(t,e){return r.call(this,0===t?0:t,e),this})}var s=$t[n],u=s,c=i?"set":"add",l=u&&u.prototype,f={};if("function"==typeof u&&(o||l.forEach&&!pe(function(){(new u).entries().next()}))){var h=new u,p=h[c](o?{}:-0,1)!=h,d=pe(function(){h.has(1)}),g=du(function(t){new u(t)}),v=!o&&pe(function(){for(var t=new u,e=5;e--;)t[c](e,e);return!t.has(-0)});g||(((u=t(function(t,e){ks(t,u,n);var r=Pa(new s,t,u);return null!=e&&cp(e,i,r[c],r),r})).prototype=l).constructor=u),(d||v)&&(a("delete"),a("has"),i&&a("get")),(v||p)&&a(c),o&&l.clear&&delete l.clear}else u=r.getConstructor(t,n,i,c),Ss(u.prototype,e),eh.NEED=!0;return As(u,n),f[n]=u,Ee(Ee.G+Ee.W+Ee.F*(u!=s),f),o||r.setStrong(u,n,i),u}var cp=Ct(function(t){var h={},p={},e=t.exports=function(t,e,r,n,i){var o,a,s,u,c=i?function(){return t}:Ys(t),l=_e(r,n,e?2:1),f=0;if("function"!=typeof c)throw TypeError(t+" is not iterable!");if(Ts(c)){for(o=Vt(t.length);f<o;f++)if((u=e?l(Lt(a=t[f])[0],a[1]):l(t[f]))===h||u===p)return u}else for(s=c.call(t);!(a=s.next()).done;)if((u=ef(s,l,a.value,e))===h||u===p)return u};e.BREAK=h,e.RETURN=p}),lp=Ie.f,fp=eh.fastKey,hp=ye?"_s":"size",pp={getConstructor:function(t,o,r,n){var i=t(function(t,e){ks(t,i,o,"_i"),t._t=o,t._i=Ks(null),t._f=void 0,t._l=void 0,t[hp]=0,null!=e&&cp(e,r,t[n],t)});return Ss(i.prototype,{clear:function(){for(var t=ap(this,o),e=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete e[r.i];t._f=t._l=void 0,t[hp]=0},delete:function(t){var e=ap(this,o),r=sp(e,t);if(r){var n=r.n,i=r.p;delete e._i[r.i],r.r=!0,i&&(i.n=n),n&&(n.p=i),e._f==r&&(e._f=n),e._l==r&&(e._l=i),e[hp]--}return!!r},forEach:function(t,e){ap(this,o);for(var r,n=_e(t,1<arguments.length?e:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(t){return!!sp(ap(this,o),t)}}),ye&&lp(i.prototype,"size",{get:function(){return ap(this,o)[hp]}}),i},def:function(t,e,r){var n,i,o=sp(t,e);return o?o.v=r:(t._l=o={i:i=fp(e,!0),k:e,v:r,p:n=t._l,n:void 0,r:!1},t._f||(t._f=o),n&&(n.n=o),t[hp]++,"F"!==i&&(t._i[i]=o)),t},getEntry:sp,setStrong:function(t,r,e){au(t,r,function(t,e){this._t=ap(t,r),this._k=e,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?nu(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,nu(1))},e?"entries":"values",!e,!0),Ua(r)}};up("Set",function(e){return function(t){return e(this,0<arguments.length?t:void 0)}},{add:function(t){return pp.def(ap(this,"Set"),t=0===t?0:t,t)}},pp);function dp(t){return void 0===t}var gp=0,vp=1,bp=2,_p=3,mp=[_p,bp],yp=[["number"],["number","string"],["number","undefined"],["number","string","undefined"]],wp=Symbol("root"),Sp=Symbol("child");function kp(t,e){var r=1<arguments.length&&void 0!==e?e:wp;if(r!==wp&&r!==Sp)throw new Error("The second argument is used internally only and cannot be overwritten.");var n=Array.isArray(t),i=r===wp,o=gp;if(n){var a=t[0];if(0===t.length)o=vp;else if(i&&a instanceof Fh)o=_p;else if(i&&Array.isArray(a))o=kp(a,Sp);else if(2<=t.length&&t.length<=4){!t.some(function(t,e){return!yp[e].includes(ka(t))})&&(o=bp)}}return o}function xp(t){return""===t||null==t}function Ip(t){return{from:function(t){return{row:Math.min(t.from.row,t.to.row),col:Math.min(t.from.col,t.to.col)}}(t),to:function(t){return{row:Math.max(t.from.row,t.to.row),col:Math.max(t.from.col,t.to.col)}}(t)}}function Op(t,e){for(var r=t.from.row;r<=t.to.row;r++)for(var n=t.from.col;n<=t.to.col;n++)if(!1===e(r,n))return}function Ap(t,e,r,n,i,o){var a=Ip(e.range),s=Rp(a,r),u=Np(a,i),c=function(i,t,e){var o=t.getIn([e.row,e.col]);return{dataSource:t=t.withMutations(function(r){Op(i,function(t,e){r.setIn([t,e],null)});var t=i.from,e=t.row,n=t.col;r.setIn([e,n],o)})}}(a,r,s).dataSource,l=n.getIn([s.row,s.col,"style"]),f=Mp(a,n,s,l);return f=function(i,t,e){var o=t.getIn([e.row,e.col,"attr"]);return t.withMutations(function(t){var e=i.from,r=e.row,n=e.col;t.setIn([r,n,"attr"],o)})}(a,f=function(i,t,e){var o=t.getIn([e.row,e.col,"prop"]);return t.withMutations(function(r){Op(i,function(t,e){r.setIn([t,e,"prop"],null)});var t=i.from,e=t.row,n=t.col;r.setIn([e,n,"prop"],o)})}(a,f,s),s),"function"==typeof o&&o(a,f),t.merge({dataSource:c,styles:f,mergeCells:u})}function Tp(t,e,r,n,i,o){var a=e.data,s=e.stateBefore,u=e.templateBefore,c=(e.settingBefore,Ip(e.range));a=Cp(a);var l=Bp(c,i),f=function(t,e,r,n,i){var o=t.from,a=t.to,s=e.get("dataSource"),u=e.get("styles");n=n.map(function(t,n){return t.map(function(t,e){if(t&&(void 0!==t.style||zp.isMap(t)))return Cp(t);var r=null;return i&&i[n]&&i[n][e]&&i[n][e].rendererTemplateInfo&&(r=i[n][e].rendererTemplateInfo.prop),Cp({style:t,prop:r})})}),n=Lp.isList(n)?n:Cp(n);for(var c=o.row,l=0;c<=a.row;c++,l++){var f=s.get(c),h=r.get(l);if(h&&f){for(var p=u.get(c),d=n.get(l),g=o.col,v=0;g<=a.col;g++,v++){var b=h.get(v);f.get(g);f=f.set(g,b);var _=d.get(v);p=p.setIn([g,"style"],_.get("style"))}s=s.set(c,f),u=u.set(c,p)}}return{dataSource:s,styles:u}}(c,t,a,s,u),h=f.dataSource,p=f.styles;return"function"==typeof o&&o(c,h,p),t.merge({dataSource:h,styles:p,mergeCells:l})}var Cp=na.fromJS,zp=na.Map,Lp=na.List,Ep=na.is;function Np(t,e){if(t&&!function(t){return t.from.row===t.to.row&&t.from.col===t.to.col}(t)){var r=function(t){if(!t)return;var e={};return e.row=t.from.row,e.col=t.from.col,e.rowspan=t.to.row-t.from.row+1,e.colspan=t.to.col-t.from.col+1,e}(t);e=function(t,e){for(var r=!0,n=0,i=t.size;n<i;n++){var o=t.get(n);if(o.get("row")===e.get("row")&&o.get("col")===e.get("col")){t=t.set(n,e),r=!1;break}}r&&(t=t.push(e));for(var a=[],s=0,u=t.size;s<u;s++){var c=t.get(s);Ep(c,e)||Math.max(e.get("row"),c.get("row"))<=Math.min(e.get("row")+e.get("rowspan")-1,c.get("row")+c.get("rowspan")-1)&&Math.max(e.get("col"),c.get("col"))<=Math.min(e.get("col")+e.get("colspan")-1,c.get("col")+c.get("colspan")-1)&&a.push(s)}for(var l=0,f=a.length;l<f;l++)t=t.delete(a[l]-l);return t}(e,Cp(r))}return e}function Bp(t,e){if(t){var r=jp(e,t.from.row,t.from.col);void 0!==r&&(e=e.delete(r))}return e}function Mp(t,o,e,a){return o.withMutations(function(i){Op(t,function(t,e){var r=o.getIn([t,e,"style"]),n=function(t,e){var r=e&&e.get("sheetborder");if(r)return t?t.set("sheetborder",r):zp({sheetborder:r});return t}(a,r);i.setIn([t,e,"style"],n)})})}function Rp(t,n){var i={row:t.from.row,col:t.from.col};return Op(t,function(t,e){var r=n.getIn([t,e]);if(r&&"\n"!==r)return!(i={row:t,col:e})}),i}function jp(t,e,r){for(var n=0,i=t.size;n<i;n++){var o=t.get(n);if(o.get("row")<=e&&o.get("row")+o.get("rowspan")-1>=e&&o.get("col")<=r&&o.get("col")+o.get("colspan")-1>=r)return n}}function Pp(t,e,r){var n=jp(t,e,r);if(void 0!==n)return t.get(n)}function Fp(t,e){var r=t,n=e.to.row,i=e.to.col;if(r.size<=e.to.row){var o=r.size,a=r.get(0).size;r=r.setSize(e.to.row+1);for(var s=o;s<=e.to.row;s++)r=r.set(s,Hp().setSize(a).map(function(t){return qp({style:null,prop:null})}))}for(r.get(0).size<=e.to.col&&(r=r.map(function(t){return t=void 0===t?Hp().setSize(i+1).map(function(t){return qp({style:null,prop:null})}):Hp().setSize(i+1).map(function(t){return void 0===t&&(t=qp({style:null,prop:null})),t})})),n=e.from.row;n<=e.to.row;n++)for(i=e.from.col;i<=e.to.col;i++)r.getIn([n,i])&&(r=r.setIn([n,i,"style"],Up(Jp)));return r}function Dp(t,f,h,p){return t.withMutations(function(t){for(var e=0,r=f.from.row;r<=f.to.row;e++,r++)for(var n=0,i=f.from.col;i<=f.to.col;n++,i++){var o=t.getIn([r,i]);if(h){var a=h.getIn([e,n]),s=o&&o.get("style");if(s&&void 0!==s.get("format_id")&&((a=a||qp()).get("format_id")||(a=(a=a.set("format_id",s.get("format_id"))).set("format_data",s.get("format_data")))),a){a.get("sheetborder")||a.set("border",Up(Jp.border));var u=a.toJS(),c=void 0;r<f.to.row&&(c=h.getIn([e+1,n]));var l=void 0;i<f.to.col&&(l=h.getIn([e,n+1])),Wh(u,l,c),a=Up(u)}else a=Up(Jp);t.setIn([r,i,"style"],a)}p&&t.setIn([r,i,"prop"],p.getIn([e,n,"rendererTemplateInfo"]))}})}function Wp(t){var e=Math.max(t.from.row,t.to.row),r=Math.min(t.from.row,t.to.row),n=Math.max(t.from.col,t.to.col);return{minRow:r,minCol:Math.min(t.from.col,t.to.col),maxRow:e,maxCol:n}}var qp=na.Map,Up=na.fromJS,Hp=na.List,Jp={border:{"border-bottom":"transparent","border-left":"transparent","border-right":"transparent","border-top":"transparent"}};function Kp(t,F,D,W,q,U,H){var J,K,Z,V,G,$,Y,X,Q=null,tt=null,et=t.size,rt=t.get(0).size,nt=null,it=!1;return F.from.row==F.to.row&&F.from.col==F.to.col&&(it=!0),t.withMutations(function(t){for(var e=F.from.row;e<=F.to.row;e++)if(0<e)for(var r=F.from.col;r<=F.to.col;r++){if(Q=t.getIn([e,r,"style"]),Z=tt=K=null,V=!1,Q&&Q.get("sheetborder")&&0<=(G=Q.get("sheetborder")).indexOf("border-top-attr"))if(0<=G.indexOf("--")){X=G.split("--");for(var n=0;n<X.length;n++)if(($=X[n])&&0<=$.indexOf("border-top-attr")){2==(Y=$.split(":")).length&&(K=Y[1]);break}}else 2==(Y=G.split(":")).length&&(K=Y[1]);if((J=it&&W?W:t.getIn([e-1,r,"style"]))&&J&&J.get("sheetborder"))if(nt=G=J.get("sheetborder"),G)if(0<=G.indexOf("--")){X=G.split("--");for(var i=0;i<X.length;i++)0<=X[i].indexOf("border-bottom-show")?(2==(Y=X[i].split(":")).length&&(Z=Y[1]),Z==K&&(V=!0),V&&(null!=tt?tt+="--".concat(X[i]):tt=X[i])):null!=tt?tt+="--".concat(X[i]):tt=X[i];K&&!V&&(tt+="--border-bottom-show:".concat(K))}else 0<=G.indexOf("border-bottom-show")?K&&(tt="border-bottom-show:".concat(K)):tt=K?"".concat(G,"--border-bottom-show:").concat(K):G;else K&&(tt="border-bottom-show:".concat(K));null==tt&&K&&(tt="border-bottom-show:".concat(K));var o=!1;if(tt?nt?tt!=nt&&(o=!0):o=!0:nt&&(o=!0),o){var a=qp();J&&(a=J),tt?a=a.set("sheetborder",tt):a.get("sheetborder")&&(a=a.delete("sheetborder")),t.setIn([e-1,r,"style"],a)}}nt=tt=J=null;for(var s=F.from.col;s<=F.to.col;s++)if(0<s)for(var u=F.from.row;u<=F.to.row;u++){if(it&&null!=Q||(Q=t.getIn([u,s,"style"])),Z=tt=K=null,V=!1,Q&&Q.get("sheetborder")&&0<=(G=Q.get("sheetborder")).indexOf("border-left-attr"))if(0<=G.indexOf("--")){X=G.split("--");for(var c=0;c<X.length;c++)if(($=X[c])&&0<=$.indexOf("border-left-attr")){2==(Y=$.split(":")).length&&(K=Y[1]);break}}else 2==(Y=G.split(":")).length&&(K=Y[1]);if(J=it&&H?H:t.getIn([u,s-1,"style"]))if(nt=G=J.get("sheetborder"),G)if(0<=G.indexOf("--")){X=G.split("--");for(var l=0;l<X.length;l++)0<=X[l].indexOf("border-right-show")?(2==(Y=X[l].split(":")).length&&(Z=Y[1]),Z==K&&(V=!0),V&&(null!=tt?tt+="--".concat(X[l]):tt=X[l])):null!=tt?tt+="--".concat(X[l]):tt=X[l];K&&!V&&(tt+="--border-right-show:".concat(K))}else 0<=G.indexOf("border-right-show")?K&&(tt="border-right-show:".concat(K)):tt=K?"".concat(G,"--border-right-show:").concat(K):G;else K&&(tt="border-right-show:".concat(K));null==tt&&K&&(tt="border-right-show:".concat(K));var f=!1;if(tt?nt?tt!=nt&&(f=!0):f=!0:nt&&(f=!0),f){var h=qp();J&&(h=J),tt?h=h.set("sheetborder",tt):h.get("sheetborder")&&(h=h.delete("sheetborder")),t.setIn([u,s-1,"style"],h)}}nt=J=null;for(var p=F.from.row;p<=F.to.row;p++)if(p<et-1)for(var d=F.from.col;d<=F.to.col;d++){if(it&&null!=Q||(Q=t.getIn([p,d,"style"])),Z=tt=K=null,V=!1,Q&&Q.get("sheetborder")&&0<=(G=Q.get("sheetborder")).indexOf("border-bottom-attr"))if(0<=G.indexOf("--")){X=G.split("--");for(var g=0;g<X.length;g++)if(($=X[g])&&0<=$.indexOf("border-bottom-attr")){2==(Y=$.split(":")).length&&(K=Y[1]);break}}else 2==(Y=G.split(":")).length&&(K=Y[1]);J=it&&U?U:t.getIn([p+1,d,"style"]);var v=!1,b=!1;if(D&&0<=D.size){var _=Pp(D,p,d);v=void 0!==_&&(_.get("row")!==p||_.get("col")!==d);var m=Pp(D,p+1,d);b=void 0===m||m.get("row")===p+1&&m.get("col")===d}var y=K&&v&&b;if(y&&D&&0<D.size){var w=Pp(D,p,d);if(void 0!==w&&(w.get("row")!==p||w.get("col")!==d)){var S=t.getIn([w.get("row"),w.get("col"),"style","sheetborder"]);S&&0<=S.indexOf("border-bottom")&&(y=!1)}}if(J)if(nt=G=J.get("sheetborder"),G)if(0<=G.indexOf("--")){X=G.split("--");for(var k=0;k<X.length;k++)0<=X[k].indexOf("border-top-show")?y&&(2==(Y=X[k].split(":")).length&&(Z=Y[1]),Z==K&&(V=!0),V&&(null!=tt?tt+="--".concat(X[k]):tt=X[k])):null!=tt?tt+="--".concat(X[k]):tt=X[k];K&&!V&&y&&(tt+="--border-top-show:".concat(K))}else 0<=G.indexOf("border-top-show")?K&&y&&(tt="border-top-show:".concat(K)):tt=K&&y?"".concat(G,"--border-top-show:").concat(K):G;else K&&y&&(tt="border-top-show:".concat(K));null==tt&&K&&y&&(tt="border-top-show:".concat(K));var x=!1;if(tt?nt?tt!=nt&&(x=!0):x=!0:nt&&(x=!0),x){var I=qp();J&&(I=J),tt?I=I.set("sheetborder",tt):I.get("sheetborder")&&(I=I.delete("sheetborder")),t.setIn([p+1,d,"style"],I)}}nt=J=null;for(var O=F.from.col;O<=F.to.col;O++)if(O<rt-1)for(var A=F.from.row;A<=F.to.row;A++){if(it&&null!=Q||(Q=t.getIn([A,O,"style"])),Z=tt=K=null,V=!1,Q&&Q.get("sheetborder")&&0<=(G=Q.get("sheetborder")).indexOf("border-right-attr"))if(0<=G.indexOf("--")){X=G.split("--");for(var T=0;T<X.length;T++)if(($=X[T])&&0<=$.indexOf("border-right-attr")){2==(Y=$.split(":")).length&&(K=Y[1]);break}}else 2==(Y=G.split(":")).length&&(K=Y[1]);J=it&&q?q:t.getIn([A,O+1,"style"]);var C=!1,z=!1;if(D&&0<=D.size){var L=Pp(D,A,O);C=void 0!==L&&(L.get("row")!==A||L.get("col")!==F.to.col);var E=Pp(D,A,O+1);z=void 0===E||E.get("row")===A&&E.get("col")===O+1}var N=K&&C&&z;if(N&&D&&0<D.size){var B=Pp(D,A,O);if(void 0!==B&&(B.get("row")!==A||B.get("col")!==O)){var M=t.getIn([B.get("row"),B.get("col"),"style","sheetborder"]);M&&0<=M.indexOf("border-right")&&(N=!1)}}if(J&&J&&J.get("sheetborder"))if(nt=G=J.get("sheetborder"),G)if(0<=G.indexOf("--")){X=G.split("--");for(var R=0;R<X.length;R++)0<=X[R].indexOf("border-left-show")?N&&(2==(Y=X[R].split(":")).length&&(Z=Y[1]),Z==K&&(V=!0),V&&(null!=tt?tt+="--".concat(X[R]):tt=X[R])):null!=tt?tt+="--".concat(X[R]):tt=X[R];K&&!V&&N&&(tt+="--border-left-show:".concat(K))}else 0<=G.indexOf("border-left-show")?K&&N&&(tt="border-left-show:".concat(K)):tt=K&&N?"".concat(G,"--border-left-show:").concat(K):G;else K&&N&&(tt="border-left-show:".concat(K));null==tt&&K&&N&&(tt="border-left-show:".concat(K));var j=!1;if(tt?nt?tt!=nt&&(j=!0):j=!0:nt&&(j=!0),j){var P=qp();J&&(P=J),tt?P=P.set("sheetborder",tt):P.get("sheetborder")&&(P=P.delete("sheetborder")),t.setIn([A,O+1,"style"],P)}}})}function Zp(t,e,r,n,i,o){var a=e.change,s=e.apool,u=r,c=n;if(!a)return t;var l=null;if(s&&"string"==typeof s)try{l=JSON.parse(s)}catch(t){throw t}var f=l?(new C).fromJsonable(l):null,h=u.size-1,p=u.get(0)?u.get(0).size-1:0;if(a.forEach(function(t){var e=t[0],r=t[1];(rd(t[2],t[3])||rd(t[4],t[5]))&&(h<e&&(h=e),p<r&&(p=r))}),u.size<h+1){var d=u.size,g=u.get(0)?u.get(0).size:0;u=u.setSize(h+1),c=c.setSize(h+1);for(var v=d;v<=h;v++)u=u.set(v,$p().setSize(g)),c=c.set(v,$p().setSize(g).map(function(t){return Yp({style:null,prop:null})}))}return(void 0===u.get(0)||u.get(0).size<=p)&&(u=u.map(function(t){return t=void 0===t?$p().setSize(p+1):t.setSize(p+1)}),c=c.map(function(t){return t=void 0===t?$p().setSize(p+1).map(function(t){return Yp({style:null,prop:null})}):t.setSize(p+1).map(function(t){return void 0===t&&(t=Yp({style:null,prop:null})),t})})),a.forEach(function(t){var e=t[0],r=t[1];if(!(h<e||p<r)){u=u.setIn([e,r],t[3]);var n=f&&t[5]?z.moveOpsToNewPool(t[5],f,o):t[5];c=c.setIn([e,r,"attr"],n)}}),"function"==typeof i&&i(a,c),t.merge({dataSource:u,styles:c})}function Vp(t,e,r,n,i){if((e=function(t){t.range;var e=t.changes,r=t.templateUpdate,n=t;if(r){n.type=ia,n.templateBefore=r;for(var i=0,o=e.length;i<o;i++){var a=e[i][2];e[i][2]=e[i][3],e[i][3]=a}n.changes=e}return n}(e)).type===ia)return ed(t,e,r,n,i);var o=e.range,a=Wp(o),s=a.minRow,u=a.maxRow,c=a.minCol,l=a.maxCol,f=n,h=r;if(f.size<=u){var p=f.size,d=f.get(0)?f.get(0).size:0;f=f.setSize(u+1),h=h.setSize(u+1);for(var g=p;g<=u;g++)f=f.set(g,$p().setSize(d)),h=h.set(g,$p().setSize(d).map(function(t){return Yp({style:null,prop:null})}))}return(void 0===f.get(0)||f.get(0).size<=l)&&(f=f.map(function(t){return t=void 0===t?$p().setSize(l+1):t.setSize(l+1)}),h=h.map(function(t){return t=void 0===t?$p().setSize(l+1).map(function(t){return Yp({style:null,prop:null})}):$p().setSize(l+1).map(function(t){return void 0===t&&(t=Yp({style:null,prop:null})),t})})),h=h.withMutations(function(t){for(var e=s;e<=u;e++)for(var r=c;r<=l;r++)t.setIn([e,r,"prop"],null)}),f=f.withMutations(function(t){for(var e=s;e<=u;e++)for(var r=c;r<=l;r++)t.setIn([e,r],"")}),"function"==typeof i&&i(o,f,h),t.merge({dataSource:f,styles:h})}var Gp=na.fromJS,$p=na.List,Yp=na.Map;function Xp(t,e,a,r,n,i,o,s){var u,c,l,f=e.index,h=e.amount,p=e.command,d=r.get(0)?r.get(0).size:0,g=r.size,v=r.map(function(t,e){for(var r=f;r<f+h;r++)t=t.insert(r,"");return t}),b=a.map(function(t,e){t=t||$p().setSize(d).map(function(t){return null});for(var r=f;r<f+h;r++){var n=void 0;if(p&&f<=t.size){var i=f;"right"===p&&(i=f-1),t.get(i)&&(n=t.get(i)).delete("prop")}n=n||Yp({style:null,prop:null}),t=t.insert(r,n)}return t}),_={countRows:v.size,countCols:v.get(0).size},m=(t.get("mergeCells").toJS(),ep(n,_,"right",f,h));return Xh(t,{index:f,amount:h,colWidth:""}),"function"==typeof s&&s(f,h,(u=f,c=h,l=b,$p().setSize(g).map(function(t,e){t=t||$p();for(var r=0;r<c;r++){var n=void 0;if(null==p||"left"===p){var i=u;n=a.getIn([e,i]).delete("prop")}else{var o=u-1;n=l.getIn([e,r+o])}t=t.push(n)}return t})),shapes,h),t.merge({dataSource:v,styles:b,mergeCells:m})}function Qp(t,e,f){var r=e.ranges,h=e.stateBefore;if(Array.isArray(r)&&h){var n=kp(r);0==n&&(r=function(t){if(!Array.isArray(t))return[];var i=new Dh;return nf(t,function(t){var e=new Ph(t.from.row,t.from.col),r=new Ph(t.from.row,t.from.col),n=new Ph(t.to.row,t.to.col);i.addWithAllArguments(e,r,n)}),Array.from(i)}(r));var p=function(l,t){var e=1<arguments.length&&void 0!==t?t:{},r=e.keepDirection,f=void 0!==r&&r,h=e.propToCol;if(!mp.includes(l))throw new Error("Unsupported selection ranges schema type was provided.");return function(t){var e=l===_p,r=e?t.from.row:t[0],n=e?t.from.col:t[1],i=e?t.to.row:t[2],o=e?t.to.col:t[3];if("function"==typeof h&&("string"==typeof n&&(n=h(n)),"string"==typeof o&&(o=h(o))),dp(i)&&(i=r),dp(o)&&(o=n),!f){var a=r,s=n,u=i,c=o;r=Math.min(a,u),n=Math.min(s,c),i=Math.max(a,u),o=Math.max(s,c)}return[r,n,i,o]}}(n=kp(r));return nf(r,function(t){for(var e=La(p(t),4),r=e[0],n=e[1],i=e[2],o=e[3],a=0,s=r;s<=i;a++,s++)for(var u=function(t,e){if(!h)return f=f.setIn([s,e,"style","border"],null),"continue";var r=h[a][t];if(r){var n=Object.keys(r);if(n&&0<n.length){var i=Yp();nf(n,function(t){i=i.set(t,r[t])}),f=f.setIn([s,e,"style","border"],i)}else f=f.setIn([s,e,"style","border"],null)}else f=f.setIn([s,e,"style","border"],null)},c=0,l=n;l<=o;c++,l++)u(c,l)}),t.merge({styles:f})}}function td(t,e,n){function i(t,e,r){return r.getIn([t,e,"style"])||(r=r.updateIn([t,e,"style"],function(t){return t=(t=t||Yp()).set("border",Yp())})),r}var r=e.range,o=e.style,a=e.borderType,s=e.borderColor,u="";if(0<(o=o.replace("|",":")).indexOf(":")?u=o.split(":"):0<o.indexOf("|")&&(u=o.split("|")),3!==u.length||"sheetborder"!==u[0])return t;a=u[1],s=u[2];var c,l,f=n.size-1,h=n.get(0)?n.get(0).size-1:0,p=Math.min(r.from.row,f),d=Math.min(r.from.col,h),g=Math.min(r.to.row,f),v=Math.min(r.to.col,h);if(2<qh(s)&&(s="transparent"),n&&(c=n.size),"border-left"===a)for(var b=p;b<=g;b+=1)n=(n=i(b,d,n)).updateIn([b,d,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set(a,s)}),0<=d-1&&(n=(n=i(b,d-1,n)).updateIn([b,d-1,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set("border-right",s)}));else if("border-right"===a)for(var _=p;_<=g;_+=1){var m=(n=(n=i(_,v,n)).updateIn([_,v,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set(a,s)})).get(_).size;v+1<m&&(n=(n=i(_,v+1,n)).updateIn([_,v+1,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set("border-left",s)}))}else if("border-top"===a)for(var y=d;y<=v;y+=1)n=(n=i(p,y,n)).updateIn([p,y,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set(a,s)}),0<=p-1&&(n=(n=i(p-1,y,n)).updateIn([p-1,y,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set("border-bottom",s)}));else if("border-bottom"===a)for(var w=d;w<=v;w+=1)n=(n=i(g,w,n)).updateIn([g,w,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set(a,s)}),g+1<c&&(n=(n=i(g+1,w,n)).updateIn([g+1,w,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set("border-top",s)}));else if("border-all"===a){for(var S=p;S<=g;S+=1)for(var k=d;k<=v;k+=1)n=(n=i(S,k,n)).updateIn([S,k,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=(t=(t=(t=t.set("border-left",s)).set("border-right",s)).set("border-top",s)).set("border-bottom",s)});[{col:d-1,borderType:"border-right"},{col:v+1,borderType:"border-left"}].forEach(function(e){for(var t=p;t<=g;t++){var r=n.get(t).size;0<=e.col&&e.col<r&&(n=(n=i(t,e.col,n)).updateIn([t,e.col,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set(e.borderType,s)}))}}),[{row:p-1,borderType:"border-bottom"},{row:g+1,borderType:"border-top"}].forEach(function(e){if(0<=e.row&&e.row<c)for(var t=d;t<=v;t++)n=(n=i(e.row,t,n)).updateIn([e.row,t,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set(e.borderType,s)})})}else if("border-inner"===a){if(p<g||d<v)for(var x=p;x<=g;x+=1)for(var I=d;I<=v;I+=1)n=i(x,I,n),x===p?n=n.updateIn([x,I,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set("border-bottom",s)}):x===g&&(n=n.updateIn([x,I,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set("border-top",s)})),(x===g||x===p)&&d<I&&I<v&&(n=n.updateIn([x,I,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=(t=t.set("border-left",s)).set("border-right",s)})),I===d?n=n.updateIn([x,I,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set("border-right",s)}):I===v&&(n=n.updateIn([x,I,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set("border-left",s)})),(I===d||I===v)&&p<x&&x<g&&(n=n.updateIn([x,I,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=(t=t.set("border-top",s)).set("border-bottom",s)})),p<x&&x<g&&d<I&&I<v&&(n=n.updateIn([x,I,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=(t=(t=(t=t.set("border-left",s)).set("border-right",s)).set("border-top",s)).set("border-bottom",s)}))}else if("border-outer"===a){for(var O=p;O<=g;O+=1)n=(n=i(O,d,n)).updateIn([O,d,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set("border-left",s)}),n=(n=i(O,v,n)).updateIn([O,v,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set("border-right",s)});for(var A=d;A<=v;A+=1)n=(n=i(p,A,n)).updateIn([p,A,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set("border-top",s)}),n=(n=i(g,A,n)).updateIn([g,A,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set("border-bottom",s)});[{col:d-1,borderType:"border-right"},{col:v+1,borderType:"border-left"}].forEach(function(e){for(var t=p;t<=g;t++){var r=n.get(t).size;0<=e.col&&e.col<r&&(n=(n=i(t,e.col,n)).updateIn([t,e.col,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set(e.borderType,s)}))}}),[{row:p-1,borderType:"border-bottom"},{row:g+1,borderType:"border-top"}].forEach(function(e){if(0<=e.row&&e.row<c)for(var t=d;t<=v;t++)n=(n=i(e.row,t,n)).updateIn([e.row,t,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set(e.borderType,s)})})}else if("border-horizontal"===a){for(var T=p;T<g;T+=1)for(var C=d;C<=v;C+=1)n=(n=i(T,C,n)).updateIn([T,C,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set("border-bottom",s)});for(var z=p+1;z<=g;z+=1)for(var L=d;L<=v;L+=1)n=(n=i(z,L,n)).updateIn([z,L,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set("border-top",s)})}else if("border-vertical"===a){for(var E=d;E<v;E+=1)for(var N=p;N<=g;N+=1)n=(n=i(N,E,n)).updateIn([N,E,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set("border-right",s)});for(var B=d+1;B<=v;B+=1)for(var M=p;M<=g;M+=1)n=(n=i(M,B,n)).updateIn([M,B,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set("border-left",s)})}else if("border-clear"===a){for(var R=p;R<=g;R+=1)for(var j=d;j<=v;j+=1)n=(n=i(R,j,n)).updateIn([R,j,"style","border"],function(){return Yp({"border-top":"transparent","border-bottom":"transparent","border-left":"transparent","border-right":"transparent"})});[{col:d-1,borderType:"border-right"},{col:v+1,borderType:"border-left"}].forEach(function(e){for(var t=p;t<=g;t++){var r=n.get(t).size;0<=e.col&&e.col<r&&(n=(n=i(t,e.col,n)).updateIn([t,e.col,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set(e.borderType,"transparent")}))}}),[{row:p-1,borderType:"border-bottom"},{row:g+1,borderType:"border-top"}].forEach(function(e){if(0<=e.row&&e.row<c)for(var t=d;t<=v;t++)n=(n=i(e.row,t,n)).updateIn([e.row,t,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set(e.borderType,"transparent")})})}else if("border-change"===a){for(var P=p;P<=g;P+=1)for(var F=d;F<=v;F+=1){var D=(n=i(P,F,n)).getIn([P,F,"style","border"]);if(D&&0<D.size){for(var W=D.keys(),q=(Na(l=W)||Ba(l)||Ma()).slice(0),U=q.length,H=!1,J=0;J<U;J++)if("transparent"!==D.get(q[J])){H=!0;break}H&&q&&0<q.length&&function(){var e=Yp();nf(q,function(t){e=e.set(t,s)}),n=n.setIn([P,F,"style","border"],e)}()}else n=n.updateIn([P,F,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=(t=(t=(t=t.set("border-left",s)).set("border-right",s)).set("border-top",s)).set("border-bottom",s)})}[{col:d-1,borderType:"border-right"},{col:v+1,borderType:"border-left"}].forEach(function(e){for(var t=p;t<=g;t++){var r=n.get(t).size;0<=e.col&&e.col<r&&(n=(n=i(t,e.col,n)).updateIn([t,e.col,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set(e.borderType,s)}))}}),[{row:p-1,borderType:"border-bottom"},{row:g+1,borderType:"border-top"}].forEach(function(e){if(0<=e.row&&e.row<c)for(var t=d;t<=v;t++)n=(n=i(e.row,t,n)).updateIn([e.row,t,"style","border"],function(t){return t=t||Yp(),Yp.isMap(t)||(t=Gp(t)),t=t.set(e.borderType,s)})})}return t.merge({styles:n})}var ed=function(t,e,r,n,i){var o,a=e.range,s=e.changes,u=e.templateBefore,c=Wp(a),l=c.minRow,f=c.maxRow,h=c.minCol,p=c.maxCol,d=r;u&&(o=u.template)instanceof Array&&0<o.length&&(d=r.withMutations(function(t){for(var e=l;e<=f;e++)for(var r=h;r<=p;r++){var n=e-l,i=r-h;o[n]&&o[n][i]&&o[n][i].rendererTemplateInfo&&t.setIn([e,r,"prop"],Gp(o[n][i].rendererTemplateInfo.prop))}}));var g=n.withMutations(function(e){s.forEach(function(t){e.setIn([t[0],t[1]],t[2])})});return"function"==typeof i&&i(a,g,d),t.merge({dataSource:g,styles:d})};function rd(t,e){return(!xp(t)||!xp(e))&&t!==e}var nd=Ls(5),id="find",od=!0;id in[]&&Array(1)[id](function(){od=!1}),Ee(Ee.P+Ee.F*od,"Array",{find:function(t,e){return nd(this,t,1<arguments.length?e:void 0)}}),ru(id);var ad=Object.assign,sd=!ad||pe(function(){var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(t){e[t]=t}),7!=ad({},t)[r]||Object.keys(ad({},e)).join("")!=n})?function(t,e){for(var r=Is(t),n=arguments.length,i=1,o=rh.f,a=Ha.f;i<n;)for(var s,u=Ja(arguments[i++]),c=o?Fs(u).concat(o(u)):Fs(u),l=c.length,f=0;f<l;)s=c[f++],ye&&!a.call(u,s)||(r[s]=u[s]);return r}:ad;Ee(Ee.S+Ee.F,"Object",{assign:sd});function ud(t,e,r,n){var i=e.size,o=e.get(0)&&e.get(0).size||1;return i<=t&&(e=e.setSize(t+1).map(function(t){return t=t||pd().setSize(o)}),r=r.setSize(t+1).map(function(t){return t=t||pd().setSize(o).map(function(){return dd()})}),n=n.setSize(t+1)),{dataSource:e,styles:r,rowsHeight:n}}function cd(e,t,r,n){return(t.get(0)&&t.get(0).size||1)<=e&&(t=t.map(function(t){return t=t.setSize(e+1)}),r=r.map(function(t){return t=t.setSize(e+1).map(function(t){return t||dd()})}),n=n.setSize(e+1)),{dataSource:t,styles:r,colsWidth:n}}function ld(t,e,r){var n=ud(t,r.get("dataSource"),r.get("styles"),r.get("rowsHeight"));r=r.merge(n);var i=cd(e,r.get("dataSource"),r.get("styles"),r.get("colsWidth"));return r=r.merge(i)}var fd=function(){function r(t,e){xa(this,r),this.content=t||{},this.config=e||{},this.time=new Date}return Oa(r,[{key:"needCommit",value:function(){return!this.config.localOnly}},{key:"toJson",value:function(){return this.toFullJson()}},{key:"toFullJson",value:function(){var t=this.getType(),e=+this.time;return Object.assign({type:t,time:e},this.content)}},{key:"invert",value:function(){var t=this._invert(),e=this.content.localOnly;return t.config.localOnly=e&&!e,t}},{key:"getType",value:function(){}},{key:"_invert",value:function(){}}]),r}(),hd=function(){function t(){return xa(this,t),za(this,Ta(t).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ca(t,e)}(t,fd),Oa(t,[{key:"getType",value:function(){return"et"}},{key:"needCommit",value:function(){return!1}},{key:"_invert",value:function(){return new t({type:"et"})}}]),t}(),pd=na.List,dd=na.Map,gd=["d","s","l",Tf,"cs"],vd=function(t,e,r,n){var i=e.index,o=e.amount;if("number"!=typeof i||"number"!=typeof o)return t;for(var a=r.get(0).size,s=t.get("rowsHeight"),u=0;u<o;u++)r=r.insert(i,Wi().setSize(a)),n=n.insert(i,Wi().setSize(a).map(function(){return bi()})),s=s.insert(i,void 0);return t.merge({dataSource:r,styles:n,rowsHeight:s})},bd=function(t,e,r,n){var i=e.index,o=e.amount;if("number"!=typeof i||"number"!=typeof o)return t;r=r.map(function(t){for(var e=0;e<o;e++)t=t.insert(i,void 0);return t}),n=n.map(function(t){for(var e=0;e<o;e++)t=t.insert(i,bi());return t});for(var a=t.get("colsWidth"),s=0;s<o;s++)a=a.insert(i,void 0);return t.merge({dataSource:r,styles:n,colsWidth:a})},_d=function(t,e,r,n){var i=e.index,o=e.amount;if("number"!=typeof i||"number"!=typeof o)return t;var a=t.get("rowsHeight");return r=r.splice(i,o),n=n.splice(i,o),a=a.splice(i,o),t.merge({dataSource:r,styles:n,rowsHeight:a})},md=function(t,e,r,n){var i=e.index,o=e.amount;if("number"!=typeof i||"number"!=typeof o)return t;r=r.map(function(t){return t=t.splice(i,o)}),n=n.map(function(t){return t=t.splice(i,o)});var a=t.get("colsWidth");return a=a.splice(i,o),t.merge({dataSource:r,styles:n,colsWidth:a})},yd=na.fromJS,wd=na.List,Sd=function(t,a){return t.forEach(function(t){var e=t[0],r=t[1];if(a.size<=e){var n=a.size,i=a.get(0)?a.get(0).size:0;a=a.setSize(e+1);for(var o=n;o<=e;o++)a=a.set(o,wd().setSize(i))}(void 0===a.get(0)||a.get(0).size<=r)&&(a=a.map(function(t){return t=void 0===t?wd().setSize(r+1):t.setSize(r+1)})),a=a.setIn([t[0],t[1]],t[3])}),{dataSource:a}},kd="endsWith",xd=""[kd];Ee(Ee.P+Ee.F*Mh(kd),"String",{endsWith:function(t,e){var r=Bh(this,t,kd),n=1<arguments.length?e:void 0,i=Vt(r.length),o=void 0===n?i:Math.min(Vt(n),i),a=String(t);return xd?xd.call(r,a,o):r.slice(o-a.length,o)===a}});function Id(t,e){var r=e.cellLinks;return t.withMutations(function(t){r.forEach(function(e){t.get(e[0])&&t.updateIn([e[0],e[1]],function(t){return(t=t||Ad()).set("prop",Ad(e[3].prop))})})})}var Od=Ct(function(t,e){function l(t){return t.split('"').length-1}var r;r=function(t){var e,r,n,i,o,a,s,u=[],c=0;for(1<(n=t.split("\n")).length&&""===n[n.length-1]&&n.pop(),e=0,r=n.length;e<r;e+=1){for(n[e]=n[e].split("\t"),i=0,o=n[e].length;i<o;i+=1)u[c]||(u[c]=[]),a&&0===i?(s=u[c].length-1,u[c][s]=u[c][s]+"\n"+n[e][0],a&&1&l(n[e][0])&&(a=!1,u[c][s]=u[c][s].substring(0,u[c][s].length-1).replace(/""/g,'"'))):a=i===o-1&&0===n[e][i].indexOf('"')&&1&l(n[e][i])?(u[c].push(n[e][i].substring(1).replace(/""/g,'"')),!0):(u[c].push(n[e][i].replace(/""/g,'"')),!1);a||(c+=1)}return u},e.parse=r}),Ad=(Od.parse,na.Map),Td="startsWith",Cd=""[Td];Ee(Ee.P+Ee.F*Mh(Td),"String",{startsWith:function(t,e){var r=Bh(this,t,Td),n=Vt(Math.min(1<arguments.length?e:void 0,r.length)),i=String(t);return Cd?Cd.call(r,i,n):r.slice(n,n+i.length)===i}});var zd,Ld,Ed=/"/g;(Ld={})[zd="fontcolor"]=function(e){return function(t){return e(this,"font","color",t)}}(function(t,e,r,n){var i=String(Nt(t)),o="<"+e;return""!==r&&(o+=" "+r+'="'+String(n).replace(Ed,"&quot;")+'"'),o+">"+i+"</"+e+">"}),Ee(Ee.P+Ee.F*pe(function(){var t=""[zd]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",Ld);function Nd(t,e,r){var n={},i=pe(function(){return!!Md[t]()||"​"!="​"[t]()}),o=n[t]=i?e(Fd):Md[t];r&&(n[r]=o),Ee(Ee.P+Ee.F*i,"String",n)}function Bd(t){var e=ge(t,!1);if("string"==typeof e&&2<e.length){var r,n,i,o=(e=$d?e.trim():Hd(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=e.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+e}for(var a,s=e.slice(2),u=0,c=s.length;u<c;u++)if((a=s.charCodeAt(u))<48||i<a)return NaN;return parseInt(s,n)}}return+e}var Md="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",Rd="["+Md+"]",jd=RegExp("^"+Rd+Rd+"*"),Pd=RegExp(Rd+Rd+"*$"),Fd=Nd.trim=function(t,e){return t=String(Nt(t)),1&e&&(t=t.replace(jd,"")),2&e&&(t=t.replace(Pd,"")),t},Dd=Nd,Wd=rs.f,qd=Za.f,Ud=Ie.f,Hd=Dd.trim,Jd="Number",Kd=$t[Jd],Zd=Kd,Vd=Kd.prototype,Gd=At(Ks(Vd))==Jd,$d="trim"in String.prototype;if(!Kd(" 0o1")||!Kd("0b1")||Kd("+0x1")){Kd=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof Kd&&(Gd?pe(function(){Vd.valueOf.call(r)}):At(r)!=Jd)?Pa(new Zd(Bd(e)),r,Kd):Bd(e)};for(var Yd,Xd=ye?Wd(Zd):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Qd=0;Xd.length>Qd;Qd++)be(Zd,Yd=Xd[Qd])&&!be(Kd,Yd)&&Ud(Kd,Yd,qd(Zd,Yd));(Kd.prototype=Vd).constructor=Kd,Ce($t,Jd,Kd)}var tg=na.fromJS,eg=na.Iterable,rg={d:"dataSource",s:"styles",m:"mergeCells",rh:"rowsHeight",cw:"colsWidth",tp:"tableProps"},ng=na.fromJS,ig=na.List,og=na.Map,ag=na.fromJS;up("Map",function(e){return function(t){return e(this,0<arguments.length?t:void 0)}},{get:function(t){var e=pp.getEntry(ap(this,"Map"),t);return e&&e.v},set:function(t,e){return pp.def(ap(this,"Map"),0===t?0:t,e)}},pp,!0);function sg(t){var e=t.get("dataSource"),r=t.get("styles"),n=e.size,i=e.get(0)&&e.get(0).size||0,o=function(t,e,r,n){for(var i=null,o=null,a=!1,s=null,u=null,c=0;c<r;c++)for(var l=0;l<n;l++)i=t.getIn([c,l]),e.getIn([c])||(e=e.updateIn([c],function(t){return t||{}})),e.getIn([c,l])||(e=e.updateIn([c,l],function(t){return t||{}})),o=e.getIn([c,l,"attr"]),s={text:i,attribs:o},z.shouldFixAText(s)&&(u=z.fixAText(s),t=t.setIn([c,l],u.text),e=e.setIn([c,l,"attr"],u.attribs),a=!0);return{ds:t,st:e,hasChanged:a}}(e,r,n,i);return o.hasChanged?t.merge({dataSource:o.ds,styles:o.st}):t}function ug(o){return function(t,e){var r=t.get("styles"),n=t.get("dataSource"),i=t.get("mergeCells");t.get("sheetFreeze"),t.get("shapes");switch(e.type){case ca:return t.set("dataSource",e.dataSource).set("styles",e.styles);case"k":return function(t,e,r){var n,o=e.k,i=o.r,a=o.c,s={},u=o,c=u.d,l=u.dt,f=u.r,h=u.c;if("set"===l)0<(n="string"==typeof c?Od.parse(c):c).length&&(s.dataSource=na.fromJS(n),f=n.length);else if("map"===l){var p=Math.max(f,i||1),d=Math.max(h,a||1),g=ba(p,d);g=g.withMutations(function(t){for(var e=0;e<c.length;e++){var r=c[e][0],n=c[e][1],i=c[e][2];0<=r&&r<p&&0<=n&&n<d&&t.setIn([r,n],i)}}),s.dataSource=g}var v=u.m;v&&(s.mergeCells=na.fromJS(v));var b=u.rh;b&&(s.rowsHeight=na.fromJS(b));var _=u.cw;_&&(s.colsWidth=na.fromJS(_));var m=u.s,y=u.st,w="import"===o.tt;if("set"===y){var S=na.List();S=S.withMutations(function(i){for(var t=function(n){i.push(na.List());for(var t=function(r){i=i.updateIn([n,r],function(t){if(t=t||na.Map(),m[n][r]&&void 0!==m[n][r].style)return na.fromJS(m[n][r]);var e=m[n][r];return o.dv||w||(e?e.sheetborder||e.border||(e.border=Jp.border):e=Jp),t.set("style",na.fromJS(e))})},e=0;m[n]&&e<h;e++)t(e)},e=0;e<f;e++)t(e)}),s.styles=S}else if("map"===y){var k=Math.max(f,i||1),x=Math.max(h,a||1),I=_a(k,x);I=I.withMutations(function(t){for(var e=0;e<m.length;e++){var r=m[e][0],n=m[e][1],i=m[e][2];0<=r&&r<k&&0<=n&&n<x&&(o.dv||w||(i?i.sheetborder||i.border||(i.border=Jp.border):i=Jp),t.setIn([r,n,"style"],tg(i)))}}),s.styles=I}else{var O=Math.max(f,i||1),A=Math.max(h,a||1),T=_a(O,A);s.styles=T}var C=u.t,z=u.tt;"set"===z?0<C.length&&(s.styles=Id(s.styles,{cellLinks:C})):"import"===z&&0<C.length&&(s.styles=Id(s.styles,{cellLinks:C}));var L=u.at;return L&&(s.styles=s.styles.withMutations(function(e){L.forEach(function(t){e.updateIn([t[0],t[1],"attr"],function(){return t[2]})})})),u.ap&&r.fromJsonable(u.ap),u.tp&&(s.tableProps=na.fromJS({paddingLeft:u.tp.paddingLeft,paddingRight:u.tp.paddingRight})),u.dv&&(s.dv=u.dv),t.merge(va.merge(s))}(t,e,o);case la:return sg(t);case"dataChange":return Zp(t,e,n,r,null,o);case"updateData":return t.set("dataSource",e.dataSource);case"emptycell":return Vp(t,e,r,n);case ia:return ed(t,e,r,n);case"mergeCells":return Ap(t,e,n,r,i);case"unmergeCells":return e.settingBefore?Tp(t,e,0,0,i):function(t,e,r,n,i,o){var a=Ip(e.range),s=Rp(a,r),u=Bp(a,i),c=n.getIn([s.row,s.col,"style"]),l=Mp(a,n,s,c);return"function"==typeof o&&o(a),t.merge({styles:l,mergeCells:u}).set("borderLevel",obj.borderLevel)}(t,e,n,r,i);case"createRow":return function(t,e,r,n,i,o,a,s){var u=e.index,c=e.amount,l=e.command;l=l||"below";var f,h=n.get(0)?n.get(0).size:0,p=(n.size,$p().setSize(h).map(function(t){return null})),d=u;null!=l&&"below"!==l||(d-=1),d=Math.min(d,r.size-1),f=r.get(d).map(function(t){return t&&t.delete("prop")});for(var g=c-1,v=n.insert(u,p),b=r.insert(u,f);0<g;)v=v.insert(u,p),b=b.insert(u,f),g--;var _={countRows:v.size,countCols:v.get(0).size},m=(t.get("mergeCells").toJS(),ep(i,_,"down",u,c)),y=Yh(t,{index:u,amount:c,rowHeight:""});return"function"==typeof s&&s(u,c,function(t,e,r){for(var n=$p(),i=0;i<e;)n=n.push(r.get(t+i)),i++;return n}(u,c,b),shapes),t.merge({dataSource:v,styles:b,rowsHeight:y,mergeCells:m})}(t,e,r,n,i);case"createCol":return Xp(t,e,r,n,i);case"removeRow":return function(t,e,r,n,i,o,a,s){var u=e.index,c=e.amount;e.command;c=c||1,"number"!=typeof u&&(u=-c);var l=n.size;if(l<=0)return t;u=(l+u)%l;var f=n.splice(u,c),h=r.splice(u,c),p={};p=0===f.size&&void 0===f.get(0)?{countRows:n.size,countCols:0}:{countRows:n.size,countCols:r.get(0).size};t.get("mergeCells").toJS();var d=ep(i,p,"up",u,c),g=Yh(t,{index:u,amount:c});return"function"==typeof s&&s(u,c,shapes),t.merge({dataSource:f,styles:h,mergeCells:d,rowsHeight:g})}(t,e,r,n,i);case"removeCol":return function(t,e,r,n,i,o,a,s){var u=e.index,c=e.amount;e.command;c=c||1,"number"!=typeof u&&(u=-c);var l=n.get(0)&&n.get(0).size||0;if(l<=0)return t;u=(l+u)%l;var f=n.map(function(t,e){return t.splice(u,c)}),h=r.map(function(t,e){return t.splice(u,c)}),p={countRows:f.size,countCols:f.get(0).size},d=(t.get("mergeCells").toJS(),ep(i,p,"left",u,c)),g=Xh(t,{index:u,amount:c});return"function"==typeof s&&s(u,c,shapes),t.merge({dataSource:f,styles:h,mergeCells:d,colsWidth:g})}(t,e,r,n,i);case"specCreateRow":return function(t,e,r,n,i,o,a){var s,u=e.index,c=e.data,l=e.amount,f=(e.command,e.headers,e.stateBefore),h=e.settingBefore,p=f.cellsStyles,d=f.rowHeights,g=($p().setSize(n.get(0)?n.get(0).size:0),n),v=r,b=0,_=Gp(c);for(l=l||_.size;b<l;)g=g.insert(u+b,_.get(b)),b++;p=p.map(function(t){return t.map(function(t){return t&&(void 0!==t.style||Yp.isMap(t))?Gp(t):(Wh(t),Gp({style:t}))})}),v=(s=v).splice.apply(s,[u,0].concat(Ea(Gp(p).toArray())));var m=Gp(h),y=Yh(t,{index:u,amount:l,rowHeight:d});return"function"==typeof a&&a(u,l,h,d,p,_,shapes),t.merge({dataSource:g,styles:v,mergeCells:m,rowsHeight:y})}(t,e,r,n);case"specCreateCol":return function(t,e,r,n,i,o,a){var s,u=e.index,c=e.data,l=e.amount,f=(e.command,e.headers,e.stateBefore),h=e.settingBefore,p=f.colWidths,d=f.cellsStyles;c=Gp(c),l=l||c.get(0).size,r&&(s=r.map(function(t,e){var r,n=[u,0];return r=c.get(e)?c.get(e).toJS():new Array(c.get(0).size),Array.prototype.push.apply(n,r),t.splice.apply(t,n)})),d=d&&d.map(function(t){return t.map(function(t){return t&&(void 0!==t.style||Yp.isMap(t))?Gp(t):(Wh(t),Gp({style:t}))})}),d=$p.isList(d)?d:Gp(d);var g=n;n&&(g=n.map(function(t,e){var r,n;return d&&(r=d.get(e)),n=r?Gp(d.get(e)):$p().setSize(d.get(0).size).map(function(t){return Yp({style:null,prop:null})}),t.splice.apply(t,[u,0].concat(Ea(n.toArray())))}));var v=Gp(h),b=Xh(t,{index:u,amount:l,colWidth:p});return"function"==typeof a&&a(u,l,h,p,d,s,shapes,0),t.merge({dataSource:s,styles:g,mergeCells:v,colsWidth:b})}(t,e,n,r);case oa:return function(t,e,r,n,i,o){var s=e.range,a=e.style,u="";0<(a=a.replace("|",":")).indexOf(":")?u=a.split(":"):0<a.indexOf("|")&&(u=a.split("|"));u.length;var c=r,l=n;return s.to.row>=c.size&&function(){l=l.setSize(s.to.row+1);var t=c.size,e=c.get(0).size;c=c.setSize(s.to.row+1);for(var r=t;r<=s.to.row;r++)l=l.update(r,function(t){return t=ig().setSize(e),s.to.col>=e&&(t=t.setSize(s.to.col+1)),t}),c=c.update(r,function(t){return t=ig().setSize(e),s.to.col>=e&&(t=t.setSize(s.to.col+1)),t.map(function(t){return og({style:null,prop:null})})})}(),c=c.withMutations(function(t){for(var e=t.get(0).size,r=s.from.row,n=s.to.row;r<=n;r++){var i=t.get(r);null==i&&(t=t.update(r,function(t){return ig().setSize(e).map(function(t){return og({style:null,prop:null})})}));for(var o=s.from.col,a=s.to.col;o<=a;o++)t.updateIn([r,o,"style"],function(t){return(t=t||og()).set(u[0],u[1])})}}),-1===a.indexOf("decimal")?"function"==typeof i&&i(s,c):"function"==typeof o&&o(s,l,c),t.set("styles",c).set("dataSource",l)}(t,e,r,n);case aa:return function(t,e,r,n,i,o){var l=e.range,f=e.stateBefore,a=e.style,h=l.from.row,p=l.from.col;a&&0<=a.indexOf("sheetborder")&&(h=Math.max(h-1,0),p=Math.max(p-1,0));var s=r.withMutations(function(a){for(var s=0,u=h,c=l.to.row;u<=c;s++,u++)for(var t=function(t,e,r){var n=f[s][t],i=void 0;u<c&&(i=f[s+1][t]);var o=void 0;e<r&&(o=f[s][t+1]),Wh(n,o,i),a.updateIn([u,e,"style"],function(t){return og(n)})},e=0,r=p,n=l.to.col;r<=n;e++,r++)t(e,r,n)}),u=n;return-1===a.indexOf("decimal")?"function"==typeof i&&i(l,s):"function"==typeof o&&o(l,u,s),t.set("styles",s)}(t,e,r,n);case"cleanStyle":return function(t,e,r,n,i){var o=e.range,a=Fp(r,o);return"function"==typeof i&&i(o,n),t.set("styles",a)}(t,e,r,n);case"undoCleanStyle":return function(t,e,r,n,i){var o=e.stateBefore,a=e.range,s=ng(o),u=Dp(r,a,s);return"function"==typeof i&&i(a,u,n),t.set("styles",u)}(t,e,r,n);case sa:return function(t,e){for(var o=e.range,a=e.prop,r=o.from.row,n=o.to.row;r<=n;r++)for(var i=o.from.col,s=o.to.col;i<=s;i++)t=ld(r,i,t);var u=t.get("styles"),c=t.get("dataSource"),l=u.withMutations(function(t){for(var e=o.from.row,r=o.to.row;e<=r;e++)for(var n=o.from.col,i=o.to.col;n<=i;n++)t.updateIn([e,n],function(t){return t=(t=t||Ad()).set("prop",Ad(a))})}),f=a&&void 0!==a.linkvalue&&null!==a.linkurl?a.linkvalue:"",h=c.withMutations(function(t){for(var e=o.from.row,r=o.to.row;e<=r;e++)for(var n=o.from.col,i=o.to.col;n<=i;n++)t.setIn([e,n],f)});return t.merge({styles:l,dataSource:h})}(t,e);case ua:return function(t,e,r,n,i){var o=e.range,a=e.prop,s=(e.oldProp,r.withMutations(function(t){for(var e=o.from.row;e<=o.to.row;e++)for(var r=o.from.col;r<=o.to.col;r++)t.updateIn([e,r],function(t){return(t=t||Ad()).set("prop",null)})})),u=a&&void 0!==a.linkvalue&&null!==a.linkurl?a.linkvalue:"",c=n.withMutations(function(t){for(var e=o.from.row,r=o.to.row;e<=r;e++)for(var n=o.from.col,i=o.to.col;n<=i;n++)t.setIn([e,n],u)});return"function"==typeof i&&i(o,u),t.merge({styles:s,dataSource:c})}(t,e,r,n);case"matchProp":return function(t,e,r,n,i){var o=e.range,a=e.stateUpdated,s=Dp(r,o,ag(a));return"function"==typeof i&&i(o,s,n),t.set("styles",s)}(t,e,r,n);case"undoMatchProp":return function(t,e,r,n,i){var o=e.range,a=e.stateBefore,s=Dp(r,o,ag(a));return"function"==typeof i&&i(o,s,n),t.set("styles",s)}(t,e,r,n);case"rowResize":return function(t,e,r){var o=e.row,n=e.newSize,a=(e.oldSize,n);return"function"==typeof r&&r(o,a),"number"==typeof o?t.setIn(["rowsHeight",o],a):t.withMutations(function(t){for(var e=o.from,r=o.to,n=0;e<=r;e++,n++){var i=0;i=a instanceof Array?a[n]:a,t.setIn(["rowsHeight",e],i)}})}(t,e);case"colResize":return function(t,e,r){var o=e.col,n=e.newSize,a=(e.oldSize,e.width||n);return a=Math.max(a,20),"function"==typeof r&&r(o,a),"number"==typeof o?t.setIn(["colsWidth",o],a):t.withMutations(function(t){for(var e=o.from,r=o.to,n=0;e<=r;e++,n++){var i=0;i=a instanceof Array?a[n]:a,t.setIn(["colsWidth",e],i)}})}(t,e);case"paste":return function(t,e,r,n,i,o){var a=e.range,s=e.apool,u=e.changes,c=e.stateBefore,l=e.stateUpdated,f=e.cutData,h=(e.templateBefore,e.templateUpdate),p=e.mergeCellsBefore,d=e.mergeCellsUpdate,g=(e.hideRowColData,n),v=i,b=r;if(f&&f.cutChanges){var _=f.cutChanges,m=(f.cutSelectedRange,f.cutType),y=f.cutSelectedRange,w=f.mergeCells;if(g=Sd(_,g).dataSource,b="uncut"===m?Dp(b,y,yd(c.style)):Fp(b,y),w&&0<w.length)for(var S=0;S<w.length;S++){var k=Ip(w[S]);v="uncut"===m?Np(k,v):Bp(k,v)}b=Kp(b,y,v)}var x=Zp(t,{change:u,apool:s},g,b,null,o);g=x.get("dataSource"),r=x.get("styles");var I=h&&h.template?yd(h.template):null,O=yd(l.style);if(b=Dp(r,a,O,I),p)for(var A=0;A<p.length;A++){v=Bp(Ip(p[A]),v)}if(d)for(var T=0;T<d.length;T++){v=Np(Ip(d[T]),v)}return b=Kp(b,a,v),t.merge({dataSource:g,styles:b,mergeCells:v})}(t,e,r,n,i,o);case fa:return td(t,e,r);case"undoSetCustomBorders":return Qp(t,e,r);case"sk":return function(t,e){return t.merge(e.state)}(t,e);case"cp":return function(t,e,r,n,h){var p=e.ptype,i=e.changes,d=(e.exten,r),g=n,v=t.get("rowsHeight"),b=t.get("colsWidth");return gd.find(function(t){return p===t})?(i.forEach(function(t){var e=t[0],r=t[1],n=d.size,i=d.get(0)&&d.get(0).size||1;if(n<=e){var o=ud(e,d,g,v);d=o.dataSource,g=o.styles,v=o.rowsHeight}if(i<=r){var a=cd(r,d,g,b);d=a.dataSource,g=a.styles,b=a.colsWidth}if("d"===p)d=d.setIn([e,r],t[3]);else if("s"!==p)if("l"===p)g=g.setIn([e,r,"prop"],bi(t[3]));else if(p===Tf)g=g.setIn([e,r,"attr"],t[3]);else if("cs"===p){var s=t[3],u={text:d.getIn([e,r]),attribs:g.getIn([e,r,"attr"])};z.shouldFixAText(u)&&(u=z.fixAText(u));var c=z.applyToAText(s,u,h),l=c.text,f=c.attribs;d=d.setIn([e,r],l),g=g.setIn([e,r,"attr"],f)}}),t.merge({dataSource:d,styles:g,rowsHeight:v,colsWidth:b})):t}(t,e,n,r,o);case"rp":return function(t,e,r,n){var o=e.range,a=e.props,s=e.ptype;e.exten;o=Fh.from(o);var u=r,c=n,i=t.get("rowsHeight"),l=t.get("colsWidth"),f=u.size,h=u.get(0)&&u.get(0).size||1;if(o=o.toFormatRange(),!gd.find(function(t){return s===t}))return t;if(f<=o.to.row){var p=ud(o.to.row,u,c,i);u=p.dataSource,c=p.styles,i=p.rowsHeight}if(h<=o.to.col){var d=cd(o.to.col,u,c,l);u=d.dataSource,c=d.styles,l=d.colsWidth}for(var g=function(n,i){for(var t=function(e,t){if("d"===s)null!==a[n][e]&&void 0!==a[n][e]&&(u=u.setIn([i,t],a[n][e]));else if("s"===s){var r="";"string"==typeof a&&(r=a.replace("|",":").split(":")),c=c.updateIn([i,t,"style"],function(t){if(t=t||bi(),r)t=t.set(r[0],r[1]);else try{t=ta(a[n][e])}catch(t){}return t})}else"l"===s?c=c.updateIn([i,t,"prop"],function(){return bi(a[n][e])}):s===Tf&&null!==a[n][e]&&void 0!==a[n][e]&&(c=c.setIn([i,t,"attr"],a[n][e]))},e=0,r=o.from.col;r<=o.to.col;e++,r++)t(e,r)},v=0,b=o.from.row;b<=o.to.row;v++,b++)g(v,b);return t.merge({dataSource:u,styles:c,rowsHeight:i,colsWidth:l})}(t,e,n,r);case"dp":return function(t,e){var r=e.index,n=e.ptype,i=e.props;switch(n){case"rh":var o=t.get("rowsHeight");return o=o.set(r,i),t.merge({rowsHeight:o});case"cw":var a=t.get("colsWidth");return a=a.set(r,i),t.merge({colsWidth:a});case"pl":var s=t.get("tableProps")||{};return s=s.set("paddingLeft",i),t.merge({tableProps:s});case"pr":var u=t.get("tableProps")||{};return u=u.set("paddingRight",i),t.merge({tableProps:u});default:return t}}(t,e);case"dc":return function(t,e,r,n){switch(e.dtype){case"r":return vd(t,e,r,n);case"c":return bd(t,e,r,n);default:return t}}(t,e,n,r);case"dr":return function(t,e,r,n){switch(e.dtype){case"r":return _d(t,e,r,n);case"c":return md(t,e,r,n);default:return t}}(t,e,n,r);case"m":return function(t,e,r){var n=e.range;if((n=Fh.from(n)).isSingle())return t;n=n.toFormatRange();var i=bi({row:n.from.row,col:n.from.col,rowspan:n.to.row-n.from.row+1,colspan:n.to.col-n.from.col+1});return r=r.push(i),t.merge({mergeCells:r})}(t,e,i);case"um":return function(t,e,r){var n=e.range;return(n=Fh.from(n)).isSingle()?t:(n=n.toFormatRange(),r=r.filter(function(t){return!(t.get("row")===n.from.row&&t.get("col")===n.from.col)}),t.merge({mergeCells:r}))}(t,e,i);case"et":return function(t){return t}(t);default:return t}}}var cg;cg="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")();function lg(){return Math.random().toString(36).substring(7).split("").join(".")}var fg,hg,pg=("function"==typeof(hg=cg.Symbol)?hg.observable?fg=hg.observable:(fg=hg("observable"),hg.observable=fg):fg="@@observable",fg),dg={INIT:"@@redux/INIT".concat(lg()),REPLACE:"@@redux/REPLACE".concat(lg()),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION".concat(lg())}};function gg(t,e,r){if("function"==typeof e&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof e&&void 0===r&&(r=e,e=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(gg)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var i=t,o=e,a=[],s=a,u=!1;function n(){s===a&&(s=a.slice())}function c(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return o}function l(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var r=!0;return n(),s.push(e),function(){if(r){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");r=!1,n();var t=s.indexOf(e);s.splice(t,1)}}}function f(t){if(!function(t){if("object"!==ka(t)||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");var e=o;try{u=!0,o=i(o,t)}finally{u=!1}for(var r=a=s,n=0;n<r.length;n++){(0,r[n])(o,e,t)}return t}return f({type:dg.INIT}),Aa({dispatch:f,subscribe:l,getState:c,replaceReducer:function(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");i=t,f({type:dg.REPLACE})}},pg,function(){var r=l;return Aa({subscribe:function(t){if("object"!==ka(t)||null===t)throw new TypeError("Expected the observer to be an object.");function e(){t.next&&t.next(c())}return e(),{unsubscribe:r(e)}}},pg,function(){return this})})}function vg(){for(var t=arguments.length,a=new Array(t),e=0;e<t;e++)a[e]=arguments[e];return function(o){return function(){var t=o.apply(void 0,arguments),e=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},r={getState:t.getState,dispatch:function(){return e.apply(void 0,arguments)}},n=a.map(function(t){return t(r)});e=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}.apply(void 0,Ea(n))(t.dispatch);var i={};return Object.assign(i,t),i.dispatch=e,i}}}function bg(){return function(e){return function(t){t instanceof Array?t.forEach(function(t){e(t)}):e(t)}}}function _g(){return function(a){return function(t){var e=t.type;try{switch(e){case"rowHide":for(var r=[],n=0;n<t.count;n++)r.push(t.start+n);t.type=+t.mode?"hideRow":"showRow",t.hideRow=r;break;case"colHide":for(var i=[],o=0;o<t.count;o++)i.push(t.start+o);t.type=+t.mode?"hideCol":"showCol",t.hideCol=i;break;case"updateStyles":t.type=oa;break;case"cellStyle2":-1!==t.style.indexOf(":decimal")&&(t.style=t.style.substring(t.style.indexOf("decimal"))),0===t.style.indexOf("format")&&(t.type="format"),-1!==t.style.indexOf("sheetborder")&&(t.type=fa);break;case"specCellStyle2":t.type=aa,0===t.style.indexOf("format")&&(t.type="unformat");break;case"cellTemplate":t.type=sa;break;case"speccellTemplate":t.type=ua,t.prop=t.cellTemplateBefore||t.cellTemplateInfoBefore&&t.cellTemplateInfoBefore.prop||{};break;case"insertLink":void 0===t.prop&&(t.type=ua,t.prop={linkvalue:"",linkurl:"",minType:"link"});break;case"undoCleanLink":t.type=sa,t.prop=t.cellTemplateBefore||t.cellTemplateInfoBefore&&t.cellTemplateInfoBefore.prop||{};break;case"addShape":t.type="insertShape";break;case"rowResize":void 0===t.row.from&&(t.row={from:t.row,to:t.row});break;case"frz":t.type="freezeSheet",void 0===t.change&&(t.change={row:0,col:0}),t.rowCount=t.change.row,t.colCount=t.change.col}}catch(t){throw t}return a(t)}}}function mg(d){return function(i){return function(h){var t=T.assert;T.assert=function(t){if(!t){for(var e=arguments.length,r=new Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];throw new Error(r.join(""))}};try{var e=h.type,r=h.ptype,n=h.changes;h.exten;if("cp"===e&&"cs"===r){var p=null;n.forEach(function(t){var e,r,n,i,o,a=La(t,4),s=a[0],u=a[1],c=(a[2],a[3]),l=(e=s,r=u,n=d.getState(),i=n.getIn(["dataSource",e,r]),o=n.getIn(["styles",e,r,"attr"]),z.shouldFixAText({text:i,attribs:o})?z.fixAText({text:i,attribs:o}):{text:i,attribs:o}).text,f=z.unpack(c);T.assert(l.length===f.oldLen,"mismatched apply: ",l.length," / ",f.oldLen),p&&p[0]===t[0]&&p[1]===t[1]&&!z.canCompose(p[3],t[3])&&(Logger.error("compose cs action:".concat(JSON.stringify(h))),T.assert(!1,"compose cs error: ",l.length," / ",f.oldLen)),p=t})}i(h)}catch(t){i((new hd).toJson())}finally{T.assert=t}}}}function yg(t,e,r){if(e&&t){var n=(new C).fromJsonable(e);t=z.moveOpsToNewPool(t,n,r)}return t}var wg=(Sg.prototype.init=function(){},Sg.prototype.destroy=function(){this._coreStore&&(this._coreStore=null)},Sg.prototype.dispatchActions=function(t){t.push({type:la});for(var e=0,r=t.length;e<r;e++)this.getStore().dispatch(t[e],!0)},Sg.prototype.clean=function(){delete this._coreStore,this._coreStore=gg(ug,va)},Sg.prototype.initDefaultStore=function(t){t||function(t,e,r){var n=ba(e,r),i=_a(e,r);t.dispatch({type:ca,dataSource:n,styles:i})}(this.getStore(),ra.startRows,ra.startCols)},Sg.prototype.getState=function(){return this._coreStore.getState()},Sg.prototype.getApool=function(){return this._apool},Sg.prototype.getStore=function(){return this._coreStore},Sg.prototype.getKeyframe=function(){return function(r,t){var e=r.get("dataSource"),n=e.size,i=0<e.size?e.get(0).size:0,o={tt:"set",t:"",dt:"set",st:"set",r:n,c:i,dv:r.get("dv")};Object.keys(rg).forEach(function(t){var e=r.get(rg[t]);o[t]=eg.isIterable(e)?e.toJS():e});for(var a=[],s=new C,u=0;u<n;u++)for(var c=0;c<i;c++){var l=o.s[u]&&o.s[u][c]&&o.s[u][c]&&o.s[u][c].attr;if(l=l&&z.moveOpsToNewPool(l,t,s),o.s[u]&&o.s[u][c]&&o.s[u][c]&&o.s[u][c].attr&&delete o.s[u][c].attr,l||!o.d[u][c]||o.d[u][c].endsWith("\n")||(o.d[u][c]+="\n",l=z.makeAttribution(o.d[u][c])),l){var f=[u,c,l];a.push(f)}}o.at=a,o.ap=s.toJsonable();for(var h=[],p=0;p<i;p++){var d=r.getIn(["colsWidth",p]);d=Math.round(d||117),h.push(d)}return o.cw=h,o}(this.getState(),this.getApool())},Sg.prototype.formatSvrData=function(t){return t&&t.initialAttributedText?unescape(t.initialAttributedText.text||""):""},Sg);function Sg(){this._coreStore=null,this._apool=new C,this._coreStore=gg(ug(this._apool),va,vg(_g,bg,mg,function(h){return function(t){return function(f){return function(r){var t=r,e=t.type,n=t.ptype;if("cp"!==e||"cs"!==n&&n!==Tf){if("rp"===e&&n===Tf){var i=r=of(r),o=i.range,a=i.exten,s=i.props,u=o.from,c=u.row,l=u.col;Op(o,function(t,e){s[t-c][e-l]=yg(s[t-c][e-l],a&&a.apool,h)})}}else(r=of(r)).changes.forEach(function(t){var e=t[3];e=yg(e,r.exten&&r.exten.apool,h),t[3]=e});f(r)}}}}(this._apool)))}function kg(t){var e=[];return t.forEach(function(t){e[t[0]]||(e[t[0]]=[]),e[t[0]][t[1]]=t[2]}),e}function xg(t){for(var e=z.opIterator(t),r=0;e.hasNext();){var n=e.next();"+"===n.opcode&&(r+=n.chars)}return r}var Ig={bold:"bold",fontfamily:"font-family",italic:"italic",strikeline:"strikethrough",fontcolor:"color",underline:"underline"},Og={textalign:"textalign",h_align:"textalign"};function Ag(t,e,r){var n="";for(var i in Ig)if(t[i]){var o=t[i];"bold"===i&&"bold"===o?o=!0:"italic"===i&&"italic"===o?o=!0:"underline"===i&&"underline"===o&&(o=!0);var a=r.putAttrib([Ig[i],o]);n+="*"+z.numToString(a),delete t[i]}var s=e;if(n){var u=z.numToString(e.text.length),c="Z:0>"+u+n+"+"+u+"$"+e.text,l="Z:"+u+">0"+e.attribs.replace(/\+/g,"="),f=z.compose(c,l,r),h=z.unpack(f);h&&(s={attribs:h.opsStr,text:h.charBank})}var p=[];for(var d in Og)if(t[d]){o=t[d];p.push([Og[d],o]),delete t[d]}if(p.length){var g=function(t,a,s){var u=["list","text-align","insertorder"],c=z.opIterator(t.attribs),l=z.stringIterator(t.text),f=0,i=!1,o=[],h=[];function p(t,e,r,n){0===f&&(i=r,o=n),f+=t,e&&(h.push([f,i,z.makeAttribsString("=",o,a)]),f=0,i=!1,o=[])}function e(){for(var t=c.next(),e=l.take(t.chars);0<=e.indexOf("\n");){var r=e.indexOf("\n")+1;p(r,!0,!1,0===f?s.slice(0):[]),t.chars-=r,e=e.substr(r)}if(0<t.chars){var n=!1,i=[];if(0===f)if(1===t.chars&&"*"===e){var o=[];z.eachAttribNumber(t.attribs,function(t){var e=a.getAttrib(t);e&&((0<=X.indexOf(e[0])||0<=u.indexOf(e[0]))&&(n=!0),o.push(e[0]))}),i=s.filter(function(t){return o.indexOf(t[0])<0})}else i=s.slice(0);p(t.chars,!1,n,i)}}for(;c.hasNext();)e();T.assert(0===f,"line assembler not finished");for(var r=z.builder(t.text.length),n=0;n<h.length;n++)h[n][1]?(r.keep(1,0,h[n][2]),r.keep(h[n][0]-1)):(r.insert("*",h[n][2]),r.keep(h[n][0]));return r.toString()}(s,r,p);return z.applyToAText(g,s,r)}return s}function Tg(t){var e=Hh(function(t){return t.split("\n").filter(function(t){return 0<t.length&&"["==t[0]})}(t)),r=new wg;return r.dispatchActions(e),r.getKeyframe()}function Cg(t){var e={};for(var r in t)e[r]=Tg(t[r]);return e}function zg(t){if(0===Object.keys(t).length)return null;var e,r,n={};for(var i in t)n[i]=(e=t[i],void 0,r={type:"k",k:e},JSON.stringify([r]));return n}var Lg,Eg,Ng,Bg,Mg,Rg,jg,Pg,Fg,Dg=(x(Wg,Lg=N),Wg.prototype.compatibleDoc=function(t,a,s){for(var e,r,n,i,o,u,c=this,l=z.builder(t.text.length),f=z.opIterator(t.attribs),h=z.stringIterator(t.text),p=0,d="",g=!1,v=!0,b="",_="",m="",y=!1,w=function(){var t=f.next();if("+"!==t.opcode)return T.assert(!1,"compatible cs error"),"break";var e=h.take(t.chars),r=!1;if(v&&!s){if(e===q.ParagraphBreak){var n=!1;z.eachAttribNumber(t.attribs,function(t){var e=a.getAttrib(t);if(e)if("doc-attrtype"===e[0])n=!0;else if(0<=G.indexOf(e[0]))b+="*"+z.numToString(t);else if("doc-page-header-divider"===e[0])u=e[1];else if("doc-pg-shading-value"===e[0]){var r="";switch(e[1]){case"/static/img/T-Shading-07.png":r="shading-template-item-bg-07";break;case"/static/img/T-Shading-06.png":r="shading-template-item-bg-06";break;case"/static/img/T-Shading-11.png":r="shading-template-item-bg-11";break;case"/static/img/T-Shading-12.png":r="shading-template-item-bg-12"}_+=r?"*"+z.numToString(a.putAttrib(["doc-pg-shading-value",r])):"*"+z.numToString(t)}else _+="*"+z.numToString(t)}),n?(l.remove(1),r=!0):_=""}u="true"===u||void 0===u,v=!1}if("*"===e){var i=!1;z.eachAttribNumber(t.attribs,function(t){var e=a.getAttrib(t);e&&(0<=X.indexOf(e[0])||0<=c._deprecatedParaAttribs.indexOf(e[0]))&&(i=!0)}),i&&(0<p&&(l.keep(p),p=0),d=t.attribs,l.remove(1),r=!0)}if(d&&0<=e.indexOf("\n")&&(0<(p+=e.indexOf("\n"))&&(l.keep(p),p=0),d=S.changeOldListData(d,a),l.keep(1,0,d,a),p=t.chars-e.indexOf("\n")-1,r=!(d="")),g||s)!s&&g&&0<=e.indexOf(q.StoryEnd)&&z.eachAttribNumber(t.attribs,function(t){var e=a.getAttrib(t);!e||e[0]!==D.StoryId||e[1]!==st.ListTemplateId&&e[1]!==st.ListTemplateIdCompt||(y=!0)});else if(0<=e.indexOf(q.SectionBreak))z.eachAttribNumber(t.attribs,function(t){var e=a.getAttrib(t);e&&"headerflow"===e[0]&&(m=e[1])});else if(e===q.StoryEnd){var o=!1;z.eachAttribNumber(t.attribs,function(t){var e=a.getAttrib(t);e&&0<=K.indexOf(e[0])&&(o=!0)}),o&&(g=!0,_&&(0<p&&(l.keep(p),p=0),l.keep(1,0,_,a),r=!(_="")))}r||(p+=t.chars)},S=this;f.hasNext()&&"break"!==w(););if(!g&&!s){0<p&&(l.keep(p),p=0),l.insert(q.SectionBreak,b);var k="*"+z.numToString(a.putAttrib(["flowid","BB08J2"]));_&&(k=z.composeAttributes(k,_,!0,a)),l.insert(q.StoryEnd,k),l.insert(q.ParagraphBreak)}var x=l.toString(),I=z.applyToAText(x,t,a);return s||(g&&(I=(e=this._compose("section para cs",I,a,x,this._compatibleSectionBreak(I,a,b)))[0],x=e[1]),m&&u&&(I=(r=this._compose("headerSeparator cs",I,a,x,this._compatibleHeaderSeparator(I,a,m)))[0],x=r[1]),I=(n=this._compose("comment cs",I,a,x,this._compatibleComment(I,a)))[0],x=n[1],I=(i=this._compose("page num cs",I,a,x,this._compatiblePageNum(I,a)))[0],x=i[1],y||(I=(o=this._compose("listCS",I,a,x,this.addListCs(I,a)))[0],x=o[1])),{atext:I,apool:a,compatibleCs:x}},Wg.prototype._compose=function(t,e,r,n,i){return i&&0<i.length&&!z.isIdentity(i)?[z.applyToAText(i,e,r),z.compose(n,i,r)]:[e,n]},Wg.prototype._compatibleSectionBreak=function(t,r,n){var e=t.text.indexOf("\n");if(0<=e){e+=2;for(var i=z.builder(t.text.length),o=z.opIterator(t.attribs),a=z.stringIterator(t.text),s=0;o.hasNext();){var u=o.next(),c=a.take(u.chars);if(e===s&&c===q.StoryEnd){z.eachAttribNumber(u.attribs,function(t){var e=r.getAttrib(t);e&&"flowid"===e[0]&&"BB08J2"===e[1]&&(i.keep(s-2),i.keep(1,0,n),i.remove(1))});break}s+=u.chars}return i.toString()}return""},Wg.prototype._compatibleHeaderSeparator=function(t,n,i){var e=n.attribToNum["pap-border-type,4"];if(void 0!==e&&0<=e)return"";if(i){for(var o=z.builder(t.text.length),a=z.opIterator(t.attribs),s=z.stringIterator(t.text),u=0,r=function(){var t=a.next();if(s.take(t.chars)===q.StoryEnd){var r=!1;if(z.eachAttribNumber(t.attribs,function(t){var e=n.getAttrib(t);e&&"flowid"===e[0]&&e[1]===i&&(o.keep(u-1),o.keep(1,0,[["pap-border-type","4"]],n),r=!0)}),r)return"break"}u+=t.chars};a.hasNext()&&"break"!==r(););return o.toString()}return""},Wg.prototype._compatibleTableBreak=function(t,n){for(var i=z.builder(t.text.length),o=z.opIterator(t.attribs),a=z.stringIterator(t.text),e=function(){var t=o.next(),e=a.take(t.chars);if("*"===e){var r=!1;z.eachAttribNumber(t.attribs,function(t){"table"===n.getAttribKey(t)&&(r=!0)}),r&&o.hasNext()?(i.keep(1),t=o.next(),"\n"===(e=a.take(t.chars)).charAt(0)?(i.remove(1),i.keep(t.chars-1)):i.keep(t.chars)):i.keep(t.chars)}else i.keep(t.chars)};o.hasNext();)e();return i.toString()},Wg.prototype._compatibleComment=function(t,o){var r=!1;if(o.eachAttrib(function(t,e){return 0===t.indexOf("tx-comment-")&&"1"===e&&(r=!0)}),!r)return"";for(var e=z.builder(t.text.length),a=z.opIterator(t.attribs),n=function(){var t=a.next();if("+"!==t.opcode)return T.assert(!1,"compatible cs error"),"break";var n=[],i="";z.eachAttribNumber(t.attribs,function(t){var e=o.getAttrib(t);if(e&&0===e[0].indexOf("tx-comment-")&&"1"===e[1]){var r=e[0].split("-")[2];n.push(r),i+="*"+z.numToString(o.putAttrib([e[0],""]))}}),0<n.length&&(i+="*"+z.numToString(o.putAttrib([$.Comments,n.join(",")]))),0<i.length?e.keep(t.chars,0,i,o):e.keep(t.chars)};a.hasNext()&&"break"!==n(););return e.toString()},Wg.prototype._compatiblePageNum=function(t,i){for(var e=z.builder(t.text.length),o=z.opIterator(t.attribs),a=z.stringIterator(t.text),s=0,r=function(){var t=o.next();if("*"===a.take(t.chars)){var r,n="";z.eachAttribNumber(t.attribs,function(t){var e=i.getAttrib(t);e&&("fieldcode"===e[0]?r=e[1]:"fieldcode-id"!==e[0]&&(n+="*"+z.numToString(t)))}),r?(0<s&&(e.keep(s),s=0),e.remove(1),function(t,e,r,n){var i;switch(e){case"PAGE":i="PAGE";break;case"·PAGE·":i='PAGE \\@ "·$P·"';break;case"-PAGE-":i='PAGE \\@ "-$P-"';break;case"第PAGE \\* TDW-CHINESE页":i='PAGE \\@ "第$P页" \\* TDW-CHINESE';break;case"PAGE/NUMPAGES":i='PAGE \\@ "$P/$N"'}i&&(t.insert("","*"+z.numToString(n.putAttrib(["field-char-type","begin"]))+r),t.insert(i,r),t.insert("","*"+z.numToString(n.putAttrib(["field-char-type","separate"]))+r),t.insert("1",r),t.insert("","*"+z.numToString(n.putAttrib(["field-char-type","end"]))+r))}(e,r,n,i)):s+=t.chars}else s+=t.chars};o.hasNext();)r();return e.toString()},Wg.prototype.changeOldListData=function(t,n){function e(){return Math.random().toString(36).substr(2,6)}var r,i,o,a,s,u,c,l=-1,f="",h=new It,p=-1,d=Number.MAX_SAFE_INTEGER;return z.eachAttribNumber(t,function(t){var e=n.getAttrib(t);if(e)if("listid"===e[0])s=e[1];else if("list"===e[0]){var r=/([a-zA-Z]+)(\d)/.exec(e[1]);r&&(l=Number.parseInt(r[2],10)-1,"task"===r[1]||"taskdone"===r[1]?(o=xt.taskListFmt,u="taskdone"===r[1]?pt.Done:pt.Todo,s=s||"taskId"):o=r[1],h.listLevel=l,h.listFmt=o)}else"listtext"===e[0]?(a=e[1],h.lvlText=a):"pap-left-indent"===e[0]&&(p=t,(d=parseFloat(e[1]))&&!isNaN(d)&&e[1].endsWith("em")?h.characterUnitLeftIndent=d:d&&!isNaN(d)&&e[1].endsWith("pt")&&(d/=16,h.characterUnitLeftIndent=d))}),s&&!this._oldListMap.get(s)?(r=e(),i=e(),h.listTemplateId=i,this._oldListMap.set(s,{listId:r,abtractTemplateId:i})):s&&this._oldListMap.get(s)&&(r=this._oldListMap.get(s).listId,i=this._oldListMap.get(s).abtractTemplateId,h.listTemplateId=i),r&&0<=l&&i?(f+="*"+z.numToString(n.putAttrib(["pap-list-id",r])),f+="*"+z.numToString(n.putAttrib(["pap-list-level",l.toString()])),f+="*"+z.numToString(n.putAttrib(["pap-list-template-id",i])),u&&(f+="*"+z.numToString(n.putAttrib(["pap-list-task",u]))),(c=this.addListTemplate(h))&&0!==c.characterUnitLeftIndent&&d===Number.MAX_SAFE_INTEGER?f+="*"+z.numToString(n.putAttrib(["pap-left-indent","0em"])):t.includes("*"+p.toString(36))&&c&&d===c.characterUnitLeftIndent&&(t=t.split("*").filter(function(t){return t!==p.toString(36)}).join("*")),t+f):t},Wg.prototype.addListTemplate=function(r){for(var t,n,e=function(e){if(t=e.find(function(t){return t.listTemplateId===r.listTemplateId&&(n=e),t.listTemplateId===r.listTemplateId&&t.listLevel===r.listLevel}))return"break"},i=0,o=this.addedListTemplates;i<o.length&&"break"!==e(o[i]);i++);return t||(0<=r.listLevel&&r.listTemplateId&&r.listFmt?((n=n||new Array).push(r),this.addedListTemplates.push(n),r):void 0)},Wg.prototype.addListCs=function(t,r){function s(t){var e;switch(t%3){case 0:e=yt.Circle;break;case 1:e=yt.HollowCircle;break;case 2:e=yt.Square;break;default:e=yt.Circle}return e}function e(o,t){var e=t||7,a=o[0];if(a.listFmt!==xt.taskListFmt){for(var r=function(e){var t=o.find(function(t){return t.listLevel===e});if(!t){if((t=new It).listLevel=e,t.listTemplateId=a.listTemplateId,t.start=0,t.characterUnitLeftIndent=2*e,t.characterUnitSpecialIndent=-2,a.isBullet){var r=s(e);t.lvlText=r,t.listFmt=xt.bulletListFmt}else if(a.isNumbered){var n=function(t){var e;switch(t%3){case 0:e={listFormat:bt.Number,listText:"%1."};break;case 1:e={listFormat:bt.LowerLetter,listText:"%1."};break;case 2:e={listFormat:bt.LowerRoman,listText:"%1."};break;default:e={listFormat:bt.Number,listText:"%1."}}return e}(e),i=n.listFormat;r=n.listText,t.listFmt=i,t.lvlText=r}o.push(t)}},n=0;n<=e;n++)r(n);return o.sort(function(t,e){return t.listLevel-e.listLevel}),o}a.characterUnitSpecialIndent=-2}var n=z.builder(t.text.length),i=t.text.lastIndexOf(q.StoryEnd);-1===i&&T.assert(!1,"insert list no place"),n.keep(i+1),n.insert(q.StoryBegin,[[D.StoryId,st.ListTemplateId],[D.StoryType,"list-template"]],r);for(var o=0,a=this.addedListTemplates;o<a.length;o++){var u=a[o];0!==u.length&&(e(u),u.forEach(function(t){if(t.isBullet&&""===t.lvlText){var e=s(0);t.lvlText=e}n.insert("\n",t.toAttribs(),r)}))}return n.insert(q.ParagraphBreak),n.insert(q.StoryEnd,[[D.StoryId,st.ListTemplateId],[D.StoryType,"list-template"]],r),n.toString()},Wg.prototype.compatibleTable=function(t,e){return function(t,e){var r,n=(new C).fromJsonable(t.ap);r="map"===t.dt?kg(t.d):t.d;var i,o=kg(t.at);i="map"===t.st?kg(t.s):t.s;for(var a=[],s=[],u=0;u<r.length;u++)for(var c=0;c<r[0].length;c++){var l={attribs:o[u][c],text:r[u][c]};if((!l.attribs||l.attribs.length<=0||-1!==l.attribs.indexOf("-")||-1!==l.attribs.indexOf("=")||xg(l.attribs)!==l.text.length)&&(l.attribs="+"+z.numToString(l.text.length)),i[u]&&i[u][c]){var f=Ag(i[u][c].style?i[u][c].style:i[u][c],l,n);f&&(l=f)}(l=e(l,n,!0).atext)?(a.push([u,c,l.text]),s.push([u,c,l.attribs])):(a.push([u,c,""]),s.push([u,c,""]))}return t.d=a,t.dt="map",t.at=s,t.ap=n.toJsonable(),t.dv=5,t.cw.length>t.c&&t.cw.splice(t.c,t.cw.length-t.c),t}(t,this.compatibleDoc.bind(this))},Wg.dver="2.0.0",Wg);function Wg(){var t=null!==Lg&&Lg.apply(this,arguments)||this;return t._deprecatedParaAttribs=["list","text-align","insertorder"],t._oldListMap=new Map,t.addedListTemplates=new Array,t}function qg(t,e,r){if(1!==t.length||t!==Eg.PlaceHolder)return"";var n="";return z.eachAttribNumber(e,function(t){var e=r.getAttrib(t);e&&"table"===e[0]&&e[1]&&(n=e[1])}),n}function Ug(t,e,r){if(1!==t.length||t!==Eg.TableStart)return!1;var n=!1;return z.eachAttribNumber(e,function(t){var e=r.getAttrib(t);e&&"tableid"===e[0]&&e[1]&&(n=!0)}),n}function Hg(t,e,r){if(1!==t.length||t!==Eg.TableEnd)return!1;var n=!1;return z.eachAttribNumber(e,function(t){var e=r.getAttrib(t);e&&"tableid"===e[0]&&e[1]&&(n=!0)}),n}function Jg(t,e){if(function(t,e){var r=t.from,n=r.row,i=r.col,o=t.to,a=o.row,s=o.col,u=e.from,c=u.row,l=u.col,f=e.to,h=f.row,p=f.col;return n===c&&i===l&&a===h&&s===p}(t,e))return Pg.Equal;var r=t.from,n=r.row,i=r.col,o=t.to,a=o.row,s=o.col,u=e.from,c=u.row,l=u.col,f=e.to,h=f.row,p=f.col;s+=1,p+=1,a+=1,h+=1;var d=Math.abs((n+a)/2-(c+h)/2),g=Math.abs((i+s)/2-(l+p)/2),v=Math.abs(n-a),b=Math.abs(c-h),_=Math.abs(i-s),m=Math.abs(l-p);return d<(v+b)/2&&g<(_+m)/2?d<=Math.abs(v-b)/2&&g<=Math.abs(_-m)/2&&(b<=v&&m<=_||v<=b&&_<=m)?Pg.Contain:Pg.Join:Pg.Apart}(Ng=Eg=Eg||{}).TableStart="",Ng.TableEnd="",Ng.RowBreak="",Ng.CellBreak="",Ng.PlaceHolder="*",Ng.RowStart="",Ng.CellStart="",Ng.PageBreak="\f",Ng.ParagraphBreak="\n",(Mg=Bg=Bg||{}).CellColor="cell-bgc",Mg.BorderTopColor="cell-btc",Mg.BorderLeftColor="cell-blc",Mg.BorderBottomColor="cell-bbc",Mg.BorderRightColor="cell-brc",Mg.RowSpan="cell-rs",Mg.ColSpan="cell-cs",Mg.VerticalAlign="cell-va",Mg.HorizontalAlign="cell-ha",(jg=Rg=Rg||{}).RowsHeight="rows-h",jg.ColsWidth="cols-w",jg.TableId="tableid",jg.SubId="subid",jg.PaddingLeft="tbl-pdl",jg.PaddingRight="tbl-pdr",(Fg=Pg=Pg||{})[Fg.Apart=0]="Apart",Fg[Fg.Join=1]="Join",Fg[Fg.Contain=2]="Contain",Fg[Fg.Equal=3]="Equal";var Kg="BB08J2";function Zg(t,e,r,n){var i=[];r.cellcolor&&i.push([Bg.CellColor,r.cellcolor]),r.h_align&&i.push([Bg.HorizontalAlign,r.h_align]),r.v_align&&i.push([Bg.VerticalAlign,r.v_align]),r.border&&(r.border["border-top"]&&i.push([Bg.BorderTopColor,r.border["border-top"]]),r.border["border-left"]&&i.push([Bg.BorderLeftColor,r.border["border-left"]]),r.border["border-bottom"]&&i.push([Bg.BorderBottomColor,r.border["border-bottom"]]),r.border["border-right"]&&i.push([Bg.BorderRightColor,r.border["border-right"]]));for(var o=0;o<n.length;o++){var a=n[o];a.row===t&&a.col===e?(i.push([Bg.RowSpan,""+a.rowspan]),i.push([Bg.ColSpan,""+a.colspan])):t>=a.row&&t<a.row+a.rowspan&&e>=a.col&&e<a.col+a.colspan&&(i.push([Bg.RowSpan,"-1"]),i.push([Bg.ColSpan,"-1"]))}return i}function Vg(t,e,r){for(var n=z.opIterator(t.attribs),i=z.stringIterator(t.text),o=z.builder(t.text.length);n.hasNext();){var a=n.next();if("+"!==a.opcode){T.assert(!1,"compatible cs error");break}var s=qg(i.take(a.chars),a.attribs,e);s&&r[s]?(o.remove(1),Gg(o,s,r[s],e)):o.keep(a.chars)}var u=o.toString();return{atext:z.applyToAText(u,t,e),apool:e,compatibleCs:u}}function Gg(t,e,r,n){t.insert(Eg.TableStart,[[Rg.SubId,Kg],[Rg.TableId,e],[$.DeleteFirst,"true"],[mt,ot.Table]],n);var i,o=(new C).fromJsonable(r.ap);i="map"===r.dt?kg(r.d):r.d;var a,s=kg(r.at);a="map"===r.st?kg(r.s):r.s;for(var u=function(t,e,r){for(var n=0;n<t.length;n++){var i=t[n];i.rowspan=Math.min(i.rowspan,e-i.row),i.colspan=Math.min(i.colspan,r-i.col)}return t}(function(t){t.sort(function(t,e){return t.row>e.row?1:t.row<e.row?-1:t.col>e.col?1:-1});for(var e=[],r=0;r<t.length;r++){for(var n=!1,i=0;i<e.length;i++)if(Jg(Qg(t[r]),Qg(e[i]))!==Pg.Apart){n=!0;break}n||e.push(t[r])}return e}(r.m),r.r,r.c),c=0;c<r.r;c++){t.insert(Eg.RowStart,[[$.DeleteFirst,"true"],[mt,ot.Row]],n);for(var l=0;l<r.c;l++){var f=i[c][l],h=s[c][l],p=a[c][l],d=Xg(f,h);$g(c,l,u,d[0],d[1],p.style?p.style:p,o,t,n)}t.insert(Eg.RowBreak,[[$.DeleteFirst,"true"],[mt,ot.Row]],n)}var g=function(t,e){var r=[];return e.rh&&r.push([Rg.RowsHeight,e.rh.join("|")]),e.cw&&r.push([Rg.ColsWidth,e.cw.join("|")]),r.push([Rg.PaddingLeft,""+e.tp.paddingLeft]),r.push([Rg.PaddingRight,""+e.tp.paddingRight]),r.push([Rg.TableId,t]),r}(e,r);t.insert(Eg.TableEnd,E(g,[[Rg.SubId,Kg],[Rg.TableId,e],[$.DeleteFirst,"true"],[mt,ot.Table]]),n)}function $g(t,e,r,n,i,o,a,s,u){var c=z.opIterator(i),l=z.stringIterator(n);for(s.insert(Eg.CellStart,[[$.DeleteFirst,"true"],[mt,ot.Cell]],u);c.hasNext();){var f=c.next();if("+"!==f.opcode){T.assert(!1,"compatible cs error");break}var h=z.moveOpsToNewPool(f.attribs,a,u),p=l.take(f.chars);if(c.hasNext())s.insert(p,h,u);else{p[p.length-1]===Eg.ParagraphBreak?s.insert(p.substring(0,p.length-1),h,u):s.insert(p,h,u);var d=Zg(t,e,o,r),g=z.makeAttribsString("+",E(d,[[$.DeleteFirst,"true"],[mt,ot.Cell]]),u);s.insert(Eg.CellBreak,h+g,u)}}}var Yg=new RegExp(Eg.TableStart+"|"+Eg.TableEnd+"|"+Eg.RowStart+"|"+Eg.RowBreak+"|"+Eg.CellStart+"|"+Eg.CellBreak+"|"+Eg.PageBreak,"g");function Xg(t,e){var r=t,n=e;return(!e||e.length<=0||-1!==e.indexOf("-")||-1!==e.indexOf("=")||xg(e)!==t.length)&&(n="+"+z.numToString(t.length)),[r.replace(Yg,"\n"),n]}function Qg(t){return{from:{row:t.row,col:t.col},to:{row:t.row+t.rowspan-1,col:t.col+t.colspan-1}}}var tv,ev=(x(rv,tv=N),rv.prototype.compatibleDoc=function(t,e,r){if(0<Object.keys(this.keyFrames).length){var n=Vg(t,e,this.keyFrames);return{atext:n.atext,apool:n.apool,compatibleCs:n.compatibleCs}}return{atext:t,apool:e,compatibleCs:z.identity(t.text.length)}},rv.prototype.compatibleTable=function(t,e){return this.keyFrames[e]=t,null},rv.dver="2.1.0",rv);function rv(){var t=null!==tv&&tv.apply(this,arguments)||this;return t.keyFrames={},t}function nv(t,i,e,r){var o={border:{}},a={row:e,col:r,rowspan:1,colspan:1};return z.eachAttribNumber(t,function(t){var e=i.getAttrib(t);if(e){var r=e[0],n=e[1];if(r)switch(r){case Bg.CellColor:o.cellcolor=n;break;case Bg.HorizontalAlign:o.h_align=n;break;case Bg.VerticalAlign:o.v_align=n;break;case Bg.BorderTopColor:o.border["border-top"]=n;break;case Bg.BorderLeftColor:o.border["border-left"]=n;break;case Bg.BorderBottomColor:o.border["border-bottom"]=n;break;case Bg.BorderRightColor:o.border["border-right"]=n;break;case Bg.RowSpan:a.rowspan=parseInt(n)||1;break;case Bg.ColSpan:a.colspan=parseInt(n)||1}}}),{style:o,mergeInfo:a}}function iv(t,i,o){var a="";return z.eachAttribNumber(t,function(t){var e=i.getAttrib(t);if(e){var r=e[0],n=e[1];if(r)switch(r){case Rg.RowsHeight:o.rh=n?n.split("|").map(function(t){return parseInt(t,10)}):[];break;case Rg.ColsWidth:o.cw=n?n.split("|").map(function(t){return parseInt(t,10)}):[];break;case Rg.PaddingLeft:o.tp.paddingLeft=parseInt(n)||0;break;case Rg.PaddingRight:o.tp.paddingRight=parseInt(n)||0;break;case Rg.TableId:a=n}}}),a}function ov(t){var e={paddingLeft:Math.round(t.tp.paddingLeft),paddingRight:Math.round(t.tp.paddingRight)},r={data:t.d,styles:t.s,mergeCellsInfo:t.m,rowHeights:t.rh,colHeights:t.cw,at:t.at,ap:t.ap,tp:e,dv:5,st:t.st};return function(t){for(var i=t.styles,e=i.length,r=i[0]?i[0].length:0,o=0;o<e;o++)for(var n=function(t){var e=i[o][t]&&i[o][t].style;if(!e)return"continue";if(e.fontcolor=sv(e.fontcolor),e.cellcolor=sv(e.cellcolor),e.border){if(av.forEach(function(t){e.border[t]=sv(e.border[t])}),0<o&&i[o-1][t]){var r=i[o-1][t].style;e.border["border-top"]=r&&r.border&&r.border["border-bottom"]}if(0<t&&i[o][t-1]){var n=i[o][t-1].style;e.border["border-left"]=n&&n.border&&n.border["border-right"]}}},a=0;a<r;a++)n(a)}(r),r}var av=["border-top","border-right","border-bottom","border-left"];function sv(t){return t&&"transparent"!==t?"#"===t[0]?4===t.length?"#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]:t:t.toLowerCase().startsWith("rgb")?function(t){var e=t.toString().match(/\d*(\.*)\d+/g),r=1;void 0!==e[3]&&(r=Number(e[3]));if(0===r)return"transparent";for(var n="#",i=0;i<3;i++)n+=1===r?("0"+Number(e[i]).toString(16)).slice(-2):("0"+(Number(e[i])*r+255*(1-r)).toString(16)).slice(-2);return n}(t):function(t){if(uv[t])return uv[t];return null}(t):t}var uv={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"};function cv(t,e){var r=lv(t,(new C).fromJsonable(JSON.parse(e)));return{atext:r.atext,keyFrames:r.keyFrames,apoolString:JSON.stringify(r.apool.toJsonable())}}function lv(t,e){for(var r={},n=z.opIterator(t.attribs),i=z.stringIterator(t.text),o=z.builder(t.text.length);n.hasNext();){var a=n.next();if("+"!==a.opcode){T.assert(!1,"compatible cs error");break}var s=i.take(a.chars);if(Ug(s,a.attribs,e)){var u=fv(n,i,e),c=u.keyFrame,l=u.tableLen,f=u.tableId;2<l&&f&&(r[f]=c,o.insert("*",[["table",f]],e))}else o.insert(s,a.attribs,e)}return{atext:o.toAtext(),apool:e,keyFrames:r}}function fv(t,e,r){for(var n,i,o,a,s=new C,u=z.builder(),c=0,l=0,f=0,h=[],p=[],d=[],g=[],v={r:0,c:0,rh:[],cw:[],tp:{paddingLeft:0,paddingRight:0},d:[],dt:"set",s:[],st:"set",at:[],ap:s.toJsonable(),dv:5,m:g},b=1,_="";t.hasNext();){var m=t.next();if("+"!==m.opcode){T.assert(!1,"compatible cs error");break}var y=e.take(m.chars);b+=y.length;for(var w=0;w<y.length;w++){var S=y[w];if(a=S,m.attribs,1===a.length&&a===Eg.CellBreak){h[l]||h.push([]),d[l]||d.push([]),u.insert("\n",m.attribs,r);var k=u.toAtext(),x=nv(m.attribs,r,l,c),I=x.style,O=x.mergeInfo;(1<O.rowspan||1<O.colspan)&&g.push(O);var A=z.moveOpsToNewPool(k.attribs,r,s);p.push([l,c,A]),h[l].push(k.text),d[l].push({style:I}),u=z.builder(),c+=1,f=Math.max(f,c)}else if(o=S,m.attribs,1===o.length&&o===Eg.RowBreak)l+=1,c=0;else{if(Hg(S,m.attribs,r)){_=iv(m.attribs,r,v);break}if(Ug(S,m.attribs,r))throw Error("table data has error:"+_);i=S,m.attribs,1===i.length&&i===Eg.CellStart||(n=S,m.attribs,1===n.length&&n===Eg.RowStart)||u.insert(S,m.attribs,r)}}if(_.length)break}return v.r=l,v.c=f,v.dv=5,v.at=p,v.d=h,v.dt="set",v.s=d,v.st="set",v.ap=s.toJsonable(),v.m=g,{keyFrame:v,tableLen:b,tableId:_}}function hv(o,a,s,u){return O(this,void 0,void 0,function(){return L(this,function(t){return[2,new Promise(function(e,r){var n=0,i=function(){(function(e,i,o){return O(this,void 0,void 0,function(){return L(this,function(t){if(window.jQuery)return[2,new Promise(function(r,n){window.jQuery.ajax({type:"get",url:"/dop-api/get/table?padId="+e+"&subId="+i+"&rev="+o,success:function(t,e){"success"===e&&0===t.retcode&&t.data&&t.data.padSubId===i&&t.data.initialAttributedText?r(t.data):n(null)},error:function(){n(null)}})})];throw Error("jQuery is invalid")})})})(o,a,s).then(function(t){e(function(t){return t&&t.initialAttributedText?unescape(t.initialAttributedText.text||""):""}(t))}).catch(function(t){n<u?setTimeout(function(){i(),n+=1},5e3):(r(t),console.error("getTableData failed:"+a))})};i()})]})})}function pv(t){var e=t.split(".");return 3!==e.length?-1:100*parseInt(e[0])+10*parseInt(e[1])+parseInt(e[2])}function dv(t,e,r){var n=pv(t),i=pv(e),o=pv(r);return n<o&&o<=i}function gv(t,e,r){var n=new w;return dv(t,e,P.dver)&&n.addCompatible(new P),dv(t,e,Dg.dver)&&n.addCompatible(new Dg),0<Object.keys(r).length&&dv(t,e,ev.dver)&&n.addCompatible(new ev),n}function vv(t,e,r,n,i){return gv(t,e,i).doCompatible(r,n,i)}t.ActionZipper=Af,t.AttribPool=C,t.Changeset=z,t.convertTextToKeyFrame=Tg,t.convertToKeyFrames=Cg,t.convertToKeyStrings=zg,t.execCompatible=function(t,e,r,n,i){var o=Cg(i),a=gv(t,"2.0.0",o),s={text:e,attribs:r},u=(new C).fromJsonable(JSON.parse(n)),c=a.doCompatible(s,u,o),l=zg(c.keyFrames);return{atext:c.atext,apool:c.apool,keyStrings:l,compatibleCs:c.compatibleCs}},t.execCompatibleForOCR=function(t,e,r,n){var i=Vg({text:t,attribs:e},(new C).fromJsonable(r),Cg(n));return{atext:i.atext,apool:i.apool.toJsonable()}},t.execCompatibleInner=vv,t.execCompatibleToVersion=function(t,e,r,n,i,o){var a=Cg(o),s=gv(t,e,a),u={text:r,attribs:n},c=(new C).fromJsonable(JSON.parse(i));if(s.compatibleLength()){var l=s.doCompatible(u,c,a);return{atext:l.atext,apool:l.apool,compatibleCs:l.compatibleCs}}return{atext:u,apool:c,compatibleCs:"Z:"+z.numToString(u.text.length)+">0$"}},t.getTableListFromApool=function(t){var e=(new C).fromJsonable(JSON.parse(t)),n=[];return e.eachAttrib(function(t,e,r){return"table"===t&&n.push(e),!1}),n},t.getTableListFromAtrribApool=function(t){var r=[];return t.eachAttrib(function(t,e){return"table"===t&&r.push(e),!1}),r},t.getTableTextPromise=function(e,r,n){return O(this,void 0,void 0,function(){return L(this,function(t){switch(t.label){case 0:return[4,hv(e,n,r,3).then(function(t){return{tableId:n,text:t}})];case 1:return[2,t.sent()]}})})},t.testCompatible=function(t,e,r,n){var i=vv("0.0.0","2.0.0",{text:t,attribs:e},(new C).fromJsonable(JSON.parse(r)),{});return{atext:i.atext,apool:i.apool,keyStrings:n,compatibleCs:i.compatibleCs}},t.transToExportFrameOuter=function(t,e){for(var r=cv(t,e),n={},i=0,o=Object.keys(r.keyFrames);i<o.length;i++){var a=o[i];n[a]=ov(r.keyFrames[a])}return{atext:r.atext,exportFrames:n,apoolString:r.apoolString}},t.transToKeyFrame=lv,t.transToKeyFrameOuter=cv,t.transToNoKeyFrames=Vg,t.transToNoKeyFramesOuter=function(t,e,r){var n=Vg(t,(new C).fromJsonable(JSON.parse(e)),r);return{atext:n.atext,apool:JSON.stringify(n.apool.toJsonable()),compatibleCs:n.compatibleCs}},Object.defineProperty(t,"__esModule",{value:!0})});

var QRCode;!function(){function t(t){this.mode=r.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,o=this.data.length;e<o;e++){var i=[],n=this.data.charCodeAt(e);n>65536?(i[0]=240|(1835008&n)>>>18,i[1]=128|(258048&n)>>>12,i[2]=128|(4032&n)>>>6,i[3]=128|63&n):n>2048?(i[0]=224|(61440&n)>>>12,i[1]=128|(4032&n)>>>6,i[2]=128|63&n):n>128?(i[0]=192|(1984&n)>>>6,i[1]=128|63&n):i[0]=n,this.parsedData.push(i)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}t.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,r=this.parsedData.length;e<r;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var r=new t(e);this.dataList.push(r),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,r){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++){this.modules[o]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[o][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,r),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,r)},setupPositionProbePattern:function(t,e){for(var r=-1;r<=7;r++)if(!(t+r<=-1||this.moduleCount<=t+r))for(var o=-1;o<=7;o++)e+o<=-1||this.moduleCount<=e+o||(this.modules[t+r][e+o]=0<=r&&r<=6&&(0==o||6==o)||0<=o&&o<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=o&&o<=4)},getBestMaskPattern:function(){for(var t=0,e=0,r=0;r<8;r++){this.makeImpl(!0,r);var o=g.getLostPoint(this);(0==r||t>o)&&(t=o,e=r)}return e},createMovieClip:function(t,e,r){var o=t.createEmptyMovieClip(e,r);this.make();for(var i=0;i<this.modules.length;i++)for(var n=1*i,a=0;a<this.modules[i].length;a++){var s=1*a;this.modules[i][a]&&(o.beginFill(0,100),o.moveTo(s,n),o.lineTo(s+1,n),o.lineTo(s+1,n+1),o.lineTo(s,n+1),o.endFill())}return o},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=g.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var r=0;r<t.length;r++){var o=t[e],i=t[r];if(null==this.modules[o][i])for(var n=-2;n<=2;n++)for(var a=-2;a<=2;a++)this.modules[o+n][i+a]=-2==n||2==n||-2==a||2==a||0==n&&0==a}},setupTypeNumber:function(t){for(var e=g.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var o=!t&&1==(e>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=o}for(r=0;r<18;r++){o=!t&&1==(e>>r&1);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=o}},setupTypeInfo:function(t,e){for(var r=this.errorCorrectLevel<<3|e,o=g.getBCHTypeInfo(r),i=0;i<15;i++){var n=!t&&1==(o>>i&1);i<6?this.modules[i][8]=n:i<8?this.modules[i+1][8]=n:this.modules[this.moduleCount-15+i][8]=n}for(i=0;i<15;i++){n=!t&&1==(o>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=n:i<9?this.modules[8][15-i-1+1]=n:this.modules[8][15-i-1]=n}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var r=-1,o=this.moduleCount-1,i=7,n=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var s=0;s<2;s++)if(null==this.modules[o][a-s]){var h=!1;n<t.length&&(h=1==(t[n]>>>i&1)),g.getMask(e,o,a-s)&&(h=!h),this.modules[o][a-s]=h,-1==--i&&(n++,i=7)}if((o+=r)<0||this.moduleCount<=o){o-=r,r=-r;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,r,o){for(var i=m.getRSBlocks(t,r),n=new _,a=0;a<o.length;a++){var s=o[a];n.put(s.mode,4),n.put(s.getLength(),g.getLengthInBits(s.mode,t)),s.write(n)}var h=0;for(a=0;a<i.length;a++)h+=i[a].dataCount;if(n.getLengthInBits()>8*h)throw new Error("code length overflow. ("+n.getLengthInBits()+">"+8*h+")");for(n.getLengthInBits()+4<=8*h&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(!1);for(;!(n.getLengthInBits()>=8*h||(n.put(e.PAD0,8),n.getLengthInBits()>=8*h));)n.put(e.PAD1,8);return e.createBytes(n,i)},e.createBytes=function(t,e){for(var r=0,o=0,i=0,n=new Array(e.length),a=new Array(e.length),s=0;s<e.length;s++){var h=e[s].dataCount,l=e[s].totalCount-h;o=Math.max(o,h),i=Math.max(i,l),n[s]=new Array(h);for(var u=0;u<n[s].length;u++)n[s][u]=255&t.buffer[u+r];r+=h;var f=g.getErrorCorrectPolynomial(l),c=new p(n[s],f.getLength()-1).mod(f);a[s]=new Array(f.getLength()-1);for(u=0;u<a[s].length;u++){var d=u+c.getLength()-a[s].length;a[s][u]=d>=0?c.get(d):0}}var m=0;for(u=0;u<e.length;u++)m+=e[u].totalCount;var _=new Array(m),v=0;for(u=0;u<o;u++)for(s=0;s<e.length;s++)u<n[s].length&&(_[v++]=n[s][u]);for(u=0;u<i;u++)for(s=0;s<e.length;s++)u<a[s].length&&(_[v++]=a[s][u]);return _};for(var r={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},o={L:1,M:0,Q:3,H:2},i=0,n=1,a=2,s=3,h=4,l=5,u=6,f=7,g={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;g.getBCHDigit(e)-g.getBCHDigit(g.G15)>=0;)e^=g.G15<<g.getBCHDigit(e)-g.getBCHDigit(g.G15);return(t<<10|e)^g.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;g.getBCHDigit(e)-g.getBCHDigit(g.G18)>=0;)e^=g.G18<<g.getBCHDigit(e)-g.getBCHDigit(g.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return g.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,r){switch(t){case i:return(e+r)%2==0;case n:return e%2==0;case a:return r%3==0;case s:return(e+r)%3==0;case h:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case l:return e*r%2+e*r%3==0;case u:return(e*r%2+e*r%3)%2==0;case f:return(e*r%3+(e+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new p([1],0),r=0;r<t;r++)e=e.multiply(new p([1,c.gexp(r)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case r.MODE_NUMBER:return 10;case r.MODE_ALPHA_NUM:return 9;case r.MODE_8BIT_BYTE:case r.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case r.MODE_NUMBER:return 12;case r.MODE_ALPHA_NUM:return 11;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case r.MODE_NUMBER:return 14;case r.MODE_ALPHA_NUM:return 13;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,o=0;o<e;o++)for(var i=0;i<e;i++){for(var n=0,a=t.isDark(o,i),s=-1;s<=1;s++)if(!(o+s<0||e<=o+s))for(var h=-1;h<=1;h++)i+h<0||e<=i+h||0==s&&0==h||a==t.isDark(o+s,i+h)&&n++;n>5&&(r+=3+n-5)}for(o=0;o<e-1;o++)for(i=0;i<e-1;i++){var l=0;t.isDark(o,i)&&l++,t.isDark(o+1,i)&&l++,t.isDark(o,i+1)&&l++,t.isDark(o+1,i+1)&&l++,0!=l&&4!=l||(r+=3)}for(o=0;o<e;o++)for(i=0;i<e-6;i++)t.isDark(o,i)&&!t.isDark(o,i+1)&&t.isDark(o,i+2)&&t.isDark(o,i+3)&&t.isDark(o,i+4)&&!t.isDark(o,i+5)&&t.isDark(o,i+6)&&(r+=40);for(i=0;i<e;i++)for(o=0;o<e-6;o++)t.isDark(o,i)&&!t.isDark(o+1,i)&&t.isDark(o+2,i)&&t.isDark(o+3,i)&&t.isDark(o+4,i)&&!t.isDark(o+5,i)&&t.isDark(o+6,i)&&(r+=40);var u=0;for(i=0;i<e;i++)for(o=0;o<e;o++)t.isDark(o,i)&&u++;return r+=10*(Math.abs(100*u/e/e-50)/5)}},c={glog:function(t){if(t<1)throw new Error("glog("+t+")");return c.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return c.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},d=0;d<8;d++)c.EXP_TABLE[d]=1<<d;for(d=8;d<256;d++)c.EXP_TABLE[d]=c.EXP_TABLE[d-4]^c.EXP_TABLE[d-5]^c.EXP_TABLE[d-6]^c.EXP_TABLE[d-8];for(d=0;d<255;d++)c.LOG_TABLE[c.EXP_TABLE[d]]=d;function p(t,e){if(null==t.length)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&0==t[r];)r++;this.num=new Array(t.length-r+e);for(var o=0;o<t.length-r;o++)this.num[o]=t[o+r]}function m(t,e){this.totalCount=t,this.dataCount=e}function _(){this.buffer=[],this.length=0}p.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),r=0;r<this.getLength();r++)for(var o=0;o<t.getLength();o++)e[r+o]^=c.gexp(c.glog(this.get(r))+c.glog(t.get(o)));return new p(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=c.glog(this.get(0))-c.glog(t.get(0)),r=new Array(this.getLength()),o=0;o<this.getLength();o++)r[o]=this.get(o);for(o=0;o<t.getLength();o++)r[o]^=c.gexp(c.glog(t.get(o))+e);return new p(r,0).mod(t)}},m.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],m.getRSBlocks=function(t,e){var r=m.getRsBlockTable(t,e);if(null==r)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var o=r.length/3,i=[],n=0;n<o;n++)for(var a=r[3*n+0],s=r[3*n+1],h=r[3*n+2],l=0;l<a;l++)i.push(new m(s,h));return i},m.getRsBlockTable=function(t,e){switch(e){case o.L:return m.RS_BLOCK_TABLE[4*(t-1)+0];case o.M:return m.RS_BLOCK_TABLE[4*(t-1)+1];case o.Q:return m.RS_BLOCK_TABLE[4*(t-1)+2];case o.H:return m.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},_.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var r=0;r<e;r++)this.putBit(1==(t>>>e-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var v=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];var C=function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){var e=this._htOption,r=this._el,o=t.getModuleCount();Math.floor(e.width/o),Math.floor(e.height/o);function i(t,e){var r=document.createElementNS("http://www.w3.org/2000/svg",t);for(var o in e)e.hasOwnProperty(o)&&r.setAttribute(o,e[o]);return r}this.clear();var n=i("svg",{viewBox:"0 0 "+String(o)+" "+String(o),width:"100%",height:"100%",fill:e.colorLight});n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),r.appendChild(n),n.appendChild(i("rect",{fill:e.colorLight,width:"100%",height:"100%"})),n.appendChild(i("rect",{fill:e.colorDark,width:"1",height:"1",id:"template"}));for(var a=0;a<o;a++)for(var s=0;s<o;s++)if(t.isDark(a,s)){var h=i("use",{x:String(s),y:String(a)});h.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),n.appendChild(h)}},t.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},t}(),w="svg"===document.documentElement.tagName.toLowerCase()?C:"undefined"==typeof CanvasRenderingContext2D?function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){for(var e=this._htOption,r=this._el,o=t.getModuleCount(),i=Math.floor(e.width/o),n=Math.floor(e.height/o),a=['<table style="border:0;border-collapse:collapse;">'],s=0;s<o;s++){a.push("<tr>");for(var h=0;h<o;h++)a.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+i+"px;height:"+n+"px;background-color:"+(t.isDark(s,h)?e.colorDark:e.colorLight)+';"></td>');a.push("</tr>")}a.push("</table>"),r.innerHTML=a.join("");var l=r.childNodes[0],u=(e.width-l.offsetWidth)/2,f=(e.height-l.offsetHeight)/2;u>0&&f>0&&(l.style.margin=f+"px "+u+"px")},t.prototype.clear=function(){this._el.innerHTML=""},t}():function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}var e=function(t,e){this._bIsPainted=!1,this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return e.prototype.draw=function(t){var e=this._elImage,r=this._oContext,o=this._htOption,i=t.getModuleCount(),n=o.width/i,a=o.height/i,s=Math.round(n),h=Math.round(a);e.style.display="none",this.clear();for(var l=0;l<i;l++)for(var u=0;u<i;u++){var f=t.isDark(l,u),g=u*n,c=l*a;r.strokeStyle=f?o.colorDark:o.colorLight,r.lineWidth=1,r.fillStyle=f?o.colorDark:o.colorLight,r.fillRect(g,c,n,a),r.strokeRect(Math.floor(g)+.5,Math.floor(c)+.5,s,h),r.strokeRect(Math.ceil(g)-.5,Math.ceil(c)-.5,s,h)}this._bIsPainted=!0},e.prototype.makeImage=function(){this._bIsPainted&&function(t,e){var r=this;if(r._fFail=e,r._fSuccess=t,null===r._bSupportDataURI){var o=document.createElement("img"),i=function(){r._bSupportDataURI=!1,r._fFail&&r._fFail.call(r)};return o.onabort=i,o.onerror=i,o.onload=function(){r._bSupportDataURI=!0,r._fSuccess&&r._fSuccess.call(r)},void(o.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===r._bSupportDataURI&&r._fSuccess?r._fSuccess.call(r):!1===r._bSupportDataURI&&r._fFail&&r._fFail.call(r)}.call(this,t)},e.prototype.isPainted=function(){return this._bIsPainted},e.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},e.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},e}();function D(t,e){for(var r=1,i=function(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}(t),n=0,a=v.length;n<=a;n++){var s=0;switch(e){case o.L:s=v[n][0];break;case o.M:s=v[n][1];break;case o.Q:s=v[n][2];break;case o.H:s=v[n][3]}if(i<=s)break;r++}if(r>v.length)throw new Error("Too long data");return r}(QRCode=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:o.H},"string"==typeof e&&(e={text:e}),e)for(var r in e)this._htOption[r]=e[r];"string"==typeof t&&(t=document.getElementById(t)),this._htOption.useSVG&&(w=C),this._el=t,this._oQRCode=null,this._oDrawing=new w(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)}).prototype.makeCode=function(t){this._oQRCode=new e(D(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},QRCode.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&this._oDrawing.makeImage()},QRCode.prototype.clear=function(){this._oDrawing.clear()},QRCode.CorrectLevel=o}();