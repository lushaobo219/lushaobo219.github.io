!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=24)}([function(t,e,n){"use strict";(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"m",(function(){return u})),n.d(e,"l",(function(){return c})),n.d(e,"d",(function(){return f})),n.d(e,"i",(function(){return p})),n.d(e,"p",(function(){return l})),n.d(e,"k",(function(){return h})),n.d(e,"h",(function(){return d})),n.d(e,"n",(function(){return g})),n.d(e,"q",(function(){return m})),n.d(e,"e",(function(){return y})),n.d(e,"j",(function(){return b})),n.d(e,"o",(function(){return v})),n.d(e,"g",(function(){return w})),n.d(e,"f",(function(){return T}));var o="undefined"!=typeof window&&window&&window.navigator?window:null,i="undefined"!=typeof self&&self&&self.navigator?self:null,a=b()?qq||wx:null,s=o||i,u=o&&o.localStorage&&"function"==typeof o.localStorage.getItem?1:b()&&"function"==typeof a.getStorage?2:0,c="object"===("undefined"==typeof indexedDB?"undefined":r(indexedDB))&&"function"==typeof indexedDB.open;function f(){if(s&&s.navigator&&s.navigator.userAgent){var t=navigator.userAgent.toLowerCase().replace(/^.*\s+edge\/(\d+).*$/i,"$1");return/^\d+$/.test(t)?parseInt(t):0}return 0}function p(){if(s&&s.navigator&&s.navigator.userAgent){var t=navigator.userAgent.toLowerCase();return t.indexOf("trident")>-1&&t.indexOf("rv:11.0")>-1?11:-1!==t.indexOf("msie")?parseInt(t.split("msie")[1]):0}return 0}function l(t,e,n){for(var r in e)if(e.hasOwnProperty(r)){if(n&&-1!==n.indexOf(r))continue;var o=e[r];void 0!==o&&(t[r]=o)}}function h(t){return"number"==typeof t}function d(t){if(!t)return!1;var e=t.constructor.toString().substring(9).indexOf("Array");return t&&e>-1&&e<=1}function g(t,e){for(var n in e)(o=e[n])&&"object"===r(o)&&!d(o)?g(t[n],e[n]):t[n]=e[n];var o}function m(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(String(n))+"="+encodeURIComponent(String(t[n])));return e.join("&")}function y(){return(new Date).getTime()}function b(){return"object"===("undefined"==typeof qq?"undefined":r(qq))&&qq.canIUse?qq.canIUse("request"):!("object"!==("undefined"==typeof wx?"undefined":r(wx))||!wx.canIUse)&&wx.canIUse("request")}function v(t,e){for(var n=Object.keys(t),r=n.length,o=0;o<r;o++){var i=n[o];e(i,t[i])}}function O(t){return!!(s&&s.location&&s.location.search.indexOf(t)>0)}function w(){return O("alloy_report_debug")||O("alloy-report-debug")}function T(){return O("alloy_report_close")||O("alloy-report-close")}}).call(this,n(12))},function(t,e,n){"use strict";n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return h})),n.d(e,"d",(function(){return d})),n.d(e,"b",(function(){return g})),n.d(e,"e",(function(){return m}));var r=n(0),o=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},i="[AlloyReport]",a=Object(r.g)(),s=console.log,u=console.error,c=console.warn,f=console.info,p=function(t,e){t.apply(void 0,o([i],e))},l=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a&&p(s,t)},h=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];u.apply(void 0,o([i],t))},d=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a&&p(c,t)},g=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a&&p(f,t)},m=function(t){a=t}},function(t,e,n){"use strict";(function(t,r){n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return f}));var o=n(22),i=n(0),a=n(7),s=new o.a,u=s.create("global"),c=s.create("hooks"),f=s.create("dispatch");!function(){if(i.b&&i.b.addEventListener){var e=function(){a.a&&a.a.postMessageToWorker&&a.a.postMessageToWorker({type:"beforeunload"},!0),u.trigger("beforeunload")};i.b.addEventListener("beforeunload",e),i.b.addEventListener("pagehide",e)}else t&&t.isNodePlatform&&r.on("beforeExit",(function(){u.trigger("beforeunload")}))}()}).call(this,n(12),n(28))},function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return f}));var r=n(1),o=n(7),i=n(0);function a(t,e){return f((function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(!i.b||!i.b.requestIdleCallback)return t.apply(void 0,n);i.b.requestIdleCallback((function(){try{return t.apply(void 0,n)}catch(t){e&&e(),Object(r.a)(t)}}),{timeout:5e3})}),e)}function s(){return c()&&!0}function u(){return!1}function c(){return!(!o.a||!o.a.worker)}function f(t,e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];try{return t.apply(void 0,n)}catch(t){e&&e(),Object(r.a)(t)}}}},function(t,e,n){"use strict";var r=n(0),o=n(3),i=n(7),a=n(1),s=function(){function t(){var t=this;this.configs={mergeQueueConfig:{sourceKey:"report_source_v2",pendingKey:"report_pending_v2",maxInBatch:5e4,maxSize:5e4},enableMergeReport:!0,cgiURL:"https://report.idqqimg.com/node/report/",backupUrl:"https://report.idqqimg.com/node_b/",isLogPrint:Object(r.g)(),isCloseReport:Object(r.f)(),expiredTime:6048e5,supportOffline:!0,maxStoreReport:1e4,headRequest:!0,enableWorker:!0},this.closeLog=function(){t.configs.isLogPrint=!1,Object(a.e)(!1),t.syncConfigToWorker()},this.openLog=function(){t.configs.isLogPrint=!0,Object(a.e)(!0),t.syncConfigToWorker()},this.closeReport=function(){t.configs.isCloseReport=!0,t.syncConfigToWorker()},this.openReport=function(){t.configs.isCloseReport=!1,t.syncConfigToWorker()},this.enableMerge=function(){t.configs.enableMergeReport=!0,t.syncConfigToWorker()},this.disableMerge=function(){t.configs.enableMergeReport=!1,t.syncConfigToWorker()},this.disableWorker=function(){t.configs.enableWorker=!1,i.a.terminateWorker()},this.reset=function(e){Object(r.n)(t.configs,e),Object(a.e)(t.configs.isLogPrint),t.syncConfigToWorker()},this.syncConfigToWorker=function(){if(Object(o.a)()){var e=JSON.parse(JSON.stringify(t.configs));i.a.postMessageToWorker({type:"config",payload:e})}}}return Object.defineProperty(t.prototype,"mergeQueueConfig",{get:function(){return this.configs.mergeQueueConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableMergeReport",{get:function(){return this.configs.enableMergeReport},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cgiURL",{get:function(){return this.configs.cgiURL},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLogPrint",{get:function(){return this.configs.isLogPrint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCloseReport",{get:function(){return this.configs.isCloseReport},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expiredTime",{get:function(){return this.configs.expiredTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supportOffline",{get:function(){return this.configs.supportOffline},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxStoreReport",{get:function(){return this.configs.maxStoreReport},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headRequest",{get:function(){return this.configs.headRequest},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableWorker",{get:function(){return this.configs.enableWorker},enumerable:!0,configurable:!0}),t}();e.a=new s},function(t,e,n){"use strict";var r=["onReceiveReporter","onHanldeParams","onBeforeCommonReport","onBeforeMergeReport","onBeforeReportSend","onReportSenderError","onReportSenderSuccess","onReportSenderTimeout"],o=n(1),i=n(2),a=n(3),s=n(7),u=(n(14),function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}),c=function(){var t=this;this.addHooks=function(e,n){"function"==typeof n?-1!==r.indexOf(e)?(i.c.on(e,n),t.syncHooksToWorker(e,"add")):Object(o.d)("不支持的钩子"):Object(o.d)("参数必须是函数")},this.removeHooks=function(e,n){i.c.remove(e,n),t.syncHooksToWorker(e,"remove")},this.execute=function(t,e){i.c.trigger.apply(i.c,u([t],e))},this.getExecuteFunction=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];i.c.getLength(t)&&i.c.trigger.apply(i.c,u([t],e))}},this.syncHooksToWorker=function(t,e){if(Object(a.a)()){var n={name:t,action:e};s.a.postMessageToWorker({type:"hooks",payload:n})}},this.onReceiveReporter=this.getExecuteFunction("onReceiveReporter"),this.onHanldeParams=this.getExecuteFunction("onHanldeParams"),this.onBeforeCommonReport=this.getExecuteFunction("onBeforeCommonReport"),this.onBeforeMergeReport=this.getExecuteFunction("onBeforeMergeReport"),this.onBeforeReportSend=this.getExecuteFunction("onBeforeReportSend"),this.onReportSenderError=this.getExecuteFunction("onReportSenderError"),this.onReportSenderSuccess=this.getExecuteFunction("onReportSenderSuccess"),this.onReportSenderTimeout=this.getExecuteFunction("onReportSenderTimeout")};e.a=new c},function(t,e,n){"use strict";var r,o,i;!function(t){t[t.NO_WORKER=35056324]="NO_WORKER",t[t.NO_INDEDEDDB=35056325]="NO_INDEDEDDB",t[t.WORKER_FAIL=34981047]="WORKER_FAIL",t[t.SDK_LOAD=34980701]="SDK_LOAD",t[t.INDEDEDDB_OPEN_FAIL=34981048]="INDEDEDDB_OPEN_FAIL",t[t.INDEDEDDB_OVER_LIMIT=34981049]="INDEDEDDB_OVER_LIMIT",t[t.INDEDEDDB_OVER_TIME=34986191]="INDEDEDDB_OVER_TIME",t[t.REPORT_NONE=34987578]="REPORT_NONE"}(r||(r={})),function(t){t.INLINE_LOAD_COST="inline-load-cost",t.SDK_LOAD_COST="sdk-load-cost",t.REPORT_TOTAL="report-total",t.REPORT_FAIL="report-fail",t.REPORT_OFFLINE="report-offline",t.REPORT_ONEXIT="report-onexit"}(o||(o={})),function(t){t[t.SUM=1]="SUM",t[t.AVERAGE=2]="AVERAGE"}(i||(i={}));var a=n(2),s=n(1);n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o}));var u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},c=function(){function t(){var t=this;this.projectID=64,this.pageName="sdk-inside",this.dataDBKey="ALLOYREPORT_REPORT_INSIDE",this.getLastInsideDatas=function(){var e=[],n=[],r=window.localStorage&&window.localStorage.getItem(t.dataDBKey);if(r)try{(r=JSON.parse(r))&&(e=r.monitor,n=(n=r.adt).map((function(e){return u({projectid:t.projectID,pagename:t.pageName},e)}))),window.localStorage.removeItem(t.dataDBKey)}catch(t){}return{monitor:e,adt:n}},this.saveInsideDatas=function(){var e,n;if(window&&window.localStorage){var r=window.localStorage.getItem(t.dataDBKey);if(r)try{r=JSON.parse(r)}catch(t){Object(s.a)(t)}else r={};var o=r.monitor,i=void 0===o?[]:o,a=r.adt,u=void 0===a?[]:a;if((e=t.monitorID).push.apply(e,i),(n=t.adtDatas).push.apply(n,u),t.monitorID.length||t.adtDatas.length){var c=JSON.stringify({monitor:t.monitorID,adt:t.adtDatas});window.localStorage.setItem(t.dataDBKey,c),t.monitorID=[],t.adtDatas=[]}}},this.adtDatas=[],this.monitorID=[],this.pointIDValues={},this.isMainHandledExit=!1,this.initEvent(),this.doResourceReport(),this.doReceiveNoneReport()}return t.prototype.monitor=function(t){this.monitorID.push(t)},t.prototype.adt=function(t,e){this.adtDatas.push({pointid:t,pointvalue:e})},t.prototype.adtSum=function(t,e){this.pointIDValues[t]||(this.pointIDValues[t]=[0,0,i.SUM]),this.pointIDValues[t][0]+=e,this.pointIDValues[t][1]+=1},t.prototype.adtAverage=function(t,e){this.pointIDValues[t]||(this.pointIDValues[t]=[0,0,i.AVERAGE]),this.pointIDValues[t][0]+=e,this.pointIDValues[t][1]+=1},t.prototype.mergeIDValuesToAdt=function(){for(var t=Object.keys(this.pointIDValues),e=0;e<t.length;e++){var n=t[e],r=this.pointIDValues[n],o=0;r[2]===i.SUM?o=r[0]:r[2]===i.AVERAGE&&(o=r[0]/r[1]),this.adtDatas.push({pointid:n,pointvalue:o})}},t.prototype.syncDatasToMainThread=function(){this.mergeIDValuesToAdt();var t={monitor:this.monitorID,adt:this.adtDatas};self.postMessage({type:"reportInside",datas:t})},t.prototype.initEvent=function(){var t=this;a.b.on("beforeunload",(function(){t.isMainHandledExit=!0,t.mergeIDValuesToAdt(),t.saveInsideDatas()})),a.b.on("reportInside",(function(e){var n,r,o=e.datas,i=void 0===o?{}:o;t.mergeIDValuesToAdt();var a=i.monitor,s=i.adt;(n=t.monitorID).push.apply(n,a),(r=t.adtDatas).push.apply(r,s),t.saveInsideDatas()}))},t.prototype.doResourceReport=function(){var t=window&&(window.performance||window.webkitPerformance||window.msPerformance)||null,e=null;if(t&&t.getEntries?e=t.getEntries():t&&t.getEntriesByType&&(e=t.getEntriesByType("resource")),e)for(var n=e.length,r=0;r<n;r++){var i=e[r],a=i.name,s=i.duration,u=i.initiatorType;"script"===(u=u&&u.toLocaleLowerCase&&u.toLocaleLowerCase())&&(s=parseFloat(s.toFixed(2)),-1!==a.indexOf("alloyreport.inline.js")?this.adt(o.INLINE_LOAD_COST,s):-1!==a.indexOf("alloyreport.sdk.js")&&this.adt(o.SDK_LOAD_COST,s))}},t.prototype.doReceiveNoneReport=function(){var t=this;setTimeout((function(){t.pointIDValues[o.REPORT_TOTAL]||t.monitor(r.REPORT_NONE)}),6e4)},t}();e.c=new c},function(t,e,n){"use strict";var r=n(0),o=n(1),i=n(5),a=n(23),s=n.n(a),u=n(2),c=n(15),f=n(6),p=n(10),l=function(){function t(){var t=this;this.isNativeMP=Object(r.j)(),this.msgCache=[],this.postMessageCacheToWorker=function(){try{var e=t.msgCache;t.msgCache=[],t.worker&&t.worker.postMessage(e)}catch(t){Object(o.a)(t)}},this.receiveMessageFromWorker=function(e){var n,r=(n=t.isNativeMP?e:e.data).type,o=n.payload;switch(r){case"hooks":t.handleMessageFromWorker(o);break;case"jank":u.b.trigger("jankReceiveHeartBeat");break;default:u.b.trigger(n.type,n)}},this.handleMessageFromWorker=function(t){var e=t.args,n=t.name;i.a.execute(n,e)},this.postMessageToWorker=function(e,n){n?t.worker&&t.worker.postMessage([e]):(t.msgCache.push(e),Object(c.a)("msgToWorker",t.postMessageCacheToWorker,2e3,(function(){return t.msgCache.length>2e3})))},this.terminateWorker=function(){var e=t.worker;p.b.stop(),t.worker=null,e&&setTimeout((function(){e.terminate&&e.terminate()}),3e3)},this.notSupportWorker=!1,!Object(r.i)()&&Object(r.d)()<18&&this.init()}return t.prototype.init=function(){try{"function"==typeof Worker?this.worker=new s.a:(f.c.monitor(f.b.NO_WORKER),this.notSupportWorker=!0)}catch(t){Object(o.a)("创建 worker 线程失败")}this.worker&&(this.worker.onmessage=this.receiveMessageFromWorker),(!this.notSupportWorker&&!this.worker||this.worker&&!this.worker.onmessage)&&f.c.monitor(f.b.WORKER_FAIL)},t}();e.a=new l},function(t,e,n){"use strict";var r,o,i=n(0),a=n(3),s=n(4),u=n(1),c=function(){function t(){this.MemStore={},this.isWxStorage=2===i.m}return t.prototype.set=function(t,e){if(i.m)try{return this.isWxStorage?i.c&&i.c.setStorageSync(t,e):i.b&&i.b.localStorage.setItem(t,JSON.stringify(e)),!0}catch(t){}return!1},t.prototype.get=function(t,e){var n;if(i.m)try{this.isWxStorage?n=i.c&&i.c.getStorageSync(t):(n=i.b&&i.b.localStorage.getItem(t)).length>512e3?(n=e,Object(u.d)("警告：调用频率过高，部分上报数据已丢失")):n=JSON.parse(n)}catch(t){}return n||(n=e,e&&this.set(t,n)),n},t}(),f=n(2),p=n(15),l=n(6),h=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},d=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},g=function(){function t(){var t=this;this.databaseName="AlloyReport-DB",this.tableName="AlloyReport-Table",this.expiredTime=Object(i.e)()-s.a.expiredTime,this.tsRangeExpired=IDBKeyRange.upperBound(this.expiredTime,!0),this.tsRangeNotExpired=IDBKeyRange.lowerBound(this.expiredTime,!1),this.statistic={},this.readonly="readonly",this.readwrite="readwrite",this.addDataCache=[],this.overLimitReport=!1,this.dbDataCache={},this.addBatch=function(){return h(t,void 0,void 0,(function(){var t=this;return d(this,(function(e){return h(t,void 0,void 0,(function(){var t,e,n,r,o,i=this;return d(this,(function(a){switch(a.label){case 0:return[4,this.getDB()];case 1:return t=a.sent(),e=t.transaction(this.tableName,this.readwrite),n=e.objectStore(this.tableName),r=this.addDataCache,this.addDataCache=[],o=r.map((function(t){return new Promise((function(e){var r=t.key,o=t.data,a=t.tryTimes,s=o.ts,c=n.add({key:r,data:o,tryTimes:0,ts:s});c.onsuccess=function(t){var n=t.target.result;i.setStatistic(r,n,s,a,o),e(!0)},c.onerror=function(t){Object(u.a)(t),e(!1)}}))})),Promise.all(o).then((function(){2===i.initedStatistic&&f.a.trigger("indexedDBDispatch",i.statistic)})).catch((function(t){Object(u.a)(t)})),[2]}}))})),[2]}))}))},this.handleFailByIDs=function(e,n){return h(t,void 0,void 0,(function(){var t,r,o,a=this;return d(this,(function(s){return(t=this.statistic[e])?(r=[],o=[],Object(i.o)(t,(function(t,i){var s=parseInt(t);if(-1!==n.indexOf(s)){var u=i[0],c=i[1];!c||c<1?(r.push(s),a.setStatistic(e,s,u,1)):(o.push(s),delete a.statistic[e][s])}})),this.query("id",this.readwrite,void 0,null,(function(t,e,n){-1!==o.indexOf(t.id)?e.delete(n.primaryKey):-1!==r.indexOf(t.id)&&e.put({id:t.id,key:t.key,data:t.data,tryTimes:1,ts:t.ts})})).then((function(){setTimeout((function(){f.a.trigger("indexedDBDispatch",a.statistic,e)}),5e3)})),l.c.adtSum(l.a.REPORT_FAIL,o.length),[2]):[2]}))}))},this.deleteByIDs=function(e){return h(t,void 0,void 0,(function(){var t,n,r,o,i,a,s,u;return d(this,(function(c){switch(c.label){case 0:for(t=Object.keys(this.statistic),u=0;u<t.length;u++)for(n=t[u],r=0;r<e.length;r++)o=e[r],delete this.statistic[n][o];return[4,this.getDB()];case 1:for(i=c.sent(),a=i.transaction(this.tableName,this.readwrite),s=a.objectStore(this.tableName),u=0;u<e.length;u++)s.delete(e[u]);return[2]}}))}))},this.initIndexedDB(),f.a.on("dispatchSuccessID",this.deleteByIDs),f.a.on("dispatchFailID",this.handleFailByIDs)}return t.prototype.add=function(t){return h(this,void 0,void 0,(function(){return d(this,(function(e){return this.addDataCache.push(t),Object(p.a)("dbAddBatch",this.addBatch,100),[2]}))}))},t.prototype.queryByIDs=function(t){return h(this,void 0,void 0,(function(){var e,n,r,o;return d(this,(function(i){for(e=[],n=!0,r=0;r<t.length;r++){if(!(o=this.dbDataCache[t[r]])){n=!1;break}e.push(o)}return n?[2,Promise.resolve(e)]:[2,this.query("id",this.readonly,void 0,(function(e){return-1!==t.indexOf(e.id)}))]}))}))},t.prototype.getStatistic=function(){return this.statistic},t.prototype.query=function(t,e,n,r,o){return h(this,void 0,void 0,(function(){var i=this;return d(this,(function(a){return[2,new Promise((function(a,s){return h(i,void 0,void 0,(function(){var i,s,c,f,p;return d(this,(function(l){switch(l.label){case 0:return[4,this.getDB()];case 1:return i=l.sent(),s=i.transaction(this.tableName,e),c=s.objectStore(this.tableName),f=c.index(t).openCursor(n),p=[],f.onsuccess=function(t){var e=f.result;e?(r&&r(e.value),p.push(e.value),o&&o(e.value,c,e),e.continue()):a(p)},f.onerror=function(t){Object(u.a)(t),a(t)},[2]}}))}))}))]}))}))},t.prototype.getDB=function(){return this.cacheGetDBPromise?this.cacheGetDBPromise:this.db?this.db:(this.cacheGetDBPromise=this.initIndexedDB(),this.cacheGetDBPromise)},t.prototype.initIndexedDB=function(){var t=this;return new Promise((function(e){var n=indexedDB.open(t.databaseName);n.onerror=function(t){l.c.monitor(l.b.INDEDEDDB_OPEN_FAIL),Object(u.a)("打开 indexdb 失败。",t)},n.onsuccess=function(n){t.db=n.target.result,Object(u.b)("打开 indexdb 成功"),t.initStatistic(),e(t.db)},n.onupgradeneeded=function(e){var n=e.target.result;if(!n.objectStoreNames.contains(t.databaseName)){var r=n.createObjectStore(t.tableName,{keyPath:"id",autoIncrement:!0});r.createIndex("key","key",{unique:!1}),r.createIndex("tryTimes","tryTimes",{unique:!1}),r.createIndex("ts","ts",{unique:!1}),r.createIndex("id","id",{unique:!1})}}}))},t.prototype.setStatistic=function(t,e,n,r,o){this.statistic[t]||(this.statistic[t]={});var i=this.statistic[t];if(i[e]=[n,r],o){this.dbDataCache[e]={id:e,key:t,data:o,tryTimes:r,ts:n};var a=Object.keys(this.dbDataCache);if(a.length>50){a.sort();for(var u=a.slice(0,a.length-50).map((function(t){return parseInt(t)})),c=0;c<u.length;c++)delete this.dbDataCache[u[c]]}}else delete this.dbDataCache[e];var f=Object.keys(i),p=f.length,h=s.a.maxStoreReport;if(p>h){f.sort();u=f.slice(0,p-h).map((function(t){return parseInt(t)}));this.deleteByIDs(u),this.overLimitReport||(this.overLimitReport=!0,l.c.monitor(l.b.INDEDEDDB_OVER_LIMIT))}},t.prototype.initStatistic=function(){var t=this;this.initedStatistic||(this.initedStatistic=1,this.query("ts",this.readonly,this.tsRangeNotExpired,null,(function(e){var n=e.id,r=e.ts,o=e.tryTimes,i=e.key;t.setStatistic(i,n,r,o)})).then((function(){t.initedStatistic=2,f.a.trigger("indexedDBDispatch",t.statistic,null)})).catch((function(){t.initedStatistic=2,f.a.trigger("indexedDBDispatch",t.statistic,null)})),this.deleteExpiredReporter())},t.prototype.deleteExpiredReporter=function(){return h(this,void 0,Promise,(function(){var t,e=this;return d(this,(function(n){return t=0,[2,new Promise((function(n,r){return h(e,void 0,void 0,(function(){var e,r,o,i;return d(this,(function(a){switch(a.label){case 0:return[4,this.getDB()];case 1:return e=a.sent(),r=e.transaction(this.tableName,this.readwrite),o=r.objectStore(this.tableName),(i=o.index("ts").openCursor(this.tsRangeExpired)).onsuccess=function(e){var r=i.result;r?(o.delete(r.primaryKey),r.continue(),t++):(t?(l.c.monitor(l.b.INDEDEDDB_OVER_TIME),Object(u.b)("过期上报数据已清除")):Object(u.b)("当前没有过期上报数据"),n())},i.onerror=function(t){Object(u.a)(t),n()},[2]}}))}))}))]}))}))},t}(),m=function(){var t=this;this.MemStore={},this.set=function(e,n){t.MemStore[e]=n},this.get=function(e,n){var r;return(r=t.MemStore[e])||(r=n,n&&t.set(e,r)),r},this.each=function(e){for(var n=t.MemStore,r=Object.keys(n),o=r.length,i=0;i<o;i++)e&&e(n[r[i]])}},y=new(function(){function t(){var t=this;this.isIndexedDB=!1,this.isLocalDB=!1,this.get=function(e,n){return t.isLocalDB?t.constDB.get(e,n):t.db.get(e,n)},this.set=function(e,n){return t.isLocalDB?t.constDB.set(e,n):t.db.set(e,n)},this.add=function(e){var n=t.constDB.add(e);return n.catch((function(t){Object(u.a)(t)})),n},this.queryByIDs=function(e){var n=t.constDB.queryByIDs(e);return n.catch((function(t){Object(u.a)(t)})),n},this.db=new m;try{Object(a.b)()&&Object(a.a)()||this.initConstDB()}catch(t){Object(u.a)(t)}}return t.prototype.initConstDB=function(){i.l?(this.constDB=new g,this.isIndexedDB=!0):i.m&&(this.constDB=new c,this.isLocalDB=!0),i.l||l.c.monitor(l.b.NO_INDEDEDDB)},t.prototype.getStatistic=function(){return this.constDB.getStatistic()},t}()),b=n(11),v=function(){return(v=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};!function(t){t[t.ALL=1]="ALL",t[t.PART=2]="PART"}(r||(r={})),function(t){t[t.ERROR=-1]="ERROR",t[t.ALL=1]="ALL",t[t.PART=2]="PART"}(o||(o={}));var O=function(){function t(){var t=this;this.lastAddToBatchTime={},this.storeConfig=new m,this.dispatchTimeIDs={},this.sentIDs=[],this.count=0,this.dispatchBatch=function(e,n){if(!s.a.supportOffline||b.a.getStatus()){var a=t.dispatchTimeIDs,c=Object(i.e)();if(n)if(clearTimeout(a[n]),c-t.lastAddToBatchTime[n]>2e3)t.dispatchBatchBySourceKey(e,n,r.ALL),t.lastAddToBatchTime[n]=0;else t.dispatchBatchBySourceKey(e,n,r.PART)===o.PART&&(a[n]=setTimeout((function(){t.dispatchBatch(y.getStatistic(),n)}),2e3));else for(var f=Object.keys(e),p=0;p<f.length;p++){var l=f[p];t.dispatchBatchBySourceKey(e,l,r.ALL),t.lastAddToBatchTime[l]=0}}else Object(u.b)("网络离线，暂停上报")},f.a.on("indexedDBDispatch",this.dispatchBatch),f.b.on("networkConnect",(function(){Object(u.b)("网络恢复，上报离线数据"),f.a.trigger("indexedDBDispatch",y.getStatistic(),null)}))}return t.prototype.addOne=function(t,e,n){var r=t.sourceKey,o=Object(i.e)();y.add({key:r,data:{ts:o+this.count,param:e,opts:n},tryTimes:0}),this.count++,this.lastAddToBatchTime[r]||(this.lastAddToBatchTime[r]=o)},t.prototype.successItems=function(t,e){var n=e.map((function(t){return t.id})),r=this.sentIDs.filter((function(t){return-1===n.indexOf(t)}));this.sentIDs=r,f.a.trigger("dispatchSuccessID",n)},t.prototype.failItems=function(t,e){var n=t.sourceKey,r=e.map((function(t){return t.id})),o=this.sentIDs.filter((function(t){return-1===r.indexOf(t)}));this.sentIDs=o,s.a.supportOffline&&!b.a.getStatus()||f.a.trigger("dispatchFailID",n,r)},t.prototype.getConfigBySourceKey=function(t){if(s.a.mergeQueueConfig.sourceKey===t)return s.a.mergeQueueConfig;var e=Z.getAdapterBySourceKey(t);return e&&e.configs&&e.configs.queueConfig?e.configs.queueConfig:null},t.prototype.dispatchBatchBySourceKey=function(t,e,n){if(!t[e])return o.ERROR;var i=Object.keys(t[e]).map((function(t){return parseInt(t,10)})),a=(i=this.filterIDsBySent(i)).length;if(a<1)return o.ERROR;var s=this.getConfigBySourceKey(e);if(!s)return o.ERROR;var u=s.maxInBatch||10,c=o.ALL;if(n===r.PART){if(a<u)return o.PART;var f=a%u;c=0===f?o.ALL:o.PART,i.sort(),i=i.slice(0,a-f)}return this.dispatchBatchByIds(i,s,u),c},t.prototype.dispatchBatchByIds=function(t,e,n){var r=e.sourceKey;this.sentIDs=this.sentIDs.concat(t),y.queryByIDs(t).then((function(o){for(var i=[],a=0;a<o.length;a++){var u=o[a],c=u.data,p=u.id;-1!==t.indexOf(p)&&i.push(v(v({},c),{id:p}))}for(a=0;a<i.length;a+=n){var l=i.slice(a,a+n);r===s.a.mergeQueueConfig.sourceKey?f.a.trigger("dispatchMerge",e,l):f.a.trigger("dispatchCommon",e,l)}})).catch((function(t){Object(u.a)(t),Object(u.a)("从数据库取数据错误")}))},t.prototype.filterIDsBySent=function(t){var e=this.sentIDs;return t.filter((function(t){return-1===e.indexOf(t)}))},t}(),w=function(){function t(){this.storeConfig=new m,this.addTimeIDs={},this.dispatchTimeIDs={},this.lastAddToBatchTime={},this.batchCache={},this.counter=0}return t.prototype.addOne=function(t,e,n){e&&this.addToBatch(t,e,n)},t.prototype.successItems=function(t,e){for(var n=t.pendingKey,r=t.sourceKey,o=y.get(n,[]),i=y.get(r,[]),a=[],s=[],u=e.map((function(t){return t.ts})),c=o.length-1;c>=0;c--)-1===u.indexOf(o[c].ts)&&s.push(o[c]);for(c=i.length-1;c>=0;c--)-1===u.indexOf(i[c].ts)&&a.push(i[c]);o.length!==s.length&&y.set(n,s),i.length!==a.length&&y.set(r,a)},t.prototype.failItems=function(t,e){for(var n=t.pendingKey,r=t.sourceKey,o=y.get(n,[]),i=y.get(r,[]),a=[],u=[],c=e.map((function(t){return t.ts})),f=o.length-1;f>=0;f--){var p=o[f];-1!==c.indexOf(p.ts)?(!p.tryTimes||p.tryTimes<1||s.a.supportOffline&&!b.a.getStatus())&&(p.tryTimes=1,a.push(p)):u.push(p)}o.length!==u.length&&y.set(n,u),i.length!==a.length&&y.set(r,a);var h=i.length+o.length-(u.length+a.length);l.c.adtSum(l.a.REPORT_FAIL,h)},t.prototype.addToBatch=function(t,e,n){var r=this,o=(this.storeConfig,this.addTimeIDs),a=this.lastAddToBatchTime,s=this.batchCache,u=t.sourceKey,c=Object(i.e)();if(clearTimeout(o[u]),s[u]||(s[u]=[]),a[u]&&c-a[u]<50)return e&&(s[u].push({ts:c+this.counter,param:e,opts:n}),this.counter+=1),void(o[u]=setTimeout((function(){r.addToBatch(t,null,{})}),10));var f=y.get(u,[]);this.storeConfig.set(u,t),f||(f=[]),e&&f.push({id:c+this.counter,param:e,opts:n}),s[u].length&&(f=f.concat(s[u])),s[u]=[],a[u]=c,y.set(u,f),this.dispatchBatch(t,f)},t.prototype.dispatchBatch=function(t,e){var n=this;if(!s.a.supportOffline||b.a.getStatus()){var r=this.dispatchTimeIDs,o=t.sourceKey,a=t.pendingKey,c=t.maxInBatch,p=void 0===c?10:c,l=0;if(p<1&&(p=10),clearTimeout(r[o]),e.length>0)if(e.length>=p?l=p:Object(i.e)()-this.lastAddToBatchTime[o]>1e3&&(l=e.length),0!==l){for(var h=y.get(a,[]),d=[],g=0;g<l;g++)e[g].startTime=Object(i.e)(),d.push(e[g]),h.push(e[g]);var m=e.slice(l);y.set(t.sourceKey,m),y.set(t.pendingKey,h),o===s.a.mergeQueueConfig.sourceKey?f.a.trigger("dispatchMerge",t,d):f.a.trigger("dispatchCommon",t,d),m.length>=p&&this.dispatchBatch(t,m)}else r[o]=setTimeout((function(){n.dispatchBatch(t,e)}),1e3)}else Object(u.b)("网络离线，暂停上报")},t}(),T=new(function(){function t(){y.isIndexedDB?this.queueInstance=new O:this.queueInstance=new w}return t.prototype.addOne=function(t,e,n){this.queueInstance.addOne(t,e,n),s.a.supportOffline&&!b.a.getStatus()&&l.c.adtSum(l.a.REPORT_OFFLINE,1)},t.prototype.successItems=function(t,e){this.queueInstance.successItems(t,e)},t.prototype.failItems=function(t,e){this.queueInstance.failItems(t,e)},t}()),R=n(9),S=new(function(){function t(){var t=this;this.sendReporter=function(e,n,r){if(0!==n.length){for(var o=[],i="",a=0;a<n.length;a++){var s=n[a],u=s.param,c=s.opts;o.push(u),i=c.name}var f=Z.getAdapterByName(i).transToURL(o,n[0].opts);t.sendRequestViaURls(f,(function(){r?T.successItems(r,n):T.successItems(e,n)}),(function(){r?T.failItems(r,n):T.failItems(e,n)}))}},this.initEvent()}return t.prototype.initEvent=function(){f.a.on("dispatchCommon",this.sendReporter),f.a.on("dispatchTryCommon",this.sendReporter)},t.prototype.sendRequestViaURls=function(t,e,n){if(Object(i.h)(t))for(var r=0;r<t.length;r++)Object(R.a)({url:t[r]+"&t="+Object(i.e)(),method:"GET",onSucc:e,onError:n,onTimeout:n});else t&&Object(R.a)({url:t+"&t="+Object(i.e)(),method:"GET",onSucc:e,onError:n,onTimeout:n})},t.prototype.report=function(t,e,n,r){var o=t.getConfigs().queueConfig;if(Object(u.b)("[common-"+n.name+"]",e),r){var i=t.transToURL(e,n);this.sendRequestViaURls(i)}else T.addOne(o,e,n)},t}()),D=new(function(){function t(){this.started=!1,this.LSLastPingTime=0,this.LSErrorFlag=1}return t.prototype.send=function(t){var e=this;Object(R.a)({url:t+"?v=3&t="+ +new Date+"&q=check",onSucc:function(){e.started=!1,clearInterval(e.intervalHandler),e.LSErrorFlag=0},method:"GET"})},t.prototype.start=function(t){var e=this;this.pingURL=t,this.started||(this.started=!0,clearInterval(this.intervalHandler),this.intervalHandler=setInterval((function(){var t=e.LSLastPingTime,n=Object(i.e)();0===t?e.LSLastPingTime=n:n>t+6e4&&(e.LSLastPingTime=n,e.send(e.pingURL))}),6e4))},t.prototype.stop=function(){this.intervalHandler&&(clearInterval(this.intervalHandler),this.intervalHandler=null)},t}()),j=new(function(){function t(){this.LSErrorFlag=0,this.LSTimeDiffDelay=0,this.LSTestModeFlag=0,this.errorFlag={set:this.errorSet,get:this.errorGet,clear:function(){}},this.testModeFlag={set:this.testSet,get:this.testGet,clear:this.testClear},this.timeDiffFlag={set:this.diffSet,get:this.diffGet,clear:function(){}}}return t.prototype.errorSet=function(t){this.LSErrorFlag=1,D.start(t)},t.prototype.errorGet=function(){return 1===this.LSErrorFlag},t.prototype.testGet=function(){var t=+new Date,e=this.LSTestModeFlag;return 0!==e&&t-e<6048e5},t.prototype.testSet=function(){this.LSTestModeFlag=+new Date},t.prototype.testClear=function(){this.LSTestModeFlag=0},t.prototype.diffSet=function(){this.LSTimeDiffDelay=+new Date},t.prototype.diffGet=function(){var t=+new Date,e=this.LSTimeDiffDelay;return!(0===e||t-e>864e5)},t}()),I=n(13),_=n.n(I),x=j.errorFlag,E=j.testModeFlag,C=new(function(){function t(){var t=this;this.sendReporter=function(e,n){s.a.mergeQueueConfig;n.length&&Object(R.a)({onSucc:function(){E.clear(),D.stop(),T.successItems(s.a.mergeQueueConfig,n)},onError:function(e){x.set(s.a.cgiURL),t.dispatchOriginRequest(n),4===e&&Q.commonReport(2394321)},onTimeout:function(){t.dispatchOriginRequest(n),Object(i.e)()-Object(i.e)()<8e3&&Q.commonReport(2589015),x.set(s.a.cgiURL)},onTest:function(){E.set(),T.successItems(s.a.mergeQueueConfig,n)},timeout:1e4,url:s.a.cgiURL,data:t.buildData(n),method:"POST"})},this.initEvent()}return t.prototype.initEvent=function(){f.a.on("dispatchMerge",this.sendReporter)},t.prototype.getAdapterConfigByName=function(t){var e=Z.getAdapterByName(t);return e&&e.getConfigs()||{}},t.prototype.buildData=function(t){for(var e=[],n=0;n<t.length;n++)Object(u.b)("[merge-"+t[n].opts.name+"]",t[n].param),e.push({param:t[n].param,opts:t[n].opts});var r=JSON.stringify(e);return e=_.a.compressToBase64(r),e=encodeURIComponent(e),{v:"3",t:+new Date,q:e}},t.prototype.splitItemsBySourceKey=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n],o=Z.getAdapterByName(r.opts.name).getSourceKey();e[o]||(e[o]=[]),e[o].push(r)}return e},t.prototype.sendOriginalRequest=function(t){for(var e=0;e<t.length;e++){Z.getAdapterByName(t[e].opts.name).commonReport(t[e].param,t[e].opts)}},t.prototype.dispatchOriginRequest=function(t){var e=this.splitItemsBySourceKey(t);Object(i.o)(e,(function(t,e){var n=Z.getAdapterBySourceKey(t).getConfigs();f.a.trigger("dispatchTryCommon",n,e,s.a.mergeQueueConfig)}))},t.prototype.report=function(t,e,n){var r=t.getConfigs(),o=r.shouldMerge,i=r.reportInTestMode,a=!1;if(o?E.get()?("function"!=typeof o||o(e))&&("function"!=typeof i||i(e))||(a=!0):"function"!=typeof o||o(e)||(a=!0):a=!0,a)S.report(t,e,n,!1);else{var u=s.a.mergeQueueConfig;T.addOne(u,e,n)}},t}()),k=new(function(){function t(){}return t.prototype.report=function(t,e,n){Object(u.b)("[immediate-"+n.name+"]",e);var r=t.transToURL(e,n);if(r){var o=r+"&t="+Object(i.e)();if(!Object(R.b)({url:o})){t.getConfigs().queueConfig;var a=function(){t.report(e,n,!1)};Object(R.a)({url:o,method:"GET",onSucc:function(){},onError:a,onTimeout:a})}}},t}());var B,L=function(t,e,n,r){t.getConfigs(),r?k.report(t,e,n):s.a.enableMergeReport?C.report(t,e,n):S.report(t,e,n,r)};!function(t){t.HUATUO="huatuo",t.MONITOR="monitor",t.RETCODE="retcode",t.TDBANK="tdbank",t.TDW="tdw",t.COMMON="common"}(B||(B={}));var M=n(5),P=n(7),A=function(){var t=this;this.adapterName=B.COMMON,this.transToURL=function(t,e){return""},this.resetConfig=function(e){t.configs?(Object(i.n)(t.configs,e),t.syncConfigToWorker()):Object(u.a)("找不到此适配器")},this.getConfigs=function(){return t.configs||{}},this.getSourceKey=function(){var e=t.getConfigs();return e.queueConfig&&e.queueConfig.sourceKey||""},this.report=function(e,n,r){void 0===n&&(n={}),void 0===r&&(r=!1),n.name=t.adapterName,Object(a.a)()&&l.c.adtSum(l.a.REPORT_TOTAL,1);try{Object(a.a)()&&!r?P.a.postMessageToWorker({type:"api",payload:{data:e,opts:n,isImmediately:r},opts:{reportType:"auto"}}):L(t,e,n,r)}catch(t){Object(u.a)(t)}},this.commonReport=function(e,n,r){void 0===n&&(n={}),void 0===r&&(r=!1),n.name=t.adapterName;try{Object(a.a)()?P.a.postMessageToWorker({type:"api",payload:{data:e,opts:n,isImmediately:r},opts:{reportType:"common"}}):(M.a.onBeforeCommonReport(e,n,r),S.report(t,e,n,r))}catch(t){Object(u.a)(t)}},this.mergeReport=function(e,n){void 0===n&&(n={}),n.name=t.adapterName;try{Object(a.a)()?P.a.postMessageToWorker({type:"api",payload:{data:e,opts:n,isImmediately:!1},opts:{reportType:"merge"}}):(M.a.onBeforeMergeReport(e,n),C.report(t,e,n))}catch(t){Object(u.a)(t)}},this.apiRequestToWorker=function(t,e,n){P.a.postMessageToWorker({type:"apiWorker",payload:{data:t,opts:e},opts:{reportType:n}},!0)},this.syncConfigToWorker=function(){if(Object(a.a)()){var e=t.configs,n=e.baseURL,r=e.shouldMerge,o=e.reportInTestMode,i=e.queueConfig,s=e.projectID,u=e.pageName,c=e.secretKey,f={baseURL:n,shouldMerge:"function"==typeof r?r():r,reportInTestMode:"function"==typeof o?o():o,queueConfig:{maxInBatch:i.maxInBatch,maxSize:i.maxSize},projectID:s,pageName:u,secretKey:c};P.a.postMessageToWorker({type:"adapterConfig",payload:f,opts:{adapterName:t.adapterName}})}}},N=new A;function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var F,W=(F=function(t,e){return(F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}F(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),U=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=B.HUATUO,e.configs={baseURL:"https://report.idqqimg.com/node_b/speedreport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"huatuo_queue_v3",pendingKey:"huatuo_pending_v3",maxInBatch:20,maxSize:10}},e.transToURL=function(t,n){var r,o,a=t||[];"object"!==q(t)||Object(i.h)(t)||(a=[t]);var s=[];if(!a.length)return[];for(var u in r=e.exractData(a))r.hasOwnProperty(u)&&(o={flag1:r[u].flag1,flag2:r[u].flag2,flag3:r[u].flag3,apn:n.envInfo.apn,appid:r[u].appid,platform:n.envInfo.platform},Object.assign(o,r[u].timingObj),s.push(e.configs.baseURL+Object(i.q)(o)));return s},e}return W(e,t),e.prototype.exractData=function(t){var e=t||[],n=null,r="";if(e.length){n={};for(var o=0;o<e.length;o++)n[r=e[o].flag1+"_"+e[o].flag2+"_"+e[o].flag3+e[o].appid]||(n[r]={flag1:e[o].flag1,flag2:e[o].flag2,flag3:e[o].flag3,appid:e[o].appid,timingObj:{}}),n[r].timingObj[e[o].id]=e[o].timing}return n},e}(A)),K=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Q=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=B.MONITOR,e.configs={baseURL:"https://report.idqqimg.com/node_b/monitorreport?monitors=",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"monitor_queue_v3",pendingKey:"monitor_pending_v3",maxInBatch:100,maxSize:10}},e.transToURL=function(t){var n=[];return"number"==typeof t?n.push(t):Object(i.h)(t)&&(n=t),n.length&&e.configs?e.configs.baseURL+"["+n+"]":""},e}return K(e,t),e}(A)),H=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),V=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=B.RETCODE,e.configs={baseURL:"https://report.idqqimg.com/node_b/retcodereport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"retcode_queue_v3",pendingKey:"retcode_pending_v3",maxInBatch:20,maxSize:10}},e.keyList=["domain","cgi","type","code","time","rate","uin","apn","device","signalStrength","expansion1","expansion2","expansion3","data","platform","appid"],e.transToURL=function(t,n){var r,o="",a=[];if(Object(i.h)(t))for(r=0;r<t.length;r++)a.push(e.extractData(t[r],r+1));else a.push(e.extractData(t,1));return a.length>0?(o=e.configs.baseURL+"key="+encodeURIComponent(e.keyList.join(",")),o+="&"+a.join("&")):o},e}return H(e,t),e.prototype.extractData=function(t,e){for(var n=[],r=0;r<this.keyList.length;r++)n.push(e+"_"+(r+1)+"="+encodeURIComponent(t[this.keyList[r]]));if(n.length>0)return n.join("&")},e}(A)),G=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),J=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=B.TDBANK,e.configs={baseURL:"https://report.idqqimg.com/node_b/tdbankreport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"tdbank_queue_v3",pendingKey:"tdbank_pending_v3",maxInBatch:20,maxSize:10}},e.transToURL=function(t,n){var r,o,a,s=t||[],u=[],c={};if(Object(i.h)(s)){r=s.length;for(var f=0;f<r;f++)c[a=(o=s[f]).tdbank_table&&o.tdbank_busi_id?o.tdbank_table+"|"+o.tdbank_busi_id:o.table_id+"|"+o.busi_id]||(c[a]=[]),c[a].push(o);for(var p in c)c.hasOwnProperty(p)&&u.push(e.getItemURL(c[p],n));return u}return e.getItemURL([s],n)},e}return G(e,t),e.prototype.getItemURL=function(t,e){var n,r,o,a=[],s=[],u={},c={};return c.tdbank_busi_id=!0,c.tdbank_table=!0,c.busi_id=!0,c.table_id=!0,function(){var e,n,i,f,p=1,l=[];for(e=0;e<t.length;e++)for(i in f=t[e],r=t[e].tdbank_table||t[e].table_id,o=t[e].tdbank_busi_id||t[e].busi_id,f)if(f.hasOwnProperty(i)){if(c[i])continue;if(u[i])continue;u[i]=p++,a.push(i)}for(e=0;e<t.length;e++){for(f=t[e],l=new Array(a.length),n=0;n<a.length;n++)l[n]=void 0===f[a[n]]?"":f[a[n]];s.push(l)}}(),t&&0!==t.length?(n={table_id:r,busi_id:o,fields:JSON.stringify(a),datas:JSON.stringify(s)},n=this.configs.baseURL+Object(i.q)(n)):""},e}(A)),X=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),z=function(){return(z=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Y=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=B.TDW,e.configs={baseURL:"https://report.idqqimg.com/node_b/tdwreport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"tdw_queue_v3",pendingKey:"tdw_pending_v3",maxInBatch:20,maxSize:10}},e.transToURL=function(t,n){var r,o,a=t||[],s=z({timeField:"t"},n),u=[],c={};if(Object(i.h)(a)){r=a.length;for(var f=0;f<r;f++)c[(o=a[f]).table]||(c[o.table]=[]),c[o.table].push(o);for(var p in c)c.hasOwnProperty(p)&&u.push(e.getItemURL(c[p],p,s));return u}return e.getItemURL([a],a.table,s)},e}return X(e,t),e.prototype.getItemURL=function(t,e,n){var r,o=[],a=[],s={},u={};return delete t.table,u[n.timeField]=!0,function(){var e,n,r,i,c=1,f=[];for(e=0;e<t.length;e++)for(r in i=t[e])if(i.hasOwnProperty(r)){if(u[r])continue;if(s[r])continue;s[r]=c++,o.push(r)}for(e=0;e<t.length;e++){for(i=t[e],f=new Array(o.length),n=0;n<o.length;n++)f[n]=void 0===i[o[n]]?"":i[o[n]];a.push(f)}}(),t&&0!==t.length?(r={table:e,fields:JSON.stringify(o),datas:JSON.stringify(a),pr_t:n.timeField},r=this.configs.baseURL+Object(i.q)(r)):""},e}(A));n.d(e,"c",(function(){return U})),n.d(e,"d",(function(){return Q})),n.d(e,"e",(function(){return V})),n.d(e,"f",(function(){return J})),n.d(e,"g",(function(){return Y})),n.d(e,"a",(function(){return N}));var $=function(){function t(){}return t.prototype.getAdapterByName=function(t){switch(t){case B.HUATUO:return U;case B.MONITOR:return Q;case B.RETCODE:return V;case B.TDBANK:return J;case B.TDW:return Y;default:return N}},t.prototype.getAdapterBySourceKey=function(t){switch(t){case U.configs.queueConfig.sourceKey:return U;case Q.configs.queueConfig.sourceKey:return Q;case V.configs.queueConfig.sourceKey:return V;case J.configs.queueConfig.sourceKey:return J;case Y.configs.queueConfig.sourceKey:return Y;default:return N}},t}(),Z=e.b=new $},function(t,e,n){"use strict";(function(t){var r=n(17),o=n(18),i=n(19),a=n(14),s=(n(20),n(5)),u=n(1),c=n(0),f=n(16);n.d(e,"b",(function(){return f.a}));var p=n(3);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var h=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},d=function(){},g=Object(p.e)((function(e){var n=e.method,f=void 0===n?"GET":n;e.url.length>2e3&&(f="POST",e.method="POST"),s.a.onBeforeReportSend(e);var p=e.onSucc,g=void 0===p?d:p,m=e.onError,y=void 0===m?d:m,b=e.onTimeout,v=void 0===b?d:b;e.onSucc=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];s.a.onReportSenderSuccess.apply(s.a,h([e],t)),g.apply(void 0,t)},e.onError=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];s.a.onReportSenderError.apply(s.a,h([e],t)),y.apply(void 0,t)},e.onTimeout=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];s.a.onReportSenderTimeout.apply(s.a,h([e],t)),v.apply(void 0,t)};try{t&&t.isNodePlatform?Object(a.a)(e):"object"===("undefined"==typeof wx?"undefined":l(wx))&&wx&&wx.request?Object(r.a)(e):c.b&&c.b.Image&&("get"===f||"GET"===f)?Object(o.a)(e):Object(i.a)(e)}catch(t){Object(u.a)(t)}}));e.a=g}).call(this,n(12))},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o,i=new(function(){function t(){this.ua=window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.toLowerCase()||"",this.href=window&&window.location&&window.location.href||"",this.wxUrlContainStr="__wxjs_environment=miniprogram",this.qqUrlContainStr="__wxjs_environment=qqminiprogram",this.ie=/rv:([\d.]+)\) like gecko/.test(this.ua)||/msie ([\d.]+)/.test(this.ua)||/Trident/.test(this.ua),this.chrome=/chrome\/([\d.]+)/.test(this.ua),this.opera=/opera/.test(this.ua),this.safari=/webkit/.test(this.ua),this.firefox=/firefox/.test(this.ua)&&!/(compatible|webkit)/.test(this.ua),this.edge=/edge/.test(this.ua),this.edgeChromium=this.chrome&&this.edge,this.isPad=/(ipad)/i.test(this.ua),this.isMobile=/(mobile)/i.test(this.ua)&&!this.isPad,this.isMac=/Mac OS X/i.test(this.ua)&&!this.isMobile,this.isAndroid=/android|adr/i.test(this.ua),this.isIOS=/(iphone|ipad|ipod)/.test(this.ua),this.isWindowStore=/MSAppHost/i.test(this.ua),this.isPCQQBrowser=!this.isMobile&&/QQBrowser/i.test(this.ua)&&!/QBCore/i.test(this.ua),this.isMobileQQBrowser=this.isMobile&&/MQQBrowser/i.test(this.ua)&&!/TBS/i.test(this.ua),this.isQQBrowser=this.isMobile?this.isMobileQQBrowser:this.isPCQQBrowser,this.isWxMiniProgram=this.href.indexOf(this.wxUrlContainStr)>-1||/MicroMessenger/i.test(this.ua)&&/miniProgram/i.test(this.ua),this.isQQMiniProgram=this.href.indexOf(this.qqUrlContainStr)>-1||/QQ/i.test(this.ua)&&/MiniApp/i.test(this.ua),this.isMiniProgram=this.isWxMiniProgram||this.isQQMiniProgram,this.isWxWork=/(wxwork)/i.test(this.ua),this.isWeWork=this.isWxWork,this.isWeChat=/MicroMessenger/i.test(this.ua)&&!this.isWxWork&&!this.isWxMiniProgram,this.isWechat=this.isWeChat,this.isTim=/TIM/i.test(this.ua),this.isQQ=/QQ/i.test(this.ua)&&!this.isWxWork&&!this.isWeChat&&!this.isQQBrowser&&!this.isTim&&!this.isQQMiniProgram,this.isTimOrQQ=this.isTim||this.isQQ,this.isTimOrQQFamily=this.isTim||/QQ/i.test(this.ua),this.isPCTim=/QBCore/i.test(this.ua)&&/TIM2.0/i.test(this.ua),this.isWindowPlatform=/(win64|wow64|win32|wow32)/i.test(this.ua),this.isQQNativeMiniProgram="object"===("undefined"==typeof wx?"undefined":r(wx))&&"function"==typeof wx.canIUse&&wx.canIUse("request"),this.isWxNativeMiniProgram=!this.isQQNativeMiniProgram&&"object"===("undefined"==typeof qq?"undefined":r(qq))&&"function"==typeof qq.canIUse&&qq.canIUse("request"),this.isNativeMiniProgram=this.isQQNativeMiniProgram||this.isWxNativeMiniProgram}return Object.defineProperty(t.prototype,"browser",{get:function(){return{isIE:this.ie,isChrome:this.chrome,isOpera:this.opera,isSafari:this.safari,isFirefox:this.firefox,isEdge:this.edge,isEdgeChromium:this.edgeChromium,isPCQQBrowser:this.isPCQQBrowser,isMobileQQBrowser:this.isMobileQQBrowser,isQQBrowser:this.isQQBrowser}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"platform",{get:function(){return{isPad:this.isPad,isMobile:this.isMobile,isMac:this.isMac,isAndroid:this.isAndroid,isIOS:this.isIOS,isWindow:this.isWindowPlatform}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"host",{get:function(){return{isWindowStore:this.isWindowStore,isWxMiniProgram:this.isWxMiniProgram,isQQMiniProgram:this.isQQMiniProgram,isMiniProgram:this.isMiniProgram,isQQNativeMiniProgram:!!this.isQQNativeMiniProgram,isWxNativeMiniProgram:!!this.isWxNativeMiniProgram,isNativeMiniProgram:!!this.isNativeMiniProgram,isWxWork:this.isWxWork,isWeWork:this.isWeWork,isWeChat:this.isWeChat,isWechat:this.isWechat,isTim:this.isTim,isQQ:this.isQQ,isTimOrQQ:this.isTimOrQQ,isTimOrQQFamily:this.isTimOrQQFamily,isPCTim:this.isPCTim}},enumerable:!0,configurable:!0}),t}()),a=new(function(){function t(){this.lastCookie="",this.lastCookieObj={},this.platformCache="",this.browserCache="",this.networkGot=!1,this.networkRet="-1"}return Object.defineProperty(t.prototype,"uin",{get:function(){var t=this.getCookie("uin")||"";return"o0"===t.slice(0,2)?t.slice(2):"o"===t.slice(0,1)?t.slice(1):t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"networkType",{get:function(){var t=this;if(this.networkGot)return this.networkRet;var e=window&&window.mqq;return e&&e.device&&e.device.getNetworkType&&e.support("mqq.device.getNetworkType")&&e.device.getNetworkType((function(e){t.networkRet=e})),this.networkGot=!0,this.networkRet},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"platform",{get:function(){if(this.platformCache)return this.platformCache;var t=window&&window.navigator&&window.navigator.userAgent||"";t=t.toLocaleLowerCase();var e="unknown";return/android|adr/i.test(t)?e="android":/(iphone|ipad|ipod)/i.test(t)?e="ios":/(mobile)/i.test(t)?e="mobile":t&&(e="pc"),this.platformCache=e,e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"browser",{get:function(){if(this.browserCache)return this.browserCache;var t=i.browser,e=(t.isIE?"IE":t.isChrome&&"Chrome")||t.isFirefox&&"Firefox"||t.isSafari&&"Safari"||t.isEdgeChromium&&"EdgeChromium"||t.isEdge&&"Edge"||"unknown";return this.browserCache=e,e},enumerable:!0,configurable:!0}),t.prototype.getCookie=function(t){if(!window)return"";var e=document&&document.cookie||"";if(this.lastCookie&&this.lastCookie===e)return this.lastCookieObj[t]||"";this.lastCookie=e;for(var n=e.split(";"),r=n.length,o=0;o<r;o++){var i=n[o].trim().split("=");i[0],decodeURIComponent(i.slice(1).join("="))}return this.lastCookieObj[t]||""},t}()),s=n(8),u=n(5),c=n(0),f=n(3);!function(t){t.ACGI="acgi",t.ADT="adt",t.AST="ast",t.APM="apm",t.HUATUO="huatuo",t.MONITOR="monitor",t.PERFORMANCE="performance",t.RETCODE="retcode",t.TDBANK="tdbank",t.TDW="tdw"}(o||(o={}));var p,l=n(1);function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(){p={appid:0,flag1:0,flag2:0,flag3:0,speedTime:[]}}function g(t,e){void 0===e&&(e=!0);var n=["appid","flag2","flag2","flag3"].filter((function(e){return!t||!t[e]}));return!(n.length>0)||(e&&Object(l.a)("缺少必要参数:"+n.join(",")),!1)}var m=Object(f.d)((function(t,e){if(void 0===e&&(e=!1),u.a.onReceiveReporter(o.HUATUO,t,e),g(t)){if(void 0===t.speedTime)throw"没有测速信息";if(t.speedTime=function(t,e){var n=t.speedTime,r={};if(isNaN(+n)||(n=[+n]),void 0!==t.id&&1===n.length)return r[t.id]=n[0],delete t.id,r;if(n instanceof Array&&n.length){var o=!1;n[0]<1e12&&(o=!0);for(var i=0;i<n.length;i++)o?n[i]&&(r[i+1]=n[i]):0!==i&&n[i]&&(r[i]=n[i]-n[0])}else if("object"===h(n))for(var a in n)if(n.hasOwnProperty(a))if(e){if(""+parseInt(a)!=""+a)throw"有个奇怪的东西混入speedTime里面了："+a;r[a]=n[a]}else r[a]=n[a];return r}(t,!0),!Object.keys(t.speedTime).length)throw"解析 speedTime 参数错误";u.a.onHanldeParams(o.HUATUO,t);var n=t.speedTime;for(var r in n)s.c.report({flag1:t.flag1,flag2:t.flag2,flag3:t.flag3,timing:n[r],id:r,appid:t.appid},{envInfo:{platform:t.platform||a.platform,apn:t.apn||a.networkType}},e)}}));m.timeStart=function(t){d(),g(t)&&(p.appid=t.appid,p.flag1=t.flag1,p.flag2=t.flag2,p.flag3=t.flag3,p.speedTime=[],p.speedTime.push(Object(c.e)()))},m.time=function(){g(p)&&p.speedTime.push(Object(c.e)())},m.timeEnd=function(t){void 0===t&&(t=!1),g(p)&&(p.speedTime.push(Object(c.e)()),m(p,t),d())};var y=m,b=Object(f.d)((function(t,e){if(u.a.onReceiveReporter(o.MONITOR,t,e),"number"!=typeof t)throw"invalid id";u.a.onHanldeParams(o.MONITOR,t),s.d.report(t,{},e)})),v=(window&&(window.performance||window.webkitPerformance||window.msPerformance)||{}).timing,O=void 0===v?null:v,w=[];var T=Object(f.d)((function(t,e){u.a.onReceiveReporter(o.PERFORMANCE,t,e),O?(t.speedTime=function(){if(w.length)return w;var t=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"];O.domContentLoadedStart?t.splice(15,2,"domContentLoadedStart","domContentLoadedEnd"):O.domContentLoadedEventStart||t.splice(15,2,"domContentLoaded","domContentLoaded");for(var e=0,n=t.length;e<n;e++)w[e]=O[t[e]];return w}(),u.a.onHanldeParams(o.PERFORMANCE,t),y(t)):Object(l.c)("没有找到 performance timming 信息")})),R=(window&&window.mqq,Object(f.d)((function(t,e){u.a.onReceiveReporter(o.RETCODE,t,e);var n="",r="",i="",c={appid:t.appid||0,type:t.type||0,code:t.code||0,time:t.time||0,device:t.device||"",signalStrength:"",expansion1:t.expansion1||"",expansion2:t.expansion2||"",expansion3:t.expansion3||"",data:t.data||"",platform:t.platform||a.platform,rate:t.rate||1,uin:t.uin||0};if(t&&t.url)return!!/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/.test(decodeURIComponent(t.url))&&(Math.random()<1/c.rate&&(n=RegExp.$4||"",r=RegExp.$5||"",i=RegExp.$6||"",c.domain=n,c.cgi=r,t.includeSearch&&(c.cgi=r+i),c.apn=a.networkType,u.a.onHanldeParams(o.RETCODE,c),s.e.report(c,{},e)),!0);Object(l.c)("url 是必需参数")}))),S=Object(f.d)((function(t,e){u.a.onReceiveReporter(o.TDBANK,t,e),t.uin||(t.uin=a.uin),u.a.onHanldeParams(o.TDBANK,t),s.f.report(t,{},e)})),D=0,j={},I=Object(f.d)((function(t,e,n){if(u.a.onReceiveReporter(o.TDW,t,e,n),!t)throw"params can not be null";var r=t.table||n||D;if(!r){try{var i=window&&window.location&&window.location.host;!i||"qqweb.qq.com"!==i&&-1===i.indexOf("qun.qq.com")||(r="dc00141")}catch(t){throw"not found host"}if(!r)throw"table can not be null"}t.table=r;var f={};Object(c.p)(f,j),Object(c.p)(f,t),f.uin||(f.uin=a.uin),u.a.onHanldeParams(o.TDW,f),s.g.report(f,{},e)}));I.setDefaultTable=function(t){D=t},I.setDefaultData=function(t){Object(c.p)(j,t)},I.clearDefaultData=function(){j={}};var _=I,x=n(2),E=!1,C={holdTime:1e3,interval:60,maxReport:10},k=Object(f.d)((function(t){if(E)Object(l.d)("已经初始化过卡顿上报了");else if(E=!0,t.monitor||t.tdw)if(Object(f.b)()){var e={};Object(c.p)(e,C),Object(c.p)(e,t),Object(c.k)(e.holdTime)&&Object(c.k)(e.interval)?(x.b.on("jankReceiveHeartBeat",(function(){s.a.apiRequestToWorker(e,{},"jank")})),s.a.apiRequestToWorker(e,{init:!0},"jank")):Object(l.a)("holdTime 或 interval 参数错误")}else Object(l.d)("worker 没有起来，不做卡顿监控");else Object(l.a)("缺少 monitor 或 tdw 参数")}));k.stop=function(){s.a.apiRequestToWorker({},{stop:!0},"jank")};var B=k;n.d(e,"a",(function(){return y})),n.d(e,"c",(function(){return b})),n.d(e,"d",(function(){return T})),n.d(e,"e",(function(){return R})),n.d(e,"f",(function(){return S})),n.d(e,"g",(function(){return _})),n.d(e,"b",(function(){return B})),n.d(e,"h",(function(){return i}))},function(t,e,n){"use strict";var r=n(2),o=n(0),i=n(3),a=n(7),s=function(){function t(){var t=this;this.status=1,this.isCustom=!1,this.getStatus=function(){return t.isCustom?t.status:o.a&&o.a.navigator?o.a.navigator.onLine:t.status},this.isOffline=function(){return!t.getStatus()},this.setOffline=function(){t.isCustom||(t.isCustom=!0,t.offEvent()),t.offlineListener()},this.setOnline=function(){t.isCustom||(t.isCustom=!0,t.offEvent()),t.onlineListener()},this.offlineListener=function(){Object(i.a)()?t.syncStatusToWorker(0):Object(i.c)()||t.handleOffLine()},this.onlineListener=function(){Object(i.a)()?t.syncStatusToWorker(1):Object(i.c)()||t.handleOnLine()},this.handleOffLine=function(e){e&&e.isCustom&&(t.isCustom=!0),t.status=0},this.handleOnLine=function(e){e&&e.isCustom&&(t.isCustom=!0),t.status||(t.status=1,Object(i.b)()&&Object(i.c)()?r.b.trigger("networkConnect"):Object(i.b)()||r.b.trigger("networkConnect"))},this.initEvent()}return t.prototype.initEvent=function(){o.b&&o.b.addEventListener&&(o.b.addEventListener("online",this.onlineListener),o.b.addEventListener("offline",this.offlineListener)),Object(i.c)()&&(r.b.on("workerOffline",this.handleOffLine),r.b.on("workerOnline",this.handleOnLine))},t.prototype.offEvent=function(){o.b&&o.b.removeEventListener&&(o.b.removeEventListener("online",this.onlineListener),o.b.removeEventListener("offline",this.offlineListener))},t.prototype.syncStatusToWorker=function(t){this.status=t,a.a.postMessageToWorker({type:t?"online":"offline",payload:{isCustom:this.isCustom}},!0)},t}();e.a=new s},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r,o=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function o(t,e){if(!r[t]){r[t]={};for(var n=0;n<t.length;n++)r[t][t.charAt(n)]=n}return r[t][e]}var i={compressToBase64:function(t){if(null==t)return"";var n=i._compress(t,6,(function(t){return e.charAt(t)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:i._decompress(t.length,32,(function(n){return o(e,t.charAt(n))}))},compressToUTF16:function(e){return null==e?"":i._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:i._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){for(var e=i.compress(t),n=new Uint8Array(2*e.length),r=0,o=e.length;r<o;r++){var a=e.charCodeAt(r);n[2*r]=a>>>8,n[2*r+1]=a%256}return n},decompressFromUint8Array:function(e){if(null==e)return i.decompress(e);for(var n=new Array(e.length/2),r=0,o=n.length;r<o;r++)n[r]=256*e[2*r]+e[2*r+1];var a=[];return n.forEach((function(e){a.push(t(e))})),i.decompress(a.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":i._compress(t,6,(function(t){return n.charAt(t)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),i._decompress(t.length,32,(function(e){return o(n,t.charAt(e))})))},compress:function(e){return i._compress(e,16,(function(e){return t(e)}))},_compress:function(t,e,n){if(null==t)return"";var r,o,i,a={},s={},u="",c="",f="",p=2,l=3,h=2,d=[],g=0,m=0;for(i=0;i<t.length;i+=1)if(u=t.charAt(i),Object.prototype.hasOwnProperty.call(a,u)||(a[u]=l++,s[u]=!0),c=f+u,Object.prototype.hasOwnProperty.call(a,c))f=c;else{if(Object.prototype.hasOwnProperty.call(s,f)){if(f.charCodeAt(0)<256){for(r=0;r<h;r++)g<<=1,m==e-1?(m=0,d.push(n(g)),g=0):m++;for(o=f.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&o,m==e-1?(m=0,d.push(n(g)),g=0):m++,o>>=1}else{for(o=1,r=0;r<h;r++)g=g<<1|o,m==e-1?(m=0,d.push(n(g)),g=0):m++,o=0;for(o=f.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&o,m==e-1?(m=0,d.push(n(g)),g=0):m++,o>>=1}0==--p&&(p=Math.pow(2,h),h++),delete s[f]}else for(o=a[f],r=0;r<h;r++)g=g<<1|1&o,m==e-1?(m=0,d.push(n(g)),g=0):m++,o>>=1;0==--p&&(p=Math.pow(2,h),h++),a[c]=l++,f=String(u)}if(""!==f){if(Object.prototype.hasOwnProperty.call(s,f)){if(f.charCodeAt(0)<256){for(r=0;r<h;r++)g<<=1,m==e-1?(m=0,d.push(n(g)),g=0):m++;for(o=f.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&o,m==e-1?(m=0,d.push(n(g)),g=0):m++,o>>=1}else{for(o=1,r=0;r<h;r++)g=g<<1|o,m==e-1?(m=0,d.push(n(g)),g=0):m++,o=0;for(o=f.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&o,m==e-1?(m=0,d.push(n(g)),g=0):m++,o>>=1}0==--p&&(p=Math.pow(2,h),h++),delete s[f]}else for(o=a[f],r=0;r<h;r++)g=g<<1|1&o,m==e-1?(m=0,d.push(n(g)),g=0):m++,o>>=1;0==--p&&(p=Math.pow(2,h),h++)}for(o=2,r=0;r<h;r++)g=g<<1|1&o,m==e-1?(m=0,d.push(n(g)),g=0):m++,o>>=1;for(;;){if(g<<=1,m==e-1){d.push(n(g));break}m++}return d.join("")},decompress:function(t){return null==t?"":""==t?null:i._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(e,n,r){var o,i,a,s,u,c,f,p=[],l=4,h=4,d=3,g="",m=[],y={val:r(0),position:n,index:1};for(o=0;o<3;o+=1)p[o]=o;for(a=0,u=Math.pow(2,2),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(s>0?1:0)*c,c<<=1;switch(a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(s>0?1:0)*c,c<<=1;f=t(a);break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(s>0?1:0)*c,c<<=1;f=t(a);break;case 2:return""}for(p[3]=f,i=f,m.push(f);;){if(y.index>e)return"";for(a=0,u=Math.pow(2,d),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(s>0?1:0)*c,c<<=1;switch(f=a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(s>0?1:0)*c,c<<=1;p[h++]=t(a),f=h-1,l--;break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),a|=(s>0?1:0)*c,c<<=1;p[h++]=t(a),f=h-1,l--;break;case 2:return m.join("")}if(0==l&&(l=Math.pow(2,d),d++),p[f])g=p[f];else{if(f!==h)return null;g=i+i.charAt(0)}m.push(g),p[h++]=i+g.charAt(0),i=g,0==--l&&(l=Math.pow(2,d),d++)}}};return i}();void 0===(r=function(){return o}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){"use strict";e.a={}},function(t,e,n){"use strict";var r=n(2),o=n(6),i={},a={},s=!1;r.b.on("beforeunload",(function(){var t=0;for(var e in s=!0,i)i.hasOwnProperty(e)&&(clearTimeout(a[e]),i[e](),t++);o.c.adtSum(o.a.REPORT_ONEXIT,t)})),e.a=function(t,e,n,r){if(i[t])return s&&(delete i[t],e()),void(r&&r()&&(delete i[t],e()));clearTimeout(a[t]),i[t]=e,a[t]=setTimeout((function(){delete i[t],e()}),n)}},function(t,e,n){"use strict";var r=n(1);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=function(t){if(!t.url)return!1;if("object"!==("undefined"==typeof window?"undefined":o(window))||!window.navigator||"function"!=typeof window.navigator.sendBeacon)return!1;try{return window.navigator.sendBeacon(t.url+"&fromSDKSendBeacon=true")}catch(t){Object(r.a)(t)}}},function(t,e,n){"use strict";e.a=function(t){t.url&&(t.url.indexOf("https:")<0&&(t.url="https://"+t.url),wx.request({method:"GET",url:t.url,fail:function(e){var n=e.statusCode;t.onError&&t.onError(n)},header:{UseGet:"1"},complete:function(e){var n=e.statusCode;200===n?t.onSucc&&t.onSucc():202===n?t.onTest&&t.onTest():500===n?t.onTimeout&&t.onTimeout():t.onError&&t.onError(n)}}))}},function(t,e,n){"use strict";e.a=function(t){var e,n,r={},o={};t.timeout=t.timeout||1e4,t.url&&(e=+new Date,r[e]=new Image,r[e].id=e,r[e].onerror=function(){var e=this.id;clearTimeout(o[e]),r[e]&&(r[e].onerror=null,r[e].onload=null),delete o[e],delete r[e],n&&+new Date-n<1e3?t.onTimeout&&t.onTimeout():t.onError&&t.onError()},r[e].onload=function(){var e=this.width,n=this.id;clearTimeout(o[n]),r[n]&&(r[n].onerror=null,r[n].onload=null),delete o[n],delete r[n],1===e?t.onSucc&&t.onSucc():6===e?t.onTest&&t.onTest():5===e?t.onTimeout&&t.onTimeout():t.onError&&t.onError(e)},+new Date,r[e].src=t.url,o[e]=setTimeout((function(){r[e]&&(r[e].src=""),n=+new Date}),t.timeout))}},function(t,e,n){"use strict";var r=n(4);n(30);e.a=function(t){if(t.url){var e=new XMLHttpRequest;if(e){var n=t.method||"POST",o=!1;r.a.headRequest&&"GET"===n&&(-1===t.url.indexOf("report.idqqimg.com")&&-1===t.url.indexOf("report.url.cn")||(n="HEAD",o=!0));if(e.onerror=function(){t.onError&&t.onError()},e.ontimeout=function(){t.onTimeout&&t.onTimeout()},e.onreadystatechange=function(){if(4===e.readyState){var n=e.status;200===n?function(){if(o)t.onSucc&&t.onSucc();else{var n=e.responseText;try{switch(JSON.parse(n).retcode){case 0:t.onSucc&&t.onSucc();break;case 1:t.onTest&&t.onTest();break;case 6:t.onTimeout&&t.onTimeout();break;default:t.onError&&t.onError(200)}}catch(e){t.onError&&t.onError(200)}}}():function(e){o?t.onError&&t.onError(e):202===e?t.onTest&&t.onTest():500===e?t.onTimeout&&t.onTimeout():t.onError&&t.onError(e)}(n)}},"POST"===n){var i=new FormData;if(t.data)for(var a in t.data)t.data.hasOwnProperty(a)&&i.append(a,t.data[a]);e.open(n,t.url,!0),e.timeout=t.timeout||1e4,e.send(i)}else e.open(n,t.url,!0),e.timeout=t.timeout||1e4,e.send()}}}},function(t,e){},function(t,e,n){"use strict";(function(t){n(25),n(1),n(26),n(27),n(7);var r=n(4),o=n(10),i=n(8),a=n(9),s=n(13),u=n.n(s),c=n(5),f=n(6),p=n(11);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var h=function(){function e(){var e=this;this.report={isMain:!0,closeLog:r.a.closeLog,openLog:r.a.openLog,reset:r.a.reset,resetConfig:r.a.reset,closeReport:r.a.closeReport,openReport:r.a.openReport,enableMerge:r.a.enableMerge,disableMerge:r.a.disableMerge,disableWorker:r.a.disableWorker,reportSender:a.a,reportInside:f.c,huatuo:o.a,monitor:o.c,performance:o.d,retcode:o.e,tdbank:o.f,tdw:o.g,jank:o.b,addHooks:c.a.addHooks,removeHooks:c.a.removeHooks,huatuoConfig:i.c.resetConfig,monitorConfig:i.d.resetConfig,retcodeConfig:i.e.resetConfig,tdbankConfig:i.f.resetConfig,tdwConfig:i.g.resetConfig,utils:{compressToBase64:u.a.compressToBase64,decompressFromBase64:u.a.decompressFromBase64,userAgent:o.h},network:{isOffline:p.a.isOffline,setOffline:p.a.setOffline,setOnline:p.a.setOnline},version:"V3.0.14"},this.init=function(){window&&(window.AlloyReportNext?window.AlloyReportNext.isMain||Object.assign(window.AlloyReportNext,e.report):window.AlloyReportNext=e.report,window.AlloyReport||(window.AlloyReport=window.AlloyReportNext)),void 0!==t&&t.isNodePlatform},this.doInlineReport=function(){if("object"===("undefined"==typeof window?"undefined":l(window))){var t=function(){if(!window||!window.localStorage)return window.ALLOY_REPORT_NEXT;var t=window.localStorage.getItem("ALLOY_REPORT_NEXT");try{return t&&JSON.parse(t)}catch(t){return}}();t instanceof Array||(t=[]);for(var n=0;n<t.length;n++)try{var r=t[n].t.split("."),o=e.report[r[0]];if(!o)continue;if(r.length>1){var i=o&&o[r[1]];"function"==typeof i&&i.apply(window,t[n].d)}else o.apply(window,t[n].d)}catch(t){console.error(t)}!function(){if(window&&window.localStorage)window.localStorage.removeItem("ALLOY_REPORT_NEXT");else window.ALLOY_REPORT_NEXT=null}()}},this.doInsideReport=function(){for(var t=f.c.getLastInsideDatas(),e=t.monitor,n=t.adt,r=0;r<e.length;r++)Object(o.c)(e[r]);for(r=0;r<n.length;r++)Object(o.g)(n[r],!1,"dc05239")},this.init(),this.printBuildInfo(),this.doInlineReport(),this.doSDKLoadedReport(),this.doInsideReport(),setInterval((function(){e.doInlineReport()}),1e4)}return e.prototype.printBuildInfo=function(){console.log("AlloyReport-SDK-V3.0.14-build.2020.7.26")},e.prototype.doSDKLoadedReport=function(){this.report.monitor(f.b.SDK_LOAD)},e}();e.a=(new h).report}).call(this,n(12))},function(t,e,n){"use strict";var r=n(1),o=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},i=function(){var t=this;this.namespaceCache={},this.create=function(e){t.namespaceCache[e]||(t.namespaceCache[e]={});var n=t.namespaceCache[e];return{on:function(e,r){t.on(n,e,r)},trigger:function(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];t.trigger.apply(t,o([n,e],r))},remove:function(e,r){t.remove(n,e,r)},getLength:function(e){return t.getLength(n,e)}}},this.on=function(t,e,n){e&&"function"==typeof n&&(void 0===t[e]&&(t[e]=[]),t[e].push(n))},this.trigger=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(e&&t[e])for(var i=t[e],a=0;a<i.length;a++)try{i[a].apply(i,n)}catch(t){Object(r.a)(t)}},this.remove=function(t,e,n){if(e&&t[e]){for(var r=t[e],o=-1,i=0;i<r.length;i++)r[i]===n&&(o=i);1!==o&&r.splice(o,1)}},this.getLength=function(t,e){return e&&t[e]?t[e].length:0}};e.a=i},function(t,e,n){t.exports=function(){return n(29)('!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){self,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(t,e,n){"use strict";(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"i",(function(){return u})),n.d(e,"h",(function(){return c})),n.d(e,"l",(function(){return f})),n.d(e,"f",(function(){return p})),n.d(e,"j",(function(){return l})),n.d(e,"m",(function(){return h})),n.d(e,"c",(function(){return d})),n.d(e,"g",(function(){return g})),n.d(e,"k",(function(){return y})),n.d(e,"e",(function(){return v})),n.d(e,"d",(function(){return b}));var o="undefined"!=typeof window&&window&&window.navigator?window:null,i="undefined"!=typeof self&&self&&self.navigator?self:null,a=g()?qq||wx:null,s=o||i,u=o&&o.localStorage&&"function"==typeof o.localStorage.getItem?1:g()&&"function"==typeof a.getStorage?2:0,c="object"===("undefined"==typeof indexedDB?"undefined":r(indexedDB))&&"function"==typeof indexedDB.open;function f(t,e,n){for(var r in e)if(e.hasOwnProperty(r)){if(n&&-1!==n.indexOf(r))continue;var o=e[r];void 0!==o&&(t[r]=o)}}function p(t){if(!t)return!1;var e=t.constructor.toString().substring(9).indexOf("Array");return t&&e>-1&&e<=1}function l(t,e){for(var n in e)(o=e[n])&&"object"===r(o)&&!p(o)?l(t[n],e[n]):t[n]=e[n];var o}function h(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(String(n))+"="+encodeURIComponent(String(t[n])));return e.join("&")}function d(){return(new Date).getTime()}function g(){return"object"===("undefined"==typeof qq?"undefined":r(qq))&&qq.canIUse?qq.canIUse("request"):!("object"!==("undefined"==typeof wx?"undefined":r(wx))||!wx.canIUse)&&wx.canIUse("request")}function y(t,e){for(var n=Object.keys(t),r=n.length,o=0;o<r;o++){var i=n[o];e(i,t[i])}}function m(t){return!!(s&&s.location&&s.location.search.indexOf(t)>0)}function v(){return m("alloy_report_debug")||m("alloy-report-debug")}function b(){return m("alloy_report_close")||m("alloy-report-close")}}).call(this,n(8))},function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return h})),n.d(e,"d",(function(){return d}));var r=n(0),o=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},i="[AlloyReport-Worker]",a=Object(r.e)(),s=(console.log,console.error),u=console.warn,c=console.info,f=function(t,e){t.apply(void 0,o([i],e))},p=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.apply(void 0,o([i],t))},l=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a&&f(u,t)},h=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a&&f(c,t)},d=function(t){a=t}},function(t,e,n){"use strict";(function(t,r){n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return f}));var o=n(12),i=n(0),a=n(3),s=new o.a,u=s.create("global"),c=s.create("hooks"),f=s.create("dispatch");!function(){if(i.b&&i.b.addEventListener){var e=function(){a.a&&a.a.postMessageToWorker&&a.a.postMessageToWorker({type:"beforeunload"},!0),u.trigger("beforeunload")};i.b.addEventListener("beforeunload",e),i.b.addEventListener("pagehide",e)}else t&&t.isNodePlatform&&r.on("beforeExit",(function(){u.trigger("beforeunload")}))}()}).call(this,n(8),n(14))},function(t,e,n){"use strict";e.a={}},function(t,e,n){"use strict";var r=n(0),o=n(5),i=n(3),a=n(1),s=function(){function t(){var t=this;this.configs={mergeQueueConfig:{sourceKey:"report_source_v2",pendingKey:"report_pending_v2",maxInBatch:5e4,maxSize:5e4},enableMergeReport:!0,cgiURL:"https://report.idqqimg.com/node/report/",backupUrl:"https://report.idqqimg.com/node_b/",isLogPrint:Object(r.e)(),isCloseReport:Object(r.d)(),expiredTime:6048e5,supportOffline:!0,maxStoreReport:1e4,headRequest:!0,enableWorker:!0},this.closeLog=function(){t.configs.isLogPrint=!1,Object(a.d)(!1),t.syncConfigToWorker()},this.openLog=function(){t.configs.isLogPrint=!0,Object(a.d)(!0),t.syncConfigToWorker()},this.closeReport=function(){t.configs.isCloseReport=!0,t.syncConfigToWorker()},this.openReport=function(){t.configs.isCloseReport=!1,t.syncConfigToWorker()},this.enableMerge=function(){t.configs.enableMergeReport=!0,t.syncConfigToWorker()},this.disableMerge=function(){t.configs.enableMergeReport=!1,t.syncConfigToWorker()},this.disableWorker=function(){t.configs.enableWorker=!1,i.a.terminateWorker()},this.reset=function(e){Object(r.j)(t.configs,e),Object(a.d)(t.configs.isLogPrint),t.syncConfigToWorker()},this.syncConfigToWorker=function(){if(Object(o.a)()){var e=JSON.parse(JSON.stringify(t.configs));i.a.postMessageToWorker({type:"config",payload:e})}}}return Object.defineProperty(t.prototype,"mergeQueueConfig",{get:function(){return this.configs.mergeQueueConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableMergeReport",{get:function(){return this.configs.enableMergeReport},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cgiURL",{get:function(){return this.configs.cgiURL},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLogPrint",{get:function(){return this.configs.isLogPrint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCloseReport",{get:function(){return this.configs.isCloseReport},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expiredTime",{get:function(){return this.configs.expiredTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supportOffline",{get:function(){return this.configs.supportOffline},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxStoreReport",{get:function(){return this.configs.maxStoreReport},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headRequest",{get:function(){return this.configs.headRequest},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableWorker",{get:function(){return this.configs.enableWorker},enumerable:!0,configurable:!0}),t}();e.a=new s},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return u}));var r=n(1),o=n(3);function i(){return s()&&!1}function a(){return!0}function s(){return!(!o.a||!o.a.worker)}function u(t,e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];try{return t.apply(void 0,n)}catch(t){e&&e(),Object(r.a)(t)}}}n(0)},function(t,e,n){"use strict";var r=["onReceiveReporter","onHanldeParams","onBeforeCommonReport","onBeforeMergeReport","onBeforeReportSend","onReportSenderError","onReportSenderSuccess","onReportSenderTimeout"],o=n(1),i=n(2),a=n(5),s=n(3),u=n(10);e.a=new function(){var t=this;this.addHooks=function(e,n){"function"==typeof n?-1!==r.indexOf(e)?(i.c.on(e,n),t.syncHooksToWorker(e,"add")):Object(o.c)("不支持的钩子"):Object(o.c)("参数必须是函数")},this.removeHooks=function(e,n){i.c.remove(e,n),t.syncHooksToWorker(e,"remove")},this.execute=function(t,e){i.c.trigger.apply(i.c,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}([t],e))},this.getExecuteFunction=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(i.c.getLength(t)){var r={type:"hooks",payload:{args:e,name:t}};try{var o=JSON.stringify(r);u.default.postMessageToMain(JSON.parse(o))}catch(t){}}}},this.syncHooksToWorker=function(t,e){if(Object(a.a)()){var n={name:t,action:e};s.a.postMessageToWorker({type:"hooks",payload:n})}},this.onReceiveReporter=this.getExecuteFunction("onReceiveReporter"),this.onHanldeParams=this.getExecuteFunction("onHanldeParams"),this.onBeforeCommonReport=this.getExecuteFunction("onBeforeCommonReport"),this.onBeforeMergeReport=this.getExecuteFunction("onBeforeMergeReport"),this.onBeforeReportSend=this.getExecuteFunction("onBeforeReportSend"),this.onReportSenderError=this.getExecuteFunction("onReportSenderError"),this.onReportSenderSuccess=this.getExecuteFunction("onReportSenderSuccess"),this.onReportSenderTimeout=this.getExecuteFunction("onReportSenderTimeout")}},function(t,e,n){"use strict";(function(t){var r=n(3),o=n(9),i=(n(11),n(6)),a=n(1),s=n(0);n.d(e,"b",(function(){return r.a}));var u=n(5);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var f=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},p=function(){},l=Object(u.d)((function(e){var n=e.method,u=void 0===n?"GET":n;e.url.length>2e3&&(u="POST",e.method="POST"),i.a.onBeforeReportSend(e);var l=e.onSucc,h=void 0===l?p:l,d=e.onError,g=void 0===d?p:d,y=e.onTimeout,m=void 0===y?p:y;e.onSucc=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];i.a.onReportSenderSuccess.apply(i.a,f([e],t)),h.apply(void 0,t)},e.onError=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];i.a.onReportSenderError.apply(i.a,f([e],t)),g.apply(void 0,t)},e.onTimeout=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];i.a.onReportSenderTimeout.apply(i.a,f([e],t)),m.apply(void 0,t)};try{t&&t.isNodePlatform?Object(r.a)(e):"object"===("undefined"==typeof wx?"undefined":c(wx))&&wx&&wx.request?Object(r.a)(e):s.b&&s.b.Image&&("get"===u||"GET"===u)?Object(r.a)(e):Object(o.a)(e)}catch(t){Object(a.a)(t)}}));e.a=l}).call(this,n(8))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=n(4);n(15),e.a=function(t){if(t.url){var e=new XMLHttpRequest;if(e){var n=t.method||"POST",o=!1;if(r.a.headRequest&&"GET"===n&&(-1===t.url.indexOf("report.idqqimg.com")&&-1===t.url.indexOf("report.url.cn")||(n="HEAD",o=!0)),e.onerror=function(){t.onError&&t.onError()},e.ontimeout=function(){t.onTimeout&&t.onTimeout()},e.onreadystatechange=function(){if(4===e.readyState){var n=e.status;200===n?function(){if(o)t.onSucc&&t.onSucc();else{var n=e.responseText;try{switch(JSON.parse(n).retcode){case 0:t.onSucc&&t.onSucc();break;case 1:t.onTest&&t.onTest();break;case 6:t.onTimeout&&t.onTimeout();break;default:t.onError&&t.onError(200)}}catch(e){t.onError&&t.onError(200)}}}():function(e){o?t.onError&&t.onError(e):202===e?t.onTest&&t.onTest():500===e?t.onTimeout&&t.onTimeout():t.onError&&t.onError(e)}(n)}},"POST"===n){var i=new FormData;if(t.data)for(var a in t.data)t.data.hasOwnProperty(a)&&i.append(a,t.data[a]);e.open(n,t.url,!0),e.timeout=t.timeout||1e4,e.send(i)}else e.open(n,t.url,!0),e.timeout=t.timeout||1e4,e.send()}}}},function(t,e,n){"use strict";n.r(e);var r,o,i,a=n(2),s=n(4),u=n(0),c=n(5),f=n(3),p=n(1);!function(t){t[t.NO_WORKER=35056324]="NO_WORKER",t[t.NO_INDEDEDDB=35056325]="NO_INDEDEDDB",t[t.WORKER_FAIL=34981047]="WORKER_FAIL",t[t.SDK_LOAD=34980701]="SDK_LOAD",t[t.INDEDEDDB_OPEN_FAIL=34981048]="INDEDEDDB_OPEN_FAIL",t[t.INDEDEDDB_OVER_LIMIT=34981049]="INDEDEDDB_OVER_LIMIT",t[t.INDEDEDDB_OVER_TIME=34986191]="INDEDEDDB_OVER_TIME",t[t.REPORT_NONE=34987578]="REPORT_NONE"}(r||(r={})),function(t){t.INLINE_LOAD_COST="inline-load-cost",t.SDK_LOAD_COST="sdk-load-cost",t.REPORT_TOTAL="report-total",t.REPORT_FAIL="report-fail",t.REPORT_OFFLINE="report-offline",t.REPORT_ONEXIT="report-onexit"}(o||(o={})),function(t){t[t.SUM=1]="SUM",t[t.AVERAGE=2]="AVERAGE"}(i||(i={}));var l=function(){return(l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},h=new(function(){function t(){var t=this;this.projectID=64,this.pageName="sdk-inside",this.dataDBKey="ALLOYREPORT_REPORT_INSIDE",this.getLastInsideDatas=function(){var e=[],n=[],r=window.localStorage&&window.localStorage.getItem(t.dataDBKey);if(r)try{(r=JSON.parse(r))&&(e=r.monitor,n=(n=r.adt).map((function(e){return l({projectid:t.projectID,pagename:t.pageName},e)}))),window.localStorage.removeItem(t.dataDBKey)}catch(t){}return{monitor:e,adt:n}},this.saveInsideDatas=function(){var e,n;if(window&&window.localStorage){var r=window.localStorage.getItem(t.dataDBKey);if(r)try{r=JSON.parse(r)}catch(t){Object(p.a)(t)}else r={};var o=r.monitor,i=void 0===o?[]:o,a=r.adt,s=void 0===a?[]:a;if((e=t.monitorID).push.apply(e,i),(n=t.adtDatas).push.apply(n,s),t.monitorID.length||t.adtDatas.length){var u=JSON.stringify({monitor:t.monitorID,adt:t.adtDatas});window.localStorage.setItem(t.dataDBKey,u),t.monitorID=[],t.adtDatas=[]}}},this.adtDatas=[],this.monitorID=[],this.pointIDValues={},this.isMainHandledExit=!1,this.initEvent(),this.doResourceReport(),this.doReceiveNoneReport()}return t.prototype.monitor=function(t){this.monitorID.push(t)},t.prototype.adt=function(t,e){this.adtDatas.push({pointid:t,pointvalue:e})},t.prototype.adtSum=function(t,e){this.pointIDValues[t]||(this.pointIDValues[t]=[0,0,i.SUM]),this.pointIDValues[t][0]+=e,this.pointIDValues[t][1]+=1},t.prototype.adtAverage=function(t,e){this.pointIDValues[t]||(this.pointIDValues[t]=[0,0,i.AVERAGE]),this.pointIDValues[t][0]+=e,this.pointIDValues[t][1]+=1},t.prototype.mergeIDValuesToAdt=function(){for(var t=Object.keys(this.pointIDValues),e=0;e<t.length;e++){var n=t[e],r=this.pointIDValues[n],o=0;r[2]===i.SUM?o=r[0]:r[2]===i.AVERAGE&&(o=r[0]/r[1]),this.adtDatas.push({pointid:n,pointvalue:o})}},t.prototype.syncDatasToMainThread=function(){this.mergeIDValuesToAdt();var t={monitor:this.monitorID,adt:this.adtDatas};self.postMessage({type:"reportInside",datas:t})},t.prototype.initEvent=function(){var t=this;a.b.on("beforeunload",(function(){t.syncDatasToMainThread()}))},t.prototype.doResourceReport=function(){},t.prototype.doReceiveNoneReport=function(){},t}()),d={},g={},y=!1;a.b.on("beforeunload",(function(){var t=0;for(var e in y=!0,d)d.hasOwnProperty(e)&&(clearTimeout(g[e]),d[e](),t++);h.adtSum(o.REPORT_ONEXIT,t)}));var m,v,b=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},O=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},T=function(){function t(){var t=this;this.databaseName="AlloyReport-DB",this.tableName="AlloyReport-Table",this.expiredTime=Object(u.c)()-s.a.expiredTime,this.tsRangeExpired=IDBKeyRange.upperBound(this.expiredTime,!0),this.tsRangeNotExpired=IDBKeyRange.lowerBound(this.expiredTime,!1),this.statistic={},this.readonly="readonly",this.readwrite="readwrite",this.addDataCache=[],this.overLimitReport=!1,this.dbDataCache={},this.addBatch=function(){return b(t,void 0,void 0,(function(){var t=this;return O(this,(function(e){return b(t,void 0,void 0,(function(){var t,e,n,r,o,i=this;return O(this,(function(s){switch(s.label){case 0:return[4,this.getDB()];case 1:return t=s.sent(),e=t.transaction(this.tableName,this.readwrite),n=e.objectStore(this.tableName),r=this.addDataCache,this.addDataCache=[],o=r.map((function(t){return new Promise((function(e){var r=t.key,o=t.data,a=t.tryTimes,s=o.ts,u=n.add({key:r,data:o,tryTimes:0,ts:s});u.onsuccess=function(t){var n=t.target.result;i.setStatistic(r,n,s,a,o),e(!0)},u.onerror=function(t){Object(p.a)(t),e(!1)}}))})),Promise.all(o).then((function(){2===i.initedStatistic&&a.a.trigger("indexedDBDispatch",i.statistic)})).catch((function(t){Object(p.a)(t)})),[2]}}))})),[2]}))}))},this.handleFailByIDs=function(e,n){return b(t,void 0,void 0,(function(){var t,r,i,s=this;return O(this,(function(c){return(t=this.statistic[e])?(r=[],i=[],Object(u.k)(t,(function(t,o){var a=parseInt(t);if(-1!==n.indexOf(a)){var u=o[0],c=o[1];!c||c<1?(r.push(a),s.setStatistic(e,a,u,1)):(i.push(a),delete s.statistic[e][a])}})),this.query("id",this.readwrite,void 0,null,(function(t,e,n){-1!==i.indexOf(t.id)?e.delete(n.primaryKey):-1!==r.indexOf(t.id)&&e.put({id:t.id,key:t.key,data:t.data,tryTimes:1,ts:t.ts})})).then((function(){setTimeout((function(){a.a.trigger("indexedDBDispatch",s.statistic,e)}),5e3)})),h.adtSum(o.REPORT_FAIL,i.length),[2]):[2]}))}))},this.deleteByIDs=function(e){return b(t,void 0,void 0,(function(){var t,n,r,o,i,a,s,u;return O(this,(function(c){switch(c.label){case 0:for(t=Object.keys(this.statistic),u=0;u<t.length;u++)for(n=t[u],r=0;r<e.length;r++)o=e[r],delete this.statistic[n][o];return[4,this.getDB()];case 1:for(i=c.sent(),a=i.transaction(this.tableName,this.readwrite),s=a.objectStore(this.tableName),u=0;u<e.length;u++)s.delete(e[u]);return[2]}}))}))},this.initIndexedDB(),a.a.on("dispatchSuccessID",this.deleteByIDs),a.a.on("dispatchFailID",this.handleFailByIDs)}return t.prototype.add=function(t){return b(this,void 0,void 0,(function(){return O(this,(function(e){return this.addDataCache.push(t),function(t,e,n,r){if(d[t])return y&&(delete d[t],e()),void(r&&r()&&(delete d[t],e()));clearTimeout(g[t]),d[t]=e,g[t]=setTimeout((function(){delete d[t],e()}),n)}("dbAddBatch",this.addBatch,100),[2]}))}))},t.prototype.queryByIDs=function(t){return b(this,void 0,void 0,(function(){var e,n,r,o;return O(this,(function(i){for(e=[],n=!0,r=0;r<t.length;r++){if(!(o=this.dbDataCache[t[r]])){n=!1;break}e.push(o)}return n?[2,Promise.resolve(e)]:[2,this.query("id",this.readonly,void 0,(function(e){return-1!==t.indexOf(e.id)}))]}))}))},t.prototype.getStatistic=function(){return this.statistic},t.prototype.query=function(t,e,n,r,o){return b(this,void 0,void 0,(function(){var i=this;return O(this,(function(a){return[2,new Promise((function(a,s){return b(i,void 0,void 0,(function(){var i,s,u,c,f;return O(this,(function(l){switch(l.label){case 0:return[4,this.getDB()];case 1:return i=l.sent(),s=i.transaction(this.tableName,e),u=s.objectStore(this.tableName),c=u.index(t).openCursor(n),f=[],c.onsuccess=function(t){var e=c.result;e?(r&&r(e.value),f.push(e.value),o&&o(e.value,u,e),e.continue()):a(f)},c.onerror=function(t){Object(p.a)(t),a(t)},[2]}}))}))}))]}))}))},t.prototype.getDB=function(){return this.cacheGetDBPromise?this.cacheGetDBPromise:this.db?this.db:(this.cacheGetDBPromise=this.initIndexedDB(),this.cacheGetDBPromise)},t.prototype.initIndexedDB=function(){var t=this;return new Promise((function(e){var n=indexedDB.open(t.databaseName);n.onerror=function(t){h.monitor(r.INDEDEDDB_OPEN_FAIL),Object(p.a)("打开 indexdb 失败。",t)},n.onsuccess=function(n){t.db=n.target.result,Object(p.b)("打开 indexdb 成功"),t.initStatistic(),e(t.db)},n.onupgradeneeded=function(e){var n=e.target.result;if(!n.objectStoreNames.contains(t.databaseName)){var r=n.createObjectStore(t.tableName,{keyPath:"id",autoIncrement:!0});r.createIndex("key","key",{unique:!1}),r.createIndex("tryTimes","tryTimes",{unique:!1}),r.createIndex("ts","ts",{unique:!1}),r.createIndex("id","id",{unique:!1})}}}))},t.prototype.setStatistic=function(t,e,n,o,i){this.statistic[t]||(this.statistic[t]={});var a=this.statistic[t];if(a[e]=[n,o],i){this.dbDataCache[e]={id:e,key:t,data:i,tryTimes:o,ts:n};var u=Object.keys(this.dbDataCache);if(u.length>50){u.sort();for(var c=u.slice(0,u.length-50).map((function(t){return parseInt(t)})),f=0;f<c.length;f++)delete this.dbDataCache[c[f]]}}else delete this.dbDataCache[e];var p=Object.keys(a),l=p.length,d=s.a.maxStoreReport;l>d&&(p.sort(),c=p.slice(0,l-d).map((function(t){return parseInt(t)})),this.deleteByIDs(c),this.overLimitReport||(this.overLimitReport=!0,h.monitor(r.INDEDEDDB_OVER_LIMIT)))},t.prototype.initStatistic=function(){var t=this;this.initedStatistic||(this.initedStatistic=1,this.query("ts",this.readonly,this.tsRangeNotExpired,null,(function(e){var n=e.id,r=e.ts,o=e.tryTimes,i=e.key;t.setStatistic(i,n,r,o)})).then((function(){t.initedStatistic=2,a.a.trigger("indexedDBDispatch",t.statistic,null)})).catch((function(){t.initedStatistic=2,a.a.trigger("indexedDBDispatch",t.statistic,null)})),this.deleteExpiredReporter())},t.prototype.deleteExpiredReporter=function(){return b(this,void 0,Promise,(function(){var t,e=this;return O(this,(function(n){return t=0,[2,new Promise((function(n,o){return b(e,void 0,void 0,(function(){var e,o,i,a;return O(this,(function(s){switch(s.label){case 0:return[4,this.getDB()];case 1:return e=s.sent(),o=e.transaction(this.tableName,this.readwrite),i=o.objectStore(this.tableName),(a=i.index("ts").openCursor(this.tsRangeExpired)).onsuccess=function(e){var o=a.result;o?(i.delete(o.primaryKey),o.continue(),t++):(t?(h.monitor(r.INDEDEDDB_OVER_TIME),Object(p.b)("过期上报数据已清除")):Object(p.b)("当前没有过期上报数据"),n())},a.onerror=function(t){Object(p.a)(t),n()},[2]}}))}))}))]}))}))},t}(),D=function(){var t=this;this.MemStore={},this.set=function(e,n){t.MemStore[e]=n},this.get=function(e,n){var r;return(r=t.MemStore[e])||(r=n,n&&t.set(e,r)),r},this.each=function(e){for(var n=t.MemStore,r=Object.keys(n),o=r.length,i=0;i<o;i++)e&&e(n[r[i]])}},w=new(function(){function t(){var t=this;this.isIndexedDB=!1,this.isLocalDB=!1,this.get=function(e,n){return t.isLocalDB?t.constDB.get(e,n):t.db.get(e,n)},this.set=function(e,n){return t.isLocalDB?t.constDB.set(e,n):t.db.set(e,n)},this.add=function(e){var n=t.constDB.add(e);return n.catch((function(t){Object(p.a)(t)})),n},this.queryByIDs=function(e){var n=t.constDB.queryByIDs(e);return n.catch((function(t){Object(p.a)(t)})),n},this.db=new D;try{Object(c.b)()&&Object(c.a)()||this.initConstDB()}catch(t){Object(p.a)(t)}}return t.prototype.initConstDB=function(){u.h?(this.constDB=new T,this.isIndexedDB=!0):u.i&&(this.constDB=new f.a,this.isLocalDB=!0),u.h||h.monitor(r.NO_INDEDEDDB)},t.prototype.getStatistic=function(){return this.constDB.getStatistic()},t}()),R=new(function(){function t(){var t=this;this.status=1,this.isCustom=!1,this.getStatus=function(){return t.isCustom?t.status:u.a&&u.a.navigator?u.a.navigator.onLine:t.status},this.isOffline=function(){return!t.getStatus()},this.setOffline=function(){t.isCustom||(t.isCustom=!0,t.offEvent()),t.offlineListener()},this.setOnline=function(){t.isCustom||(t.isCustom=!0,t.offEvent()),t.onlineListener()},this.offlineListener=function(){Object(c.a)()?t.syncStatusToWorker(0):Object(c.c)()||t.handleOffLine()},this.onlineListener=function(){Object(c.a)()?t.syncStatusToWorker(1):Object(c.c)()||t.handleOnLine()},this.handleOffLine=function(e){e&&e.isCustom&&(t.isCustom=!0),t.status=0},this.handleOnLine=function(e){e&&e.isCustom&&(t.isCustom=!0),t.status||(t.status=1,Object(c.b)()&&Object(c.c)()?a.b.trigger("networkConnect"):Object(c.b)()||a.b.trigger("networkConnect"))},this.initEvent()}return t.prototype.initEvent=function(){u.b&&u.b.addEventListener&&(u.b.addEventListener("online",this.onlineListener),u.b.addEventListener("offline",this.offlineListener)),Object(c.c)()&&(a.b.on("workerOffline",this.handleOffLine),a.b.on("workerOnline",this.handleOnLine))},t.prototype.offEvent=function(){u.b&&u.b.removeEventListener&&(u.b.removeEventListener("online",this.onlineListener),u.b.removeEventListener("offline",this.offlineListener))},t.prototype.syncStatusToWorker=function(t){this.status=t,f.a.postMessageToWorker({type:t?"online":"offline",payload:{isCustom:this.isCustom}},!0)},t}()),S=function(){return(S=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};!function(t){t[t.ALL=1]="ALL",t[t.PART=2]="PART"}(m||(m={})),function(t){t[t.ERROR=-1]="ERROR",t[t.ALL=1]="ALL",t[t.PART=2]="PART"}(v||(v={}));var j,I=function(){function t(){var t=this;this.lastAddToBatchTime={},this.storeConfig=new D,this.dispatchTimeIDs={},this.sentIDs=[],this.count=0,this.dispatchBatch=function(e,n){if(!s.a.supportOffline||R.getStatus()){var r=t.dispatchTimeIDs,o=Object(u.c)();if(n)clearTimeout(r[n]),o-t.lastAddToBatchTime[n]>2e3?(t.dispatchBatchBySourceKey(e,n,m.ALL),t.lastAddToBatchTime[n]=0):t.dispatchBatchBySourceKey(e,n,m.PART)===v.PART&&(r[n]=setTimeout((function(){t.dispatchBatch(w.getStatistic(),n)}),2e3));else for(var i=Object.keys(e),a=0;a<i.length;a++){var c=i[a];t.dispatchBatchBySourceKey(e,c,m.ALL),t.lastAddToBatchTime[c]=0}}else Object(p.b)("网络离线，暂停上报")},a.a.on("indexedDBDispatch",this.dispatchBatch),a.b.on("networkConnect",(function(){Object(p.b)("网络恢复，上报离线数据"),a.a.trigger("indexedDBDispatch",w.getStatistic(),null)}))}return t.prototype.addOne=function(t,e,n){var r=t.sourceKey,o=Object(u.c)();w.add({key:r,data:{ts:o+this.count,param:e,opts:n},tryTimes:0}),this.count++,this.lastAddToBatchTime[r]||(this.lastAddToBatchTime[r]=o)},t.prototype.successItems=function(t,e){var n=e.map((function(t){return t.id})),r=this.sentIDs.filter((function(t){return-1===n.indexOf(t)}));this.sentIDs=r,a.a.trigger("dispatchSuccessID",n)},t.prototype.failItems=function(t,e){var n=t.sourceKey,r=e.map((function(t){return t.id})),o=this.sentIDs.filter((function(t){return-1===r.indexOf(t)}));this.sentIDs=o,s.a.supportOffline&&!R.getStatus()||a.a.trigger("dispatchFailID",n,r)},t.prototype.getConfigBySourceKey=function(t){if(s.a.mergeQueueConfig.sourceKey===t)return s.a.mergeQueueConfig;var e=it.getAdapterBySourceKey(t);return e&&e.configs&&e.configs.queueConfig?e.configs.queueConfig:null},t.prototype.dispatchBatchBySourceKey=function(t,e,n){if(!t[e])return v.ERROR;var r=Object.keys(t[e]).map((function(t){return parseInt(t,10)})),o=(r=this.filterIDsBySent(r)).length;if(o<1)return v.ERROR;var i=this.getConfigBySourceKey(e);if(!i)return v.ERROR;var a=i.maxInBatch||10,s=v.ALL;if(n===m.PART){if(o<a)return v.PART;var u=o%a;s=0===u?v.ALL:v.PART,r.sort(),r=r.slice(0,o-u)}return this.dispatchBatchByIds(r,i,a),s},t.prototype.dispatchBatchByIds=function(t,e,n){var r=e.sourceKey;this.sentIDs=this.sentIDs.concat(t),w.queryByIDs(t).then((function(o){for(var i=[],u=0;u<o.length;u++){var c=o[u],f=c.data,p=c.id;-1!==t.indexOf(p)&&i.push(S(S({},f),{id:p}))}for(u=0;u<i.length;u+=n){var l=i.slice(u,u+n);r===s.a.mergeQueueConfig.sourceKey?a.a.trigger("dispatchMerge",e,l):a.a.trigger("dispatchCommon",e,l)}})).catch((function(t){Object(p.a)(t),Object(p.a)("从数据库取数据错误")}))},t.prototype.filterIDsBySent=function(t){var e=this.sentIDs;return t.filter((function(t){return-1===e.indexOf(t)}))},t}(),_=new(function(){function t(){w.isIndexedDB?this.queueInstance=new I:this.queueInstance=new f.a}return t.prototype.addOne=function(t,e,n){this.queueInstance.addOne(t,e,n),s.a.supportOffline&&!R.getStatus()&&h.adtSum(o.REPORT_OFFLINE,1)},t.prototype.successItems=function(t,e){this.queueInstance.successItems(t,e)},t.prototype.failItems=function(t,e){this.queueInstance.failItems(t,e)},t}()),x=n(7),E=new(function(){function t(){var t=this;this.sendReporter=function(e,n,r){if(0!==n.length){for(var o=[],i="",a=0;a<n.length;a++){var s=n[a],u=s.param,c=s.opts;o.push(u),i=c.name}var f=it.getAdapterByName(i).transToURL(o,n[0].opts);t.sendRequestViaURls(f,(function(){r?_.successItems(r,n):_.successItems(e,n)}),(function(){r?_.failItems(r,n):_.failItems(e,n)}))}},this.initEvent()}return t.prototype.initEvent=function(){a.a.on("dispatchCommon",this.sendReporter),a.a.on("dispatchTryCommon",this.sendReporter)},t.prototype.sendRequestViaURls=function(t,e,n){if(Object(u.f)(t))for(var r=0;r<t.length;r++)Object(x.a)({url:t[r]+"&t="+Object(u.c)(),method:"GET",onSucc:e,onError:n,onTimeout:n});else t&&Object(x.a)({url:t+"&t="+Object(u.c)(),method:"GET",onSucc:e,onError:n,onTimeout:n})},t.prototype.report=function(t,e,n,r){var o=t.getConfigs().queueConfig;if(Object(p.b)("[common-"+n.name+"]",e),r){var i=t.transToURL(e,n);this.sendRequestViaURls(i)}else _.addOne(o,e,n)},t}()),L=new(function(){function t(){this.started=!1,this.LSLastPingTime=0,this.LSErrorFlag=1}return t.prototype.send=function(t){var e=this;Object(x.a)({url:t+"?v=3&t="+ +new Date+"&q=check",onSucc:function(){e.started=!1,clearInterval(e.intervalHandler),e.LSErrorFlag=0},method:"GET"})},t.prototype.start=function(t){var e=this;this.pingURL=t,this.started||(this.started=!0,clearInterval(this.intervalHandler),this.intervalHandler=setInterval((function(){var t=e.LSLastPingTime,n=Object(u.c)();0===t?e.LSLastPingTime=n:n>t+6e4&&(e.LSLastPingTime=n,e.send(e.pingURL))}),6e4))},t.prototype.stop=function(){this.intervalHandler&&(clearInterval(this.intervalHandler),this.intervalHandler=null)},t}()),B=new(function(){function t(){this.LSErrorFlag=0,this.LSTimeDiffDelay=0,this.LSTestModeFlag=0,this.errorFlag={set:this.errorSet,get:this.errorGet,clear:function(){}},this.testModeFlag={set:this.testSet,get:this.testGet,clear:this.testClear},this.timeDiffFlag={set:this.diffSet,get:this.diffGet,clear:function(){}}}return t.prototype.errorSet=function(t){this.LSErrorFlag=1,L.start(t)},t.prototype.errorGet=function(){return 1===this.LSErrorFlag},t.prototype.testGet=function(){var t=+new Date,e=this.LSTestModeFlag;return 0!==e&&t-e<6048e5},t.prototype.testSet=function(){this.LSTestModeFlag=+new Date},t.prototype.testClear=function(){this.LSTestModeFlag=0},t.prototype.diffSet=function(){this.LSTimeDiffDelay=+new Date},t.prototype.diffGet=function(){var t=+new Date,e=this.LSTimeDiffDelay;return!(0===e||t-e>864e5)},t}()),k=n(13),C=n.n(k),M=B.errorFlag,A=B.testModeFlag,P=new(function(){function t(){var t=this;this.sendReporter=function(e,n){s.a.mergeQueueConfig,n.length&&Object(x.a)({onSucc:function(){A.clear(),L.stop(),_.successItems(s.a.mergeQueueConfig,n)},onError:function(e){M.set(s.a.cgiURL),t.dispatchOriginRequest(n),4===e&&Y.commonReport(2394321)},onTimeout:function(){t.dispatchOriginRequest(n),Object(u.c)()-Object(u.c)()<8e3&&Y.commonReport(2589015),M.set(s.a.cgiURL)},onTest:function(){A.set(),_.successItems(s.a.mergeQueueConfig,n)},timeout:1e4,url:s.a.cgiURL,data:t.buildData(n),method:"POST"})},this.initEvent()}return t.prototype.initEvent=function(){a.a.on("dispatchMerge",this.sendReporter)},t.prototype.getAdapterConfigByName=function(t){var e=it.getAdapterByName(t);return e&&e.getConfigs()||{}},t.prototype.buildData=function(t){for(var e=[],n=0;n<t.length;n++)Object(p.b)("[merge-"+t[n].opts.name+"]",t[n].param),e.push({param:t[n].param,opts:t[n].opts});var r=JSON.stringify(e);return e=C.a.compressToBase64(r),e=encodeURIComponent(e),{v:"3",t:+new Date,q:e}},t.prototype.splitItemsBySourceKey=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n],o=it.getAdapterByName(r.opts.name).getSourceKey();e[o]||(e[o]=[]),e[o].push(r)}return e},t.prototype.sendOriginalRequest=function(t){for(var e=0;e<t.length;e++)it.getAdapterByName(t[e].opts.name).commonReport(t[e].param,t[e].opts)},t.prototype.dispatchOriginRequest=function(t){var e=this.splitItemsBySourceKey(t);Object(u.k)(e,(function(t,e){var n=it.getAdapterBySourceKey(t).getConfigs();a.a.trigger("dispatchTryCommon",n,e,s.a.mergeQueueConfig)}))},t.prototype.report=function(t,e,n){var r=t.getConfigs(),o=r.shouldMerge,i=r.reportInTestMode,a=!1;if(o?A.get()?("function"!=typeof o||o(e))&&("function"!=typeof i||i(e))||(a=!0):"function"!=typeof o||o(e)||(a=!0):a=!0,a)E.report(t,e,n,!1);else{var u=s.a.mergeQueueConfig;_.addOne(u,e,n)}},t}()),N=new(function(){function t(){}return t.prototype.report=function(t,e,n){Object(p.b)("[immediate-"+n.name+"]",e);var r=t.transToURL(e,n);if(r){var o=r+"&t="+Object(u.c)();if(!Object(x.b)({url:o})){t.getConfigs().queueConfig;var i=function(){t.report(e,n,!1)};Object(x.a)({url:o,method:"GET",onSucc:function(){},onError:i,onTimeout:i})}}},t}());!function(t){t.HUATUO="huatuo",t.MONITOR="monitor",t.RETCODE="retcode",t.TDBANK="tdbank",t.TDW="tdw",t.COMMON="common"}(j||(j={}));var q=n(6),F=function(){var t=this;this.adapterName=j.COMMON,this.transToURL=function(t,e){return""},this.resetConfig=function(e){t.configs?(Object(u.j)(t.configs,e),t.syncConfigToWorker()):Object(p.a)("找不到此适配器")},this.getConfigs=function(){return t.configs||{}},this.getSourceKey=function(){var e=t.getConfigs();return e.queueConfig&&e.queueConfig.sourceKey||""},this.report=function(e,n,r){void 0===n&&(n={}),void 0===r&&(r=!1),n.name=t.adapterName,Object(c.a)()&&h.adtSum(o.REPORT_TOTAL,1);try{Object(c.a)()&&!r?f.a.postMessageToWorker({type:"api",payload:{data:e,opts:n,isImmediately:r},opts:{reportType:"auto"}}):function(t,e,n,r){t.getConfigs(),r?N.report(t,e,n):s.a.enableMergeReport?P.report(t,e,n):E.report(t,e,n,r)}(t,e,n,r)}catch(t){Object(p.a)(t)}},this.commonReport=function(e,n,r){void 0===n&&(n={}),void 0===r&&(r=!1),n.name=t.adapterName;try{Object(c.a)()?f.a.postMessageToWorker({type:"api",payload:{data:e,opts:n,isImmediately:r},opts:{reportType:"common"}}):(q.a.onBeforeCommonReport(e,n,r),E.report(t,e,n,r))}catch(t){Object(p.a)(t)}},this.mergeReport=function(e,n){void 0===n&&(n={}),n.name=t.adapterName;try{Object(c.a)()?f.a.postMessageToWorker({type:"api",payload:{data:e,opts:n,isImmediately:!1},opts:{reportType:"merge"}}):(q.a.onBeforeMergeReport(e,n),P.report(t,e,n))}catch(t){Object(p.a)(t)}},this.apiRequestToWorker=function(t,e,n){f.a.postMessageToWorker({type:"apiWorker",payload:{data:t,opts:e},opts:{reportType:n}},!0)},this.syncConfigToWorker=function(){if(Object(c.a)()){var e=t.configs,n=e.baseURL,r=e.shouldMerge,o=e.reportInTestMode,i=e.queueConfig,a=e.projectID,s=e.pageName,u=e.secretKey,p={baseURL:n,shouldMerge:"function"==typeof r?r():r,reportInTestMode:"function"==typeof o?o():o,queueConfig:{maxInBatch:i.maxInBatch,maxSize:i.maxSize},projectID:a,pageName:s,secretKey:u};f.a.postMessageToWorker({type:"adapterConfig",payload:p,opts:{adapterName:t.adapterName}})}}},U=new F;function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var W,H,V,G,J,Q=(W=function(t,e){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}W(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),z=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=j.HUATUO,e.configs={baseURL:"https://report.idqqimg.com/node_b/speedreport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"huatuo_queue_v3",pendingKey:"huatuo_pending_v3",maxInBatch:20,maxSize:10}},e.transToURL=function(t,n){var r,o,i=t||[];"object"!==K(t)||Object(u.f)(t)||(i=[t]);var a=[];if(!i.length)return[];for(var s in r=e.exractData(i))r.hasOwnProperty(s)&&(o={flag1:r[s].flag1,flag2:r[s].flag2,flag3:r[s].flag3,apn:n.envInfo.apn,appid:r[s].appid,platform:n.envInfo.platform},Object.assign(o,r[s].timingObj),a.push(e.configs.baseURL+Object(u.m)(o)));return a},e}return Q(e,t),e.prototype.exractData=function(t){var e=t||[],n=null,r="";if(e.length){n={};for(var o=0;o<e.length;o++)n[r=e[o].flag1+"_"+e[o].flag2+"_"+e[o].flag3+e[o].appid]||(n[r]={flag1:e[o].flag1,flag2:e[o].flag2,flag3:e[o].flag3,appid:e[o].appid,timingObj:{}}),n[r].timingObj[e[o].id]=e[o].timing}return n},e}(F)),X=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Y=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=j.MONITOR,e.configs={baseURL:"https://report.idqqimg.com/node_b/monitorreport?monitors=",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"monitor_queue_v3",pendingKey:"monitor_pending_v3",maxInBatch:100,maxSize:10}},e.transToURL=function(t){var n=[];return"number"==typeof t?n.push(t):Object(u.f)(t)&&(n=t),n.length&&e.configs?e.configs.baseURL+"["+n+"]":""},e}return X(e,t),e}(F)),Z=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=j.RETCODE,e.configs={baseURL:"https://report.idqqimg.com/node_b/retcodereport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"retcode_queue_v3",pendingKey:"retcode_pending_v3",maxInBatch:20,maxSize:10}},e.keyList=["domain","cgi","type","code","time","rate","uin","apn","device","signalStrength","expansion1","expansion2","expansion3","data","platform","appid"],e.transToURL=function(t,n){var r,o="",i=[];if(Object(u.f)(t))for(r=0;r<t.length;r++)i.push(e.extractData(t[r],r+1));else i.push(e.extractData(t,1));return i.length>0?(o=e.configs.baseURL+"key="+encodeURIComponent(e.keyList.join(",")),o+="&"+i.join("&")):o},e}return Z(e,t),e.prototype.extractData=function(t,e){for(var n=[],r=0;r<this.keyList.length;r++)n.push(e+"_"+(r+1)+"="+encodeURIComponent(t[this.keyList[r]]));if(n.length>0)return n.join("&")},e}(F)),tt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),et=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=j.TDBANK,e.configs={baseURL:"https://report.idqqimg.com/node_b/tdbankreport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"tdbank_queue_v3",pendingKey:"tdbank_pending_v3",maxInBatch:20,maxSize:10}},e.transToURL=function(t,n){var r,o,i,a=t||[],s=[],c={};if(Object(u.f)(a)){r=a.length;for(var f=0;f<r;f++)c[i=(o=a[f]).tdbank_table&&o.tdbank_busi_id?o.tdbank_table+"|"+o.tdbank_busi_id:o.table_id+"|"+o.busi_id]||(c[i]=[]),c[i].push(o);for(var p in c)c.hasOwnProperty(p)&&s.push(e.getItemURL(c[p],n));return s}return e.getItemURL([a],n)},e}return tt(e,t),e.prototype.getItemURL=function(t,e){var n,r,o,i=[],a=[],s={},c={tdbank_busi_id:!0,tdbank_table:!0,busi_id:!0,table_id:!0};return function(){var e,n,u,f,p=1,l=[];for(e=0;e<t.length;e++)for(u in f=t[e],r=t[e].tdbank_table||t[e].table_id,o=t[e].tdbank_busi_id||t[e].busi_id,f)if(f.hasOwnProperty(u)){if(c[u])continue;if(s[u])continue;s[u]=p++,i.push(u)}for(e=0;e<t.length;e++){for(f=t[e],l=new Array(i.length),n=0;n<i.length;n++)l[n]=void 0===f[i[n]]?"":f[i[n]];a.push(l)}}(),t&&0!==t.length?(n={table_id:r,busi_id:o,fields:JSON.stringify(i),datas:JSON.stringify(a)},n=this.configs.baseURL+Object(u.m)(n)):""},e}(F)),nt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rt=function(){return(rt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ot=new(function(t){function e(){var e=t.call(this)||this;return e.adapterName=j.TDW,e.configs={baseURL:"https://report.idqqimg.com/node_b/tdwreport?",shouldMerge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},reportInTestMode:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},queueConfig:{sourceKey:"tdw_queue_v3",pendingKey:"tdw_pending_v3",maxInBatch:20,maxSize:10}},e.transToURL=function(t,n){var r,o,i=t||[],a=rt({timeField:"t"},n),s=[],c={};if(Object(u.f)(i)){r=i.length;for(var f=0;f<r;f++)c[(o=i[f]).table]||(c[o.table]=[]),c[o.table].push(o);for(var p in c)c.hasOwnProperty(p)&&s.push(e.getItemURL(c[p],p,a));return s}return e.getItemURL([i],i.table,a)},e}return nt(e,t),e.prototype.getItemURL=function(t,e,n){var r,o=[],i=[],a={},s={};return delete t.table,s[n.timeField]=!0,function(){var e,n,r,u,c=1,f=[];for(e=0;e<t.length;e++)for(r in u=t[e])if(u.hasOwnProperty(r)){if(s[r])continue;if(a[r])continue;a[r]=c++,o.push(r)}for(e=0;e<t.length;e++){for(u=t[e],f=new Array(o.length),n=0;n<o.length;n++)f[n]=void 0===u[o[n]]?"":u[o[n]];i.push(f)}}(),t&&0!==t.length?(r={table:e,fields:JSON.stringify(o),datas:JSON.stringify(i),pr_t:n.timeField},r=this.configs.baseURL+Object(u.m)(r)):""},e}(F)),it=new(function(){function t(){}return t.prototype.getAdapterByName=function(t){switch(t){case j.HUATUO:return z;case j.MONITOR:return Y;case j.RETCODE:return $;case j.TDBANK:return et;case j.TDW:return ot;default:return U}},t.prototype.getAdapterBySourceKey=function(t){switch(t){case z.configs.queueConfig.sourceKey:return z;case Y.configs.queueConfig.sourceKey:return Y;case $.configs.queueConfig.sourceKey:return $;case et.configs.queueConfig.sourceKey:return et;case ot.configs.queueConfig.sourceKey:return ot;default:return U}},t}()),at=0;function st(t){var e=Object(u.c)()-V;if(V&&e>H.holdTime||t){if(at>=H.maxReport)return;if(t?Object(p.b)("卡顿上报，主线程超时没有回包，要求回包时间："+H.holdTime+"ms"):Object(p.b)("卡顿上报，worker 通信耗时："+e),at++,H.monitor&&Y.report(H.monitor,{}),H.tdw){var n={};n.table=H.tdw.table,n[H.tdw.key]=e,Object(u.l)(n,H.tdw),ot.report(n,{})}at===H.maxReport&&clearInterval(G)}}var ut=function(t,e){if(e.init)return H=t,void(G=setInterval((function(){V=Object(u.c)(),J=setTimeout((function(){st(!0)}),H.holdTime),ft.postMessageToMain({type:"jank"})}),1e3*H.interval));e.stop?clearInterval(G):(clearTimeout(J),st())},ct=function(){function t(){var t=this;this.worker=self,this.postMessageToMain=function(e){t.worker.postMessage(e)},this.receiveMessageFromMain=function(e){for(var n,r=(n=t.isNativeMP?e:e.data).length,o=0;o<r;o++){var i=n[o];t.handleMessageFromMain(i)}},this.handleMessageFromMain=function(e){var n=e.type,r=e.payload,o=e.opts;switch(n){case"api":t.handleMessageFromAPI(r,o);break;case"config":t.handleMessageFromConfig(r,o);break;case"adapterConfig":t.handleMessageFromAdapterConfig(r,o);break;case"hooks":t.handleMessageFromHooks(r,o);break;case"online":a.b.trigger("workerOnline",r);break;case"offline":a.b.trigger("workerOffline",r);break;case"apiWorker":t.handleMessageFromAPIWorker(r,o);break;default:a.b.trigger(e.type,e)}},this.handleMessageFromAPI=function(t,e){var n=e&&e.reportType||"auto",r=t&&t.opts&&t.opts.name;if(r){var o=it.getAdapterByName(r),i=t.data,a=t.opts,s=t.isImmediately;switch(n){case"auto":o.report(i,a,s);break;case"common":o.commonReport(i,a,s);break;case"merge":o.mergeReport(i,a)}}},this.handleMessageFromHooks=function(t,e){"add"===t.action?q.a.addHooks(t.name,(function(){})):"remove"===t.action&&q.a.removeHooks(t.name,(function(){}))},this.handleMessageFromConfig=function(t,e){s.a.reset(t)},this.handleMessageFromAdapterConfig=function(t,e){var n=e&&e.adapterName;n&&it.getAdapterByName(n).resetConfig(t)},this.handleMessageFromAPIWorker=function(t,e){e&&"jank"===e.reportType&&ut(t.data,t.opts)},this.worker?(this.isNativeMP=Object(u.g)(),this.init()):Object(p.a)("初始化 Worker 出错")}return t.prototype.init=function(){self.onmessage=this.receiveMessageFromMain,self.onmessageerror=function(t){Object(p.a)(t)}},t}(),ft=e.default=new ct},function(t,e){},function(t,e,n){"use strict";var r=n(1),o=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};e.a=function(){var t=this;this.namespaceCache={},this.create=function(e){t.namespaceCache[e]||(t.namespaceCache[e]={});var n=t.namespaceCache[e];return{on:function(e,r){t.on(n,e,r)},trigger:function(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];t.trigger.apply(t,o([n,e],r))},remove:function(e,r){t.remove(n,e,r)},getLength:function(e){return t.getLength(n,e)}}},this.on=function(t,e,n){e&&"function"==typeof n&&(void 0===t[e]&&(t[e]=[]),t[e].push(n))},this.trigger=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(e&&t[e])for(var i=t[e],a=0;a<i.length;a++)try{i[a].apply(i,n)}catch(t){Object(r.a)(t)}},this.remove=function(t,e,n){if(e&&t[e]){for(var r=t[e],o=-1,i=0;i<r.length;i++)r[i]===n&&(o=i);1!==o&&r.splice(o,1)}},this.getLength=function(t,e){return e&&t[e]?t[e].length:0}}},function(t,e,n){var r,o=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function o(t,e){if(!r[t]){r[t]={};for(var n=0;n<t.length;n++)r[t][t.charAt(n)]=n}return r[t][e]}var i={compressToBase64:function(t){if(null==t)return"";var n=i._compress(t,6,(function(t){return e.charAt(t)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:i._decompress(t.length,32,(function(n){return o(e,t.charAt(n))}))},compressToUTF16:function(e){return null==e?"":i._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:i._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){for(var e=i.compress(t),n=new Uint8Array(2*e.length),r=0,o=e.length;r<o;r++){var a=e.charCodeAt(r);n[2*r]=a>>>8,n[2*r+1]=a%256}return n},decompressFromUint8Array:function(e){if(null==e)return i.decompress(e);for(var n=new Array(e.length/2),r=0,o=n.length;r<o;r++)n[r]=256*e[2*r]+e[2*r+1];var a=[];return n.forEach((function(e){a.push(t(e))})),i.decompress(a.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":i._compress(t,6,(function(t){return n.charAt(t)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),i._decompress(t.length,32,(function(e){return o(n,t.charAt(e))})))},compress:function(e){return i._compress(e,16,(function(e){return t(e)}))},_compress:function(t,e,n){if(null==t)return"";var r,o,i,a={},s={},u="",c="",f="",p=2,l=3,h=2,d=[],g=0,y=0;for(i=0;i<t.length;i+=1)if(u=t.charAt(i),Object.prototype.hasOwnProperty.call(a,u)||(a[u]=l++,s[u]=!0),c=f+u,Object.prototype.hasOwnProperty.call(a,c))f=c;else{if(Object.prototype.hasOwnProperty.call(s,f)){if(f.charCodeAt(0)<256){for(r=0;r<h;r++)g<<=1,y==e-1?(y=0,d.push(n(g)),g=0):y++;for(o=f.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&o,y==e-1?(y=0,d.push(n(g)),g=0):y++,o>>=1}else{for(o=1,r=0;r<h;r++)g=g<<1|o,y==e-1?(y=0,d.push(n(g)),g=0):y++,o=0;for(o=f.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&o,y==e-1?(y=0,d.push(n(g)),g=0):y++,o>>=1}0==--p&&(p=Math.pow(2,h),h++),delete s[f]}else for(o=a[f],r=0;r<h;r++)g=g<<1|1&o,y==e-1?(y=0,d.push(n(g)),g=0):y++,o>>=1;0==--p&&(p=Math.pow(2,h),h++),a[c]=l++,f=String(u)}if(""!==f){if(Object.prototype.hasOwnProperty.call(s,f)){if(f.charCodeAt(0)<256){for(r=0;r<h;r++)g<<=1,y==e-1?(y=0,d.push(n(g)),g=0):y++;for(o=f.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&o,y==e-1?(y=0,d.push(n(g)),g=0):y++,o>>=1}else{for(o=1,r=0;r<h;r++)g=g<<1|o,y==e-1?(y=0,d.push(n(g)),g=0):y++,o=0;for(o=f.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&o,y==e-1?(y=0,d.push(n(g)),g=0):y++,o>>=1}0==--p&&(p=Math.pow(2,h),h++),delete s[f]}else for(o=a[f],r=0;r<h;r++)g=g<<1|1&o,y==e-1?(y=0,d.push(n(g)),g=0):y++,o>>=1;0==--p&&(p=Math.pow(2,h),h++)}for(o=2,r=0;r<h;r++)g=g<<1|1&o,y==e-1?(y=0,d.push(n(g)),g=0):y++,o>>=1;for(;;){if(g<<=1,y==e-1){d.push(n(g));break}y++}return d.join("")},decompress:function(t){return null==t?"":""==t?null:i._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(e,n,r){var o,i,a,s,u,c,f,p=[],l=4,h=4,d=3,g="",y=[],m={val:r(0),position:n,index:1};for(o=0;o<3;o+=1)p[o]=o;for(a=0,u=Math.pow(2,2),c=1;c!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*c,c<<=1;switch(a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*c,c<<=1;f=t(a);break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*c,c<<=1;f=t(a);break;case 2:return""}for(p[3]=f,i=f,y.push(f);;){if(m.index>e)return"";for(a=0,u=Math.pow(2,d),c=1;c!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*c,c<<=1;switch(f=a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*c,c<<=1;p[h++]=t(a),f=h-1,l--;break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*c,c<<=1;p[h++]=t(a),f=h-1,l--;break;case 2:return y.join("")}if(0==l&&(l=Math.pow(2,d),d++),p[f])g=p[f];else{if(f!==h)return null;g=i+i.charAt(0)}y.push(g),p[h++]=i+g.charAt(0),i=g,0==--l&&(l=Math.pow(2,d),d++)}}};return i}();void 0===(r=function(){return o}.call(e,n,e,t))||(t.exports=r)},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],f=!1,p=-1;function l(){f&&u&&(f=!1,u.length?c=u.concat(c):p=-1,c.length&&h())}function h(){if(!f){var t=s(l);f=!0;for(var e=c.length;e;){for(u=c,c=[];++p<e;)u&&u[p].run();p=-1,e=c.length}u=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||f||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){(function(t){!function(){var e;function n(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var r="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},o="undefined"!=typeof window&&window===this?this:void 0!==t&&null!=t?t:this;function i(){i=function(){},o.Symbol||(o.Symbol=c)}function a(t,e){this.s=t,r(this,"description",{configurable:!0,writable:!0,value:e})}a.prototype.toString=function(){return this.s};var s,u,c=(s=0,function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new a("jscomp_symbol_"+(e||"")+"_"+s++,e)});function f(){i();var t=o.Symbol.iterator;t||(t=o.Symbol.iterator=o.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[t]&&r(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return function(t){return f(),(t={next:t})[o.Symbol.iterator]=function(){return this},t}(n(this))}}),f=function(){}}function p(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:n(t)}}if("function"==typeof Object.setPrototypeOf)u=Object.setPrototypeOf;else{var l;t:{var h={};try{h.__proto__={v:!0},l=h.v;break t}catch(t){}l=!1}u=l?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var d=u;function g(){this.h=!1,this.c=null,this.o=void 0,this.b=1,this.m=this.w=0,this.g=null}function y(t){if(t.h)throw new TypeError("Generator is already running");t.h=!0}function m(t,e,n){return t.b=n,{value:e}}function v(t){for(var e in this.C=t,this.l=[],t)this.l.push(e);this.l.reverse()}function b(t){this.a=new g,this.D=t}function O(t,e,n,r){try{var o=e.call(t.a.c,n);if(!(o instanceof Object))throw new TypeError("Iterator result "+o+" is not an object");if(!o.done)return t.a.h=!1,o;var i=o.value}catch(e){return t.a.c=null,t.a.j(e),T(t)}return t.a.c=null,r.call(t.a,i),T(t)}function T(t){for(;t.a.b;)try{var e=t.D(t.a);if(e)return t.a.h=!1,{value:e.value,done:!1}}catch(e){t.a.o=void 0,t.a.j(e)}if(t.a.h=!1,t.a.g){if(e=t.a.g,t.a.g=null,e.B)throw e.A;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function D(t){this.next=function(e){return t.i(e)},this.throw=function(e){return t.j(e)},this.return=function(e){return function(t,e){y(t.a);var n=t.a.c;return n?O(t,"return"in n?n.return:function(t){return{value:t,done:!0}},e,t.a.return):(t.a.return(e),T(t))}(t,e)},f(),this[Symbol.iterator]=function(){return this}}function w(t,e){var n=new D(new b(e));return d&&d(n,t.prototype),n}if(g.prototype.i=function(t){this.o=t},g.prototype.j=function(t){this.g={A:t,B:!0},this.b=this.w||this.m},g.prototype.return=function(t){this.g={return:t},this.b=this.m},b.prototype.i=function(t){return y(this.a),this.a.c?O(this,this.a.c.next,t,this.a.i):(this.a.i(t),T(this))},b.prototype.j=function(t){return y(this.a),this.a.c?O(this,this.a.c.throw,t,this.a.i):(this.a.j(t),T(this))},"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var R=function(t,e){for(var n=0;n<t.length;n++)e(t[n])},S=function(t,e,n){return e instanceof Blob?[String(t),e,void 0!==n?n+"":"string"==typeof e.name?e.name:"blob"]:[String(t),String(e)]},j=function(t,e){if(t.length<e)throw new TypeError(e+" argument required, but only "+t.length+" present.")},I=function(t){var e=p(t);return t=e.next().value,e=e.next().value,t instanceof Blob&&(t=new File([t],e,{type:t.type,lastModified:t.lastModified})),t},_="object"==typeof window?window:"object"==typeof self?self:this,x=_.FormData,E=_.XMLHttpRequest&&_.XMLHttpRequest.prototype.send,L=_.Request&&_.fetch,B=_.navigator&&_.navigator.sendBeacon;i();var k=_.Symbol&&Symbol.toStringTag;k&&(Blob.prototype[k]||(Blob.prototype[k]="Blob"),"File"in _&&!File.prototype[k]&&(File.prototype[k]="File"));try{new File([],"")}catch(t){_.File=function(t,e,n){return t=new Blob(t,n),n=n&&void 0!==n.lastModified?new Date(n.lastModified):new Date,Object.defineProperties(t,{name:{value:e},lastModifiedDate:{value:n},lastModified:{value:+n},toString:{value:function(){return"[object File]"}}}),k&&Object.defineProperty(t,k,{value:"File"}),t}}i(),f();var C=function(t){if(this.f=Object.create(null),!t)return this;var e=this;R(t.elements,(function(t){if(t.name&&!t.disabled&&"submit"!==t.type&&"button"!==t.type)if("file"===t.type){var n=t.files&&t.files.length?t.files:[new File([],"",{type:"application/octet-stream"})];R(n,(function(n){e.append(t.name,n)}))}else"select-multiple"===t.type||"select-one"===t.type?R(t.options,(function(n){!n.disabled&&n.selected&&e.append(t.name,n.value)})):"checkbox"===t.type||"radio"===t.type?t.checked&&e.append(t.name,t.value):(n="textarea"===t.type?t.value.replace(/\\r\\n/g,"\\n").replace(/\\n/g,"\\r\\n"):t.value,e.append(t.name,n))}))};if((e=C.prototype).append=function(t,e,n){j(arguments,2);var r=p(S.apply(null,arguments));t=r.next().value,e=r.next().value,n=r.next().value,(r=this.f)[t]||(r[t]=[]),r[t].push([e,n])},e.delete=function(t){j(arguments,1),delete this.f[String(t)]},e.entries=function t(){var e,n,r,o,i,a,s=this;return w(t,(function(t){switch(t.b){case 1:e=s.f,r=new v(e);case 2:var u;t:{for(u=r;0<u.l.length;){var c=u.l.pop();if(c in u.C){u=c;break t}}u=null}if(null==(n=u)){t.b=0;break}o=p(e[n]),i=o.next();case 5:if(i.done){t.b=2;break}return a=i.value,m(t,[n,I(a)],6);case 6:i=o.next(),t.b=5}}))},e.forEach=function(t,e){j(arguments,1);for(var n=p(this),r=n.next();!r.done;r=n.next()){var o=p(r.value);r=o.next().value,o=o.next().value,t.call(e,o,r,this)}},e.get=function(t){j(arguments,1);var e=this.f;return e[t=String(t)]?I(e[t][0]):null},e.getAll=function(t){return j(arguments,1),(this.f[String(t)]||[]).map(I)},e.has=function(t){return j(arguments,1),String(t)in this.f},e.keys=function t(){var e,n,r,o=this;return w(t,(function(t){if(1==t.b&&(e=p(o),n=e.next()),3!=t.b)return n.done?void(t.b=0):(r=n.value,m(t,p(r).next().value,3));n=e.next(),t.b=2}))},e.set=function(t,e,n){j(arguments,2);var r=S.apply(null,arguments);this.f[r[0]]=[[r[1],r[2]]]},e.values=function t(){var e,n,r,o,i=this;return w(t,(function(t){if(1==t.b&&(e=p(i),n=e.next()),3!=t.b)return n.done?void(t.b=0):(r=n.value,(o=p(r)).next(),m(t,o.next().value,3));n=e.next(),t.b=2}))},C.prototype._asNative=function(){for(var t=new x,e=p(this),n=e.next();!n.done;n=e.next()){var r=p(n.value);n=r.next().value,r=r.next().value,t.append(n,r)}return t},C.prototype._blob=function(){for(var t="----formdata-polyfill-"+Math.random(),e=[],n=p(this),r=n.next();!r.done;r=n.next()){var o=p(r.value);r=o.next().value,o=o.next().value,e.push("--"+t+"\\r\\n"),o instanceof Blob?e.push(\'Content-Disposition: form-data; name="\'+r+\'"; filename="\'+o.name+\'"\\r\\n\',"Content-Type: "+(o.type||"application/octet-stream")+"\\r\\n\\r\\n",o,"\\r\\n"):e.push(\'Content-Disposition: form-data; name="\'+r+\'"\\r\\n\\r\\n\'+o+"\\r\\n")}return e.push("--"+t+"--"),new Blob(e,{type:"multipart/form-data; boundary="+t})},C.prototype[Symbol.iterator]=function(){return this.entries()},C.prototype.toString=function(){return"[object FormData]"},k&&(C.prototype[k]="FormData"),E){var M=_.XMLHttpRequest.prototype.setRequestHeader;_.XMLHttpRequest.prototype.setRequestHeader=function(t,e){M.call(this,t,e),"content-type"===t.toLowerCase()&&(this.u=!0)},_.XMLHttpRequest.prototype.send=function(t){t instanceof C?(t=t._blob(),this.u||this.setRequestHeader("Content-Type",t.type),E.call(this,t)):E.call(this,t)}}if(L){var A=_.fetch;_.fetch=function(t,e){return e&&e.body&&e.body instanceof C&&(e.body=e.body._blob()),A.call(this,t,e)}}B&&(_.navigator.sendBeacon=function(t,e){return e instanceof C&&(e=e._asNative()),B.call(this,t,e)}),_.FormData=C}}()}).call(this,n(8))}])}]);',n.p+"bd5db89f7ab5ff7f1d13.worker.js")}},function(t,e,n){"use strict";n.r(e);var r=n(21);e.default=r.a},function(t,e,n){(function(t){!function(){if(t&&t.process&&t.process.argv&&t.process.argv.length){var e=t.process.argv,n=e&&e[0]&&e[0].toLocaleLowerCase&&e[0].toLocaleLowerCase();n&&-1!==n.indexOf("node")&&(t.isNodePlatform=!0,t.window=null)}}()}).call(this,n(12))},function(t,e){"function"!=typeof Object.assign&&(Object.assign=function(t){"use strict";if(!t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t})},function(t,e){},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],f=!1,p=-1;function l(){f&&u&&(f=!1,u.length?c=u.concat(c):p=-1,c.length&&h())}function h(){if(!f){var t=s(l);f=!0;for(var e=c.length;e;){for(u=c,c=[];++p<e;)u&&u[p].run();p=-1,e=c.length}u=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||f||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";var r=window.URL||window.webkitURL;t.exports=function(t,e){try{try{var n;try{(n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),n=n.getBlob()}catch(e){n=new Blob([t])}return new Worker(r.createObjectURL(n))}catch(e){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(t){if(!e)throw Error("Inline worker is not supported");return new Worker(e)}}},function(t,e,n){(function(t){!function(){var e;function n(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var r="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},o="undefined"!=typeof window&&window===this?this:void 0!==t&&null!=t?t:this;function i(){i=function(){},o.Symbol||(o.Symbol=c)}function a(t,e){this.s=t,r(this,"description",{configurable:!0,writable:!0,value:e})}a.prototype.toString=function(){return this.s};var s,u,c=(s=0,function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new a("jscomp_symbol_"+(e||"")+"_"+s++,e)});function f(){i();var t=o.Symbol.iterator;t||(t=o.Symbol.iterator=o.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[t]&&r(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return function(t){return f(),(t={next:t})[o.Symbol.iterator]=function(){return this},t}(n(this))}}),f=function(){}}function p(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:n(t)}}if("function"==typeof Object.setPrototypeOf)u=Object.setPrototypeOf;else{var l;t:{var h={};try{h.__proto__={v:!0},l=h.v;break t}catch(t){}l=!1}u=l?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var d=u;function g(){this.h=!1,this.c=null,this.o=void 0,this.b=1,this.m=this.w=0,this.g=null}function m(t){if(t.h)throw new TypeError("Generator is already running");t.h=!0}function y(t,e,n){return t.b=n,{value:e}}function b(t){for(var e in this.C=t,this.l=[],t)this.l.push(e);this.l.reverse()}function v(t){this.a=new g,this.D=t}function O(t,e,n,r){try{var o=e.call(t.a.c,n);if(!(o instanceof Object))throw new TypeError("Iterator result "+o+" is not an object");if(!o.done)return t.a.h=!1,o;var i=o.value}catch(e){return t.a.c=null,t.a.j(e),w(t)}return t.a.c=null,r.call(t.a,i),w(t)}function w(t){for(;t.a.b;)try{var e=t.D(t.a);if(e)return t.a.h=!1,{value:e.value,done:!1}}catch(e){t.a.o=void 0,t.a.j(e)}if(t.a.h=!1,t.a.g){if(e=t.a.g,t.a.g=null,e.B)throw e.A;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function T(t){this.next=function(e){return t.i(e)},this.throw=function(e){return t.j(e)},this.return=function(e){return function(t,e){m(t.a);var n=t.a.c;return n?O(t,"return"in n?n.return:function(t){return{value:t,done:!0}},e,t.a.return):(t.a.return(e),w(t))}(t,e)},f(),this[Symbol.iterator]=function(){return this}}function R(t,e){var n=new T(new v(e));return d&&d(n,t.prototype),n}if(g.prototype.i=function(t){this.o=t},g.prototype.j=function(t){this.g={A:t,B:!0},this.b=this.w||this.m},g.prototype.return=function(t){this.g={return:t},this.b=this.m},v.prototype.i=function(t){return m(this.a),this.a.c?O(this,this.a.c.next,t,this.a.i):(this.a.i(t),w(this))},v.prototype.j=function(t){return m(this.a),this.a.c?O(this,this.a.c.throw,t,this.a.i):(this.a.j(t),w(this))},"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var S=function(t,e){for(var n=0;n<t.length;n++)e(t[n])},D=function(t,e,n){return e instanceof Blob?[String(t),e,void 0!==n?n+"":"string"==typeof e.name?e.name:"blob"]:[String(t),String(e)]},j=function(t,e){if(t.length<e)throw new TypeError(e+" argument required, but only "+t.length+" present.")},I=function(t){var e=p(t);return t=e.next().value,e=e.next().value,t instanceof Blob&&(t=new File([t],e,{type:t.type,lastModified:t.lastModified})),t},_="object"==typeof window?window:"object"==typeof self?self:this,x=_.FormData,E=_.XMLHttpRequest&&_.XMLHttpRequest.prototype.send,C=_.Request&&_.fetch,k=_.navigator&&_.navigator.sendBeacon;i();var B=_.Symbol&&Symbol.toStringTag;B&&(Blob.prototype[B]||(Blob.prototype[B]="Blob"),"File"in _&&!File.prototype[B]&&(File.prototype[B]="File"));try{new File([],"")}catch(t){_.File=function(t,e,n){return t=new Blob(t,n),n=n&&void 0!==n.lastModified?new Date(n.lastModified):new Date,Object.defineProperties(t,{name:{value:e},lastModifiedDate:{value:n},lastModified:{value:+n},toString:{value:function(){return"[object File]"}}}),B&&Object.defineProperty(t,B,{value:"File"}),t}}i(),f();var L=function(t){if(this.f=Object.create(null),!t)return this;var e=this;S(t.elements,(function(t){if(t.name&&!t.disabled&&"submit"!==t.type&&"button"!==t.type)if("file"===t.type){var n=t.files&&t.files.length?t.files:[new File([],"",{type:"application/octet-stream"})];S(n,(function(n){e.append(t.name,n)}))}else"select-multiple"===t.type||"select-one"===t.type?S(t.options,(function(n){!n.disabled&&n.selected&&e.append(t.name,n.value)})):"checkbox"===t.type||"radio"===t.type?t.checked&&e.append(t.name,t.value):(n="textarea"===t.type?t.value.replace(/\r\n/g,"\n").replace(/\n/g,"\r\n"):t.value,e.append(t.name,n))}))};if((e=L.prototype).append=function(t,e,n){j(arguments,2);var r=p(D.apply(null,arguments));t=r.next().value,e=r.next().value,n=r.next().value,(r=this.f)[t]||(r[t]=[]),r[t].push([e,n])},e.delete=function(t){j(arguments,1),delete this.f[String(t)]},e.entries=function t(){var e,n,r,o,i,a,s=this;return R(t,(function(t){switch(t.b){case 1:e=s.f,r=new b(e);case 2:var u;t:{for(u=r;0<u.l.length;){var c=u.l.pop();if(c in u.C){u=c;break t}}u=null}if(null==(n=u)){t.b=0;break}o=p(e[n]),i=o.next();case 5:if(i.done){t.b=2;break}return a=i.value,y(t,[n,I(a)],6);case 6:i=o.next(),t.b=5}}))},e.forEach=function(t,e){j(arguments,1);for(var n=p(this),r=n.next();!r.done;r=n.next()){var o=p(r.value);r=o.next().value,o=o.next().value,t.call(e,o,r,this)}},e.get=function(t){j(arguments,1);var e=this.f;return e[t=String(t)]?I(e[t][0]):null},e.getAll=function(t){return j(arguments,1),(this.f[String(t)]||[]).map(I)},e.has=function(t){return j(arguments,1),String(t)in this.f},e.keys=function t(){var e,n,r,o,i=this;return R(t,(function(t){if(1==t.b&&(e=p(i),n=e.next()),3!=t.b)return n.done?void(t.b=0):(r=n.value,o=p(r),y(t,o.next().value,3));n=e.next(),t.b=2}))},e.set=function(t,e,n){j(arguments,2);var r=D.apply(null,arguments);this.f[r[0]]=[[r[1],r[2]]]},e.values=function t(){var e,n,r,o,i=this;return R(t,(function(t){if(1==t.b&&(e=p(i),n=e.next()),3!=t.b)return n.done?void(t.b=0):(r=n.value,(o=p(r)).next(),y(t,o.next().value,3));n=e.next(),t.b=2}))},L.prototype._asNative=function(){for(var t=new x,e=p(this),n=e.next();!n.done;n=e.next()){var r=p(n.value);n=r.next().value,r=r.next().value,t.append(n,r)}return t},L.prototype._blob=function(){for(var t="----formdata-polyfill-"+Math.random(),e=[],n=p(this),r=n.next();!r.done;r=n.next()){var o=p(r.value);r=o.next().value,o=o.next().value,e.push("--"+t+"\r\n"),o instanceof Blob?e.push('Content-Disposition: form-data; name="'+r+'"; filename="'+o.name+'"\r\n',"Content-Type: "+(o.type||"application/octet-stream")+"\r\n\r\n",o,"\r\n"):e.push('Content-Disposition: form-data; name="'+r+'"\r\n\r\n'+o+"\r\n")}return e.push("--"+t+"--"),new Blob(e,{type:"multipart/form-data; boundary="+t})},L.prototype[Symbol.iterator]=function(){return this.entries()},L.prototype.toString=function(){return"[object FormData]"},B&&(L.prototype[B]="FormData"),E){var M=_.XMLHttpRequest.prototype.setRequestHeader;_.XMLHttpRequest.prototype.setRequestHeader=function(t,e){M.call(this,t,e),"content-type"===t.toLowerCase()&&(this.u=!0)},_.XMLHttpRequest.prototype.send=function(t){t instanceof L?(t=t._blob(),this.u||this.setRequestHeader("Content-Type",t.type),E.call(this,t)):E.call(this,t)}}if(C){var P=_.fetch;_.fetch=function(t,e){return e&&e.body&&e.body instanceof L&&(e.body=e.body._blob()),P.call(this,t,e)}}k&&(_.navigator.sendBeacon=function(t,e){return e instanceof L&&(e=e._asNative()),k.call(this,t,e)}),_.FormData=L}}()}).call(this,n(12))}])}));